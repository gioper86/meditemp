/**
* plotly.js v1.11.0
* Copyright 2012-2016, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/(function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.Plotly=e()}})(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){"use strict";var r=e("../src/plotly"),i={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var s in i){var o=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.Lib.addStyleRule(o,i[s])}},{"../src/plotly":400}],2:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150}}},{}],3:[function(e,t,n){t.exports=e("../src/traces/bar")},{"../src/traces/bar":478}],4:[function(e,t,n){t.exports=e("../src/traces/box")},{"../src/traces/box":489}],5:[function(e,t,n){t.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":498}],6:[function(e,t,n){t.exports=e("../src/traces/contour")},{"../src/traces/contour":505}],7:[function(e,t,n){t.exports=e("../src/core")},{"../src/core":370}],8:[function(e,t,n){t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":517}],9:[function(e,t,n){t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":528}],10:[function(e,t,n){t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":533}],11:[function(e,t,n){t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":537}],12:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./pie"),e("./contour"),e("./scatter3d"),e("./surface"),e("./mesh3d"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./scatterternary")]),t.exports=r},{"./bar":3,"./box":4,"./choropleth":5,"./contour":6,"./core":7,"./heatmap":8,"./histogram":9,"./histogram2d":10,"./histogram2dcontour":11,"./mesh3d":13,"./pie":14,"./scatter3d":15,"./scattergeo":16,"./scattergl":17,"./scatterternary":18,"./surface":19}],13:[function(e,t,n){t.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":541}],14:[function(e,t,n){t.exports=e("../src/traces/pie")},{"../src/traces/pie":547}],15:[function(e,t,n){t.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":581}],16:[function(e,t,n){t.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":585}],17:[function(e,t,n){t.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":590}],18:[function(e,t,n){t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":595}],19:[function(e,t,n){t.exports=e("../src/traces/surface")},{"../src/traces/surface":604}],20:[function(e,t,n){"use strict";function s(e,t,n){return Math.min(t,Math.max(e,n))}function o(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-Infinity,this.bounds[1][r]=Infinity;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}function a(e){var t=new Array(e);for(var n=0;n<e;++n)t[n]=0;return t}function f(e,t,n){switch(arguments.length){case 0:return new o([0],[0],0);case 1:if(typeof e=="number"){var r=a(e);return new o(r,r,0)}return new o(e,a(e.length),0);case 2:if(typeof t=="number"){var r=a(e.length);return new o(e,r,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new o(e,t,n)}}t.exports=f;var r=e("cubic-hermite"),i=e("binary-search-bounds"),u=o.prototype;u.flush=function(e){var t=i.gt(this._time,e)-1;if(t<=0)return;this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension)},u.curve=function(e){var t=this._time,n=t.length,o=i.le(t,e),u=this._scratch[0],a=this._state,f=this._velocity,l=this.dimension,c=this.bounds;if(o<0){var h=l-1;for(var p=0;p<l;++p,--h)u[p]=a[h]}else if(o>=n-1){var h=a.length-1,d=e-t[n-1];for(var p=0;p<l;++p,--h)u[p]=a[h]+d*f[h]}else{var h=l*(o+1)-1,v=t[o],m=t[o+1],g=m-v||1,y=this._scratch[1],b=this._scratch[2],w=this._scratch[3],E=this._scratch[4],S=!0;for(var p=0;p<l;++p,--h)y[p]=a[h],w[p]=f[h]*g,b[p]=a[h+l],E[p]=f[h+l]*g,S=S&&y[p]===b[p]&&w[p]===E[p]&&w[p]===0;if(S)for(var p=0;p<l;++p)u[p]=y[p];else r(y,w,b,E,(e-v)/g,u)}var x=c[0],T=c[1];for(var p=0;p<l;++p)u[p]=s(x[p],T[p],u[p]);return u},u.dcurve=function(e){var t=this._time,n=t.length,s=i.le(t,e),o=this._scratch[0],u=this._state,a=this._velocity,f=this.dimension;if(s>=n-1){var l=u.length-1,c=e-t[n-1];for(var h=0;h<f;++h,--l)o[h]=a[l]}else{var l=f*(s+1)-1,p=t[s],d=t[s+1],v=d-p||1,m=this._scratch[1],g=this._scratch[2],y=this._scratch[3],b=this._scratch[4],w=!0;for(var h=0;h<f;++h,--l)m[h]=u[l],y[h]=a[l]*v,g[h]=u[l+f],b[h]=a[l+f]*v,w=w&&m[h]===g[h]&&y[h]===b[h]&&y[h]===0;if(w)for(var h=0;h<f;++h)o[h]=0;else{r.derivative(m,y,g,b,(e-p)/v,o);for(var h=0;h<f;++h)o[h]/=v}}return o},u.lastT=function(){var e=this._time;return e[e.length-1]},u.stable=function(){var e=this._velocity,t=e.length;for(var n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},u.jump=function(e){var t=this.lastT(),n=this.dimension;if(e<t||arguments.length!==n+1)return;var r=this._state,i=this._velocity,o=r.length-this.dimension,u=this.bounds,a=u[0],f=u[1];this._time.push(t,e);for(var l=0;l<2;++l)for(var c=0;c<n;++c)r.push(r[o++]),i.push(0);this._time.push(e);for(var c=n;c>0;--c)r.push(s(a[c-1],f[c-1],arguments[c])),i.push(0)},u.push=function(e){var t=this.lastT(),n=this.dimension;if(e<t||arguments.length!==n+1)return;var r=this._state,i=this._velocity,o=r.length-this.dimension,u=e-t,a=this.bounds,f=a[0],l=a[1],c=u>1e-6?1/u:0;this._time.push(e);for(var h=n;h>0;--h){var p=s(f[h-1],l[h-1],arguments[h]);r.push(p),i.push((p-r[o++])*c)}},u.set=function(e){var t=this.dimension;if(e<this.lastT()||arguments.length!==t+1)return;var n=this._state,r=this._velocity,i=this.bounds,o=i[0],u=i[1];this._time.push(e);for(var a=t;a>0;--a)n.push(s(o[a-1],u[a-1],arguments[a])),r.push(0)},u.move=function(e){var t=this.lastT(),n=this.dimension;if(e<=t||arguments.length!==n+1)return;var r=this._state,i=this._velocity,o=r.length-this.dimension,u=this.bounds,a=u[0],f=u[1],l=e-t,c=l>1e-6?1/l:0;this._time.push(e);for(var h=n;h>0;--h){var p=arguments[h];r.push(s(a[h-1],f[h-1],r[o++]+p)),i.push(p*c)}},u.idle=function(e){var t=this.lastT();if(e<t)return;var n=this.dimension,r=this._state,i=this._velocity,o=r.length-n,u=this.bounds,a=u[0],f=u[1],l=e-t;this._time.push(e);for(var c=n-1;c>=0;--c)r.push(s(a[c],f[c],r[o]+l*i[o])),i.push(0),o+=1}},{"binary-search-bounds":21,"cubic-hermite":22}],21:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){var o=["function ",e,"(a,l,h,",r.join(","),"){",s?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return s?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),n?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),s?o.push("return -1};"):o.push("return i};"),o.join("")}function i(e,t,n,i){var s=new Function([r("A","x"+e+"y",t,["y"],!1,i),r("B","x"+e+"y",t,["y"],!0,i),r("P","c(x,y)"+e+"0",t,["y","c"],!1,i),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""));return s()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],22:[function(e,t,n){"use strict";function r(e,t,n,r,i,s){var o=6*i*i-6*i,u=3*i*i-4*i+1,a=-6*i*i+6*i,f=3*i*i-2*i;if(e.length){s||(s=new Array(e.length));for(var l=e.length-1;l>=0;--l)s[l]=o*e[l]+u*t[l]+a*n[l]+f*r[l];return s}return o*e+u*t+a*n[l]+f*r}function i(e,t,n,r,i,s){var o=i-1,u=i*i,a=o*o,f=(1+2*i)*a,l=i*a,c=u*(3-2*i),h=u*o;if(e.length){s||(s=new Array(e.length));for(var p=e.length-1;p>=0;--p)s[p]=f*e[p]+l*t[p]+c*n[p]+h*r[p];return s}return f*e+l*t+c*n+h*r}t.exports=i,t.exports.derivative=r},{}],23:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e}t.exports=r},{}],24:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],25:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],26:[function(e,t,n){function r(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e}t.exports=r},{}],27:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}t.exports=r},{}],28:[function(e,t,n){"use strict";function d(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-Infinity,Infinity]}function g(e){e=e||{};var t=e.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(t)}var r=e("binary-search-bounds"),i=e("mat4-interpolate"),s=e("gl-mat4/invert"),o=e("gl-mat4/rotateX"),u=e("gl-mat4/rotateY"),a=e("gl-mat4/rotateZ"),f=e("gl-mat4/lookAt"),l=e("gl-mat4/translate"),c=e("gl-mat4/scale"),h=e("gl-vec3/normalize"),p=[0,0,0];t.exports=g;var v=d.prototype;v.recalcMatrix=function(e){var t=this._time,n=r.le(t,e),o=this.computedMatrix;if(n<0)return;var u=this._components;if(n===t.length-1){var a=16*n;for(var f=0;f<16;++f)o[f]=u[a++]}else{var l=t[n+1]-t[n],a=16*n,c=this.prevMatrix,p=!0;for(var f=0;f<16;++f)c[f]=u[a++];var d=this.nextMatrix;for(var f=0;f<16;++f)d[f]=u[a++],p=p&&c[f]===d[f];if(l<1e-6||p)for(var f=0;f<16;++f)o[f]=c[f];else i(o,c,d,(e-t[n])/l)}var v=this.computedUp;v[0]=o[1],v[1]=o[5],v[2]=o[6],h(v,v);var m=this.computedInverse;s(m,o);var g=this.computedEye,y=m[15];g[0]=m[12]/y,g[1]=m[13]/y,g[2]=m[14]/y;var b=this.computedCenter,w=Math.exp(this.computedRadius[0]);for(var f=0;f<3;++f)b[f]=g[f]-o[2+4*f]*w},v.idle=function(e){if(e<this.lastT())return;var t=this._components,n=t.length-16;for(var r=0;r<16;++r)t.push(t[n++]);this._time.push(e)},v.flush=function(e){var t=r.gt(this._time,e)-2;if(t<0)return;this._time.slice(0,t),this._components.slice(0,16*t)},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||p,r=r||this.computedUp,this.setMatrix(e,f(this.computedMatrix,t,n,r));var i=0;for(var s=0;s<3;++s)i+=Math.pow(n[s]-t[s],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},v.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedInverse;t&&u(i,i,t),n&&o(i,i,n),r&&a(i,i,r),this.setMatrix(e,s(this.computedMatrix,i))};var m=[0,0,0];v.pan=function(e,t,n,r){m[0]=-(t||0),m[1]=-(n||0),m[2]=-(r||0),this.recalcMatrix(e);var i=this.computedInverse;l(i,i,m),this.setMatrix(e,s(i,i))},v.translate=function(e,t,n,r){m[0]=t||0,m[1]=n||0,m[2]=r||0,this.recalcMatrix(e);var i=this.computedMatrix;l(i,i,m),this.setMatrix(e,i)},v.setMatrix=function(e,t){if(e<this.lastT())return;this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])},v.setDistance=function(e,t){this.computedRadius[0]=t},v.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},v.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":29,"gl-mat4/invert":96,"gl-mat4/lookAt":97,"gl-mat4/rotateX":101,"gl-mat4/rotateY":102,"gl-mat4/rotateZ":103,"gl-mat4/scale":104,"gl-mat4/translate":105,"gl-vec3/normalize":27,"mat4-interpolate":30}],29:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],30:[function(e,t,n){function c(e,t,n,c){if(o(t)===0||o(n)===0)return!1;var h=s(t,a.translate,a.scale,a.skew,a.perspective,a.quaternion),p=s(n,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!h||!p?!1:(r(l.translate,a.translate,f.translate,c),r(l.skew,a.skew,f.skew,c),r(l.scale,a.scale,f.scale,c),r(l.perspective,a.perspective,f.perspective,c),u(l.quaternion,a.quaternion,f.quaternion,c),i(e,l.translate,l.scale,l.skew,l.perspective,l.quaternion),!0)}function h(){return{translate:p(),scale:p(1),skew:p(),perspective:d(),quaternion:d()}}function p(e){return[e||0,e||0,e||0]}function d(){return[0,0,0,1]}var r=e("gl-vec3/lerp"),i=e("mat4-recompose"),s=e("mat4-decompose"),o=e("gl-mat4/determinant"),u=e("quat-slerp"),a=h(),f=h(),l=h();t.exports=c},{"gl-mat4/determinant":92,"gl-vec3/lerp":26,"mat4-decompose":31,"mat4-recompose":33,"quat-slerp":34}],31:[function(e,t,n){function v(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}function m(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function g(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var r=e("./normalize"),i=e("gl-mat4/create"),s=e("gl-mat4/clone"),o=e("gl-mat4/determinant"),u=e("gl-mat4/invert"),a=e("gl-mat4/transpose"),f={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},l=i(),c=i(),h=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];t.exports=function(t,n,i,y,b,w){n||(n=[0,0,0]),i||(i=[0,0,0]),y||(y=[0,0,0]),b||(b=[0,0,0,1]),w||(w=[0,0,0,1]);if(!r(l,t))return!1;s(c,l),c[3]=0,c[7]=0,c[11]=0,c[15]=1;if(Math.abs(o(c)<1e-8))return!1;var E=l[3],S=l[7],x=l[11],T=l[12],N=l[13],C=l[14],k=l[15];if(E!==0||S!==0||x!==0){h[0]=E,h[1]=S,h[2]=x,h[3]=k;var L=u(c,c);if(!L)return!1;a(c,c),v(b,h,c)}else b[0]=b[1]=b[2]=0,b[3]=1;n[0]=T,n[1]=N,n[2]=C,m(p,l),i[0]=f.length(p[0]),f.normalize(p[0],p[0]),y[0]=f.dot(p[0],p[1]),g(p[1],p[1],p[0],1,-y[0]),i[1]=f.length(p[1]),f.normalize(p[1],p[1]),y[0]/=i[1],y[1]=f.dot(p[0],p[2]),g(p[2],p[2],p[0],1,-y[1]),y[2]=f.dot(p[1],p[2]),g(p[2],p[2],p[1],1,-y[2]),i[2]=f.length(p[2]),f.normalize(p[2],p[2]),y[1]/=i[2],y[2]/=i[2],f.cross(d,p[1],p[2]);if(f.dot(p[0],d)<0)for(var A=0;A<3;A++)i[A]*=-1,p[A][0]*=-1,p[A][1]*=-1,p[A][2]*=-1;return w[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),w[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),w[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),w[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(w[0]=-w[0]),p[0][2]>p[2][0]&&(w[1]=-w[1]),p[1][0]>p[0][1]&&(w[2]=-w[2]),!0}},{"./normalize":32,"gl-mat4/clone":90,"gl-mat4/create":91,"gl-mat4/determinant":92,"gl-mat4/invert":96,"gl-mat4/transpose":106,"gl-vec3/cross":23,"gl-vec3/dot":24,"gl-vec3/length":25,"gl-vec3/normalize":27}],32:[function(e,t,n){t.exports=function(t,n){var r=n[15];if(r===0)return!1;var i=1/r;for(var s=0;s<16;s++)t[s]=n[s]*i;return!0}},{}],33:[function(e,t,n){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},i=r.create(),s=r.create();t.exports=function(t,n,i,o,u,a){return r.identity(t),r.fromRotationTranslation(t,a,n),t[3]=u[0],t[7]=u[1],t[11]=u[2],t[15]=u[3],r.identity(s),o[2]!==0&&(s[9]=o[2],r.multiply(t,t,s)),o[1]!==0&&(s[9]=0,s[8]=o[1],r.multiply(t,t,s)),o[0]!==0&&(s[8]=0,s[4]=o[0],r.multiply(t,t,s)),r.scale(t,t,i),t}},{"gl-mat4/create":91,"gl-mat4/fromRotationTranslation":94,"gl-mat4/identity":95,"gl-mat4/multiply":98,"gl-mat4/scale":104,"gl-mat4/translate":105}],34:[function(e,t,n){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":35}],35:[function(e,t,n){function r(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=n[0],f=n[1],l=n[2],c=n[3],h,p,d,v,m;return p=i*a+s*f+o*l+u*c,p<0&&(p=-p,a=-a,f=-f,l=-l,c=-c),1-p>1e-6?(h=Math.acos(p),d=Math.sin(h),v=Math.sin((1-r)*h)/d,m=Math.sin(r*h)/d):(v=1-r,m=r),e[0]=v*i+m*a,e[1]=v*s+m*f,e[2]=v*o+m*l,e[3]=v*u+m*c,e}t.exports=r},{}],36:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,o,u,a,f){var l=t+s+f;if(c>0){var c=Math.sqrt(l+1);e[0]=.5*(o-a)/c,e[1]=.5*(u-r)/c,e[2]=.5*(n-s)/c,e[3]=.5*c}else{var h=Math.max(t,s,f),c=Math.sqrt(2*h-l+1);t>=h?(e[0]=.5*c,e[1]=.5*(i+n)/c,e[2]=.5*(u+r)/c,e[3]=.5*(o-a)/c):s>=h?(e[0]=.5*(n+i)/c,e[1]=.5*c,e[2]=.5*(a+o)/c,e[3]=.5*(u-r)/c):(e[0]=.5*(r+u)/c,e[1]=.5*(o+a)/c,e[2]=.5*c,e[3]=.5*(n-i)/c)}return e}t.exports=r},{}],37:[function(e,t,n){"use strict";function a(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function f(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function l(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=f(n,r,i,s);o>1e-6?(e[0]=n/o,e[1]=r/o,e[2]=i/o,e[3]=s/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function c(e,t,n){this.radius=r([n]),this.center=r(t),this.rotation=r(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function p(e){e=e||{};var t=e.center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),n=[].slice.call(n,0,4),l(n,n);var i=new c(n,t,Math.log(r));return i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up),i}t.exports=p;var r=e("filtered-vector"),i=e("gl-mat4/lookAt"),s=e("gl-mat4/fromQuat"),o=e("gl-mat4/invert"),u=e("./lib/quatFromFrame"),h=c.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;l(t,t);var n=this.computedMatrix;s(n,t);var r=this.computedCenter,i=this.computedEye,o=this.computedUp,u=Math.exp(this.computedRadius[0]);i[0]=r[0]+u*n[2],i[1]=r[1]+u*n[6],i[2]=r[2]+u*n[10],o[0]=n[1],o[1]=n[5],o[2]=n[9];for(var a=0;a<3;++a){var f=0;for(var c=0;c<3;++c)f+=n[a+4*c]*i[c];n[12+a]=-f}},h.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n},h.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},h.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},h.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,s=i[1],o=i[5],u=i[9],f=a(s,o,u);s/=f,o/=f,u/=f;var l=i[0],c=i[4],h=i[8],p=l*s+c*o+h*u;l-=s*p,c-=o*p,h-=u*p;var d=a(l,c,h);l/=d,c/=d,h/=d;var v=i[2],m=i[6],g=i[10],y=v*s+m*o+g*u,b=v*l+m*c+g*h;v-=y*s+b*l,m-=y*o+b*c,g-=y*u+b*h;var w=a(v,m,g);v/=w,m/=w,g/=w;var E=l*t+s*n,S=c*t+o*n,x=h*t+u*n;this.center.move(e,E,S,x);var T=Math.exp(this.computedRadius[0]);T=Math.max(1e-4,T+r),this.radius.set(e,Math.log(T))},h.rotate=function(e,t,n,r){this.recalcMatrix(e),t=t||0,n=n||0;var i=this.computedMatrix,s=i[0],o=i[4],u=i[8],l=i[1],c=i[5],h=i[9],p=i[2],d=i[6],v=i[10],m=t*s+n*l,g=t*o+n*c,y=t*u+n*h,b=-(d*y-v*g),w=-(v*m-p*y),E=-(p*g-d*m),S=Math.sqrt(Math.max(0,1-Math.pow(b,2)-Math.pow(w,2)-Math.pow(E,2))),x=f(b,w,E,S);x>1e-6?(b/=x,w/=x,E/=x,S/=x):(b=w=E=0,S=1);var T=this.computedRotation,N=T[0],C=T[1],k=T[2],L=T[3],A=N*S+L*b+C*E-k*w,O=C*S+L*w+k*b-N*E,M=k*S+L*E+N*w-C*b,_=L*S-N*b-C*w-k*E;if(r){b=p,w=d,E=v;var D=Math.sin(r)/a(b,w,E);b*=D,w*=D,E*=D,S=Math.cos(t),A=A*S+_*b+O*E-M*w,O=O*S+_*w+M*b-A*E,M=M*S+_*E+A*w-O*b,_=_*S-A*b-O*w-M*E}var P=f(A,O,M,_);P>1e-6?(A/=P,O/=P,M/=P,_/=P):(A=O=M=0,_=1),this.rotation.set(e,A,O,M,_)},h.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var s=this.computedMatrix;i(s,t,n,r);var o=this.computedRotation;u(o,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),l(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);var a=0;for(var f=0;f<3;++f)a+=Math.pow(n[f]-t[f],2);this.radius.set(e,.5*Math.log(Math.max(a,1e-6))),this.center.set(e,n[0],n[1],n[2])},h.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},h.setMatrix=function(e,t){var n=this.computedRotation;u(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),l(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;o(r,t);var i=r[15];if(Math.abs(i)>1e-6){var s=r[12]/i,a=r[13]/i,f=r[14]/i;this.recalcMatrix(e);var c=Math.exp(this.computedRadius[0]);this.center.set(e,s-r[2]*c,a-r[6]*c,f-r[10]*c),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},h.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},h.setDistanceLimits=function(e,t){e>0?e=Math.log(e):e=-Infinity,t>0?t=Math.log(t):t=Infinity,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},h.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=
e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":36,"filtered-vector":20,"gl-mat4/fromQuat":93,"gl-mat4/invert":96,"gl-mat4/lookAt":97}],38:[function(e,t,n){"use strict";function f(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function l(e){return Math.min(1,Math.max(-1,e))}function c(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),i=[0,0,0];t>Math.max(n,r)?i[2]=1:n>Math.max(t,r)?i[0]=1:i[1]=1;var s=0,o=0;for(var a=0;a<3;++a)s+=e[a]*e[a],o+=i[a]*e[a];for(var a=0;a<3;++a)i[a]-=o/s*e[a];return u(i,i),i}function h(e,t,n,i,s,o,u,a){this.center=r(n),this.up=r(i),this.right=r(s),this.radius=r([o]),this.angle=r([u,a]),this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var f=0;f<16;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}function v(e){e=e||{};var t=e.center||[0,0,0],n=e.up||[0,1,0],r=e.right||c(n),i=e.radius||1,s=e.theta||0,l=e.phi||0;t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),u(n,n),r=[].slice.call(r,0,3),u(r,r);if("eye"in e){var p=e.eye,d=[p[0]-t[0],p[1]-t[1],p[2]-t[2]];o(r,d,n),f(r[0],r[1],r[2])<1e-6?r=c(n):u(r,r),i=f(d[0],d[1],d[2]);var v=a(n,d)/i,m=a(r,d)/i;l=Math.acos(v),s=Math.acos(m)}return i=Math.log(i),new h(e.zoomMin,e.zoomMax,t,n,r,i,s,l)}t.exports=v;var r=e("filtered-vector"),i=e("gl-mat4/invert"),s=e("gl-mat4/rotate"),o=e("gl-vec3/cross"),u=e("gl-vec3/normalize"),a=e("gl-vec3/dot"),p=h.prototype;p.setDistanceLimits=function(e,t){e>0?e=Math.log(e):e=-Infinity,t>0?t=Math.log(t):t=Infinity,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},p.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},p.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);var t=this.computedUp,n=this.computedRight,r=0,i=0;for(var s=0;s<3;++s)i+=t[s]*n[s],r+=t[s]*t[s];var a=Math.sqrt(r),l=0;for(var s=0;s<3;++s)n[s]-=t[s]*i/r,l+=n[s]*n[s],t[s]/=a;var c=Math.sqrt(l);for(var s=0;s<3;++s)n[s]/=c;var h=this.computedToward;o(h,t,n),u(h,h);var p=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],v=this.computedAngle[1],m=Math.cos(d),g=Math.sin(d),y=Math.cos(v),b=Math.sin(v),w=this.computedCenter,E=m*y,S=g*y,x=b,T=-m*b,N=-g*b,C=y,k=this.computedEye,L=this.computedMatrix;for(var s=0;s<3;++s){var A=E*n[s]+S*h[s]+x*t[s];L[4*s+1]=T*n[s]+N*h[s]+C*t[s],L[4*s+2]=A,L[4*s+3]=0}var O=L[1],M=L[5],_=L[9],D=L[2],P=L[6],H=L[10],B=M*H-_*P,j=_*D-O*H,F=O*P-M*D,I=f(B,j,F);B/=I,j/=I,F/=I,L[0]=B,L[4]=j,L[8]=F;for(var s=0;s<3;++s)k[s]=w[s]+L[2+4*s]*p;for(var s=0;s<3;++s){var l=0;for(var q=0;q<3;++q)l+=L[s+4*q]*k[q];L[12+s]=-l}L[15]=1},p.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n};var d=[0,0,0];p.rotate=function(e,t,n,r){this.angle.move(e,t,n);if(r){this.recalcMatrix(e);var i=this.computedMatrix;d[0]=i[2],d[1]=i[6],d[2]=i[10];var o=this.computedUp,u=this.computedRight,a=this.computedToward;for(var f=0;f<3;++f)i[4*f]=o[f],i[4*f+1]=u[f],i[4*f+2]=a[f];s(i,i,r,d);for(var f=0;f<3;++f)o[f]=i[4*f],u[f]=i[4*f+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,u[0],u[1],u[2])}},p.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,s=Math.exp(this.computedRadius[0]),o=i[1],u=i[5],a=i[9],l=f(o,u,a);o/=l,u/=l,a/=l;var c=i[0],h=i[4],p=i[8],d=c*o+h*u+p*a;c-=o*d,h-=u*d,p-=a*d;var v=f(c,h,p);c/=v,h/=v,p/=v;var m=c*t+o*n,g=h*t+u*n,y=p*t+a*n;this.center.move(e,m,g,y);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+r),this.radius.set(e,Math.log(b))},p.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},p.setMatrix=function(e,t,n,r){var s=1;typeof n=="number"&&(s=n|0);if(s<0||s>3)s=1;var o=(s+2)%3,u=(s+1)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var a=t[s],c=t[s+4],h=t[s+8];if(!r){var p=f(a,c,h);a/=p,c/=p,h/=p}else{var d=Math.abs(a),v=Math.abs(c),m=Math.abs(h),g=Math.max(d,v,m);d===g?(a=a<0?-1:1,c=h=0):m===g?(h=h<0?-1:1,a=c=0):(c=c<0?-1:1,a=h=0)}var y=t[o],b=t[o+4],w=t[o+8],E=y*a+b*c+w*h;y-=a*E,b-=c*E,w-=h*E;var S=f(y,b,w);y/=S,b/=S,w/=S;var x=c*w-h*b,T=h*y-a*w,N=a*b-c*y,C=f(x,T,N);x/=C,T/=C,N/=C,this.center.jump(e,X,V,$),this.radius.idle(e),this.up.jump(e,a,c,h),this.right.jump(e,y,b,w);var k,L;if(s===2){var A=t[1],O=t[5],M=t[9],_=A*y+O*b+M*w,D=A*x+O*T+M*N;j<0?k=-Math.PI/2:k=Math.PI/2,L=Math.atan2(D,_)}else{var P=t[2],H=t[6],B=t[10],j=P*a+H*c+B*h,F=P*y+H*b+B*w,I=P*x+H*T+B*N;k=Math.asin(l(j)),L=Math.atan2(I,F)}this.angle.jump(e,L,k),this.recalcMatrix(e);var q=t[2],R=t[6],U=t[10],z=this.computedMatrix;i(z,t);var W=z[15],X=z[12]/W,V=z[13]/W,$=z[14]/W,J=Math.exp(this.computedRadius[0]);this.center.jump(e,X-q*J,V-R*J,$-U*J)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},p.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},p.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},p.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter,r=r||this.computedUp;var i=r[0],s=r[1],o=r[2],u=f(i,s,o);if(u<1e-6)return;i/=u,s/=u,o/=u;var a=t[0]-n[0],c=t[1]-n[1],h=t[2]-n[2],p=f(a,c,h);if(p<1e-6)return;a/=p,c/=p,h/=p;var d=this.computedRight,v=d[0],m=d[1],g=d[2],y=i*v+s*m+o*g;v-=y*i,m-=y*s,g-=y*o;var b=f(v,m,g);if(b<.01){v=s*h-o*c,m=o*a-i*h,g=i*c-s*a,b=f(v,m,g);if(b<1e-6)return}v/=b,m/=b,g/=b,this.up.set(e,i,s,o),this.right.set(e,v,m,g),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(p));var w=s*g-o*m,E=o*v-i*g,S=i*m-s*v,x=f(w,E,S);w/=x,E/=x,S/=x;var T=i*a+s*c+o*h,N=v*a+m*c+g*h,C=w*a+E*c+S*h,k=Math.asin(l(T)),L=Math.atan2(C,N),A=this.angle._state,O=A[A.length-1],M=A[A.length-2];O%=2*Math.PI;var _=Math.abs(O+2*Math.PI-L),D=Math.abs(O-L),P=Math.abs(O-2*Math.PI-L);_<D&&(O+=2*Math.PI),P<D&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,M),this.angle.set(e,L,k)}},{"filtered-vector":20,"gl-mat4/invert":96,"gl-mat4/rotate":100,"gl-vec3/cross":23,"gl-vec3/dot":24,"gl-vec3/normalize":27}],39:[function(e,t,n){"use strict";function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function f(e){e=e||{};var t=e.eye||[0,0,1],n=e.center||[0,0,0],u=e.up||[0,1,0],a=e.distanceLimits||[0,Infinity],f=e.mode||"turntable",l=r(),c=i(),h=s();return l.setDistanceLimits(a[0],a[1]),l.lookAt(0,t,n,u),c.setDistanceLimits(a[0],a[1]),c.lookAt(0,t,n,u),h.setDistanceLimits(a[0],a[1]),h.lookAt(0,t,n,u),new o({turntable:l,orbit:c,matrix:h},f)}t.exports=f;var r=e("turntable-camera-controller"),i=e("orbit-camera-controller"),s=e("matrix-camera-controller"),u=o.prototype,a=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];a.forEach(function(e){var t=e[0],n=[];for(var r=0;r<e[1];++r)n.push("a"+r);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+n.join()+")}";u[t]=Function.apply(null,n.concat(i))}),u.recalcMatrix=function(e){this._active.recalcMatrix(e)},u.getDistance=function(e){return this._active.getDistance(e)},u.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},u.lastT=function(){return this._active.lastT()},u.setMode=function(e){if(e===this._mode)return;var t=this._controllerNames.indexOf(e);if(t<0)return;var n=this._active,r=this._controllerList[t],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius},u.getMode=function(){return this._mode}},{"matrix-camera-controller":28,"orbit-camera-controller":37,"turntable-camera-controller":38}],40:[function(e,t,n){function s(e,t){return i(r(e,t))}t.exports=s;var r=e("alpha-complex"),i=e("simplicial-complex-boundary")},{"alpha-complex":41,"simplicial-complex-boundary":44}],41:[function(e,t,n){"use strict";function s(e,t){return r(t).filter(function(n){var r=new Array(n.length);for(var s=0;s<n.length;++s)r[s]=t[n[s]];return i(r)*e<1})}t.exports=s;var r=e("delaunay-triangulate"),i=e("circumradius")},{circumradius:42,"delaunay-triangulate":73}],42:[function(e,t,n){function i(e){var t=r(e),n=0;for(var i=0;i<e.length;++i){var s=e[i];for(var o=0;o<t.length;++o)n+=Math.pow(s[o]-t[o],2)}return Math.sqrt(n/e.length)}t.exports=i;var r=e("circumcenter")},{circumcenter:43}],43:[function(e,t,n){"use strict";function s(e,t){var n=0,r=e.length;for(var i=0;i<r;++i)n+=e[i]*t[i];return n}function o(e){var t=e.length;if(t===0)return[];var n=e[0].length,o=r([e.length+1,e.length+1],1),u=r([e.length+1],1);o[t][t]=0;for(var a=0;a<t;++a){for(var f=0;f<=a;++f)o[f][a]=o[a][f]=2*s(e[a],e[f]);u[a]=s(e[a],e[a])}var l=i(o,u),c=0,h=l[t+1];for(var a=0;a<h.length;++a)c+=h[a];var p=new Array(t);for(var a=0;a<t;++a){var h=l[a],d=0;for(var f=0;f<h.length;++f)d+=h[f];p[a]=d/c}return p}function u(e){if(e.length===0)return[];var t=e[0].length,n=r([t]),i=o(e);for(var s=0;s<e.length;++s)for(var u=0;u<t;++u)n[u]+=e[s][u]*i[s];return n}var r=e("dup"),i=e("robust-linear-solve");u.barycenetric=o,t.exports=u},{dup:74,"robust-linear-solve":215}],44:[function(e,t,n){"use strict";function s(e){return i(r(e))}t.exports=s;var r=e("boundary-cells"),i=e("reduce-simplicial-complex")},{"boundary-cells":45,"reduce-simplicial-complex":48}],45:[function(e,t,n){"use strict";function r(e){var t=e.length,n=0;for(var r=0;r<t;++r)n+=e[r].length;var i=new Array(n),s=0;for(var r=0;r<t;++r){var o=e[r],u=o.length;for(var a=0;a<u;++a){var f=i[s++]=new Array(u-1);for(var l=1;l<u;++l)f[l-1]=o[(a+l)%u]}}return i}t.exports=r},{}],46:[function(e,t,n){"use strict";function r(e){var t=1;for(var n=1;n<e.length;++n)for(var r=0;r<n;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}t.exports=r},{}],47:[function(e,t,n){"use strict";function s(e,t){return r(e,t)||i(e)-i(t)}var r=e("compare-cell"),i=e("cell-orientation");t.exports=s},{"cell-orientation":46,"compare-cell":60}],48:[function(e,t,n){"use strict";function o(e){e.sort(i);var t=e.length,n=0;for(var o=0;o<t;++o){var u=e[o],a=s(u);if(a===0)continue;if(n>0){var f=e[n-1];if(r(u,f)===0&&s(f)!==a){n-=1;continue}}e[n++]=u}return e.length=n,e}var r=e("compare-cell"),i=e("compare-oriented-cell"),s=e("cell-orientation");t.exports=o},{"cell-orientation":46,"compare-cell":60,"compare-oriented-cell":47}],49:[function(e,t,n){"use strict";var r=function(){function r(e){return!Array.isArray(e)&&e!==null&&typeof e=="object"}function i(e,t,n){var r=(t-e)/Math.max(n-1,1),i=[];for(var s=0;s<n;s++)i.push(e+s*r);return i}function s(){var e=[].slice.call(arguments),t=e.map(function(e){return e.length}),n=Math.min.apply(null,t),r=[];for(var i=0;i<n;i++){r[i]=[];for(var s=0;s<e.length;++s)r[i][s]=e[s][i]}return r}function o(e,t,n){var r=Math.min.apply(null,[e.length,t.length,n.length]),i=[];for(var s=0;s<r;s++)i.push([e[s],t[s],n[s]]);return i}function u(e){function n(e){for(var r=0;r<e.length;r++)Array.isArray(e[r])?n(e[r],t):t+=e[r]}var t=0;return n(e,t),t}function a(e){var t=[];for(var n=0;n<e.length;++n){t[n]=[];for(var r=0;r<e[n].length;++r)t[n][r]=e[n][r]}return t}function f(e){var t=[];for(var n=0;n<e.length;++n)t[n]=e[n];return t}function l(e,t){if(e.length!==t.length)return!1;for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}function c(e,r){var i,s;if(typeof e!="string")return e;i=[],e[0]==="#"?(e=e.substr(1),e.length===3&&(e+=e),s=parseInt(e,16),i[0]=s>>16&255,i[1]=s>>8&255,i[2]=s&255):t.test(e)&&(s=e.match(n),i[0]=parseInt(s[1]),i[1]=parseInt(s[2]),i[2]=parseInt(s[3]));if(!r)for(var o=0;o<3;++o)i[o]=i[o]/255;return i}function h(e,r){var i,s;if(typeof e!="string")return e;i=[],e[0]==="#"?(e=e.substr(1),e.length===3&&(e+=e),s=parseInt(e,16),i[0]=s>>16&255,i[1]=s>>8&255,i[2]=s&255):t.test(e)&&(s=e.match(n),i[0]=parseInt(s[1]),i[1]=parseInt(s[2]),i[2]=parseInt(s[3]),s[4]?i[3]=parseFloat(s[4]):i[3]=1);if(!r)for(var o=0;o<3;++o)i[o]=i[o]/255;return i}var e={},t=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,n=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return e.isPlainObject=r,e.linspace=i,e.zip3=o,e.sum=u,e.zip=s,e.isEqual=l,e.copy2D=a,e.copy1D=f,e.str2RgbArray=c,e.str2RgbaArray=h,e};t.exports=r()},{}],50:[function(e,t,n){"use strict";"use restrict";function i(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}var r=32;n.INT_BITS=r,n.INT_MAX=2147483647,n.INT_MIN=-1<<r-1,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>r-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1)&&!!e},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24},n.countTrailingZeros=i,n.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var s=new Array(256);(function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=n&1,--i;e[t]=r<<i&255}})(s),n.reverse=function(e){return s[e&255]<<24|s[e>>>8&255]<<16|s[e>>>16&255]<<8|s[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>i(e)+1}},{}],51:[function(e,t,n){(function(t){"use strict";function u(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.foo()===42&&typeof e.subarray=="function"&&e.subarray(1,1).byteLength===0}catch(t){return!1}}function a(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(e){return this instanceof f?(f.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=undefined),typeof e=="number"?l(this,e):typeof e=="string"?c(this,e,arguments.length>1?arguments[1]:"utf8"):h(this,e)):arguments.length>1?new f(e,arguments[1]):new f(e)}function l(e,t){e=b(e,t<0?0:w(t)|0);if(!f.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}function c(e,t,n){if(typeof n!="string"||n==="")n="utf8";var r=S(t,n)|0;return e=b(e,r),e.write(t,n),e}function h(e,t){if(f.isBuffer(t))return p(e,t);if(s(t))return d(e,t);if(t==null)throw new TypeError("must start with number, buffer, array or string");if(typeof ArrayBuffer!="undefined"){if(t.buffer instanceof ArrayBuffer)return v(e,t);if(t instanceof ArrayBuffer)return m(e,t)}return t.length?g(e,t):y(e,t)}function p(e,t){var n=w(t.length)|0;return e=b(e,n),t.copy(e,0,0,n),e}function d(e,t){var n=w(t.length)|0;e=b(e,n);for(var r=0;r<n;r+=1)e[r]=t[r]&255;return e}function v(e,t){var n=w(t.length)|0;e=b(e,n);for(var r=0;r<n;r+=1)e[r]=t[r]&255;return e}function m(e,t){return t.byteLength,f.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=f.prototype):e=v(e,new Uint8Array(t)),e}function g(e,t){var n=w(t.length)|0;e=b(e,n);for(var r=0;r<n;r+=1)e[r]=t[r]&255;return e}function y(e,t){var n,r=0;t.type==="Buffer"&&s(t.data)&&(n=t.data,r=w(n.length)|0),e=b(e,r);for(var i=0;i<r;i+=1)e[i]=n[i]&255;return e}function b(e,t){f.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=f.prototype):e.length=t;var n=t!==0&&t<=f.poolSize>>>1;return n&&(e.parent=o),e}function w(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return e|0}function E(e,t){if(this instanceof E){var n=new f(e,t);return delete n.parent,n}return new E(e,t)}function S(e,t){typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;var r=!1;for(;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function x(e,t,n){var r=!1;t|=0,n=n===undefined||n===Infinity?this.length:n|0,e||(e="utf8"),t<0&&(t=0),n>this.length&&(n=this.length);if(n<=t)return"";for(;;)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return P(this,t,n);case"binary":return H(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function T(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var s=t.length;if(s%2!==0)throw new Error("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;o++){var u=parseInt(t.substr(o*2,2),16);if(isNaN(u))throw new Error("Invalid hex string");e[n+o]=u}return o}function N(e,t,n,r){return Z(K(t,e.length-n),e,n,r)}function C(e,t,n,r){return Z(Q(t),e,n,r)}function k(e,t,n,r){return C(e,t,n,r)}function L(e,t,n,r){return Z(Y(t),e,n,r)}function A(e,t,n,r){return Z(G(t,e.length-n),e,n,r)}function O(e,t,n){return t===0&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);var r=[],i=t;while(i<n){var s=e[i],o=null,u=s>239?4:s>223?3:s>191?2:1;if(i+u<=n){var a,f,l,c;switch(u){case 1:s<128&&(o=s);break;case 2:a=e[i+1],(a&192)===128&&(c=(s&31)<<6|a&63,c>127&&(o=c));break;case 3:a=e[i+1],f=e[i+2],(a&192)===128&&(f&192)===128&&(c=(s&15)<<12|(a&63)<<6|f&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:a=e[i+1],f=e[i+2],l=e[i+3],(a&192)===128&&(f&192)===128&&(l&192)===128&&(c=(s&15)<<18|(a&63)<<12|(f&63)<<6|l&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),i+=u}return D(r)}function D(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var n="",r=0;while(r<t)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]&127);return r}function H(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function B(e,t,n){var r=e.length;if(!t||t<0)t=0;if(!n||n<0||n>r)n=r;var i="";for(var s=t;s<n;s++)i+=J(e[s]);return i}function j(e,t,n){var r=e.slice(t,n),i="";for(var s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+r[s+1]*256);return i}function F(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,s){if(!f.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||t<s)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function q(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>(r?i:1-i)*8}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;i++)e[n+i]=t>>>(r?i:3-i)*8&255}function U(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function z(e,t,n,r,s){return s||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),i.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,s){return s||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),i.write(e,t,n,r,52,8),n+8}function V(e){e=$(e).replace(X,"");if(e.length<2)return"";while(e.length%4!==0)e+="=";return e}function $(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||Infinity;var n,r=e.length,i=null,s=[];for(var o=0;o<r;o++){n=e.charCodeAt(o);if(n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);i=null;if(n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}}return s}function Q(e){var t=[];for(var n=0;n<e.length;n++)t.push(e.charCodeAt(n)&255);return t}function G(e,t){var n,r,i,s=[];for(var o=0;o<e.length;o++){if((t-=2)<0)break;n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r)}return s}function Y(e){return r.toByteArray(V(e))}function Z(e,t,n,r){for(var i=0;i<r;i++){if(i+n>=t.length||i>=e.length)break;t[i+n]=e[i]}return i}var r=e("base64-js"),i=e("ieee754"),s=e("isarray");n.Buffer=f,n.SlowBuffer=E,n.INSPECT_MAX_BYTES=50,f.poolSize=8192;var o={};f.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==undefined?t.TYPED_ARRAY_SUPPORT:u(),f._augment=function(e){return e.__proto__=f.prototype,e},f.TYPED_ARRAY_SUPPORT?(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})):(f.prototype.length=undefined,f.prototype.parent=undefined),f.isBuffer=function(t){return t!=null&&!!t._isBuffer},f.compare=function(t,n){if(!f.isBuffer(t)||!f.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;var r=t.length,i=n.length,s=0,o=Math.min(r,i);while(s<o){if(t[s]!==n[s])break;++s}return s!==o&&(r=t[s],i=n[s]),r<i?-1:i<r?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,n){if(!s(t))throw new TypeError("list argument must be an Array of Buffers.");if(t.length===0)return new f(0);var r;if(n===undefined){n=0;for(r=0;r<t.length;r++)n+=t[r].length}var i=new f(n),o=0;for(r=0;r<t.length;r++){var u=t[r];u.copy(i,o),o+=u.length}return i},f.byteLength=S,f.prototype._isBuffer=!0,f.prototype.toString=function et(){var e=this.length|0;return e===0?"":arguments.length===0?M(this,0,e):x.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:f.compare(this,t)===0},f.prototype.inspect=function(){var t="",r=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:f.compare(this,t)},f.prototype.indexOf=function(t,n){function r(e,t,n){var r=-1;for(var i=0;n+i<e.length;i++)if(e[n+i]===t[r===-1?0:i-r]){r===-1&&(r=i);if(i-r+1===t.length)return n+r}else r=-1;return-1}n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n>>=0;if(this.length===0)return-1;if(n>=this.length)return-1;n<0&&(n=Math.max(this.length+n,0));if(typeof t=="string")return t.length===0?-1:String.prototype.indexOf.call(this,t,n);if(f.isBuffer(t))return r(this,t,n);if(typeof t=="number")return f.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"?Uint8Array.prototype.indexOf.call(this,t,n):r(this,[t],n);throw new TypeError("val must be string, number or Buffer")},f.prototype.write=function(t,n,r,i){if(n===undefined)i="utf8",r=this.length,n=0;else if(r===undefined&&typeof n=="string")i=n,r=this.length,n=0;else if(isFinite(n))n|=0,isFinite(r)?(r|=0,i===undefined&&(i="utf8")):(i=r,r=undefined);else{var s=i;i=n,n=r|0,r=s}var o=this.length-n;if(r===undefined||r>o)r=o;if(t.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");var u=!1;for(;;)switch(i){case"hex":return T(this,t,n,r);case"utf8":case"utf-8":return N(this,t,n,r);case"ascii":return C(this,t,n,r);case"binary":return k(this,t,n,r);case"base64":return L(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n,r);default:if(u)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;f.prototype.slice=function(t,n){var r=this.length;t=~~t,n=n===undefined?r:~~n,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<t&&(n=t);var i;if(f.TYPED_ARRAY_SUPPORT)i=this.subarray(t,n),i.__proto__=f.prototype;else{var s=n-t;i=new f(s,undefined);for(var o=0;o<s;o++)i[o]=this[o+t]}return i.length&&(i.parent=this.parent||this),i},f.prototype.readUIntLE=function(t,n,r){t|=0,n|=0,r||F(t,n,this.length);var i=this[t],s=1,o=0;while(++o<n&&(s*=256))i+=this[t+o]*s;return i},f.prototype.readUIntBE=function(t,n,r){t|=0,n|=0,r||F(t,n,this.length);var i=this[t+ --n],s=1;while(n>0&&(s*=256))i+=this[t+ --n]*s;return i},f.prototype.readUInt8=function(t,n){return n||F(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,n){return n||F(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,n){return n||F(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,n){return n||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},f.prototype.readUInt32BE=function(t,n){return n||F(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,n,r){t|=0,n|=0,r||F(t,n,this.length);var i=this[t],s=1,o=0;while(++o<n&&(s*=256))i+=this[t+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*n)),i},f.prototype.readIntBE=function(t,n,r){t|=0,n|=0,r||F(t,n,this.length);var i=n,s=1,o=this[t+ --i];while(i>0&&(s*=256))o+=this[t+ --i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*n)),o},f.prototype.readInt8=function(t,n){return n||F(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},f.prototype.readInt16LE=function(t,n){n||F(t,2,this.length);var r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r},f.prototype.readInt16BE=function(t,n){n||F(t,2,this.length);var r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r},f.prototype.readInt32LE=function(t,n){return n||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,n){return n||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,n){return n||F(t,4,this.length),i.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,n){return n||F(t,4,this.length),i.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,n){return n||F(t,8,this.length),i.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,n){return n||F(t,8,this.length),i.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,n,r,i){t=+t,n|=0,r|=0,i||I(this,t,n,r,Math.pow(2,8*r),0);var s=1,o=0;this[n]=t&255;while(++o<r&&(s*=256))this[n+o]=t/s&255;return n+r},f.prototype.writeUIntBE=function(t,n,r,i){t=+t,n|=0,r|=0,i||I(this,t,n,r,Math.pow(2,8*r),0);var s=r-1,o=1;this[n+s]=t&255;while(--s>=0&&(o*=256))this[n+s]=t/o&255;return n+r},f.prototype.writeUInt8=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t&255,n+1},f.prototype.writeUInt16LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):q(this,t,n,!0),n+2},f.prototype.writeUInt16BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):q(this,t,n,!1),n+2},f.prototype.writeUInt32LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255):R(this,t,n,!0),n+4},f.prototype.writeUInt32BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):R(this,t,n,!1),n+4},f.prototype.writeIntLE=function(t,n,r,i){t=+t,n|=0;if(!i){var s=Math.pow(2,8*r-1);I(this,t,n,r,s-1,-s)}var o=0,u=1,a=t<0?1:0;this[n]=t&255;while(++o<r&&(u*=256))this[n+o]=(t/u>>0)-a&255;return n+r},f.prototype.writeIntBE=function(t,n,r,i){t=+t,n|=0;if(!i){var s=Math.pow(2,8*r-1);I(this,t,n,r,s-1,-s)}var o=r-1,u=1,a=t<0?1:0;this[n+o]=t&255;while(--o>=0&&(u*=256))this[n+o]=(t/u>>0)-a&255;return n+r},f.prototype.writeInt8=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=t&255,n+1},f.prototype.writeInt16LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):q(this,t,n,!0),n+2},f.prototype.writeInt16BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):q(this,t,n,!1),n+2},f.prototype.writeInt32LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):R(this,t,n,!0),n+4},f.prototype.writeInt32BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):R(this,t,n,!1),n+4},f.prototype.writeFloatLE=function(t,n,r){return z(this,t,n,!0,r)},f.prototype.writeFloatBE=function(t,n,r){return z(this,t,n,!1,r)},f.prototype.writeDoubleLE=function(t,n,r){return W(this,t,n,!0,r)},f.prototype.writeDoubleBE=function(t,n,r){return W(this,t,n,!1,r)},f.prototype.copy=function(t,n,r,i){r||(r=0),!i&&i!==0&&(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r);if(i===r)return 0;if(t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var s=i-r,o;if(this===t&&r<n&&n<i)for(o=s-1;o>=0;o--)t[o+n]=this[o+r];else if(s<1e3||!f.TYPED_ARRAY_SUPPORT)for(o=0;o<s;o++)t[o+n]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),n);return s},f.prototype.fill=function(t,n,r){t||(t=0),n||(n=0),r||(r=this.length);if(r<n)throw new RangeError("end < start");if(r===n)return;if(this.length===0)return;if(n<0||n>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var i;if(typeof t=="number")for(i=n;i<r;i++)this[i]=t;else{var s=K(t.toString()),o=s.length;for(i=n;i<r;i++)this[i]=s[i%o]}return this};var X=/[^+\/0-9A-Za-z-_]/g}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"base64-js":52,ieee754:53,isarray:54}],52:[function(e,t,n){"use strict";function o(){var e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=t.length;for(e=0;e<n;e++)r[e]=t
[e];for(e=0;e<n;++e)i[t.charCodeAt(e)]=e;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63}function u(e){var t,n,r,o,u,a,f=e.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u=e[f-2]==="="?2:e[f-1]==="="?1:0,a=new s(f*3/4-u),r=u>0?f-4:f;var l=0;for(t=0,n=0;t<r;t+=4,n+=3)o=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],a[l++]=(o&16711680)>>16,a[l++]=(o&65280)>>8,a[l++]=o&255;return u===2?(o=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,a[l++]=o&255):u===1&&(o=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,a[l++]=o>>8&255,a[l++]=o&255),a}function a(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[e&63]}function f(e,t,n){var r,i=[];for(var s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(a(r));return i.join("")}function l(e){var t,n=e.length,i=n%3,s="",o=[],u=16383;for(var a=0,l=n-i;a<l;a+=u)o.push(f(e,a,a+u>l?l:a+u));return i===1?(t=e[n-1],s+=r[t>>2],s+=r[t<<4&63],s+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],s+=r[t>>10],s+=r[t>>4&63],s+=r[t<<2&63],s+="="),o.push(s),o.join("")}n.toByteArray=u,n.fromByteArray=l;var r=[],i=[],s=typeof Uint8Array!="undefined"?Uint8Array:Array;o()},{}],53:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,u=i*8-r-1,a=(1<<u)-1,f=a>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=e[t+c];c+=h,s=p&(1<<-l)-1,p>>=-l,l+=u;for(;l>0;s=s*256+e[t+c],c+=h,l-=8);o=s&(1<<-l)-1,s>>=-l,l+=r;for(;l>0;o=o*256+e[t+c],c+=h,l-=8);if(s===0)s=1-f;else{if(s===a)return o?NaN:(p?-1:1)*Infinity;o+=Math.pow(2,r),s-=f}return(p?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,u,a,f=s*8-i-1,l=(1<<f)-1,c=l>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t),isNaN(t)||t===Infinity?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+c>=1?t+=h/a:t+=h*Math.pow(2,1-c),t*a>=2&&(o++,a/=2),o+c>=l?(u=0,o=l):o+c>=1?(u=(t*a-1)*Math.pow(2,i),o+=c):(u=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));for(;i>=8;e[n+p]=u&255,p+=d,u/=256,i-=8);o=o<<i|u,f+=i;for(;f>0;e[n+p]=o&255,p+=d,o/=256,f-=8);e[n+p-d]|=v*128}},{}],54:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return r.call(e)=="[object Array]"}},{}],55:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function i(e){return typeof e=="function"}function s(e){return typeof e=="number"}function o(e){return typeof e=="object"&&e!==null}function u(e){return e===void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=undefined,r.prototype._maxListeners=undefined,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,f;this._events||(this._events={});if(e==="error")if(!this._events.error||o(this._events.error)&&!this._events.error.length)throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');n=this._events[e];if(u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n)){s=Array.prototype.slice.call(arguments,1),f=n.slice(),r=f.length;for(a=0;a<r;a++)f[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(u(this._maxListeners)?n=r.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;n=this._events[e],s=n.length,r=-1;if(n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(r<0)return this;n.length===1?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}n=this._events[e];if(i(n))this.removeListener(e,n);else if(n)while(n.length)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:i(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],56:[function(e,t,n){function a(){s=!1,o.length?i=o.concat(i):u=-1,i.length&&f()}function f(){if(s)return;var e=setTimeout(a);s=!0;var t=i.length;while(t){o=i,i=[];while(++u<t)o&&o[u].run();u=-1,t=i.length}o=null,s=!1,clearTimeout(e)}function l(e,t){this.fun=e,this.array=t}function c(){}var r=t.exports={},i=[],s=!1,o,u=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new l(e,t)),i.length===1&&!s&&setTimeout(f,0)},l.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=c,r.addListener=c,r.once=c,r.off=c,r.removeListener=c,r.removeAllListeners=c,r.emit=c,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],57:[function(e,t,n){(function(e){var n=function(){"use strict";function t(n,r,i,s){function c(n,i){if(n===null)return null;if(i==0)return n;var u,h;if(typeof n!="object")return n;if(t.__isArray(n))u=[];else if(t.__isRegExp(n))u=new RegExp(n.source,o(n)),n.lastIndex&&(u.lastIndex=n.lastIndex);else if(t.__isDate(n))u=new Date(n.getTime());else{if(l&&e.isBuffer(n))return u=new e(n.length),n.copy(u),u;typeof s=="undefined"?(h=Object.getPrototypeOf(n),u=Object.create(h)):(u=Object.create(s),h=s)}if(r){var p=a.indexOf(n);if(p!=-1)return f[p];a.push(n),f.push(u)}for(var d in n){var v;h&&(v=Object.getOwnPropertyDescriptor(h,d));if(v&&v.set==null)continue;u[d]=c(n[d],i-1)}return u}var u;typeof r=="object"&&(i=r.depth,s=r.prototype,u=r.filter,r=r.circular);var a=[],f=[],l=typeof e!="undefined";return typeof r=="undefined"&&(r=!0),typeof i=="undefined"&&(i=Infinity),c(n,i)}function n(e){return Object.prototype.toString.call(e)}function r(e){return typeof e=="object"&&n(e)==="[object Date]"}function i(e){return typeof e=="object"&&n(e)==="[object Array]"}function s(e){return typeof e=="object"&&n(e)==="[object RegExp]"}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return t.clonePrototype=function(t){if(t===null)return null;var n=function(){};return n.prototype=t,new n},t.__objToStr=n,t.__isDate=r,t.__isArray=i,t.__isRegExp=s,t.__getRegExpFlags=o,t}();typeof t=="object"&&t.exports&&(t.exports=n)}).call(this,e("buffer").Buffer)},{buffer:51}],58:[function(e,t,n){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}]}},{}],59:[function(e,t,n){"use strict";function o(e){var t,n="#";for(var r=0;r<3;++r)t=e[r],t=t.toString(16),n+=("00"+t).substr(t.length);return n}function u(e){return"rgba("+e.join(",")+")"}var r=e("arraytools"),i=e("clone"),s=e("./colorScales");t.exports=function(e){var t,n,a,f,l,c,h,p,d,v,m,g,y,b=[],w=[],E=[],S=[];r.isPlainObject(e)||(e={}),d=e.nshades||72,p=e.format||"hex",h=e.colormap,h||(h="jet");if(typeof h=="string"){h=h.toLowerCase();if(!s[h])throw Error(h+" not a supported colorscale");c=i(s[h])}else{if(!Array.isArray(h))throw Error("unsupported colormap option",h);c=i(h)}if(c.length>d)throw new Error(h+" map requires nshades to be at least size "+c.length);Array.isArray(e.alpha)?e.alpha.length!==2?m=[1,1]:m=i(e.alpha):typeof e.alpha=="number"?m=[e.alpha,e.alpha]:m=[1,1],t=c.map(function(e){return Math.round(e.index*d)}),m[0]<0&&(m[0]=0),m[1]<0&&(m[0]=0),m[0]>1&&(m[0]=1),m[1]>1&&(m[0]=1);for(y=0;y<t.length;++y){g=c[y].index,n=c[y].rgb;if(n.length===4&&n[3]>=0&&n[3]<=1)continue;n[3]=m[0]+(m[1]-m[0])*g}for(y=0;y<t.length-1;++y)l=t[y+1]-t[y],a=c[y].rgb,f=c[y+1].rgb,b=b.concat(r.linspace(a[0],f[0],l)),w=w.concat(r.linspace(a[1],f[1],l)),E=E.concat(r.linspace(a[2],f[2],l)),S=S.concat(r.linspace(a[3],f[3],l));return b=b.map(Math.round),w=w.map(Math.round),E=E.map(Math.round),v=r.zip(b,w,E,S),p==="hex"&&(v=v.map(o)),p==="rgbaString"&&(v=v.map(u)),v}},{"./colorScales":58,arraytools:49,clone:57}],60:[function(e,t,n){function i(e,t){return e-t}function s(e,t){var n=e.length,s=e.length-t.length;if(s)return s;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||r(e[0],e[1])-r(t[0],t[1]);case 3:var o=e[0]+e[1],u=t[0]+t[1];s=o+e[2]-(u+t[2]);if(s)return s;var a=r(e[0],e[1]),f=r(t[0],t[1]);return r(a,e[2])-r(f,t[2])||r(a+e[2],o)-r(f+t[2],u);case 4:var l=e[0],c=e[1],h=e[2],p=e[3],d=t[0],v=t[1],m=t[2],g=t[3];return l+c+h+p-(d+v+m+g)||r(l,c,h,p)-r(d,v,m,g,d)||r(l+c,l+h,l+p,c+h,c+p,h+p)-r(d+v,d+m,d+g,v+m,v+g,m+g)||r(l+c+h,l+c+p,l+h+p,c+h+p)-r(d+v+m,d+v+g,d+m+g,v+m+g);default:var y=e.slice().sort(i),b=t.slice().sort(i);for(var w=0;w<n;++w){s=y[w]-b[w];if(s)return s}return 0}}t.exports=s;var r=Math.min},{}],61:[function(e,t,n){"use strict";function o(e){var t=e.length;if(t===0)return[];if(t===1)return[[0]];var n=e[0].length;return n===0?[]:n===1?r(e):n===2?i(e):s(e,n)}var r=e("./lib/ch1d"),i=e("./lib/ch2d"),s=e("./lib/chnd");t.exports=o},{"./lib/ch1d":62,"./lib/ch2d":63,"./lib/chnd":64}],62:[function(e,t,n){"use strict";function r(e){var t=0,n=0;for(var r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}t.exports=r},{}],63:[function(e,t,n){"use strict";function i(e){var t=r(e),n=t.length;if(n<=2)return[];var i=new Array(n),s=t[n-1];for(var o=0;o<n;++o){var u=t[o];i[o]=[s,u],s=u}return i}t.exports=i;var r=e("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":66}],64:[function(e,t,n){"use strict";function s(e,t){var n=e.length,r=new Array(n);for(var i=0;i<t.length;++i)r[i]=e[t[i]];var s=t.length;for(var i=0;i<n;++i)t.indexOf(i)<0&&(r[s++]=e[i]);return r}function o(e,t){var n=e.length,r=t.length;for(var i=0;i<n;++i){var s=e[i];for(var o=0;o<s.length;++o){var u=s[o];if(u<r)s[o]=t[u];else{u-=r;for(var a=0;a<r;++a)u>=t[a]&&(u+=1);s[o]=u}}}return e}function u(e,t){try{return r(e,!0)}catch(n){var u=i(e);if(u.length<=t)return[];var a=s(e,u),f=r(a,!0);return o(f,u)}}t.exports=u;var r=e("incremental-convex-hull"),i=e("affine-hull")},{"affine-hull":65,"incremental-convex-hull":194}],65:[function(e,t,n){"use strict";function i(e,t){var n=new Array(t+1);for(var i=0;i<e.length;++i)n[i]=e[i];for(var i=0;i<=e.length;++i){for(var s=e.length;s<=t;++s){var o=new Array(t);for(var u=0;u<t;++u)o[u]=Math.pow(s+1-i,u);n[s]=o}var a=r.apply(void 0,n);if(a)return!0}return!1}function s(e){var t=e.length;if(t===0)return[];if(t===1)return[0];var n=e[0].length,r=[e[0]],s=[0];for(var o=1;o<t;++o){r.push(e[o]);if(!i(r,n)){r.pop();continue}s.push(o);if(s.length===n+1)return s}return s}t.exports=s;var r=e("robust-orientation")},{"robust-orientation":218}],66:[function(e,t,n){"use strict";function i(e){var t=e.length;if(t<3){var n=new Array(t);for(var i=0;i<t;++i)n[i]=i;return t===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}var s=new Array(t);for(var i=0;i<t;++i)s[i]=i;s.sort(function(t,n){var r=e[t][0]-e[n][0];return r?r:e[t][1]-e[n][1]});var o=[s[0],s[1]],u=[s[0],s[1]];for(var i=2;i<t;++i){var a=s[i],f=e[a],l=o.length;while(l>1&&r(e[o[l-2]],e[o[l-1]],f)<=0)l-=1,o.pop();o.push(a),l=u.length;while(l>1&&r(e[u[l-2]],e[u[l-1]],f)>=0)l-=1,u.pop();u.push(a)}var n=new Array(u.length+o.length-2),c=0;for(var i=0,h=o.length;i<h;++i)n[c++]=o[i];for(var p=u.length-2;p>0;--p)n[c++]=u[p];return n}t.exports=i;var r=e("robust-orientation")[3]},{"robust-orientation":218}],67:[function(e,t,n){t.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CPV:"verde",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bdr|\\bdr.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",COG:"^(?!.*\\bdem)(?!.*\\bdr)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CZE:"^(?=.*rep).*czech|czechia|bohemia",CSK:"czechoslovakia",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"ireland",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat).*\\bkorea|^(?=.*people).*\\bkorea|^(?=.*north).*\\bkorea|dprk",KOR:"^(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MKD:"macedonia|fyrom",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"micronesia",MDA:"moldov|b(a|e)ssarabia",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"\\bs\\w*.?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa",TJK:"tajik",TZA:"tanzania",THA:"thailand|\\bsiam",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",USA:"united.?states|\\bu\\.?s\\.?a\\.?\\b|\\bu\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],68:[function(e,t,n){"use strict";function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function s(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var s=0;s<n.length;++s){var o=n[s];if(o==="array"||typeof o=="object"&&o.blockIndices){t.argTypes[s]="array",t.arrayArgs.push(s),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+s);if(s<t.pre.args.length&&t.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array args");if(s<t.post.args.length&&t.post.args[s].count>0)throw new Error("cwise: post() block may not reference array args")}else if(o==="scalar")t.scalarArgs.push(s),t.shimArgs.push("scalar"+s);else if(o==="index"){t.indexArgs.push(s);if(s<t.pre.args.length&&t.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array index");if(s<t.body.args.length&&t.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array index");if(s<t.post.args.length&&t.post.args[s].count>0)throw new Error("cwise: post() block may not reference array index")}else if(o==="shape"){t.shapeArgs.push(s);if(s<t.pre.args.length&&t.pre.args[s].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(s<t.body.args.length&&t.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array shape");if(s<t.post.args.length&&t.post.args[s].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if(typeof o!="object"||!o.offset)throw new Error("cwise: Unknown argument type "+n[s]);t.argTypes[s]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(s)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}var r=e("./lib/thunk.js");t.exports=s},{"./lib/thunk.js":70}],69:[function(e,t,n){"use strict";function i(e,t,n){var r=e.length,i=t.arrayArgs.length,s=t.indexArgs.length>0,o=[],u=[],a=0,f=0,l,c;for(l=0;l<r;++l)u.push(["i",l,"=0"].join(""));for(c=0;c<i;++c)for(l=0;l<r;++l)f=a,a=e[l],l===0?u.push(["d",c,"s",l,"=t",c,"p",a].join("")):u.push(["d",c,"s",l,"=(t",c,"p",a,"-s",f,"*t",c,"p",f,")"].join(""));o.push("var "+u.join(","));for(l=r-1;l>=0;--l)a=e[l],o.push(["for(i",l,"=0;i",l,"<s",a,";++i",l,"){"].join(""));o.push(n);for(l=0;l<r;++l){f=a,a=e[l];for(c=0;c<i;++c)o.push(["p",c,"+=d",c,"s",l].join(""));s&&(l>0&&o.push(["index[",f,"]-=s",f].join("")),o.push(["++index[",a,"]"].join(""))),o.push("}")}return o.join("\n")}function s(e,t,n,r){var s=t.length,o=n.arrayArgs.length,u=n.blockSize,a=n.indexArgs.length>0,f=[];for(var l=0;l<o;++l)f.push(["var offset",l,"=p",l].join(""));for(var l=e;l<s;++l)f.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),f.push(["if(j",l,"<",u,"){"].join("")),f.push(["s",t[l],"=j",l].join("")),f.push(["j",l,"=0"].join("")),f.push(["}else{s",t[l],"=",u].join("")),f.push(["j",l,"-=",u,"}"].join("")),a&&f.push(["index[",t[l],"]=j",l].join(""));for(var l=0;l<o;++l){var c=["offset"+l];for(var h=e;h<s;++h)c.push(["j",h,"*t",l,"p",t[h]].join(""));f.push(["p",l,"=(",c.join("+"),")"].join(""))}f.push(i(t,n,r));for(var l=e;l<s;++l)f.push("}");return f.join("\n")}function o(e){var t=0,n=e[0].length;while(t<n){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function u(e,t,n){var r=e.body,i=[],s=[];for(var o=0;o<e.args.length;++o){var u=e.args[o];if(u.count<=0)continue;var a=new RegExp(u.name,"g"),f="",l=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o),h=t.offsetArgs[c];l=h.array,f="+q"+c;case"array":f="p"+l+f;var p="l"+o,d="a"+l;if(t.arrayBlockIndices[l]===0)u.count===1?n[l]==="generic"?u.lvalue?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),s.push([d,".set(",f,",",p,")"].join(""))):r=r.replace(a,[d,".get(",f,")"].join("")):r=r.replace(a,[d,"[",f,"]"].join("")):n[l]==="generic"?(i.push(["var ",p,"=",d,".get(",f,")"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,".set(",f,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",f,"]"].join("")),r=r.replace(a,p),u.lvalue&&s.push([d,"[",f,"]=",p].join("")));else{var v=[u.name],m=[f];for(var g=0;g<Math.abs(t.arrayBlockIndices[l]);g++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+l+"b"+g);a=new RegExp(v.join(""),"g"),f=m.join("+");if(n[l]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(a,[d,"[",f,"]"].join(""))}break;case"scalar":r=r.replace(a,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(a,"index");break;case"shape":r=r.replace(a,"shape")}}return[i.join("\n"),r,s.join("\n")].join("\n").trim()}function a(e){var t=new Array(e.length),n=!0;for(var r=0;r<e.length;++r){var i=e[r],s=i.match(/\d+/);s?s=s[0]:s="",i.charAt(0)===0?t[r]="u"+i.charAt(1)+s:t[r]=i.charAt(0)+s,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function f(e,t){var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,f=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length);for(var c=0;c<e.arrayArgs.length;++c)l[c]=t[2*c],f[c]=t[2*c+1];var h=[],p=[],d=[],v=[],m=[];for(var c=0;c<e.arrayArgs.length;++c){e.arrayBlockIndices[c]<0?(d.push(0),v.push(n),h.push(n),p.push(n+e.arrayBlockIndices[c])):(d.push(e.arrayBlockIndices[c]),v.push(e.arrayBlockIndices[c]+n),h.push(0),p.push(e.arrayBlockIndices[c]));var g=[];for(var y=0;y<f[c].length;y++)d[c]<=f[c][y]&&f[c][y]<v[c]&&g.push(f[c][y]-d[c]);m.push(g)}var b=["SS"],w=["'use strict'"],E=[];for(var y=0;y<n;++y)E.push(["s",y,"=SS[",y,"]"].join(""));for(var c=0;c<e.arrayArgs.length;++c){b.push("a"+c),b.push("t"+c),b.push("p"+c);for(var y=0;y<n;++y)E.push(["t",c,"p",y,"=t",c,"[",d[c]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[c]);++y)E.push(["t",c,"b",y,"=t",c,"[",h[c]+y,"]"].join(""))}for(var c=0;c<e.scalarArgs.length;++c)b.push("Y"+c);e.shapeArgs.length>0&&E.push("shape=SS.slice(0)");if(e.indexArgs.length>0){var S=new Array(n);for(var c=0;c<n;++c)S[c]="0";E.push(["index=[",S.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){var x=e.offsetArgs[c],T=[];for(var y=0;y<x.offset.length;++y){if(x.offset[y]===0)continue;x.offset[y]===1?T.push(["t",x.array,"p",y].join("")):T.push([x.offset[y],"*t",x.array,"p",y].join(""))}T.length===0?E.push("q"+c+"=0"):E.push(["q",c,"=",T.join("+")].join(""))}var N=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));E=E.concat(N),w.push("var "+E.join(","));for(var c=0;c<e.arrayArgs.length;++c)w.push("p"+c+"|=0");e.pre.body.length>3&&w.push(u(e.pre,e,l));var C=u(e.body,e,l),k=o(m);k<n?w.push(s(k,m[0],e,C)):w.push(i(m[0],e,C)),e.post.body.length>3&&w.push(u(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+w.join("\n")+"\n----------");var L=[e.funcName||"unnamed","_cwise_loop_",f[0].join("s"),"m",k,a(l)].join(""),A=new Function(["function ",L,"(",b.join(","),"){",w.join("\n"),"} return ",L].join(""));return A()}var r=e("uniq");t.exports=f},{uniq:238}],70:[function(e,t,n){"use strict";function i(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));var s=[],o=[],u=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],a=[],f=[];for(var l=0;l<e.arrayArgs.length;++l){var c=e.arrayArgs[l];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),s.push("t"+c),s.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),u.push("array"+c+".data"),u.push("array"+c+".stride"),u.push("array"+c+".offset|0"),l>0&&(a.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),f.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+a.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var l=0;l<e.scalarArgs.length;++l)u.push("scalar"+e.scalarArgs[l]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",u.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var h=new Function("compile",t.join("\n"));return h(r.bind(undefined,e))}var r=e("./compile.js");t.exports=i},{"./compile.js":69}],71:[function(e,t,n){t.exports=e("cwise-compiler")},{"cwise-compiler":68}],72:[function(t,n,r){!function(){function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function u(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return e===null?NaN:+e}function g(e){return!isNaN(e)}function y(e){return{left:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function w(e){return e.length}function S(e){var t=1;while(e*t%1)t*=10;return t}function x(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],
enumerable:!1})}function T(){this._=Object.create(null)}function k(e){return(e+="")===N||e[0]===C?C+e:e}function L(e){return(e+="")[0]===C?e.slice(1):e}function A(e){return k(e)in this._}function O(e){return(e=k(e))in this._&&delete this._[e]}function M(){var e=[];for(var t in this._)e.push(L(t));return e}function _(){var e=0;for(var t in this._)++e;return e}function D(){for(var e in this._)return!1;return!0}function P(){this._=Object.create(null)}function H(e){return e}function B(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function j(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+t;if(i in e)return i}}function I(){}function q(){}function R(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n=new T;return r.on=function(r,i){var s=n.get(r),o;return arguments.length<2?s&&s.on:(s&&(s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function U(){t.event.preventDefault()}function z(){var e=t.event,n;while(n=e.sourceEvent)e=n;return e}function W(e){var n=new q,r=0,i=arguments.length;while(++r<i)n[arguments[r]]=R(n);return n.of=function(r,i){return function(s){try{var o=s.sourceEvent=t.event;s.target=e,t.event=s,n[s.type].apply(r,i)}finally{t.event=o}}},n}function $(e){return V(e,G),e}function Y(e){return typeof e=="function"?e:function(){return J(e,this)}}function Z(e){return typeof e=="function"?e:function(){return K(e,this)}}function nt(e,n){function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function s(){this.setAttribute(e,n)}function o(){this.setAttributeNS(e.space,e.local,n)}function u(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}function a(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}return e=t.ns.qualify(e),n==null?e.local?i:r:typeof n=="function"?e.local?a:u:e.local?o:s}function rt(e){return e.trim().replace(/\s+/g," ")}function it(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function st(e){return(e+"").trim().split(/^|\s+/)}function ot(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=st(e).map(ut);var n=e.length;return typeof t=="function"?i:r}function ut(e){var t=it(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",rt(i+" "+e))):n.setAttribute("class",rt(i.replace(t," ")))}}function at(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return t==null?r:typeof t=="function"?s:i}function ft(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return t==null?n:typeof t=="function"?i:r}function lt(e){function n(){var t=this.ownerDocument,n=this.namespaceURI;return n===et&&t.documentElement.namespaceURI===et?t.createElement(e):t.createElementNS(n,e)}function r(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e=="function"?e:(e=t.ns.qualify(e)).local?r:n}function ct(){var e=this.parentNode;e&&e.removeChild(this)}function ht(e){return{__data__:e}}function pt(e){return function(){return Q(this,e)}}function dt(e){return arguments.length||(e=v),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function vt(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=0,o=i.length,u;s<o;s++)(u=i[s])&&t(u,s,n);return e}function mt(e){return V(e,gt),e}function yt(e){var t,n;return function(r,i,s){var o=e[s].update,u=o.length,a;s!=n&&(n=s,t=0),i>=t&&(t=i+1);while(!(a=o[t])&&++t<u);return a}}function bt(e,n,r){function f(){var t=this[s];t&&(this.removeEventListener(e,t,t.$),delete this[s])}function l(){var t=u(n,i(arguments));f.call(this),this.addEventListener(e,this[s]=t,t.$=r),t._=n}function c(){var n=new RegExp("^__on([^.]+)"+t.requote(e)+"$"),r;for(var i in this)if(r=i.match(n)){var s=this[i];this.removeEventListener(r[1],s,s.$),delete this[i]}}var s="__on"+e,o=e.indexOf("."),u=Et;o>0&&(e=e.slice(0,o));var a=wt.get(e);return a&&(e=a,u=St),o?n?l:f:n?I:c}function Et(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function St(e,t){var n=Et(e,t);return function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!(r.compareDocumentPosition(t)&8))&&n.call(t,e)}}function Nt(e){var n=".dragsuppress-"+ ++Tt,r="click"+n,i=t.select(u(e)).on("touchmove"+n,U).on("dragstart"+n,U).on("selectstart"+n,U);xt==null&&(xt="onselectstart"in e?!1:j(e.style,"userSelect"));if(xt){var s=o(e).style,a=s[xt];s[xt]="none"}return function(e){i.on(n,null),xt&&(s[xt]=a);if(e){var t=function(){i.on(r,null)};i.on(r,function(){U(),t()},!0),setTimeout(t,0)}}}function kt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(Ct<0){var s=u(e);if(s.scrollX||s.scrollY){r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Ct=!o.f&&!o.e,r.remove()}}return Ct?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var a=e.getBoundingClientRect();return[n.clientX-a.left-e.clientLeft,n.clientY-a.top-e.clientTop]}function Lt(){return t.event.changedTouches[0].identifier}function jt(e){return e>0?1:e<0?-1:0}function Ft(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function It(e){return e>1?0:e<-1?Mt:Math.acos(e)}function qt(e){return e>1?Pt:e<-1?-Pt:Math.asin(e)}function Rt(e){return((e=Math.exp(e))-1/e)/2}function Ut(e){return((e=Math.exp(e))+1/e)/2}function zt(e){return((e=Math.exp(2*e))-1)/(e+1)}function Wt(e){return(e=Math.sin(e/2))*e}function Gt(){}function Yt(e,t,n){return this instanceof Yt?void (this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof Yt?new Yt(e.h,e.s,e.l):En(""+e,Sn,Yt):new Yt(e,t,n)}function en(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,new mn(o(e+120),o(e),o(e-120))}function tn(e,n,r){return this instanceof tn?void (this.h=+e,this.c=+n,this.l=+r):arguments.length<2?e instanceof tn?new tn(e.h,e.c,e.l):e instanceof sn?hn(e.l,e.a,e.b):hn((e=xn((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new tn(e,n,r)}function rn(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new sn(n,Math.cos(e*=Ht)*t,Math.sin(e)*t)}function sn(e,t,n){return this instanceof sn?void (this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof sn?new sn(e.l,e.a,e.b):e instanceof tn?rn(e.h,e.c,e.l):xn((e=mn(e)).r,e.g,e.b):new sn(e,t,n)}function cn(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=pn(i)*un,r=pn(r)*an,s=pn(s)*fn,new mn(vn(3.2404542*i-1.5371385*r-.4985314*s),vn(-0.969266*i+1.8760108*r+.041556*s),vn(.0556434*i-.2040259*r+1.0572252*s))}function hn(e,t,n){return e>0?new tn(Math.atan2(n,t)*Bt,Math.sqrt(t*t+n*n),e):new tn(NaN,NaN,e)}function pn(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function dn(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function vn(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function mn(e,t,n){return this instanceof mn?void (this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof mn?new mn(e.r,e.g,e.b):En(""+e,mn,en):new mn(e,t,n)}function gn(e){return new mn(e>>16,e>>8&255,e&255)}function yn(e){return gn(e)+""}function wn(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function En(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Nn(u[0]),Nn(u[1]),Nn(u[2]))}}return(a=Cn.get(e))?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&!isNaN(a=parseInt(e.slice(1),16))&&(e.length===4?(r=(a&3840)>>4,r=r>>4|r,i=a&240,i=i>>4|i,s=a&15,s=s<<4|s):e.length===7&&(r=(a&16711680)>>16,i=(a&65280)>>8,s=a&255)),t(r,i,s))}function Sn(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):(o=NaN,u=a>0&&a<1?0:o),new Yt(o,u,a)}function xn(e,t,n){e=Tn(e),t=Tn(t),n=Tn(n);var r=dn((.4124564*e+.3575761*t+.1804375*n)/un),i=dn((.2126729*e+.7151522*t+.072175*n)/an),s=dn((.0193339*e+.119192*t+.9503041*n)/fn);return sn(116*i-16,500*(r-i),200*(i-s))}function Tn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nn(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function kn(e){return typeof e=="function"?e:function(){return e}}function Ln(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=null),An(t,n,e,r)}}function An(e,n,r,s){function c(){var e=f.status,t;if(!e&&Mn(f)||e>=200&&e<300||e===304){try{t=r.call(o,f)}catch(n){u.error.call(o,n);return}u.load.call(o,t)}else u.error.call(o,f)}var o={},u=t.dispatch("beforesend","progress","load","error"),a={},f=new XMLHttpRequest,l=null;return this.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(e)&&(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=c:f.onreadystatechange=function(){f.readyState>3&&c()},f.onprogress=function(e){var n=t.event;t.event=e;try{u.progress.call(o,f)}finally{t.event=n}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?a[e]:(t==null?delete a[e]:a[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(n=e==null?null:e+"",o):n},o.responseType=function(e){return arguments.length?(l=e,o):l},o.response=function(e){return r=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(i(arguments)))}}),o.send=function(t,r,i){arguments.length===2&&typeof r=="function"&&(i=r,r=null),f.open(t,e,!0),n!=null&&!("accept"in a)&&(a.accept=n+",*/*");if(f.setRequestHeader)for(var s in a)f.setRequestHeader(s,a[s]);return n!=null&&f.overrideMimeType&&f.overrideMimeType(n),l!=null&&(f.responseType=l),i!=null&&o.on("error",i).on("load",function(e){i(null,e)}),u.beforesend.call(o,f),f.send(r==null?null:r),o},o.abort=function(){return f.abort(),o},t.rebind(o,u,"on"),s==null?o:o.get(On(s))}function On(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Mn(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function jn(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,s={c:e,t:i,n:null};return Dn?Dn.n=s:_n=s,Dn=s,Pn||(Hn=clearTimeout(Hn),Pn=1,Bn(Fn)),s}function Fn(){var e=In(),t=qn()-e;t>24?(isFinite(t)&&(clearTimeout(Hn),Hn=setTimeout(Fn,t)),Pn=0):(Pn=1,Bn(Fn))}function In(){var e=Date.now(),t=_n;while(t)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function qn(){var e,t=_n,n=Infinity;while(t)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:_n=t.n;return Dn=e,n}function Rn(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function zn(e,t){var n=Math.pow(10,E(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Wn(e){var n=e.decimal,r=e.thousands,i=e.grouping,s=e.currency,o=i&&r?function(e,t){var n=e.length,s=[],o=0,u=i[0],a=0;while(n>0&&u>0){a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(n-=u,n+u));if((a+=u+1)>t)break;u=i[o=(o+1)%i.length]}return s.reverse().join(r)}:H;return function(e){var r=Xn.exec(e),i=r[1]||" ",u=r[2]||">",a=r[3]||"-",f=r[4]||"",l=r[5],c=+r[6],h=r[7],p=r[8],d=r[9],v=1,m="",g="",y=!1,b=!0;p&&(p=+p.substring(1));if(l||i==="0"&&u==="=")l=i="0",u="=";switch(d){case"n":h=!0,d="g";break;case"%":v=100,g="%",d="f";break;case"p":v=100,g="%",d="r";break;case"b":case"o":case"x":case"X":f==="#"&&(m="0"+d.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":v=-1,d="r"}f==="$"&&(m=s[0],g=s[1]),d=="r"&&!p&&(d="g");if(p!=null)if(d=="g")p=Math.max(1,Math.min(21,p));else if(d=="e"||d=="f")p=Math.max(0,Math.min(20,p));d=Vn.get(d)||$n;var w=l&&h;return function(e){var r=g;if(y&&e%1)return"";var s=e<0||e===0&&1/e<0?(e=-e,"-"):a==="-"?"":a;if(v<0){var f=t.formatPrefix(e,p);e=f.scale(e),r=f.symbol+g}else e*=v;e=d(e,p);var E=e.lastIndexOf("."),S,x;if(E<0){var T=b?e.lastIndexOf("e"):-1;T<0?(S=e,x=""):(S=e.substring(0,T),x=e.substring(T))}else S=e.substring(0,E),x=n+e.substring(E+1);!l&&h&&(S=o(S,Infinity));var N=m.length+S.length+x.length+(w?0:s.length),C=N<c?(new Array(N=c-N+1)).join(i):"";return w&&(S=o(C+S,C.length?c-x.length:Infinity)),s+=m,e=S+x,(u==="<"?s+e+C:u===">"?C+s+e:u==="^"?C.substring(0,N>>=1)+s+e+C.substring(N):s+(w?e:C+e))+r}}}function $n(e){return e+""}function Qn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Yn(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Kn(n-1)),1),n}function s(e,n){return t(e=new Kn(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)while(o<r)n(o)%s||u.push(new Date(+o)),t(o,1);else while(o<r)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{Kn=Qn;var r=new Qn;return r._=e,o(r,t,n)}finally{Kn=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Zn(e);return a.floor=a,a.round=Zn(r),a.ceil=Zn(i),a.offset=Zn(s),a.range=u,e}function Zn(e){return function(t,n){try{Kn=Qn;var r=new Qn;return r._=t,e(r,n)._}finally{Kn=Date}}}function er(e){function l(e){function n(n){var r=[],i=-1,s=0,o,u,a;while(++i<t)if(e.charCodeAt(i)===37){r.push(e.slice(s,i)),(u=tr[o=e.charAt(++i)])!=null&&(o=e.charAt(++i));if(a=E[o])o=a(n,u==null?o==="e"?" ":"0":u);r.push(o),s=i+1}return r.push(e.slice(s,i)),r.join("")}var t=e.length;return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+n.p*12);var i=n.Z!=null&&Kn!==Qn,s=new(i?Qn:Kn);return"j"in n?s.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),s.setFullYear(n.y,0,1),s.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(s.getDay()+5)%7:n.w+n.U*7-(s.getDay()+6)%7)):s.setFullYear(n.y,n.m,n.d),s.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?s._:s},n.toString=function(){return e},n}function c(e,t,n,r){var i,s,o,u=0,a=t.length,f=n.length;while(u<a){if(r>=f)return-1;i=t.charCodeAt(u++);if(i===37){o=t.charAt(u++),s=S[o in tr?t.charAt(u++):o];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function x(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function T(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1}function N(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=w.get(r[0].toLowerCase()),n+r[0].length):-1}function C(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function k(e,t,n){return c(e,E.c.toString(),t,n)}function L(e,t,n){return c(e,E.x.toString(),t,n)}function A(e,t,n){return c(e,E.X.toString(),t,n)}function O(e,t,n){var r=h.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}var n=e.dateTime,r=e.date,i=e.time,s=e.periods,o=e.days,u=e.shortDays,a=e.months,f=e.shortMonths;l.utc=function(e){function n(e){try{Kn=Qn;var n=new Kn;return n._=e,t(n)}finally{Kn=Date}}var t=l(e);return n.parse=function(e){try{Kn=Qn;var n=t.parse(e);return n&&n._}finally{Kn=Date}},n.toString=t.toString,n},l.multi=l.utc.multi=xr;var h=t.map(),p=sr(o),d=or(o),v=sr(u),m=or(u),g=sr(a),y=or(a),b=sr(f),w=or(f);s.forEach(function(e,t){h.set(e.toLowerCase(),t)});var E={a:function(e){return u[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return f[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:l(n),d:function(e,t){return ir(e.getDate(),t,2)},e:function(e,t){return ir(e.getDate(),t,2)},H:function(e,t){return ir(e.getHours(),t,2)},I:function(e,t){return ir(e.getHours()%12||12,t,2)},j:function(e,t){return ir(1+Jn.dayOfYear(e),t,3)},L:function(e,t){return ir(e.getMilliseconds(),t,3)},m:function(e,t){return ir(e.getMonth()+1,t,2)},M:function(e,t){return ir(e.getMinutes(),t,2)},p:function(e){return s[+(e.getHours()>=12)]},S:function(e,t){return ir(e.getSeconds(),t,2)},U:function(e,t){return ir(Jn.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return ir(Jn.mondayOfYear(e),t,2)},x:l(r),X:l(i),y:function(e,t){return ir(e.getFullYear()%100,t,2)},Y:function(e,t){return ir(e.getFullYear()%1e4,t,4)},Z:Er,"%":function(){return"%"}},S={a:x,A:T,b:N,B:C,c:k,d:vr,e:vr,H:gr,I:gr,j:mr,L:wr,m:dr,M:yr,p:O,S:br,U:ar,w:ur,W:fr,x:L,X:A,y:cr,Y:lr,Z:hr,"%":Sr};return l}function ir(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function sr(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function or(e){var t=new T,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function ur(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ar(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function fr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function lr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.y=pr(+r[0]),n+r[0].length):-1}function hr(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function pr(e){return e+(e>68?1900:2e3)}function dr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function mr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function gr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function yr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function br(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function wr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Er(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=E(t)/60|0,i=E(t)%60;return n+ir(r,"0",2)+ir(i,"0",2)}function Sr(e,t,n){rr.lastIndex=0;var r=rr.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xr(e){var t=e.length,n=-1;while(++n<t)e[n][0]=this(e[n][0]);return function(t){var n=0,r=e[n];while(!r[1](t))r=e[++n];return r[0](t)}}function Nr(){}function kr(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Lr(e,t){e&&Or.hasOwnProperty(e.type)&&Or[e.type](e,t)}function Mr(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function _r(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Mr(e[n],t,1);t.polygonEnd()}function Br(){function s(e,t){e*=Ht,t=t*Ht/2+Mt/4;var s=e-n,o=s>=0?1:-1,u=o*s,a=Math.cos(t),f=Math.sin(t),l=i*f,c=r*a+l*Math.cos(u),h=l*o*Math.sin(u);Pr.add(Math.atan2(h,c)),n=e,r=a,i=f}var e,t,n,r,i;Hr.point=function(o,u){Hr.point=s,n=(e=o)*Ht,r=Math.cos(u=(t=u)*Ht/2+Mt/4),i=Math.sin(u)},Hr.lineEnd=function(){s(e,t)}}function jr(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Fr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ir(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qr(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Rr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ur(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function zr(e){return[Math.atan2(e[1],e[0]),qt(e[2])]}function Wr(e,t){return E(e[0]-t[0])<At&&E(e[1]-t[1])<At}function ri(e,t){e*=Ht;var n=Math.cos(t*=Ht);ii(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ii(e,t,n){++Xr,$r+=(e-$r)/Xr,Jr+=(t-Jr)/Xr,Kr+=(n-Kr)/Xr}function si(){function r(r,i){r*=Ht;var s=Math.cos(i*=Ht),o=s*Math.cos(r),u=s*Math.sin(r),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=t*a-n*u)*f+(f=n*o-e*a)*f+(f=e*u-t*o)*f),e*o+t*u+n*a);Vr+=f,Qr+=f*(e+(e=o)),Gr+=f*(t+(t=u)),Yr+=f*(n+(n=a)),ii(e,t,n)}var e,t,n;ni.point=function(i,s){i*=Ht;var o=Math.cos(s*=Ht);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(s),ni.point=r,ii(e,t,n)}}function oi(){ni.point=ri}function ui(){function s(e,t){e*=Ht;var s=Math.cos(t*=Ht),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(t),f=r*a-i*u,l=i*o-n*a,c=n*u-r*o,h=Math.sqrt(f*f+l*l+c*c),p=n*o+r*u+i*a,d=h&&-It(p)/h,v=Math.atan2(h,p);Zr+=d*f,ei+=d*l,ti+=d*c,Vr+=v,Qr+=v*(n+(n=o)),Gr+=v*(r+(r=u)),Yr+=v*(i+(i=a)),ii(n,r,i)}var e,t,n,r,i;ni.point=function(o,u){e=o,t=u,ni.point=s,o*=Ht;var a=Math.cos(u*=Ht);n=a*Math.cos(o),r=a*Math.sin(o),i=Math.sin(u),ii(n,r,i)},ni.lineEnd=function(){s(e,t),ni.lineEnd=oi,ni.point=ri}}function ai(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function fi(){return!0}function li(e,t,n,r,i){var s=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(Wr(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}var a=new hi(n,e,null,!0),f=new hi(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new hi(r,e,null,!1),f=new hi(r,null,a,!0),a.o=f,s.push(a),o.push(f)}),o.sort(t),ci(s),ci(o);if(!s.length)return;for(var u=0,a=n,f=o.length;u<f;++u)o[u].e=a=!a;var l=s[0],c,h;for(;;){var p=l,d=!0;while(p.v)if((p=p.n)===l)return;c=p.z,i.lineStart();do{p.v=p.o.v=!0;if(p.e){if(d)for(var u=0,f=c.length;u<f;++u)i.point((h=c[u])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((h=c[u])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}function ci(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}function hi(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pi(e,n,r,i){return function(s,o){function l(t,n){var r=s(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function c(e,t){var n=s(e,t);u.point(n[0],n[1])}function h(){f.point=c,u.lineStart()}function p(){f.point=l,u.lineEnd()}function w(e,t){b.push([e,t]);var n=s(e,t);m.point(n[0],n[1])}function E(){m.lineStart(),b=[]}function S(){w(b[0][0],b[0][1]),m.lineEnd();var e=m.clean(),t=v.buffer(),n,r=t.length;b.pop(),y.push(b),b=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,s;if(r>0){g||(o.polygonStart(),g=!0),o.lineStart();while(++i<r)o.point((s=n[i])[0],s[1]);o.lineEnd()}return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),d.push(t.filter(di))}var u=n(o),a=s.invert(i[0],i[1]),f={point:l,lineStart:h,lineEnd:p,polygonStart:function(){f.point=w,f.lineStart=E,f.lineEnd=S,d=[],y=[]},polygonEnd:function(){f.point=l,f.lineStart=h,f.lineEnd=p,d=t.merge(d);var e=Ei(a,y);d.length?(g||(o.polygonStart(),g=!0),li(d,mi,e,r,o)):e&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),d=y=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}},d,v=vi(),m=n(v),g=!1,y,b;return f}}function di(e){return e.length>1}function vi(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:I,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function mi(e,t){return((e=e.x)[0]<0?e[1]-Pt-At:Pt-e[1])-((t=t.x)[0]<0?t[1]-Pt-At:Pt-t[1])}function yi(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?Mt:-Mt,a=E(s-t);E(a-Mt)<At?(e.point(t,n=(n+o)/2>0?Pt:-Pt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=Mt&&(E(t-r)<At&&(t-=r*At),E(s-u)<At&&(s-=u*At),n=bi(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function bi(e,t,n,r){var i,s,o=Math.sin(e-n);return E(o)>At?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function wi(e,t,n,r){var i;if(e==null)i=n*Pt,r.point(-Mt,i),r.point(0,i),r.point(Mt,i),r.point(Mt,0),r.point(Mt,-i),r.point(0,-i),r.point(-Mt,-i),r.point(-Mt,0),r.point(-Mt,i);else if(E(e[0]-t[0])>At){var s=e[0]<t[0]?Mt:-Mt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Ei(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;Pr.reset();for(var u=0,a=t.length;u<a;++u){var f=t[u],l=f.length;if(!l)continue;var c=f[0],h=c[0],p=c[1]/2+Mt/4,d=Math.sin(p),v=Math.cos(p),m=1;for(;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+Mt/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>Mt,N=d*b;Pr.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*_t:E;if(T^h>=n^g>=n){var C=Ir(jr(c),jr(e));Ur(C);var k=Ir(i,C);Ur(k);var L=(T^E>=0?-1:1)*qt(k[2]);if(r>L||r===L&&(C[0]||C[1]))o+=T^E>=0?1:-1}if(!(m++))break;h=g,d=b,v=w,c=e}}return(s<-At||s<At&&Pr<0)^o&1}function Si(e){function s(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,f,l;return{lineStart:function(){f=o=!1,l=1},point:function(c,h){var p=[c,h],d,v=s(c,h),m=n?v?0:a(c,h):v?a(c+(c<0?Mt:-Mt),h):0;!t&&(f=o=v)&&e.lineStart();if(v!==o){d=u(t,p);if(Wr(t,d)||Wr(p,d))p[0]+=At,p[1]+=At,v=s(p[0],p[1])}if(v!==o)l=0,v?(e.lineStart(),d=u(p,t),e.point(d[0],d[1])):(d=u(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(r&&t&&n^v){var g;!(m&i)&&(g=u(p,t,!0))&&(l=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!Wr(t,p))&&e.point(p[0],p[1]),t=p,o=v,i=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return l|(f&&o)<<1}}}function u(e,n,r){var i=jr(e),s=jr(n),o=[1,0,0],u=Ir(i,s),a=Fr(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=t*a/l,h=-t*f/l,p=Ir(o,u),d=Rr(o,c),v=Rr(u,h);qr(d,v);var m=p,g=Fr(d,m),y=Fr(m,m),b=g*g-y*(Fr(d,d)-1);if(b<0)return;var w=Math.sqrt(b),S=Rr(m,(-g-w)/y);qr(S,d),S=zr(S);if(!r)return S;var x=e[0],T=n[0],N=e[1],C=n[1],k;T<x&&(k=x,x=T,T=k);var L=T-x,A=E(L-Mt)<At,O=A||L<At;!A&&C<N&&(k=N,N=C,C=k);if(O?A?N+C>0^S[1]<(E(S[0]-x)<At?N:C):N<=S[1]&&S[1]<=C:L>Mt^(x<=S[0]&&S[0]<=T)){var M=Rr(m,(-g+w)/y);return qr(M,d),[S,zr(M)]}}function a(t,r){var i=n?e:Mt-e,s=0;return t<-i?s|=1:t>i&&(s|=2),r<-i?s|=4:r>i&&(s|=8),s}var t=Math.cos(e),n=t>0,r=E(t)>At,i=ss(e,6*Ht);return pi(s,o,i,n?[0,-e]:[-Mt,e-Mt])}function xi(e,t,n,r){return function(i){var s=i.a,o=i.b,u=s.x,a=s.y,f=o.x,l=o.y,c=0,h=1,p=f-u,d=l-a,v;v=e-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<c)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>c&&(c=v)}v=n-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;v>c&&(c=v)}else if(p>0){if(v<c)return;v<h&&(h=v)}v=t-a;if(!d&&v>0)return;v/=d;if(d<0){if(v<c)return;v<h&&(h=v)}else if(d>0){if(v>h)return;v>c&&(c=v)}v=r-a;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;v>c&&(c=v)}else if(d>0){if(v<c)return;v<h&&(h=v)}return c>0&&(i.a={x:u+c*p,y:a+c*d}),h<1&&(i.b={x:u+h*p,y:a+h*d}),i}}function Ni(e,n,r,i){function s(t,i){return E(t[0]-e)<At?i>0?0:3:E(t[0]-r)<At?i>0?2:1:E(t[1]-n)<At?i>0?1:0:i>0?3:2}function o(e,t){return u(e.x,t.x)}function u(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}return function(a){function m(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i)for(var s=1,o=p[i],u=o.length,a=o[0],f;s<u;++s)f=o[s],a[1]<=r?f[1]>r&&Ft(a,f,e)>0&&++t:f[1]<=r&&Ft(a,f,e)<0&&--t,a=f;return t!==0}function g(t,o,a,f){var l=0,c=0;if(t==null||(l=s(t,a))!==(c=s(o,a))||u(t,o)<0^a>0){do f.point(l===0||l===3?e:r,l>1?i:n);while((l=(l+a+4)%4)!==c)}else f.point(o[0],o[1])}function y(t,s){return e<=t&&t<=r&&n<=s&&s<=i}function b(e,t){y(e,t)&&a.point(e,t)}function L(){v.point=O,p&&p.push(d=[]),C=!0,N=!1,x=T=NaN}function A(){h&&(O(w,E),S&&N&&l.rejoin(),h.push(l.buffer())),v.point=b,N&&a.lineEnd()}function O(e,t){e=Math.max(-Ti,Math.min(Ti,e)),t=Math.max(-Ti,Math.min(Ti,t));var n=y(e,t);p&&d.push([e,t]);if(C)w=e,E=t,S=n,C=!1,n&&(a.lineStart(),a.point(e,t));else if(n&&N)a.point(e,t);else{var r={a:{x:x,y:T},b:{x:e,y:t}};c(r)?(N||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),k=!1):n&&(a.lineStart(),a.point(e,t),k=!1)}x=e,T=t,N=n}var f=a,l=vi(),c=xi(e,n,r,i),h,p,d,v={point:b,lineStart:L,lineEnd:A,polygonStart:function(){a=l,h=[],p=[],k=!0},polygonEnd:function(){a=f,h=t.merge(h);var n=m([e,i]),r=k&&n,s=h.length;if(r||s)a.polygonStart(),r&&(a.lineStart(),g(null,null,1,a),a.lineEnd()),s&&li(h,o,n,g,a),a.polygonEnd();h=p=d=null}},w,E,S,x,T,N,C,k;return v}}function Ci(e){var t=0,n=Mt/3,r=Gi(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Mt/180,n=e[1]*Mt/180):[t/Mt*180,n/Mt*180]},i}function ki(e,t){function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),s=Math.sqrt(i)/r;return o.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,qt((i-(e*e+n*n)*r*r)/(2*r))]},o}function Mi(){function i(e,t){Ai+=r*e-n*t,n=e,r=t}var e,t,n,r;Oi.point=function(s,o){Oi.point=i,e=n=s,t=r=o},Oi.lineEnd=function(){i(e,t)}}function ji(e,t){e<_i&&(_i=e),e>Pi&&(Pi=e),t<Di&&(Di=t),t>Hi&&(Hi=t)}function Fi(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=r}function u(){t.push("Z")}var e=Ii(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=Ii(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};return n}function Ii(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ri(e,t){$r+=e,Jr+=t,++Kr}function Ui(){function n(n,r){var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s);Qr+=o*(e+n)/2,Gr+=o*(t+r)/2,Yr+=o,Ri(e=n,t=r)}var e,t;qi.point=function(r,i){qi.point=n,Ri(e=r,t=i)}}function zi(){qi.point=Ri}function Wi(){function i(e,t){var i=e-n,s=t-r,o=Math.sqrt(i*i+s*s);Qr+=o*(n+e)/2,Gr+=o*(r+t)/2,Yr+=o,o=r*e-n*t,Zr+=o*(n+e),ei+=o*(r+t),ti+=o*3,Ri(n=e,r=t)}var e,t,n,r;qi.point=function(s,o){qi.point=i,Ri(e=n=s,t=r=o)},qi.lineEnd=function(){i(e,t)}}function Xi(e){function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,_t)}function i(t,r){e.moveTo(t,r),n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:I};return n}function Vi(e){function i(e){return(r?o:s)(e)}function s(t){return Ki(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function o(t){function y(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){h=NaN,g.point=w,t.lineStart()}function w(n,i){var s=jr([n,i]),o=e(n,i);u(h,p,c,d,v,m,h=o[0],p=o[1],c=n,d=s[0],v=s[1],m=s[2],r,t),t.point(h,p)}function E(){g.point=y,t.lineEnd()}function S(){b(),g.point=x,g.lineEnd=T}function x(e,t){w(n=e,i=t),s=h,o=p,a=d,f=v,l=m,g.point=w}function T(){u(h,p,c,d,v,m,s,o,n,a,f,l,r,t),g.lineEnd=E,E()}var n,i,s,o,a,f,l,c,h,p,d,v,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=S},polygonEnd:function(){t.polygonEnd(),g.lineStart=b}};return g}function u(r,i,s,o,a,f,l,c,h,p,d,v,m,g){var y=l-r,b=c-i,w=y*y+b*b;if(w>4*t&&m--){var S=o+p,x=a+d,T=f+v,N=Math.sqrt(S*S+x*x+T*T),C=Math.asin(T/=N),k=E(E(T)-1)<At||E(s-h)<At?(s+h)/2:Math.atan2(x,S),L=e(k,C),A=L[0],O=L[1],M=A-r,_=O-i,D=b*M-y*_;if(D*D/w>t||E((y*M+b*_)/w-.5)>.3||o*p+a*d+f*v<n)u(r,i,s,o,a,f,A,O,k,S/=N,x/=N,T,m,g),g.point(A,O),u(A,O,k,S,x,T,l,c,h,p,d,v,m,g)}}var t=.5,n=Math.cos(30*Ht),r=16;return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function $i(e){var t=Vi(function(t,n){return e([t*Bt,n*Bt])});return function(e){return Yi(t(e))}}function Ji(e){this.stream=e}function Ki(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Qi(e){return Gi(function(){return e})()}function Gi(e){function E(e){return e=i(e[0]*Ht,e[1]*Ht),[e[0]*o+d,v-e[1]*o]}function S(e){return e=i.invert((e[0]-d)/o,(v-e[1])/o),e&&[e[0]*Bt,e[1]*Bt]}function x(){i=ai(r=ts(c,h,p),n);var e=n(f,l);return d=u-e[0]*o,
v=a+e[1]*o,T()}function T(){return w&&(w.valid=!1,w=null),E}var n,r,i,s=Vi(function(e,t){return e=n(e,t),[e[0]*o+d,v-e[1]*o]}),o=150,u=480,a=250,f=0,l=0,c=0,h=0,p=0,d,v,m=gi,g=H,y=null,b=null,w;return E.stream=function(e){return w&&(w.valid=!1),w=Yi(m(r,s(g(e)))),w.valid=!0,w},E.clipAngle=function(e){return arguments.length?(m=e==null?(y=e,gi):Si((y=+e)*Ht),T()):y},E.clipExtent=function(e){return arguments.length?(b=e,g=e?Ni(e[0][0],e[0][1],e[1][0],e[1][1]):H,T()):b},E.scale=function(e){return arguments.length?(o=+e,x()):o},E.translate=function(e){return arguments.length?(u=+e[0],a=+e[1],x()):[u,a]},E.center=function(e){return arguments.length?(f=e[0]%360*Ht,l=e[1]%360*Ht,x()):[f*Bt,l*Bt]},E.rotate=function(e){return arguments.length?(c=e[0]%360*Ht,h=e[1]%360*Ht,p=e.length>2?e[2]%360*Ht:0,x()):[c*Bt,h*Bt,p*Bt]},t.rebind(E,s,"precision"),function(){return n=e.apply(this,arguments),E.invert=n.invert&&S,x()}}function Yi(e){return Ki(e,function(t,n){e.point(t*Ht,n*Ht)})}function Zi(e,t){return[e,t]}function es(e,t){return[e>Mt?e-_t:e<-Mt?e+_t:e,t]}function ts(e,t,n){return e?t||n?ai(rs(e),is(t,n)):rs(e):t||n?is(t,n):es}function ns(e){return function(t,n){return t+=e,[t>Mt?t-_t:t<-Mt?t+_t:t,n]}}function rs(e){var t=ns(e);return t.invert=ns(-e),t}function is(e,t){function o(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*n+u*r;return[Math.atan2(a*i-l*s,u*n-f*r),qt(l*i+a*s)]}var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),s=Math.sin(t);return o.invert=function(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*i-a*s;return[Math.atan2(a*i+f*s,u*n+l*r),qt(l*n-u*r)]},o}function ss(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;if(i!=null){i=os(n,i),s=os(n,s);if(o>0?i<s:i>s)i+=o*_t}else i=e+o*_t,s=e-.5*a;for(var f,l=i;o>0?l>s:l<s;l-=a)u.point((f=zr([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function os(e,t){var n=jr(t);n[0]-=e,Ur(n);var r=It(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-At)%(2*Math.PI)}function us(e,n,r){var i=t.range(e,n-At,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function as(e,n,r){var i=t.range(e,n-At,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function fs(e){return e.source}function ls(e){return e.target}function cs(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(Wt(r-t)+i*o*Wt(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Bt,Math.atan2(o,Math.sqrt(r*r+i*i))*Bt]}:function(){return[e*Bt,t*Bt]};return d.distance=h,d}function ds(){function r(r,i){var s=Math.sin(i*=Ht),o=Math.cos(i),u=E((r*=Ht)-e),a=Math.cos(u);hs+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=n*s-t*o*a)*u),t*s+n*o*a),e=r,t=s,n=o}var e,t,n;ps.point=function(i,s){e=i*Ht,t=Math.sin(s*=Ht),n=Math.cos(s),ps.point=r},ps.lineEnd=function(){ps.point=ps.lineEnd=I}}function vs(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function ys(e,t){function o(e,t){s>0?t<-Pt+At&&(t=-Pt+At):t>Pt-At&&(t=Pt-At);var n=s/Math.pow(r(t),i);return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var n=Math.cos(e),r=function(e){return Math.tan(Mt/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),s=n*Math.pow(r(e),i)/i;return i?(o.invert=function(e,t){var n=s-t,r=jt(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(s/r,1/i))-Pt]},o):Es}function bs(e,t){function s(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return E(r)<At?Zi:(s.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-jt(r)*Math.sqrt(e*e+n*n)]},s)}function Es(e,t){return[e,Math.log(Math.tan(Mt/4+t/2))]}function Ss(e){var t=Qi(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(){var e=n.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.translate=function(){var e=r.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(s=e==null){var u=Mt*n(),a=r();i([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else s&&(o=null);return o},t.clipExtent(null)}function Ns(e,t){return[Math.log(Math.tan(Mt/4+t/2)),-e]}function Cs(e){return e[0]}function ks(e){return e[1]}function Ls(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&Ft(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function As(e,t){return e[0]-t[0]||e[1]-t[1]}function Ms(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function _s(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Ds(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Rs(){ao(this),this.edge=this.site=this.circle=null}function Us(e){var t=js.pop()||new Rs;return t.site=e,t}function zs(e){Zs(e),Bs.remove(e),js.push(e),ao(e)}function Ws(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];zs(e);var a=s;while(a.circle&&E(n-a.circle.x)<At&&E(r-a.circle.cy)<At)s=a.P,u.unshift(a),zs(a),a=s;u.unshift(a),Zs(a);var f=o;while(f.circle&&E(n-f.circle.x)<At&&E(r-f.circle.cy)<At)o=f.N,u.push(f),zs(f),f=o;u.push(f),Zs(f);var l=u.length,c;for(c=1;c<l;++c)f=u[c],a=u[c-1],so(f.edge,a.site,f.site,i);a=u[0],f=u[l-1],f.edge=ro(a.site,f.site,null,i),Ys(a),Ys(f)}function Xs(e){var t=e.x,n=e.y,r,i,s,o,u=Bs._;while(u){s=Vs(u,n)-t;if(s>At)u=u.L;else{o=t-$s(u,n);if(!(o>At)){s>-At?(r=u.P,i=u):o>-At?(r=u,i=u.N):r=i=u;break}if(!u.R){r=u;break}u=u.R}}var a=Us(e);Bs.insert(r,a);if(!r&&!i)return;if(r===i){Zs(r),i=Us(r.site),Bs.insert(a,i),a.edge=i.edge=ro(r.site,a.site),Ys(r),Ys(i);return}if(!i){a.edge=ro(r.site,a.site);return}Zs(r),Zs(i);var f=r.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=i.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};so(i.edge,f,d,w),a.edge=ro(f,e,null,w),i.edge=ro(e,d,null,w),Ys(r),Ys(i)}function Vs(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function $s(e,t){var n=e.N;if(n)return Vs(n,t);var r=e.site;return r.y===t?r.x:Infinity}function Js(e){this.site=e,this.edges=[]}function Ks(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],s,o,u,a,f=Hs,l=f.length,c,h,p,d,v,m;while(l--){c=f[l];if(!c||!c.prepare())continue;p=c.edges,d=p.length,h=0;while(h<d){m=p[h].end(),u=m.x,a=m.y,v=p[++h%d].start(),s=v.x,o=v.y;if(E(u-s)>At||E(a-o)>At)p.splice(h,0,new oo(io(c.site,m,E(u-t)<At&&i-a>At?{x:t,y:E(s-t)<At?o:i}:E(a-i)<At&&n-u>At?{x:E(o-i)<At?s:n,y:i}:E(u-n)<At&&a-r>At?{x:n,y:E(s-n)<At?o:r}:E(a-r)<At&&u-t>At?{x:E(o-r)<At?s:t,y:r}:null),c.site,null)),++d}}}function Qs(e,t){return t.angle-e.angle}function Gs(){ao(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ys(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,s=n.site;if(r===s)return;var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(h>=-Ot)return;var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=qs.pop()||new Gs;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;var y=null,b=Is._;while(b)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Is.insert(y,g),y||(Fs=g)}function Zs(e){var t=e.circle;t&&(t.P||(Fs=t.N),Is.remove(t),qs.push(t),ao(t),e.circle=null)}function eo(e){var t=Ps,n=xi(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!to(i,e)||!n(i)||E(i.a.x-i.b.x)<At&&E(i.a.y-i.b.y)<At)i.a=i.b=null,t.splice(r,1)}}function to(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],s=t[1][0],o=t[0][1],u=t[1][1],a=e.l,f=e.r,l=a.x,c=a.y,h=f.x,p=f.y,d=(l+h)/2,v=(c+p)/2,m,g;if(p===c){if(d<i||d>=s)return;if(l>h){if(!r)r={x:d,y:o};else if(r.y>=u)return;n={x:d,y:u}}else{if(!r)r={x:d,y:u};else if(r.y<o)return;n={x:d,y:o}}}else{m=(l-h)/(p-c),g=v-m*d;if(m<-1||m>1)if(l>h){if(!r)r={x:(o-g)/m,y:o};else if(r.y>=u)return;n={x:(u-g)/m,y:u}}else{if(!r)r={x:(u-g)/m,y:u};else if(r.y<o)return;n={x:(o-g)/m,y:o}}else if(c<p){if(!r)r={x:i,y:m*i+g};else if(r.x>=s)return;n={x:s,y:m*s+g}}else{if(!r)r={x:s,y:m*s+g};else if(r.x<i)return;n={x:i,y:m*i+g}}}return e.a=r,e.b=n,!0}function no(e,t){this.l=e,this.r=t,this.a=this.b=null}function ro(e,t,n,r){var i=new no(e,t);return Ps.push(i),n&&so(i,e,t,n),r&&so(i,t,e,r),Hs[e.i].edges.push(new oo(i,e,t)),Hs[t.i].edges.push(new oo(i,t,e)),i}function io(e,t,n){var r=new no(e,null);return r.a=t,r.b=n,Ps.push(r),r}function so(e,t,n,r){!e.a&&!e.b?(e.a=r,e.l=t,e.r=n):e.l===n?e.b=r:e.a=r}function oo(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function uo(){this._=null}function ao(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function fo(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function lo(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function co(e){while(e.L)e=e.L;return e}function ho(e,t){var n=e.sort(po).pop(),r,i,s;Ps=[],Hs=new Array(e.length),Bs=new uo,Is=new uo;for(;;){s=Fs;if(n&&(!s||n.y<s.y||n.y===s.y&&n.x<s.x)){if(n.x!==r||n.y!==i)Hs[n.i]=new Js(n),Xs(n),r=n.x,i=n.y;n=e.pop()}else{if(!s)break;Ws(s.arc)}}t&&(eo(t),Ks(t));var o={cells:Hs,edges:Ps};return Bs=Is=Ps=Hs=null,o}function po(e,t){return t.y-e.y||t.x-e.x}function mo(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function go(e){return e.x}function yo(e){return e.y}function bo(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function wo(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&wo(e,a[0],n,r,o,u),a[1]&&wo(e,a[1],o,r,i,u),a[2]&&wo(e,a[2],n,u,o,s),a[3]&&wo(e,a[3],o,u,i,s)}}function Eo(e,t,n,r,i,s,o){var u=Infinity,a;return function f(e,l,c,h,p){if(l>s||c>o||h<r||p<i)return;if(d=e.point){var d,v=t-e.x,m=n-e.y,g=v*v+m*m;if(g<u){var y=Math.sqrt(u=g);r=t-y,i=n-y,s=t+y,o=n+y,a=d}}var b=e.nodes,w=(l+h)*.5,E=(c+p)*.5,S=t>=w,x=n>=E;for(var T=x<<1|S,N=T+4;T<N;++T)if(e=b[T&3])switch(T&3){case 0:f(e,l,c,w,E);break;case 1:f(e,w,c,h,E);break;case 2:f(e,l,E,w,p);break;case 3:f(e,w,E,h,p)}}(e,r,i,s,o),a}function So(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,s=e.b,o=n.r-r,u=n.g-i,a=n.b-s;return function(e){return"#"+wn(Math.round(r+o*e))+wn(Math.round(i+u*e))+wn(Math.round(s+a*e))}}function xo(e,t){var n={},r={},i;for(i in e)i in t?n[i]=Lo(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}}function To(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function No(e,t){var n=Co.lastIndex=ko.lastIndex=0,r,i,s,o=-1,u=[],a=[];e+="",t+="";while((r=Co.exec(e))&&(i=ko.exec(t)))(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,a.push({i:o,x:To(r,i)})),n=ko.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n=0,r;n<t;++n)u[(r=a[n]).i]=r.x(e);return u.join("")})}function Lo(e,n){var r=t.interpolators.length,i;while(--r>=0&&!(i=t.interpolators[r](e,n)));return i}function Ao(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(Lo(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}}function Do(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Po(e){return function(t){return 1-e(1-t)}}function Ho(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Bo(e){return e*e}function jo(e){return e*e*e}function Fo(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Io(e){return function(t){return Math.pow(t,e)}}function qo(e){return 1-Math.cos(e*Pt)}function Ro(e){return Math.pow(2,10*(e-1))}function Uo(e){return 1-Math.sqrt(1-e*e)}function zo(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/_t*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*_t/t)}}function Wo(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Xo(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Vo(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,s=e.l,o=n.h-r,u=n.c-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return rn(r+o*e,i+u*e,s+a*e)+""}}function $o(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,s=e.l,o=n.h-r,u=n.s-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return en(r+o*e,i+u*e,s+a*e)+""}}function Jo(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,s=e.b,o=n.l-r,u=n.a-i,a=n.b-s;return function(e){return cn(r+o*e,i+u*e,s+a*e)+""}}function Ko(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Qo(e){var t=[e.a,e.b],n=[e.c,e.d],r=Yo(t),i=Go(t,n),s=Yo(Zo(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Bt,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Bt:0}function Go(e,t){return e[0]*t[0]+e[1]*t[1]}function Yo(e){var t=Math.sqrt(Go(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Zo(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function tu(e){return e.length?e.pop()+",":""}function nu(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:To(e[0],t[0])},{i:i-2,x:To(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function ru(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(tu(n)+"rotate(",null,")")-2,x:To(e,t)})):t&&n.push(tu(n)+"rotate("+t+")")}function iu(e,t,n,r){e!==t?r.push({i:n.push(tu(n)+"skewX(",null,")")-2,x:To(e,t)}):t&&n.push(tu(n)+"skewX("+t+")")}function su(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(tu(n)+"scale(",null,",",null,")");r.push({i:i-4,x:To(e[0],t[0])},{i:i-2,x:To(e[1],t[1])})}else(t[0]!==1||t[1]!==1)&&n.push(tu(n)+"scale("+t+")")}function ou(e,n){var r=[],i=[];return e=t.transform(e),n=t.transform(n),nu(e.translate,n.translate,r,i),ru(e.rotate,n.rotate,r,i),iu(e.skew,n.skew,r,i),su(e.scale,n.scale,r,i),e=n=null,function(e){var t=-1,n=i.length,s;while(++t<n)r[(s=i[t]).i]=s.x(e);return r.join("")}}function uu(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function au(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function fu(e){var t=e.source,n=e.target,r=cu(t,n),i=[t];while(t!==r)t=t.parent,i.push(t);var s=i.length;while(n!==r)i.splice(s,0,n),n=n.parent;return i}function lu(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function cu(e,t){if(e===t)return e;var n=lu(e),r=lu(t),i=n.pop(),s=r.pop(),o=null;while(i===s)o=i,i=n.pop(),s=r.pop();return o}function hu(e){e.fixed|=2}function pu(e){e.fixed&=-7}function du(e){e.fixed|=4,e.px=e.x,e.py=e.y}function vu(e){e.fixed&=-5}function mu(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;mu(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy}}if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function wu(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=Cu,e}function Eu(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0)n.push(i[r])}}}function Su(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(s=o.length)){var i=-1,s,o;while(++i<s)n.push(o[i])}}while((e=r.pop())!=null)t(e)}function xu(e){return e.children}function Tu(e){return e.value}function Nu(e,t){return t.value-e.value}function Cu(e){return t.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Lu(e){return e.x}function Au(e){return e.y}function Ou(e,t,n){e.y0=t,e.y=n}function Du(e){return t.range(e.length)}function Pu(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function Hu(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function Bu(e){return e.reduce(ju,0)}function ju(e,t){return e+t[1]}function Fu(e,t){return Iu(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Iu(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function qu(e){return[t.min(e),t.max(e)]}function Ru(e,t){return e.value-t.value}function Uu(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function zu(e,t){e._pack_next=t,t._pack_prev=e}function Wu(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Xu(e){function p(e){n=Math.min(e.x-e.r,n),r=Math.max(e.x+e.r,r),i=Math.min(e.y-e.r,i),s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(Vu),o=t[0],o.x=-o.r,o.y=0,p(o);if(h>1){u=t[1],u.x=u.r,u.y=0,p(u);if(h>2){a=t[2],Ku(o,u,a),p(a),Uu(o,a),o._pack_prev=a,Uu(a,u),u=o._pack_next;for(f=3;f<h;f++){Ku(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(Wu(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(Wu(c,a))break;d?(v<m||v==m&&u.r<o.r?zu(o,u=l):zu(o=c,u),f--):(Uu(o,a),u=a,p(a))}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++)a=t[f],a.x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach($u)}function Vu(e){e._pack_next=e._pack_prev=e}function $u(e){delete e._pack_next,delete e._pack_prev}function Ju(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)Ju(i[s],t,n,r)}}function Ku(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Qu(e,t){return e.parent==t.parent?1:2}function Gu(e){var t=e.children;return t.length?t[0]:e.t}function Yu(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function Zu(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ea(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function ta(e,t,n){return e.a.parent===t.parent?e.a:n}function na(e){return 1+t.max(e,function(e){return e.y})}function ra(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function ia(e){var t=e.children;return t&&t.length?ia(t[0]):e}function sa(e){var t=e.children,n;return t&&(n=t.length)?sa(t[n-1]):e}function oa(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function ua(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function aa(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function fa(e){return e.rangeExtent?e.rangeExtent():aa(e.range())}function la(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function ca(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ha(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:pa}function da(e,n,r,i){var s=[],o=[],u=0,a=Math.min(e.length,n.length)-1;e[a]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());while(++u<=a)s.push(r(e[u-1],e[u])),o.push(i(n[u-1],n[u]));return function(n){var r=t.bisect(e,n,1,a)-1;return o[r](s[r](n))}}function va(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?da:la,a=r?au:uu;return i=o(e,t,a,n),s=o(t,e,a,Lo),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(Ko)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return ba(e,t)},u.tickFormat=function(t,n){return wa(e,t,n)},u.nice=function(t){return ga(e,t),o()},u.copy=function(){return va(e,t,n,r)},o()}function ma(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function ga(e,t){return ca(e,ha(ya(e,t)[2])),ca(e,ha(ya(e,t)[2])),e}function ya(e,t){t==null&&(t=10);var n=aa(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function ba(e,n){return t.range.apply(t,ya(e,n))}function wa(e,n,r){var i=ya(e,n);if(r){var s=Xn.exec(r);s.shift();if(s[8]==="s"){var o=t.formatPrefix(Math.max(E(i[0]),E(i[1])));return s[7]||(s[7]="."+Sa(o.scale(i[2]))),s[8]="f",r=t.format(s.join("")),function(e){return r(o.scale(e))+o.symbol}}s[7]||(s[7]="."+xa(s[8],i)),r=s.join("")}else r=",."+Sa(i[2])+"f";return t.format(r)}function Sa(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function xa(e,t){var n=Sa(t[2]);return e in Ea?Math.abs(n-Sa(Math.max(E(t[0]),E(t[1]))))+ +(e!=="e"):n-(e==="%")*2}function Ta(e,n,r,i){function s(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(t){return e(s(t))}return u.invert=function(t){return o(e.invert(t))},u.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(s)),u):i},u.base=function(t){return arguments.length?(n=+t,e.domain(i.map(s)),u):n},u.nice=function(){var t=ca(i.map(s),r?Math:Ca);return e.domain(t),i=t.map(o),u},u.ticks=function(){var e=aa(i),t=[],u=e[0],a=e[1],f=Math.floor(s(u)),l=Math.ceil(s(a)),c=n%1?2:n;if(isFinite(l-f)){if(r){for(;f<l;f++)for(var h=1;h<c;h++)t.push(o(f)*h);t.push(o(f))}else{t.push(o(f));for(;f++<l;)for(var h=c-1;h>0;h--)t.push(o(f)*h)}for(f=0;t[f]<u;f++);for(l=t.length;t[l-1]>a;l--);t=t.slice(f,l)}return t},u.tickFormat=function(e,r){if(!arguments.length)return Na;arguments.length<2?r=Na:typeof r!="function"&&(r=t.format(r));var i=Math.max(1,n*e/u.ticks().length);return function(e){var t=e/o(Math.round(s(e)));return t*n<n-.5&&(t*=n),t<=i?r(e):""}},u.copy=function(){return Ta(e.copy(),n,r,i)},ma(u,e)}function ka(e,t,n){function s(t){return e(r(t))}var r=La(t),i=La(1/t);return s.invert=function(t){return i(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),s):n},s.ticks=function(e){return ba(n,e)},s.tickFormat=function(e,t){return wa(n,e,t)},s.nice=function(e){return s.domain(ga(n,e))},s.exponent=function(o){return arguments.length?(r=La(t=o),i=La(1/t),e.domain(n.map(r)),s):t},s.copy=function(){return ka(e.copy(),t,n)},ma(s,e)}function La(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Aa(e,n){function o(t){return i[((r.get(t)||(n.t==="range"?r.set(t,e.push(t)):NaN))-1)%i.length]}function u(n,r){return t.range(e.length).map(function(e){return n+r*e})}var r,i,s;return o.domain=function(t){if(!arguments.length)return e;e=[],r=new T;var i=-1,s=t.length,u;while(++i<s)r.has(u=t[i])||r.set(u,e.push(u));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(i=e,s=0,n={t:"range",a:arguments},o):i},o.rangePoints=function(t,r){arguments.length<2&&(r=0);var a=t[0],f=t[1],l=e.length<2?(a=(a+f)/2,0):(f-a)/(e.length-1+r);return i=u(a+l*r/2,l),s=0,n={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(t,r){arguments.length<2&&(r=0);var a=t[0],f=t[1],l=e.length<2?(a=f=Math.round((a+f)/2),0):(f-a)/(e.length-1+r)|0;return i=u(a+Math.round(l*r/2+(f-a-(e.length-1+r)*l)/2),l),s=0,n={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(t,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=t[1]<t[0],l=t[f-0],c=t[1-f],h=(c-l)/(e.length-r+2*a);return i=u(l+h*a,h),f&&i.reverse(),s=h*(1-r),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(t,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=t[1]<t[0],l=t[f-0],c=t[1-f],h=Math.floor((c-l)/(e.length-r+2*a));return i=u(l+Math.round((c-l-(e.length-r)*h)/2),h),f&&i.reverse(),s=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return s},o.rangeExtent=function(){return aa(n.a[0])},o.copy=function(){return Aa(e,n)},o.domain(e)}function Pa(e,n){function i(){var i=0,o=n.length;r=[];while(++i<o)r[i-1]=t.quantile(e,i/o);return s}function s(e){if(!isNaN(e=+e))return n[t.bisect(r,e)]}var r;return s.domain=function(t){return arguments.length?(e=t.map(m).filter(g).sort(v),i()):e},s.range=function(e){return arguments.length?(n=e,i()):n},s.quantiles=function(){return r},s.invertExtent=function(t){return t=n.indexOf(t),t<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]},s.copy=function(){return Pa(e,n)},i()}function Ha(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/r+e,[t,t+1/r]},s.copy=function(){return Ha(e,t,n)},o()}function Ba(e,n){function r(r){if(r<=r)return n[t.bisect(e,r)]}return r.domain=function(t){return arguments.length?(e=t,r):e},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},r.copy=function(){return Ba(e,n)},r}function ja(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return ba(e,t)},t.tickFormat=function(t,n){return wa(e,t,n)},t.copy=function(){return ja(e)},t}function Fa(){return 0}function qa(e){return e.innerRadius}function Ra(e){return e.outerRadius}function Ua(e){return e.startAngle}function za(e){return e.endAngle}function Wa(e){return e&&e.padAngle}function Xa(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Va(e,t,n,r,i){var s=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/Math.sqrt(s*s+o*o),a=u*o,f=-u*s,l=e[0]+a,c=e[1]+f,h=t[0]+a,p=t[1]+f,d=(l+h)/2,v=(c+p)/2,m=h-l,g=p-c,y=m*m+g*g,b=n-r,w=l*p-h*c,E=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),S=(w*g-m*E)/y,x=(-w*m-g*E)/y,T=(w*g+m*E)/y,N=(-w*m+g*E)/y,C=S-d,k=x-v,L=T-d,A=N-v;return C*C+k*k>L*L+A*A&&(S=T,x=N),[[S-a,x-f],[S*n/b,x*n/b]]}function $a(e){function u(s){function d(){u.push("M",i(e(a),o))}var u=[],a=[],f=-1,l=s.length,c,h=kn(t),p=kn(n);while(++f<l)r.call(this,c=s[f],f)?a.push([+h.call(this,c,f),+p.call(this,c,f)]):a.length&&(d(),a=[]);return a.length&&d(),u.length?u.join(""):null}var t=Cs,n=ks,r=fi,i=Ka,s=i.key,o=.7;return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.interpolate=function(e){return arguments.length?(typeof e=="function"?s=i=e:s=(i=Ja.get(e)||Ka).key,u):s},u.tension=function(e){return arguments.length?(o=e,u):o},u}function Ka(e){return e.length>1?e.join("L"):e+"Z"}function Qa(e){return e.join("L")+"Z"}function Ga(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Ya(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Za(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function ef(e,t){return e.length<4?Ka(e):e[1]+rf(e.slice(1,-1),sf(e,t))}function tf(e,t){return e.length<3?Qa(e):e[0]+rf((e.push(e[0]),e),sf([e[e.length-2]].concat(e,[e[1]]),t))}function nf(e,t){return e.length<3?Ka(e):e[0]+rf(e,sf(e,t))}function rf(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Ka(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function sf(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function of(e){if(e.length<3)return Ka(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",lf(pf,o),",",lf(pf,u)];e.push(e[n-1]);while(++t<=n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),df(a,o,u);return e.pop(),a.push("L",r),a.join("")}function uf(e){if(e.length<4)return Ka(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(lf(pf,s)+","+lf(pf,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),df(t,s,o);return t.join("")}function af(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[lf(pf,o),",",lf(pf,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),df(t,o,u);return t.join("")}function ff(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o)}return of(e)}function lf(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function df(e,t,n){e.push("C",lf(cf,t),",",lf(cf,n),",",lf(hf,t),",",lf(hf,n),",",lf(pf,t),",",lf(pf,n))}function vf(e,t){return(t[1]-e[1])/(t[0]-e[0])}function mf(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=vf(i,s);while(++t<n)r[t]=(o+(o=vf(i=s,s=e[t+1])))/2;return r[t]=o,r}function gf(e){var t=[],n,r,i,s,o=mf(e),u=-1,a=e.length-1;while(++u<a)n=vf(e[u],e[u+1]),E(n)<At?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function yf(e){return e.length<3?Ka(e):e[0]+rf(e,gf(e))}function bf(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]-Pt,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function wf(e){function c(u){function x(){c.push("M",o(e(p),l),f,a(e(h.reverse()),l),"Z")}var c=[],h=[],p=[],d=-1,v=u.length,m,g=kn(t),y=kn(r),b=t===n?function(){return E}:kn(n),w=r===i?function(){return S}:kn(i),E,S;while(++d<v)s.call(this,m=u[d],d)?(h.push([E=+g.call(this,m,d),S=+y.call(this,m,d)]),p.push([+b.call(this,m,d),+w.call(this,m,d)])):h.length&&(x(),h=[],p=[]);return h.length&&x(),c.length?c.join(""):null}var t=Cs,n=Cs,r=0,i=ks,s=fi,o=Ka,u=o.key,a=o,f="L",l=.7;return c.x=function(e){return arguments.length?(t=n=e,c):n},c.x0=function(e){return arguments.length?(t=e,c):t},c.x1=function(e){return arguments.length?(n=e,c):n},c.y=function(e){return arguments.length?(r=i=e,c):i},c.y0=function(e){return arguments.length?(r=e,c):r},c.y1=function(e){return arguments.length?(i=e,c):i},c.defined=function(e){return arguments.length?(s=e,c):s},c.interpolate=function(e){return arguments.length?(typeof e=="function"?u=o=e:u=(o=Ja.get(e)||Ka).key,a=o.reverse||o,f=o.closed?"M":"L",c):u},c.tension=function(e){return arguments.length?(l=e,c):l},c}function Ef(e){return e.radius}function Sf(e){return[e.x,e.y]}function xf(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Pt;return[n*Math.cos(r),n*Math.sin(r)]}}function Tf(){return 64}function Nf(){return"circle"}function Cf(e){var t=Math.sqrt(e/Mt);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Mf(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function _f(e,t,n){return V(e,Df),e.namespace=t,e.id=n,e}function jf(e,t,n,r){var i=e.id,s=e.namespace;return vt(e,typeof n=="function"?function(e,o,u){e[s][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[s][i].tween.set(t,n)}))}function Ff(e){return e==null&&(e=""),function(){this.textContent=e}}function If(e){return e==null?"__transition__":"__transition_"+e+"__"}function qf(e,t,n,r,i){function h(e){var t=o.delay;a.t=t+u;if(t<=e)return p(e-t);a.c=p}function p(n){var i=s.active,h=s[i];h&&(h.timer.c=null,h.timer.t=NaN,--s.count,delete s[i],h.event&&h.event.interrupt.call(e,e.__data__
,h.index));for(var p in s)if(+p<r){var v=s[p];v.timer.c=null,v.timer.t=NaN,--s.count,delete s[p]}a.c=d,jn(function(){return a.c&&d(n||1)&&(a.c=null,a.t=NaN),1},0,u),s.active=r,o.event&&o.event.start.call(e,e.__data__,t),c=[],o.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&c.push(r)}),l=o.ease,f=o.duration}function d(i){var u=i/f,a=l(u),h=c.length;while(h>0)c[--h].call(e,a);if(u>=1)return o.event&&o.event.end.call(e,e.__data__,t),--s.count?delete s[r]:delete e[n],1}var s=e[n]||(e[n]={active:0,count:0}),o=s[r],u,a,f,l,c;o||(u=i.time,a=jn(h,0,u),o=s[r]={tween:new T,time:u,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++s.count)}function zf(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Wf(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Qf(e){return e.toISOString()}function Gf(e,n,r){function i(t){return e(t)}function s(e,r){var i=e[1]-e[0],s=i/r,o=t.bisect(Zf,s);return o==Zf.length?[n.year,ya(e.map(function(e){return e/31536e6}),r)[2]]:o?n[s/Zf[o-1]<Zf[o]/s?o-1:o]:[nl,ya(e,r)[2]]}return i.invert=function(t){return Yf(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Yf)},i.nice=function(e,t){function u(n){return!isNaN(n)&&!e.range(n,Yf(+n+1),t).length}var n=i.domain(),r=aa(n),o=e==null?s(r,10):typeof e=="number"&&s(r,e);return o&&(e=o[0],t=o[1]),i.domain(ca(n,t>1?{floor:function(t){while(u(t=e.floor(t)))t=Yf(t-1);return t},ceil:function(t){while(u(t=e.ceil(t)))t=Yf(+t+1);return t}}:e))},i.ticks=function(e,t){var n=aa(i.domain()),r=e==null?s(n,10):typeof e=="number"?s(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Yf(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return r},i.copy=function(){return Gf(e.copy(),n,r)},ma(i,e)}function Yf(e){return new Date(e)}function sl(e){return JSON.parse(e.responseText)}function ol(e){var t=s.createRange();return t.selectNode(s.body),t.createContextualFragment(e.responseText)}var t={version:"3.5.16"},r=[].slice,i=function(e){return r.call(e)},s=this.document;if(s)try{i(s.documentElement.childNodes)[0].nodeType}catch(a){i=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}Date.now||(Date.now=function(){return+(new Date)});if(s)try{s.createElement("DIV").style.setProperty("opacity",0,"")}catch(f){var l=this.Element.prototype,c=l.setAttribute,h=l.setAttributeNS,p=this.CSSStyleDeclaration.prototype,d=p.setProperty;l.setAttribute=function(e,t){c.call(this,e,t+"")},l.setAttributeNS=function(e,t,n){h.call(this,e,t,n+"")},p.setProperty=function(e,t,n){d.call(this,e,t+"",n)}}t.ascending=v,t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},t.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r)if((s=t.call(e,e[n],n))!=null&&s>=s){i=s;break}while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},t.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r)if((s=t.call(e,e[n],n))!=null&&s>=s){i=s;break}while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},t.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r)if((s=e[n])!=null&&s>=s){i=o=s;break}while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r)if((s=t.call(e,e[n],n))!=null&&s>=s){i=o=s;break}while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},t.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)g(i=+e[s])&&(n+=i);else while(++s<r)g(i=+t.call(e,e[s],s))&&(n+=i);return n},t.mean=function(e,t){var n=0,r=e.length,i,s=-1,o=r;if(arguments.length===1)while(++s<r)g(i=m(e[s]))?n+=i:--o;else while(++s<r)g(i=m(t.call(e,e[s],s)))?n+=i:--o;if(o)return n/o},t.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},t.median=function(e,n){var r=[],i=e.length,s,o=-1;if(arguments.length===1)while(++o<i)g(s=m(e[o]))&&r.push(s);else while(++o<i)g(s=m(n.call(e,e[o],o)))&&r.push(s);if(r.length)return t.quantile(r.sort(v),.5)},t.variance=function(e,t){var n=e.length,r=0,i,s,o=0,u=-1,a=0;if(arguments.length===1)while(++u<n)g(i=m(e[u]))&&(s=i-r,r+=s/++a,o+=s*(i-r));else while(++u<n)g(i=m(t.call(e,e[u],u)))&&(s=i-r,r+=s/++a,o+=s*(i-r));if(a>1)return o/(a-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var b=y(v);t.bisectLeft=b.left,t.bisect=t.bisectRight=b.right,t.bisector=function(e){return y(e.length===1?function(t,n){return v(e(t),n)}:e)},t.shuffle=function(e,t,n){(r=arguments.length)<3&&(n=e.length,r<2&&(t=0));var r=n-t,i,s;while(r)s=Math.random()*r--|0,i=e[r+t],e[r+t]=e[s+t],e[s+t]=i;return e},t.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r},t.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],s=new Array(n<0?0:n);while(t<n)s[t]=[r=i,i=e[++t]];return s},t.transpose=function(e){if(!(o=e.length))return[];for(var n=-1,r=t.min(e,w),i=new Array(r);++n<r;)for(var s=-1,o,u=i[n]=new Array(o);++s<o;)u[s]=e[s][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(e){var t=[];for(var n in e)t.push(n);return t},t.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},t.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},t.merge=function(e){var t=e.length,n,r=-1,i=0,s,o;while(++r<t)i+=e[r].length;s=new Array(i);while(--t>=0){o=e[t],n=o.length;while(--n>=0)s[--i]=o[n]}return s};var E=Math.abs;t.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=S(E(n)),s=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++s)>t)r.push(o/i);else while((o=e+n*++s)<t)r.push(o/i);return r},t.map=function(e,t){var n=new T;if(e instanceof T)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r=-1,i=e.length,s;if(arguments.length===1)while(++r<i)n.set(r,e[r]);else while(++r<i)n.set(t.call(e,s=e[r],r),s)}else for(var o in e)n.set(o,e[o]);return n};var N="__proto__",C="\0";x(T,{has:A,get:function(e){return this._[k(e)]},set:function(e,t){return this._[k(e)]=t},remove:O,keys:M,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:L(t),value:this._[t]});return e},size:_,empty:D,forEach:function(e){for(var t in this._)e.call(this,L(t),this._[t])}}),t.nest=function(){function o(t,r,u){if(u>=n.length)return s?s.call(e,r):i?r.sort(i):r;var a=-1,f=r.length,l=n[u++],c,h,p,d=new T,v;while(++a<f)(v=d.get(c=l(h=r[a])))?v.push(h):d.set(c,[h]);return t?(h=t(),p=function(e,n){h.set(e,o(t,n,u))}):(h={},p=function(e,n){h[e]=o(t,n,u)}),d.forEach(p),h}function u(e,t){if(t>=n.length)return e;var i=[],s=r[t++];return e.forEach(function(e,n){i.push({key:e,values:u(n,t)})}),s?i.sort(function(e,t){return s(e.key,t.key)}):i}var e={},n=[],r=[],i,s;return e.map=function(e,t){return o(t,e,0)},e.entries=function(e){return u(o(t.map,e,0),0)},e.key=function(t){return n.push(t),e},e.sortKeys=function(t){return r[n.length-1]=t,e},e.sortValues=function(t){return i=t,e},e.rollup=function(t){return s=t,e},e},t.set=function(e){var t=new P;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},x(P,{has:A,add:function(e){return this._[k(e+="")]=!0,e},remove:O,values:M,size:_,empty:D,forEach:function(e){for(var t in this._)e.call(this,L(t))}}),t.behavior={},t.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=B(e,t,t[i]);return e};var F=["webkit","ms","moz","Moz","o","O"];t.dispatch=function(){var e=new q,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=R(e);return e},q.prototype.on=function(e,t){var n=e.indexOf("."),r="";n>=0&&(r=e.slice(n+1),e=e.slice(0,n));if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},t.event=null,t.requote=function(e){return e.replace(X,"\\$&")};var X=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},J=function(e,t){return t.querySelector(e)},K=function(e,t){return t.querySelectorAll(e)},Q=function(e,t){var n=e.matches||e[j(e,"matchesSelector")];return Q=function(e,t){return n.call(e,t)},Q(e,t)};typeof Sizzle=="function"&&(J=function(e,t){return Sizzle(e,t)[0]||null},K=Sizzle,Q=Sizzle.matchesSelector),t.selection=function(){return t.select(s.documentElement)};var G=t.selection.prototype=[];G.select=function(e){var t=[],n,r,i,s;e=Y(e);for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a,o)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return $(t)},G.selectAll=function(e){var t=[],n,r;e=Z(e);for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(r=u[a])t.push(n=i(e.call(r,r.__data__,a,s))),n.parentNode=r;return $(t)};var et="http://www.w3.org/1999/xhtml",tt={svg:"http://www.w3.org/2000/svg",xhtml:et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:tt,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),tt.hasOwnProperty(n)?{space:tt[n],local:e}:e}},G.attr=function(e,n){if(arguments.length<2){if(typeof e=="string"){var r=this.node();return e=t.ns.qualify(e),e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(nt(n,e[n]));return this}return this.each(nt(e,n))},G.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=st(e)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.getAttribute("class");while(++i<r)if(!it(e[i]).test(t))return!1}return!0}for(t in e)this.each(ot(t,e[t]));return this}return this.each(ot(e,t))},G.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.each(at(n,e[n],t));return this}if(r<2){var i=this.node();return u(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(at(e,t,n))},G.property=function(e,t){if(arguments.length<2){if(typeof e=="string")return this.node()[e];for(t in e)this.each(ft(t,e[t]));return this}return this.each(ft(e,t))},G.text=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},G.html=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},G.append=function(e){return e=lt(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},G.insert=function(e,t){return e=lt(e),t=Y(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},G.remove=function(){return this.each(ct)},G.data=function(e,t){function o(e,n){var r,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(s),c=new Array(s),h=new Array(i),p,d;if(t){var v=new T,m=new Array(i),g;for(r=-1;++r<i;)if(p=e[r])v.has(g=t.call(p,p.__data__,r))?h[r]=p:v.set(g,p),m[r]=g;for(r=-1;++r<s;)(p=v.get(g=t.call(n,d=n[r],r)))?p!==!0&&(l[r]=p,p.__data__=d):c[r]=ht(d),v.set(g,!0);for(r=-1;++r<i;)r in m&&v.get(m[r])!==!0&&(h[r]=e[r])}else{for(r=-1;++r<o;)p=e[r],d=n[r],p?(p.__data__=d,l[r]=p):c[r]=ht(d);for(;r<s;++r)c[r]=ht(n[r]);for(;r<i;++r)h[r]=e[r]}c.update=l,c.parentNode=l.parentNode=h.parentNode=e.parentNode,u.push(c),a.push(l),f.push(h)}var n=-1,r=this.length,i,s;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r)if(s=i[n])e[n]=s.__data__;return e}var u=mt([]),a=$([]),f=$([]);if(typeof e=="function")while(++n<r)o(i=this[n],e.call(i,i.parentNode.__data__,n));else while(++n<r)o(i=this[n],e);return a.enter=function(){return u},a.exit=function(){return f},a},G.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},G.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=pt(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u,s)&&n.push(i)}return $(t)},G.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},G.sort=function(e){e=dt.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},G.each=function(e){return vt(this,function(t,n,r){e.call(t,t.__data__,n,r)})},G.call=function(e){var t=i(arguments);return e.apply(t[0]=this,t),this},G.empty=function(){return!this.node()},G.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null},G.size=function(){var e=0;return vt(this,function(){++e}),e};var gt=[];t.selection.enter=mt,t.selection.enter.prototype=gt,gt.append=G.append,gt.empty=G.empty,gt.node=G.node,gt.call=G.call,gt.size=G.size,gt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f,u)),r.__data__=o.__data__):n.push(null)}return $(t)},gt.insert=function(e,t){return arguments.length<2&&(t=yt(this)),G.insert.call(this,e,t)},t.select=function(e){var t;return typeof e=="string"?(t=[J(e,s)],t.parentNode=s.documentElement):(t=[e],t.parentNode=o(e)),$([t])},t.selectAll=function(e){var t;return typeof e=="string"?(t=i(K(e,s)),t.parentNode=s.documentElement):(t=i(e),t.parentNode=null),$([t])},G.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t=!1);for(n in e)this.each(bt(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(bt(e,t,n))};var wt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});s&&wt.forEach(function(e){"on"+e in s&&wt.remove(e)});var xt,Tt=0;t.mouse=function(e){return kt(e,z())};var Ct=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;t.touch=function(e,t,n){arguments.length<3&&(n=t,t=z().changedTouches);if(t)for(var r=0,i=t.length,s;r<i;++r)if((s=t[r]).identifier===n)return kt(e,s)},t.behavior.drag=function(){function s(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function o(r,i,s,o,u){return function(){function b(){var e=i(l,p),t,n;if(!e)return;t=e[0]-y[0],n=e[1]-y[1],h|=t|n,y=e,c({type:"drag",x:e[0]+v[0],y:e[1]+v[1],dx:t,dy:n})}function w(){if(!i(l,p))return;m.on(o+d,null).on(u+d,null),g(h),c({type:"dragend"})}var a=this,f=t.event.target.correspondingElement||t.event.target,l=a.parentNode,c=e.of(a,arguments),h=0,p=r(),d=".drag"+(p==null?"":"-"+p),v,m=t.select(s(f)).on(o+d,b).on(u+d,w),g=Nt(f),y=i(l,p);n?(v=n.apply(a,arguments),v=[v.x-y[0],v.y-y[1]]):v=[0,0],c({type:"dragstart"})}}var e=W(s,"drag","dragstart","dragend"),n=null,r=o(I,t.mouse,u,"mousemove","mouseup"),i=o(Lt,t.touch,H,"touchmove","touchend");return s.origin=function(e){return arguments.length?(n=e,s):n},t.rebind(s,e,"on")},t.touches=function(e,t){return arguments.length<2&&(t=z().touches),t?i(t).map(function(t){var n=kt(e,t);return n.identifier=t.identifier,n}):[]};var At=1e-6,Ot=At*At,Mt=Math.PI,_t=2*Mt,Dt=_t-At,Pt=Mt/2,Ht=Mt/180,Bt=180/Mt,Xt=Math.SQRT2,Vt=2,$t=4;t.interpolateZoom=function(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2],a=s-n,f=o-r,l=a*a+f*f,c,h;if(l<Ot)h=Math.log(u/i)/Xt,c=function(e){return[n+e*a,r+e*f,i*Math.exp(Xt*e*h)]};else{var p=Math.sqrt(l),d=(u*u-i*i+$t*l)/(2*i*Vt*p),v=(u*u-i*i-$t*l)/(2*u*Vt*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);h=(g-m)/Xt,c=function(e){var t=e*h,s=Ut(m),o=i/(Vt*p)*(s*zt(Xt*t+m)-Rt(m));return[n+o*a,r+o*f,i*s/Ut(Xt*t+m)]}}return c.duration=h*1e3,c},t.behavior.zoom=function(){function S(e){e.on(c,_).on(Qt+".zoom",P).on("dblclick.zoom",H).on(v,D)}function x(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function T(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function N(t){e.k=Math.max(a[0],Math.min(a[1],t))}function C(t,n){n=T(n),e.x+=t[0]-n[0],e.y+=t[1]-n[1]}function k(n,i,s,o){n.__chart__={x:e.x,y:e.y,k:e.k},N(Math.pow(2,o)),C(r=i,s),n=t.select(n),f>0&&(n=n.transition().duration(f)),n.call(S.event)}function L(){b&&b.domain(y.range().map(function(t){return(t-e.x)/e.k}).map(y.invert)),E&&E.domain(w.range().map(function(t){return(t-e.y)/e.k}).map(w.invert))}function A(e){l++||e({type:"zoomstart"})}function O(t){L(),t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function M(e){--l||(e({type:"zoomend"}),r=null)}function _(){function a(){r=1,C(t.mouse(e),s),O(n)}function f(){i.on(h,null).on(p,null),o(r),M(n)}var e=this,n=g.of(e,arguments),r=0,i=t.select(u(e)).on(h,a).on(p,f),s=x(t.mouse(e)),o=Nt(e);Of.call(e),A(n)}function D(){function d(){var r=t.touches(n);return o=e.k,r.forEach(function(e){e.identifier in i&&(i[e.identifier]=x(e))}),r}function y(){var r=t.event.target;t.select(r).on(a,b).on(f,w),l.push(r);var o=t.event.changedTouches;for(var u=0,c=o.length;u<c;++u)i[o[u].identifier]=null;var h=d(),p=Date.now();if(h.length===1){if(p-m<500){var v=h[0];k(n,v,i[v.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1),U()}m=p}else if(h.length>1){var v=h[0],g=h[1],y=v[0]-g[0],E=v[1]-g[1];s=y*y+E*E}}function b(){var e=t.touches(n),u,a,f,l;Of.call(n);for(var c=0,h=e.length;c<h;++c,l=null){f=e[c];if(l=i[f.identifier]){if(a)break;u=f,a=l}}if(l){var p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p,d=s&&Math.sqrt(p/s);u=[(u[0]+f[0])/2,(u[1]+f[1])/2],a=[(a[0]+l[0])/2,(a[1]+l[1])/2],N(d*o)}m=null,C(u,a),O(r)}function w(){if(t.event.touches.length){var e=t.event.changedTouches;for(var n=0,s=e.length;n<s;++n)delete i[e[n].identifier];for(var o in i)return void d()}t.selectAll(l).on(u,null),h.on(c,_).on(v,D),p(),M(r)}var n=this,r=g.of(n,arguments),i={},s=0,o,u=".zoom-"+t.event.changedTouches[0].identifier,a="touchmove"+u,f="touchend"+u,l=[],h=t.select(n),p=Nt(n);y(),A(r),h.on(c,null).on(v,y)}function P(){var s=g.of(this,arguments);d?clearTimeout(d):(Of.call(this),n=x(r=i||t.mouse(this)),A(s)),d=setTimeout(function(){d=null,M(s)},50),U(),N(Math.pow(2,Kt()*.002)*e.k),C(r,n),O(s)}function H(){var n=t.mouse(this),r=Math.log(e.k)/Math.LN2;k(this,n,x(n),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var e={x:0,y:0,k:1},n,r,i,o=[960,500],a=Jt,f=250,l=0,c="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",d,v="touchstart.zoom",m,g=W(S,"zoomstart","zoom","zoomend"),y,b,w,E;return Qt||(Qt="onwheel"in s?(Kt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in s?(Kt=function(){return t.event.wheelDelta},"mousewheel"):(Kt=function(){return-t.event.detail},"MozMousePixelScroll")),S.event=function(n){n.each(function(){var n=g.of(this,arguments),i=e;Hf?t.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1},A(n)}).tween("zoom:zoom",function(){var s=o[0],u=o[1],a=r?r[0]:s/2,f=r?r[1]:u/2,l=t.interpolateZoom([(a-e.x)/e.k,(f-e.y)/e.k,s/e.k],[(a-i.x)/i.k,(f-i.y)/i.k,s/i.k]);return function(t){var r=l(t),i=s/r[2];this.__chart__=e={x:a-r[0]*i,y:f-r[1]*i,k:i},O(n)}}).each("interrupt.zoom",function(){M(n)}).each("end.zoom",function(){M(n)}):(this.__chart__=e,A(n),O(n),M(n))})},S.translate=function(t){return arguments.length?(e={x:+t[0],y:+t[1],k:e.k},L(),S):[e.x,e.y]},S.scale=function(t){return arguments.length?(e={x:e.x,y:e.y,k:null},N(+t),L(),S):e.k},S.scaleExtent=function(e){return arguments.length?(a=e==null?Jt:[+e[0],+e[1]],S):a},S.center=function(e){return arguments.length?(i=e&&[+e[0],+e[1]],S):i},S.size=function(e){return arguments.length?(o=e&&[+e[0],+e[1]],S):o},S.duration=function(e){return arguments.length?(f=+e,S):f},S.x=function(t){return arguments.length?(b=t,y=t.copy(),e={x:0,y:0,k:1},S):b},S.y=function(t){return arguments.length?(E=t,w=t.copy(),e={x:0,y:0,k:1},S):E},t.rebind(S,g,"on")};var Jt=[0,Infinity],Kt,Qt;t.color=Gt,Gt.prototype.toString=function(){return this.rgb()+""},t.hsl=Yt;var Zt=Yt.prototype=new Gt;Zt.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Yt(this.h,this.s,this.l/e)},Zt.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Yt(this.h,this.s,e*this.l)},Zt.rgb=function(){return en(this.h,this.s,this.l)},t.hcl=tn;var nn=tn.prototype=new Gt;nn.brighter=function(e){return new tn(this.h,this.c,Math.min(100,this.l+on*(arguments.length?e:1)))},nn.darker=function(e){return new tn(this.h,this.c,Math.max(0,this.l-on*(arguments.length?e:1)))},nn.rgb=function(){return rn(this.h,this.c,this.l).rgb()},t.lab=sn;var on=18,un=.95047,an=1,fn=1.08883,ln=sn.prototype=new Gt;ln.brighter=function(e){return new sn(Math.min(100,this.l+on*(arguments.length?e:1)),this.a,this.b)},ln.darker=function(e){return new sn(Math.max(0,this.l-on*(arguments.length?e:1)),this.a,this.b)},ln.rgb=function(){return cn(this.l,this.a,this.b)},t.rgb=mn;var bn=mn.prototype=new Gt;bn.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?new mn(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new mn(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e)))},bn.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new mn(e*this.r,e*this.g,e*this.b)},bn.hsl=function(){return Sn(this.r,this.g,this.b)},bn.toString=function(){return"#"+wn(this.r)+wn(this.g)+wn(this.b)};var Cn=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Cn.forEach(function(e,t){Cn.set(e,gn(t))}),t.functor=kn,t.xhr=Ln(H),t.dsv=function(e,t){function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=An(e,t,n==null?s:o(n),r);return i.row=function(e){return arguments.length?i.response((n=e)==null?s:o(e)):n},i}function s(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function u(t){return t.map(a).join(e)}function a(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);return i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},i.parseRows=function(e,t){function c(){if(u>=o)return i;if(l)return l=!1,n;var t=u;if(e.charCodeAt(t)===34){var s=t;while(s++<o)if(e.charCodeAt(s)===34){if(e.charCodeAt(s+1)!==34)break;++s}u=s+2;var a=e.charCodeAt(s+1);return a===13?(l=!0,e.charCodeAt(s+2)===10&&++u):a===10&&(l=!0),e.slice(t+1,s).replace(/""/g,'"')}while(u<o){var a=e.charCodeAt(u++),f=1;if(a===10)l=!0;else if(a===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(a!==r)continue;return e.slice(t,u-f)}return e.slice(t)}var n={},i={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==i){var h=[];while(f!==n&&f!==i)h.push(f),f=c();if(t&&(h=t(h,a++))==null)continue;s.push(h)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new P,r=[];return t.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(a).join(e)].concat(t.map(function(t){return r.map(function(e){return a(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(u).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv(" ","text/tab-separated-values");var _n,Dn,Pn,Hn,Bn=this[j(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};t.timer=function(){jn.apply(this,arguments)},t.timer.flush=function(){In(),qn()},t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Un=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(zn);t.formatPrefix=function(e,n){var r=0;if(e=+e)e<0&&(e*=-1),n&&(e=t.round(e,Rn(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3));return Un[8+r/3]};var Xn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Vn=t.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,n){return(e=t.round(e,Rn(e,n))).toFixed(Math.max(0,Math.min(20,Rn(e*(1+1e-15),n))))}}),Jn=t.time={},Kn=Date;Qn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Gn.setUTCDate.apply(this._,arguments)},setDay:function(){Gn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Gn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Gn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Gn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Gn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Gn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Gn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Gn.setTime.apply(this._,arguments)}};var Gn=Date.prototype;Jn.year=Yn(function(e){return e=Jn.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Jn.years=Jn.year.range,Jn.years.utc=Jn.year.utc.range,Jn.day=Yn(function(e){var t=new Kn(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Jn.days=Jn.day.range,Jn.days.utc=Jn.day.utc.range,Jn.dayOfYear=function(e){var t=Jn.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Jn[e]=Yn(function(e){return(e=Jn.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Jn.year(e).getDay();return Math.floor((Jn.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Jn[e+"s"]=n.range,Jn[e+"s"].utc=n.utc.range,Jn[e+"OfYear"]=function(e){var n=Jn.year(e).getDay();return Math.floor((Jn.dayOfYear(e)+(n+t)%7)/7)}}),Jn.week=Jn.sunday,Jn.weeks=Jn.sunday.range,Jn.weeks.utc=Jn.sunday.utc.range,Jn.weekOfYear=Jn.sundayOfYear;var tr={"-":"",_:" ",0:"0"},nr=/^\s*\d+/,rr=/^%/;t.locale=function(e){return{numberFormat:Wn(e),timeFormat:er(e)}};var Tr=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=Tr.numberFormat,t.geo={},Nr.prototype={s:0,t:0,add:function(e){kr(e,this.t,Cr),kr(Cr.s,this.s,this),this.s?this.t+=Cr.t:this.s=Cr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cr=new Nr;t.geo.stream=function(e,t){e&&Ar.hasOwnProperty(e.type)?Ar[e.type](e,t):Lr(e,t)};var Ar={Feature:function(e,t){Lr(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Lr(n[r].geometry,t)}},Or={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Mr(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Mr(n[r],t,0)},Polygon:function(e,t){_r(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)_r(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Lr(n[r],t)}};t.geo.area=function(e){return Dr=0,t.geo.stream(e,Hr),Dr};var Dr,Pr=new Nr,Hr={sphere:function(){Dr+=4*Mt},point:I,lineStart:I,lineEnd:I,polygonStart:function(){Pr.reset(),Hr.lineStart=Br},polygonEnd:function(){var e=2*Pr;Dr+=e<0?4*Mt+e:e,Hr.lineStart=Hr.lineEnd=Hr.point=I}};t.geo.bounds=function(){function p(t,s){l.push(c=[e=t,r=t]),s<n&&(n=s),s>i&&(i=s)}function d(t,o){var u=jr([t*Ht,o*Ht]);if(a){var f=Ir(a,u),l=[f[1],-f[0],0],c=Ir(l,f);Ur(c),c=zr(c);var h=t-s,d=h>0?1:-1,v=c[0]*Bt*d,m=E(h)>180;if(m^(d*s<v&&v<d*t)){var g=c[1]*Bt;g>i&&(i=g)}else if(v=(v+360)%360-180,m^(d*s<v&&v<d*t)){var g=-c[1]*Bt;g<n&&(n=g)}else o<n&&(n=o),o>i&&(i=o);m?t<s?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>s?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t)}else p(t,o);a=u,s=t}function v(){h.point=d}function m(){c[0]=e,c[1]=r,h.point=p,a=null}function g(e,t){if(a){var n=e-s;f+=E(n)>180?n+(n>0?360:-360):n}else o=e,u=t;Hr.point(e,t),d(e,t)}function y(){Hr.lineStart()}function b(){g(o,u),Hr.lineEnd(),E(f)>At&&(e=-(r=180)),c[0]=e,c[1]=r,a=null}function w(e,t){return(t-=e)<0?t+360:t}function S(e,t){return e[0]-t[0]}function x(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var e,n,r,i,s,o,u,a,f,l,c,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=b,f=0,Hr.polygonStart()},polygonEnd:function(){Hr.polygonEnd(),h.point=p,h.lineStart=v,h.lineEnd=m,Pr<0?(e=-(r=180),n=-(i=90)):f>At?i=90:f<-At&&(n=-90),c[0]=e,c[1]=r}};return function(s){i=r=-(e=n=Infinity),l=[],t.geo.stream(s,h);var o=l.length;if(o){l.sort(S);for(var u=1,a=l[0],f,
p=[a];u<o;++u)f=l[u],x(f[0],a)||x(f[1],a)?(w(a[0],f[1])>w(a[0],a[1])&&(a[1]=f[1]),w(f[0],a[1])>w(a[0],a[1])&&(a[0]=f[0])):p.push(a=f);var d=-Infinity,v;for(var o=p.length-1,u=0,a=p[o],f;u<=o;a=f,++u)f=p[u],(v=w(a[1],f[0]))>d&&(d=v,e=f[0],r=a[1])}return l=c=null,e===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){Xr=Vr=$r=Jr=Kr=Qr=Gr=Yr=Zr=ei=ti=0,t.geo.stream(e,ni);var n=Zr,r=ei,i=ti,s=n*n+r*r+i*i;if(s<Ot){n=Qr,r=Gr,i=Yr,Vr<At&&(n=$r,r=Jr,i=Kr),s=n*n+r*r+i*i;if(s<Ot)return[NaN,NaN]}return[Math.atan2(r,n)*Bt,qt(i/Math.sqrt(s))*Bt]};var Xr,Vr,$r,Jr,Kr,Qr,Gr,Yr,Zr,ei,ti,ni={sphere:I,point:ri,lineStart:si,lineEnd:oi,polygonStart:function(){ni.lineStart=ui},polygonEnd:function(){ni.lineStart=si}},gi=pi(fi,yi,wi,[-Mt,-Mt/2]),Ti=1e9;t.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Ni(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return Ci(ki)}).raw=ki,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){function f(e){var t=e[0],n=e[1];return i=null,(o(t,n),i)||(u(t,n),i)||a(t,n),i}var e=t.geo.albers(),n=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,s={point:function(e,t){i=[e,t]}},o,u,a;return f.invert=function(t){var i=e.scale(),s=e.translate(),o=(t[0]-s[0])/i,u=(t[1]-s[1])/i;return(u>=.12&&u<.234&&o>=-0.425&&o<-0.214?n:u>=.166&&u<.234&&o>=-0.214&&o<-0.115?r:e).invert(t)},f.stream=function(t){var i=e.stream(t),s=n.stream(t),o=r.stream(t);return{point:function(e,t){i.point(e,t),s.point(e,t),o.point(e,t)},sphere:function(){i.sphere(),s.sphere(),o.sphere()},lineStart:function(){i.lineStart(),s.lineStart(),o.lineStart()},lineEnd:function(){i.lineEnd(),s.lineEnd(),o.lineEnd()},polygonStart:function(){i.polygonStart(),s.polygonStart(),o.polygonStart()},polygonEnd:function(){i.polygonEnd(),s.polygonEnd(),o.polygonEnd()}}},f.precision=function(t){return arguments.length?(e.precision(t),n.precision(t),r.precision(t),f):e.precision()},f.scale=function(t){return arguments.length?(e.scale(t),n.scale(t*.35),r.scale(t),f.translate(e.translate())):e.scale()},f.translate=function(t){if(!arguments.length)return e.translate();var i=e.scale(),l=+t[0],c=+t[1];return o=e.translate(t).clipExtent([[l-.455*i,c-.238*i],[l+.455*i,c+.238*i]]).stream(s).point,u=n.translate([l-.307*i,c+.201*i]).clipExtent([[l-.425*i+At,c+.12*i+At],[l-.214*i-At,c+.234*i-At]]).stream(s).point,a=r.translate([l-.205*i,c+.212*i]).clipExtent([[l-.214*i+At,c+.166*i+At],[l-.115*i-At,c+.234*i-At]]).stream(s).point,f},f.scale(1070)};var Li,Ai,Oi={point:I,lineStart:I,lineEnd:I,polygonStart:function(){Ai=0,Oi.lineStart=Mi},polygonEnd:function(){Oi.lineStart=Oi.lineEnd=Oi.point=I,Li+=E(Ai/2)}},_i,Di,Pi,Hi,Bi={point:ji,lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I},qi={point:Ri,lineStart:Ui,lineEnd:zi,polygonStart:function(){qi.lineStart=Wi},polygonEnd:function(){qi.point=Ri,qi.lineStart=Ui,qi.lineEnd=zi}};t.geo.path=function(){function u(n){if(n){typeof e=="function"&&s.pointRadius(+e.apply(this,arguments));if(!o||!o.valid)o=i(s);t.geo.stream(n,o)}return s.result()}function a(){return o=null,u}var e=4.5,n,r,i,s,o;return u.area=function(e){return Li=0,t.geo.stream(e,i(Oi)),Li},u.centroid=function(e){return $r=Jr=Kr=Qr=Gr=Yr=Zr=ei=ti=0,t.geo.stream(e,i(qi)),ti?[Zr/ti,ei/ti]:Yr?[Qr/Yr,Gr/Yr]:Kr?[$r/Kr,Jr/Kr]:[NaN,NaN]},u.bounds=function(e){return Pi=Hi=-(_i=Di=Infinity),t.geo.stream(e,i(Bi)),[[_i,Di],[Pi,Hi]]},u.projection=function(e){return arguments.length?(i=(n=e)?e.stream||$i(e):H,a()):n},u.context=function(t){return arguments.length?(s=(r=t)==null?new Fi:new Xi(t),typeof e!="function"&&s.pointRadius(e),a()):r},u.pointRadius=function(t){return arguments.length?(e=typeof t=="function"?t:(s.pointRadius(+t),+t),u):e},u.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(e){return{stream:function(t){var n=new Ji(t);for(var r in e)n[r]=e[r];return n}}},Ji.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Qi,t.geo.projectionMutator=Gi,(t.geo.equirectangular=function(){return Qi(Zi)}).raw=Zi.invert=Zi,t.geo.rotation=function(e){function t(t){return t=e(t[0]*Ht,t[1]*Ht),t[0]*=Bt,t[1]*=Bt,t}return e=ts(e[0]%360*Ht,e[1]*Ht,e.length>2?e[2]*Ht:0),t.invert=function(t){return t=e.invert(t[0]*Ht,t[1]*Ht),t[0]*=Bt,t[1]*=Bt,t},t},es.invert=Zi,t.geo.circle=function(){function i(){var t=typeof e=="function"?e.apply(this,arguments):e,n=ts(-t[0]*Ht,-t[1]*Ht,0).invert,i=[];return r(null,null,1,{point:function(e,t){i.push(e=n(e,t)),e[0]*=Bt,e[1]*=Bt}}),{type:"Polygon",coordinates:[i]}}var e=[0,0],t,n=6,r;return i.origin=function(t){return arguments.length?(e=t,i):e},i.angle=function(e){return arguments.length?(r=ss((t=+e)*Ht,n*Ht),i):t},i.precision=function(e){return arguments.length?(r=ss(t*Ht,(n=+e)*Ht),i):n},i.angle(90)},t.geo.distance=function(e,t){var n=(t[0]-e[0])*Ht,r=e[1]*Ht,i=t[1]*Ht,s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),a=Math.cos(r),f=Math.sin(i),l=Math.cos(i),c;return Math.atan2(Math.sqrt((c=l*s)*c+(c=a*f-u*l*o)*c),u*f+a*l*o)},t.geo.graticule=function(){function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(i/c)*c,r,c).map(v).concat(t.range(Math.ceil(a/h)*h,u,h).map(m)).concat(t.range(Math.ceil(n/f)*f,e,f).filter(function(e){return E(e%c)>At}).map(p)).concat(t.range(Math.ceil(o/l)*l,s,l).filter(function(e){return E(e%h)>At}).map(d))}var e,n,r,i,s,o,u,a,f=10,l=f,c=90,h=360,p,d,v,m,g=2.5;return y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(m(u).slice(1),v(r).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],a=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),a>u&&(e=a,a=u,u=e),y.precision(g)):[[i,a],[r,u]]},y.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],s=+t[1][1],n>e&&(t=n,n=e,e=t),o>s&&(t=o,o=s,s=t),y.precision(g)):[[n,o],[e,s]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(c=+e[0],h=+e[1],y):[c,h]},y.minorStep=function(e){return arguments.length?(f=+e[0],l=+e[1],y):[f,l]},y.precision=function(t){return arguments.length?(g=+t,p=us(o,s,90),d=as(n,e,g),v=us(a,u,90),m=as(i,r,g),y):g},y.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},t.geo.greatArc=function(){function s(){return{type:"LineString",coordinates:[n||e.apply(this,arguments),i||r.apply(this,arguments)]}}var e=fs,n,r=ls,i;return s.distance=function(){return t.geo.distance(n||e.apply(this,arguments),i||r.apply(this,arguments))},s.source=function(t){return arguments.length?(e=t,n=typeof t=="function"?null:t,s):e},s.target=function(e){return arguments.length?(r=e,i=typeof e=="function"?null:e,s):r},s.precision=function(){return arguments.length?s:0},s},t.geo.interpolate=function(e,t){return cs(e[0]*Ht,e[1]*Ht,t[0]*Ht,t[1]*Ht)},t.geo.length=function(e){return hs=0,t.geo.stream(e,ps),hs};var hs,ps={sphere:I,point:I,lineStart:ds,lineEnd:I,polygonStart:I,polygonEnd:I},ms=vs(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(t.geo.azimuthalEqualArea=function(){return Qi(ms)}).raw=ms;var gs=vs(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},H);(t.geo.azimuthalEquidistant=function(){return Qi(gs)}).raw=gs,(t.geo.conicConformal=function(){return Ci(ys)}).raw=ys,(t.geo.conicEquidistant=function(){return Ci(bs)}).raw=bs;var ws=vs(function(e){return 1/e},Math.atan);(t.geo.gnomonic=function(){return Qi(ws)}).raw=ws,Es.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Pt]},(t.geo.mercator=function(){return Ss(Es)}).raw=Es;var xs=vs(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Qi(xs)}).raw=xs;var Ts=vs(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(t.geo.stereographic=function(){return Qi(Ts)}).raw=Ts,Ns.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Pt]},(t.geo.transverseMercator=function(){var e=Ss(Ns),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Ns,t.geom={},t.geom.hull=function(e){function r(e){if(e.length<3)return[];var r=kn(t),i=kn(n),s,o=e.length,u=[],a=[];for(s=0;s<o;s++)u.push([+r.call(this,e[s],s),+i.call(this,e[s],s),s]);u.sort(As);for(s=0;s<o;s++)a.push([u[s][0],-u[s][1]]);var f=Ls(u),l=Ls(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(s=f.length-1;s>=0;--s)p.push(e[u[f[s]][2]]);for(s=+c;s<l.length-h;++s)p.push(e[u[l[s]][2]]);return p}var t=Cs,n=ks;return arguments.length?r(e):(r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r)},t.geom.polygon=function(e){return V(e,Os),e};var Os=t.geom.polygon.prototype=[];Os.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t)n=r,r=this[e],i+=n[1]*r[0]-n[0]*r[1];return i*.5},Os.centroid=function(e){var t=-1,n=this.length,r=0,i=0,s,o=this[n-1],u;arguments.length||(e=-1/(6*this.area()));while(++t<n)s=o,o=this[t],u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return[r*e,i*e]},Os.clip=function(e){var t,n=Ds(e),r=-1,i=this.length-Ds(this),s,o,u=this[i-1],a,f,l;while(++r<i){t=e.slice(),e.length=0,a=this[r],f=t[(o=t.length-n)-1],s=-1;while(++s<o)l=t[s],Ms(l,u,a)?(Ms(f,u,a)||e.push(_s(f,l,u,a)),e.push(l)):Ms(f,u,a)&&e.push(_s(f,l,u,a)),f=l;n&&e.push(e[0]),u=a}return e};var Ps,Hs,Bs,js=[],Fs,Is,qs=[];Js.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--)n=e[t].edge,(!n.b||!n.a)&&e.splice(t,1);return e.sort(Qs),e.length},oo.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},uo.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=co(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);t.L=t.R=null,t.U=n,t.C=!0,e=t;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(fo(this,n),e=n,n=e.U),n.C=!1,r.C=!0,lo(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(lo(this,n),e=n,n=e.U),n.C=!1,r.C=!0,fo(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,s,o;r?i?s=co(i):s=r:s=i,t?t.L===e?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=i,i.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t);if(o)return;if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){n=t.R,n.C&&(n.C=!1,t.C=!0,fo(this,t),n=t.R);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C)n.L.C=!1,n.C=!0,lo(this,n),n=t.R;n.C=t.C,t.C=n.R.C=!1,fo(this,t),e=this._;break}}else{n=t.L,n.C&&(n.C=!1,t.C=!0,lo(this,t),n=t.L);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C)n.R.C=!1,n.C=!0,fo(this,n),n=t.L;n.C=t.C,t.C=n.L.C=!1,lo(this,t),e=this._;break}}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}},t.geom.voronoi=function(e){function o(e){var t=new Array(e.length),n=s[0][0],r=s[0][1],i=s[1][0],o=s[1][1];return ho(u(e),s).cells.forEach(function(s,u){var a=s.edges,f=s.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=n&&f.x<=i&&f.y>=r&&f.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];l.point=e[u]}),t}function u(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/At)*At,y:Math.round(i(e,t)/At)*At,i:t}})}var t=Cs,n=ks,r=t,i=n,s=vo;return e?o(e):(o.links=function(e){return ho(u(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return ho(u(e)).cells.forEach(function(n,r){var i=n.site,s=n.edges.sort(Qs),o=-1,u=s.length,a,f,l=s[u-1].edge,c=l.l===i?l.r:l.l;while(++o<u)a=l,f=c,l=s[o].edge,c=l.l===i?l.r:l.l,r<f.i&&r<c.i&&mo(i,f,c)<0&&t.push([e[r],e[f.i],e[c.i]])}),t},o.x=function(e){return arguments.length?(r=kn(t=e),o):t},o.y=function(e){return arguments.length?(i=kn(n=e),o):n},o.clipExtent=function(e){return arguments.length?(s=e==null?vo:e,o):s===vo?null:s},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):s===vo?null:s&&s[1]},o)};var vo=[[-1e6,-1e6],[1e6,1e6]];t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(e,t,n,r,i){function a(e){function T(e,t,n,r,i,s,o,u){if(isNaN(n)||isNaN(r))return;if(e.leaf){var a=e.x,f=e.y;if(a!=null)if(E(a-n)+E(f-r)<.01)N(e,t,n,r,i,s,o,u);else{var l=e.point;e.x=e.y=e.point=null,N(e,l,a,f,i,s,o,u),N(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else N(e,t,n,r,i,s,o,u)}function N(e,t,n,r,i,s,o,u){var a=(i+o)*.5,f=(s+u)*.5,l=n>=a,c=r>=f,h=c<<1|l;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=bo()),l?i=a:o=a,c?s=f:u=f,T(e,t,n,r,i,s,o,u)}var a,f=kn(s),l=kn(o),c,h,p,d,v,m,g,y;if(t!=null)v=t,m=n,g=r,y=i;else{g=y=-(v=m=Infinity),c=[],h=[],d=e.length;if(u)for(p=0;p<d;++p)a=e[p],a.x<v&&(v=a.x),a.y<m&&(m=a.y),a.x>g&&(g=a.x),a.y>y&&(y=a.y),c.push(a.x),h.push(a.y);else for(p=0;p<d;++p){var b=+f(a=e[p],p),w=+l(a,p);b<v&&(v=b),w<m&&(m=w),b>g&&(g=b),w>y&&(y=w),c.push(b),h.push(w)}}var S=g-v,x=y-m;S>x?y=m+S:g=v+x;var C=bo();C.add=function(e){T(C,e,+f(e,++p),+l(e,p),v,m,g,y)},C.visit=function(e){wo(e,C,v,m,g,y)},C.find=function(e){return Eo(C,e[0],e[1],v,m,g,y)},p=-1;if(t==null){while(++p<d)T(C,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(C.add);return c=h=e=a=null,C}var s=Cs,o=ks,u;return(u=arguments.length)?(s=go,o=yo,u===3&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(o=e,a):o},a.extent=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):t==null?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):t==null?null:[r-t,i-n]},a)},t.interpolateRgb=So,t.interpolateObject=xo,t.interpolateNumber=To,t.interpolateString=No;var Co=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ko=new RegExp(Co.source,"g");t.interpolate=Lo,t.interpolators=[function(e,t){var n=typeof t;return(n==="string"?Cn.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?So:No:t instanceof Gt?So:Array.isArray(t)?Ao:n==="object"&&isNaN(t)?xo:To)(e,t)}],t.interpolateArray=Ao;var Oo=function(){return H},Mo=t.map({linear:Oo,poly:Io,quad:function(){return Bo},cubic:function(){return jo},sin:function(){return qo},exp:function(){return Ro},circle:function(){return Uo},elastic:zo,back:Wo,bounce:function(){return Xo}}),_o=t.map({"in":H,out:Po,"in-out":Ho,"out-in":function(e){return Ho(Po(e))}});t.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";return n=Mo.get(n)||Oo,i=_o.get(i)||H,Do(i(n.apply(null,r.call(arguments,1))))},t.interpolateHcl=Vo,t.interpolateHsl=$o,t.interpolateLab=Jo,t.interpolateRound=Ko,t.transform=function(e){var n=s.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Qo(t?t.matrix:eu)})(e)},Qo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var eu={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=ou,t.layout={},t.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(fu(e[n]));return t}},t.layout.chord=function(){function l(){var e={},l=[],h=t.range(s),p=[],d,v,m,g,y;n=[],r=[],d=0,g=-1;while(++g<s){v=0,y=-1;while(++y<s)v+=i[g][y];l.push(v),p.push(t.range(s)),d+=v}u&&h.sort(function(e,t){return u(l[e],l[t])}),a&&p.forEach(function(e,t){e.sort(function(e,n){return a(i[t][e],i[t][n])})}),d=(_t-o*s)/d,v=0,g=-1;while(++g<s){m=v,y=-1;while(++y<s){var b=h[g],w=p[b][y],E=i[b][w],S=v,x=v+=E*d;e[b+"-"+w]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}r[b]={index:b,startAngle:m,endAngle:v,value:l[b]},v+=o}g=-1;while(++g<s){y=g-1;while(++y<s){var T=e[g+"-"+y],N=e[y+"-"+g];(T.value||N.value)&&n.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}f&&c()}function c(){n.sort(function(e,t){return f((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var e={},n,r,i,s,o=0,u,a,f;return e.matrix=function(t){return arguments.length?(s=(i=t)&&i.length,n=r=null,e):i},e.padding=function(t){return arguments.length?(o=t,n=r=null,e):o},e.sortGroups=function(t){return arguments.length?(u=t,n=r=null,e):u},e.sortSubgroups=function(t){return arguments.length?(a=t,n=null,e):a},e.sortChords=function(t){return arguments.length?(f=t,n&&c(),e):f},e.chords=function(){return n||l(),n},e.groups=function(){return r||l(),r},e},t.layout.force=function(){function b(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(u*u/p<a){if(a<c){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&a<c){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function w(n){n.px=t.event.x,n.py=t.event.y,e.resume()}var e={},n=t.dispatch("start","tick","end"),r,i=[1,1],s,o,u=.9,a=gu,f=yu,l=-30,c=bu,h=.1,p=.64,d=[],v=[],m,g,y;return e.tick=function(){if((o*=.99)<.005)return r=null,n.end({type:"end",alpha:o=0}),!0;var e=d.length,s=v.length,a,f,c,p,w,E,S,x,T;for(f=0;f<s;++f){c=v[f],p=c.source,w=c.target,x=w.x-p.x,T=w.y-p.y;if(E=x*x+T*T)E=o*g[f]*((E=Math.sqrt(E))-m[f])/E,x*=E,T*=E,w.x-=x*(S=p.weight+w.weight?p.weight/(p.weight+w.weight):.5),w.y-=T*S,p.x+=x*(S=1-S),p.y+=T*S}if(S=o*h){x=i[0]/2,T=i[1]/2,f=-1;if(S)while(++f<e)c=d[f],c.x+=(x-c.x)*S,c.y+=(T-c.y)*S}if(l){mu(a=t.geom.quadtree(d),o,y),f=-1;while(++f<e)(c=d[f]).fixed||a.visit(b(c))}f=-1;while(++f<e)c=d[f],c.fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*u,c.y-=(c.py-(c.py=c.y))*u);n.tick({type:"tick",alpha:o})},e.nodes=function(t){return arguments.length?(d=t,e):d},e.links=function(t){return arguments.length?(v=t,e):v},e.size=function(t){return arguments.length?(i=t,e):i},e.linkDistance=function(t){return arguments.length?(a=typeof t=="function"?t:+t,e):a},e.distance=e.linkDistance,e.linkStrength=function(t){return arguments.length?(f=typeof t=="function"?t:+t,e):f},e.friction=function(t){return arguments.length?(u=+t,e):u},e.charge=function(t){return arguments.length?(l=typeof t=="function"?t:+t,e):l},e.chargeDistance=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)},e.gravity=function(t){return arguments.length?(h=+t,e):h},e.theta=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e.alpha=function(t){return arguments.length?(t=+t,o?t>0?o=t:(r.c=null,r.t=NaN,r=null,n.end({type:"end",alpha:o=0})):t>0&&(n.start({type:"start",alpha:o=t}),r=jn(e.tick)),e):o},e.start=function(){function h(e,i){if(!u){u=new Array(n);for(a=0;a<n;++a)u[a]=[];for(a=0;a<r;++a){var s=v[a];u[s.source.index].push(s.target),u[s.target.index].push(s.source)}}var o=u[t],a=-1,f=o.length,l;while(++a<f)if(!isNaN(l=o[a][e]))return l;return Math.random()*i}var t,n=d.length,r=v.length,s=i[0],o=i[1],u,c;for(t=0;t<n;++t)(c=d[t]).index=t,c.weight=0;for(t=0;t<r;++t)c=v[t],typeof c.source=="number"&&(c.source=d[c.source]),typeof c.target=="number"&&(c.target=d[c.target]),++c.source.weight,++c.target.weight;for(t=0;t<n;++t)c=d[t],isNaN(c.x)&&(c.x=h("x",s)),isNaN(c.y)&&(c.y=h("y",o)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);m=[];if(typeof a=="function")for(t=0;t<r;++t)m[t]=+a.call(this,v[t],t);else for(t=0;t<r;++t)m[t]=a;g=[];if(typeof f=="function")for(t=0;t<r;++t)g[t]=+f.call(this,v[t],t);else for(t=0;t<r;++t)g[t]=f;y=[];if(typeof l=="function")for(t=0;t<n;++t)y[t]=+l.call(this,d[t],t);else for(t=0;t<n;++t)y[t]=l;return e.resume()},e.resume=function(){return e.alpha(.1)},e.stop=function(){return e.alpha(0)},e.drag=function(){s||(s=t.behavior.drag().origin(H).on("dragstart.force",hu).on("drag.force",w).on("dragend.force",pu));if(!arguments.length)return s;this.on("mouseover.force",du).on("mouseout.force",vu).call(s)},t.rebind(e,n,"on")};var gu=20,yu=1,bu=Infinity;t.layout.hierarchy=function(){function r(i){var s=[i],o=[],u;i.depth=0;while((u=s.pop())!=null){o.push(u);if((f=t.call(r,u,u.depth))&&(a=f.length)){var a,f,l;while(--a>=0)s.push(l=f[a]),l.parent=u,l.depth=u.depth+1;n&&(u.value=0),u.children=f}else n&&(u.value=+n.call(r,u,u.depth)||0),delete u.children}return Su(i,function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),o}var e=Nu,t=xu,n=Tu;return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Eu(e,function(e){e.children&&(e.value=0)}),Su(e,function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0);if(t=e.parent)t.value+=e.value})),e},r},t.layout.partition=function(){function r(e,t,n,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=n,e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;n=e.value?n/e.value:0;while(++o<u)r(a=s[o],t,f=a.value*n,i),t+=f}}function i(e){var t=e.children,n=0;if(t&&(s=t.length)){var r=-1,s;while(++r<s)n=Math.max(n,i(t[r]))}return 1+n}function s(t,s){var o=e.call(this,t,s);return r(o[0],0,n[0],n[1]/i(o[0])),o}var e=t.layout.hierarchy(),n=[1,1];return s.size=function(e){return arguments.length?(n=e,s):n},wu(s,e)},t.layout.pie=function(){function o(u){var a=u.length,f=u.map(function(t,n){return+e.call(o,t,n)}),l=+(typeof r=="function"?r.apply(this,arguments):r),c=(typeof i=="function"?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(c)/a,+(typeof s=="function"?s.apply(this,arguments):s)),p=h*(c<0?-1:1),d=t.sum(f),v=d?(c-a*p)/d:0,m=t.range(a),g=[],y;return n!=null&&m.sort(n===ku?function(e,t){return f[t]-f[e]}:function(e,t){return n(u[e],u[t])}),m.forEach(function(e){g[e]={data:u[e],value:y=f[e],startAngle:l,endAngle:l+=y*v+p,padAngle:h}}),g}var e=Number,n=ku,r=0,i=_t,s=0;return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(n=e,o):n},o.startAngle=function(e){return arguments.length?(r=e,o):r},o.endAngle=function(e){return arguments.length?(i=e,o):i},o.padAngle=function(e){return arguments.length?(s=e,o):s},o};var ku={};t.layout.stack=function(){function u(a,f){if(!(v=a.length))return a;var l=a.map(function(t,n){return e.call(u,t,n)}),c=l.map(function(e){return e.map(function(e,t){return[s.call(u,e,t),o.call(u,e,t)]})}),h=n.call(u,c,f);l=t.permute(l,h),c=t.permute(c,h);var p=r.call(u,c,f),d=l[0].length,v,m,g,y;for(g=0;g<d;++g){i.call(u,l[0][g],y=p[g],c[0][g][1]);for(m=1;m<v;++m)i.call(u,l[m][g],y+=c[m-1][g][1],c[m][g][1])}return a}var e=H,n=Du,r=Pu,i=Ou,s=Lu,o=Au;return u.values=function(t){return arguments.length?(e=t,u):e},u.order=function(e){return arguments.length?(n=typeof e=="function"?e:Mu.get(e)||Du,u):n},u.offset=function(e){return arguments.length?(r=typeof e=="function"?e:_u.get(e)||Pu,u):r},u.x=function(e){return arguments.length?(s=e,u):s},u.y=function(e){return arguments.length?(o=e,u):o},u.out=function(e){return arguments.length?(i=e,u):i},u};var Mu=t.map({"inside-out":function(e){var n=e.length,r,i,s=e.map(Hu),o=e.map(Bu),u=t.range(n).sort(function(e,t){return s[e]-s[t]}),a=0,f=0,l=[],c=[];for(r=0;r<n;++r)i=u[r],a<f?(a+=o[i],l.push(i)):(f+=o[i],c.push(i));return c.reverse().concat(l)},reverse:function(e){return t.range(e.length).reverse()},"default":Du}),_u=t.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,s,o,u,a,f,l,c,h,p=[];p[0]=c=h=0;for(s=1;s<r;++s){for(i=0,u=0;i<t;++i)u+=e[i][s][1];for(i=0,a=0,l=n[s][0]-n[s-1][0];i<t;++i){for(o=0,f=(e[i][s][1]-e[i][s-1][1])/(2*l);o<i;++o)f+=(e[o][s][1]-e[o][s-1][1])/l;a+=f*e[i][s][1]}p[s]=c-=u?a/u*l:0,c<h&&(h=c)}for(s=0;s<r;++s)p[s]-=h;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:Pu});t.layout.histogram=function(){function s(s,o){var u=[],a=s.map(n,this),f=r.call(this,a,o),l=i.call(this,f,a,o),c,o=-1,h=a.length,p=l.length-1,d=e?1:1/h,v;while(++o<p)c=u[o]=[],c.dx=l[o+1]-(c.x=l[o]),c.y=0;if(p>0){o=-1;while(++o<h)v=a[o],v>=f[0]&&v<=f[1]&&(c=u[t.bisect(l,v,1,p)-1],c.y+=d,c.push(s[o]))}return u}var e=!0,n=Number,r=qu,i=Fu;return s.value=function(e){return arguments.length?(n=e,s):n},s.range=function(e){return arguments.length?(r=kn(e),s):r},s.bins=function(e){return arguments.length?(i=typeof e=="number"?function(t){return Iu(t,e)}:kn(e),s):i},s.frequency=function(t){return arguments.length?(e=!!t,s):e},s},t.layout.pack=function(){function s(t,s){var o=e.call(this,t,s),u=o[0],a=r[0],f=r[1],l=i==null?Math.sqrt:typeof i=="function"?i:function(){return i};u.x=u.y=0,Su(u,function(e){e.r=+l(e.value)}),Su(u,Xu);if(n){var c=n*(i?1:Math.max(2*u.r/a,2*u.r/f))/2;Su(u,function(e){e.r+=c}),Su(u,Xu),Su(u,function(e){e.r-=c})}return Ju(u,a/2,f/2,i?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var e=t.layout.hierarchy().sort(Ru),n=0,r=[1,1],i;return s.size=function(e){return arguments.length?(r=e,s):r},s.radius=function(e){return arguments.length?(i=e==null||typeof e=="function"?e:+e,s):i},s.padding=function(e){return arguments.length?(n=+e,s):n},wu(s,e)},t.layout.tree=function(){function s(t,s){var f=e.call(this,t,s),c=f[0],h=o(c);Su(h,u),h.parent.m=-h.z,Eu(h,a);if(i)Eu(c,l);else{var p=c,d=c,v=c;Eu(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=n(p,d)/2-p.x,g=r[0]/(d.x+n(d,p)/2+m),y=r[1]/(v.depth||1);Eu(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return f}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null)for(var i=r.children,s,o=0,u=i.length;o<u;++o)n.push((i[o]=s={_:i[o],parent:r,children:(s=i[o].children)&&s.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=s);return t.children[0]}function u(e){var t=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(t.length){ea(e);var s=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+n(e._,i._),e.m=e.z-s):e.z=s}else i&&(e.z=i.z+n(e._,i._));e.parent.A=f(e,i,e.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function f(e,t,r){if(t){var i=e,s=e,o=t,u=i.parent.children[0],a=i.m,f=s.m,l=o.m,c=u.m,h;while(o=Yu(o),i=Gu(i),o&&i)u=Gu(u),s=Yu(s),s.a=e,h=o.z+l-i.z-a+n(o._,i._),h>0&&(Zu(ta(o,e,r),e,h),a+=h,f+=h),l+=o.m,a+=i.m,c+=u.m,f+=s.m;o&&!Yu(s)&&(s.t=o,s.m+=l-f),i&&!Gu(u)&&(u.t=i,u.m+=a-c,r=e)}return r}function l(e){e.x*=r[0],e.y=e.depth*r[1]}var e=t.layout.hierarchy().sort(null).value(null),n=Qu,r=[1,1],i=null;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null?l:null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)==null?null:l,s):i?r:null},wu(s,e)},t.layout.cluster=function(){function s(t,s){var o=e.call(this,t,s),u=o[0],a,f=0;Su(u,function(e){var t=e.children;t&&t.length?(e.x=ra(t),e.y=na(t)):(e.x=a?f+=n(e,a):0,e.y=0,a=e)});var l=ia(u),c=sa(u),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Su(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),o}var e=t.layout.hierarchy().sort(null).value(null),n=Qu,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},wu(s,e)},t.layout.treemap=function(){function l(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function c(e){var t=e.children;if(t&&t.length){var n=s(e),r=[],i=t.slice(),o,u=Infinity,f,h=a==="slice"?n.dx:a==="dice"?n.dy:a==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;l(i,n.dx*n.dy/e.value),r.area=0;while((v=i.length)>0)r.push(o=i[v-1]),r.area+=o.area,a!=="squarify"||(f=p(r,h))<=u?(i.pop(),u=f):(r.area-=r.pop().area,d(r,h,n,!1),h=Math.min(n.dx,n.dy),r.length=r.area=0,u=Infinity);r.length&&(d(r,h,n,!0),r.length=r.area=0),t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=s(e),r=t.slice(),i,o=[];l(r,n.dx*n.dy/e.value),o.area=0;while(i=r.pop())o.push(i),o.area+=i.area,i.z!=null&&(d(o,i.z?n.dx:n.dy,n,!r.length),o.length=o.area=0);t.forEach(h)}}function p(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,u=e.length;while(++o<u){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*f/n,n/(t*s*f)):Infinity}function d(e,t,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=t?n(e.area/t):0,l;if(t==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=Math.min(r.x+r.dx-u,f?n(l.area/f):0);l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=Math.min(r.y+r.dy-a,f?n(l.area/f):0);l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function v(t){var n=u||e(t),i=n[0];return i.x=i.y=0,i.value?(i.dx=r[0],i.dy=r[1]):i.dx=i.dy=0,u&&e.revalue(i),l([i],i.dx*i.dy/i.value),(u?h:c)(i),o&&(u=n),n}var e=t.layout.hierarchy(),n=Math.round,r=[1,1],i=null,s=oa,o=!1,u,a="squarify",f=.5*(1+Math.sqrt(5));return v.size=function(e){return arguments.length?(r=e,v):r},v.padding=function(e){function t(t){var n=e.call(v,t,t.depth);return n==null?oa(t):ua(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return ua(t,e)}if(!arguments.length)return i;var r;return s=(i=e)==null?oa:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n,v},v.round=function(e){return arguments.length?(n=e?Math.round:Number,v):n!=Number},v.sticky=function(e){return arguments.length?(o=e,u=null,v):o},v.ratio=function(e){return arguments.length?(f=e,v):f},v.mode=function(e){return arguments.length?(a=e+"",v):a},wu(v,e)},t.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},t.scale={};var pa={floor:H,ceil:H};t.scale.linear=function(){return va([0,1],[0,1],Lo,!1)};var Ea={s:1,g:1,p:1,r:1,e:1};t.scale.log=function(){return Ta(t.scale.linear().domain([0,1]),10,!0,[1,10])};var Na=t.format(".0e"),Ca={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};t.scale.pow=function(){return ka(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return Aa([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Oa)},t.scale.category20=function(){return t.scale.ordinal().range(Ma)},t.scale.category20b=function(){return t.scale.ordinal().range(_a)},t.scale.category20c=function(){return t.scale.ordinal().range(Da)};var Oa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yn),Ma=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yn),_a=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yn),Da=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yn);t.scale.quantile=function(){return Pa([],[])},t.scale.quantize=function(){return Ha(0,1,[0,1])},t.scale.threshold=function(){return Ba([.5],[0,1])},t.scale.identity=function(){return ja([0,1])},t.svg={},t.svg.arc=function(){function u(){var u=Math.max(0,+e.apply(this,arguments)),f=Math.max(0,+t.apply(this,arguments)),l=i.apply(this,arguments)-Pt,c=s.apply(this,arguments)-Pt,h=Math.abs(c-l),p=l>c?0:1;f<u&&(d=f,f=u,u=d);if(h>=Dt)return a(f,p)+(u?a(u,1-p):"")+"Z";var d,v,m,g,y=0,b=0,w,E,S,x,T,N,C,k,L=[];if(g=(+o.apply
(this,arguments)||0)/2)m=r===Ia?Math.sqrt(u*u+f*f):+r.apply(this,arguments),p||(b*=-1),f&&(b=qt(m/f*Math.sin(g))),u&&(y=qt(m/u*Math.sin(g)));if(f){w=f*Math.cos(l+b),E=f*Math.sin(l+b),S=f*Math.cos(c-b),x=f*Math.sin(c-b);var A=Math.abs(c-l-2*b)<=Mt?0:1;if(b&&Xa(w,E,S,x)===p^A){var O=(l+c)/2;w=f*Math.cos(O),E=f*Math.sin(O),S=x=null}}else w=E=0;if(u){T=u*Math.cos(c-y),N=u*Math.sin(c-y),C=u*Math.cos(l+y),k=u*Math.sin(l+y);var M=Math.abs(l-c+2*y)<=Mt?0:1;if(y&&Xa(T,N,C,k)===1-p^M){var _=(l+c)/2;T=u*Math.cos(_),N=u*Math.sin(_),C=k=null}}else T=N=0;if(h>At&&(d=Math.min(Math.abs(f-u)/2,+n.apply(this,arguments)))>.001){v=u<f^p?0:1;var D=d,P=d;if(h<Mt){var H=C==null?[T,N]:S==null?[w,E]:_s([w,E],[C,k],[S,x],[T,N]),B=w-H[0],j=E-H[1],F=S-H[0],I=x-H[1],q=1/Math.sin(Math.acos((B*F+j*I)/(Math.sqrt(B*B+j*j)*Math.sqrt(F*F+I*I)))/2),R=Math.sqrt(H[0]*H[0]+H[1]*H[1]);P=Math.min(d,(u-R)/(q-1)),D=Math.min(d,(f-R)/(q+1))}if(S!=null){var U=Va(C==null?[T,N]:[C,k],[w,E],f,D,p),z=Va([S,x],[T,N],f,D,p);d===D?L.push("M",U[0],"A",D,",",D," 0 0,",v," ",U[1],"A",f,",",f," 0 ",1-p^Xa(U[1][0],U[1][1],z[1][0],z[1][1]),",",p," ",z[1],"A",D,",",D," 0 0,",v," ",z[0]):L.push("M",U[0],"A",D,",",D," 0 1,",v," ",z[0])}else L.push("M",w,",",E);if(C!=null){var W=Va([w,E],[C,k],u,-P,p),X=Va([T,N],S==null?[w,E]:[S,x],u,-P,p);d===P?L.push("L",X[0],"A",P,",",P," 0 0,",v," ",X[1],"A",u,",",u," 0 ",p^Xa(X[1][0],X[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",P,",",P," 0 0,",v," ",W[0]):L.push("L",X[0],"A",P,",",P," 0 0,",v," ",W[0])}else L.push("L",T,",",N)}else L.push("M",w,",",E),S!=null&&L.push("A",f,",",f," 0 ",A,",",p," ",S,",",x),L.push("L",T,",",N),C!=null&&L.push("A",u,",",u," 0 ",M,",",1-p," ",C,",",k);return L.push("Z"),L.join("")}function a(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+ -e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var e=qa,t=Ra,n=Fa,r=Ia,i=Ua,s=za,o=Wa;return u.innerRadius=function(t){return arguments.length?(e=kn(t),u):e},u.outerRadius=function(e){return arguments.length?(t=kn(e),u):t},u.cornerRadius=function(e){return arguments.length?(n=kn(e),u):n},u.padRadius=function(e){return arguments.length?(r=e==Ia?Ia:kn(e),u):r},u.startAngle=function(e){return arguments.length?(i=kn(e),u):i},u.endAngle=function(e){return arguments.length?(s=kn(e),u):s},u.padAngle=function(e){return arguments.length?(o=kn(e),u):o},u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Pt;return[Math.cos(r)*n,Math.sin(r)*n]},u};var Ia="auto";t.svg.line=function(){return $a(H)};var Ja=t.map({linear:Ka,"linear-closed":Qa,step:Ga,"step-before":Ya,"step-after":Za,basis:of,"basis-open":uf,"basis-closed":af,bundle:ff,cardinal:nf,"cardinal-open":ef,"cardinal-closed":tf,monotone:yf});Ja.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var cf=[0,2/3,1/3,0],hf=[0,1/3,2/3,0],pf=[0,1/6,2/3,1/6];t.svg.line.radial=function(){var e=$a(bf);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Ya.reverse=Za,Za.reverse=Ya,t.svg.area=function(){return wf(H)},t.svg.area.radial=function(){var e=wf(bf);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},t.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)-Pt,l=i.call(e,u,o)-Pt;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Mt)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=fs,t=ls,n=Ef,r=Ua,i=za;return s.radius=function(e){return arguments.length?(n=kn(e),s):n},s.source=function(t){return arguments.length?(e=kn(t),s):e},s.target=function(e){return arguments.length?(t=kn(e),s):t},s.startAngle=function(e){return arguments.length?(r=kn(e),s):r},s.endAngle=function(e){return arguments.length?(i=kn(e),s):i},s},t.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=fs,t=ls,n=Sf;return r.source=function(t){return arguments.length?(e=kn(t),r):e},r.target=function(e){return arguments.length?(t=kn(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=Sf,r=e.projection;return e.projection=function(e){return arguments.length?r(xf(n=e)):n},e},t.svg.symbol=function(){function n(n,r){return(kf.get(e.call(this,n,r))||Cf)(t.call(this,n,r))}var e=Nf,t=Tf;return n.type=function(t){return arguments.length?(e=kn(t),n):e},n.size=function(e){return arguments.length?(t=kn(e),n):t},n};var kf=t.map({circle:Cf,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Af)),n=t*Af;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});t.svg.symbolTypes=kf.keys();var Lf=Math.sqrt(3),Af=Math.tan(30*Ht);G.transition=function(e){var t=Hf||++Pf,n=If(e),r=[],i,s,o=Bf||{time:Date.now(),ease:Fo,delay:0,duration:250};for(var u=-1,a=this.length;++u<a;){r.push(i=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(s=f[l])&&qf(s,l,n,t,o),i.push(s)}return _f(r,n,t)},G.interrupt=function(e){return this.each(e==null?Of:Mf(If(e)))};var Of=Mf(If()),Df=[],Pf=0,Hf,Bf;Df.call=G.call,Df.empty=G.empty,Df.node=G.node,Df.size=G.size,t.transition=function(e,n){return e&&e.transition?Hf?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=Df,Df.select=function(e){var t=this.id,n=this.namespace,r=[],i,s,o;e=Y(e);for(var u=-1,a=this.length;++u<a;){r.push(i=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(o=f[l])&&(s=e.call(o,o.__data__,l,u))?("__data__"in o&&(s.__data__=o.__data__),qf(s,l,n,t,o[n][t]),i.push(s)):i.push(null)}return _f(r,n,t)},Df.selectAll=function(e){var t=this.id,n=this.namespace,r=[],i,s,o,u,a;e=Z(e);for(var f=-1,l=this.length;++f<l;)for(var c=this[f],h=-1,p=c.length;++h<p;)if(o=c[h]){a=o[n][t],s=e.call(o,o.__data__,h,f),r.push(i=[]);for(var d=-1,v=s.length;++d<v;)(u=s[d])&&qf(u,d,n,t,a),i.push(u)}return _f(r,n,t)},Df.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=pt(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);for(var r=this[s],u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u,s)&&n.push(i)}return _f(t,this.namespace,this.id)},Df.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):vt(this,t==null?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Df.attr=function(e,n){function s(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function u(e){return e==null?s:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function a(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r=e=="transform"?ou:Lo,i=t.ns.qualify(e);return jf(this,"attr."+e,n,i.local?a:u)},Df.attrTween=function(e,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function s(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?s:i)},Df.style=function(e,t,n){function i(){this.style.removeProperty(e)}function s(t){return t==null?i:(t+="",function(){var r=u(this).getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=Lo(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return jf(this,"style."+e,t,s)},Df.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,u(this).getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Df.text=function(e){return jf(this,"text",e,Ff)},Df.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Df.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:(typeof e!="function"&&(e=t.ease.apply(t,arguments)),vt(this,function(t){t[r][n].ease=e}))},Df.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:vt(this,typeof e=="function"?function(r,i,s){r[n][t].delay=+e.call(r,r.__data__,i,s)}:(e=+e,function(r){r[n][t].delay=e}))},Df.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:vt(this,typeof e=="function"?function(r,i,s){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,s))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Df.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var s=Bf,o=Hf;try{Hf=r,vt(this,function(t,n,s){Bf=t[i][r],e.call(t,t.__data__,n,s)})}finally{Bf=s,Hf=o}}else vt(this,function(s){var o=s[i][r];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},Df.transition=function(){var e=this.id,t=++Pf,n=this.namespace,r=[],i,s,o,u;for(var a=0,f=this.length;a<f;a++){r.push(i=[]);for(var s=this[a],l=0,c=s.length;l<c;l++){if(o=s[l])u=o[n][e],qf(o,l,n,t,{time:u.time,ease:u.ease,delay:u.delay+u.duration,duration:u.duration});i.push(o)}}return _f(r,n,t)},t.svg.axis=function(){function l(i){i.each(function(){var i=t.select(this),l=this.__chart__||e,c=this.__chart__=e.copy(),h=a==null?c.ticks?c.ticks.apply(c,u):c.domain():a,p=f==null?c.tickFormat?c.tickFormat.apply(c,u):H:f,d=i.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",At),m=t.transition(d.exit()).style("opacity",At).remove(),g=t.transition(d.order()).style("opacity",1),y=Math.max(r,0)+o,b,w=fa(c),E=i.selectAll(".domain").data([0]),S=(E.enter().append("path").attr("class","domain"),t.transition(E));v.append("line"),v.append("text");var x=v.select("line"),T=g.select("line"),N=d.select("text").text(p),C=v.select("text"),k=g.select("text"),L=n==="top"||n==="left"?-1:1,A,O,M,_;n==="bottom"||n==="top"?(b=zf,A="x",M="y",O="x2",_="y2",N.attr("dy",L<0?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+w[0]+","+L*s+"V0H"+w[1]+"V"+L*s)):(b=Wf,A="y",M="x",O="y2",_="x2",N.attr("dy",".32em").style("text-anchor",L<0?"end":"start"),S.attr("d","M"+L*s+","+w[0]+"H0V"+w[1]+"H"+L*s)),x.attr(_,L*r),C.attr(M,L*y),T.attr(O,0).attr(_,L*r),k.attr(A,0).attr(M,L*y);if(c.rangeBand){var D=c,P=D.rangeBand()/2;l=c=function(e){return D(e)+P}}else l.rangeBand?l=c:m.call(b,c,l);v.call(b,l,c),g.call(b,c,c)})}var e=t.scale.linear(),n=Rf,r=6,s=6,o=3,u=[10],a=null,f;return l.scale=function(t){return arguments.length?(e=t,l):e},l.orient=function(e){return arguments.length?(n=e in Uf?e+"":Rf,l):n},l.ticks=function(){return arguments.length?(u=i(arguments),l):u},l.tickValues=function(e){return arguments.length?(a=e,l):a},l.tickFormat=function(e){return arguments.length?(f=e,l):f},l.tickSize=function(e){var t=arguments.length;return t?(r=+e,s=+arguments[t-1],l):r},l.innerTickSize=function(e){return arguments.length?(r=+e,l):r},l.outerTickSize=function(e){return arguments.length?(s=+e,l):s},l.tickPadding=function(e){return arguments.length?(o=+e,l):o},l.tickSubdivide=function(){return arguments.length&&l},l};var Rf="bottom",Uf={top:1,right:1,bottom:1,left:1};t.svg.brush=function(){function h(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),i=e.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(c,H);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Xf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",h.empty()?"none":null);var o=t.transition(e),u=t.transition(i),a;n&&(a=fa(n),u.attr("x",a[0]).attr("width",a[1]-a[0]),d(o)),r&&(a=fa(r),u.attr("y",a[0]).attr("height",a[1]-a[0]),v(o)),p(o)})}function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+i[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"})}function d(e){e.select(".extent").attr("x",i[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function v(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function m(){function O(){t.event.keyCode==32&&(S||(T=null,N[0]-=i[1],N[1]-=s[1],S=2),U())}function M(){t.event.keyCode==32&&S==2&&(N[0]+=i[1],N[1]+=s[1],S=0,U())}function _(){var e=t.mouse(c),o=!1;C&&(e[0]+=C[0],e[1]+=C[1]),S||(t.event.altKey?(T||(T=[(i[0]+i[1])/2,(s[0]+s[1])/2]),N[0]=i[+(e[0]<T[0])],N[1]=s[+(e[1]<T[1])]):T=null),w&&D(e,n,0)&&(d(y),o=!0),E&&D(e,r,1)&&(v(y),o=!0),o&&(p(y),g({type:"brush",mode:S?"move":"resize"}))}function D(e,t,n){var r=fa(t),u=r[0],c=r[1],h=N[n],p=n?s:i,d=p[1]-p[0],v,m;S&&(u-=h,c-=d+h),v=(n?l:f)?Math.max(u,Math.min(c,e[n])):e[n],S?m=(v+=h)+d:(T&&(h=Math.max(u,Math.min(c,2*T[n]-v))),h<v?(m=v,v=h):m=h);if(p[0]!=v||p[1]!=m)return n?a=null:o=null,p[0]=v,p[1]=m,!0}function P(){_(),y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),k.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x(),g({type:"brushend"})}var c=this,m=t.select(t.event.target),g=e.of(c,arguments),y=t.select(c),b=m.datum(),w=!/^(n|s)$/.test(b)&&n,E=!/^(e|w)$/.test(b)&&r,S=m.classed("extent"),x=Nt(c),T,N=t.mouse(c),C,k=t.select(u(c)).on("keydown.brush",O).on("keyup.brush",M);t.event.changedTouches?k.on("touchmove.brush",_).on("touchend.brush",P):k.on("mousemove.brush",_).on("mouseup.brush",P),y.interrupt().selectAll("*").interrupt();if(S)N[0]=i[0]-N[0],N[1]=s[0]-N[1];else if(b){var L=+/w$/.test(b),A=+/^n/.test(b);C=[i[1-L]-N[0],s[1-A]-N[1]],N[0]=i[L],N[1]=s[A]}else t.event.altKey&&(T=N.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",m.style("cursor")),g({type:"brushstart"}),_()}var e=W(h,"brushstart","brush","brushend"),n=null,r=null,i=[0,0],s=[0,0],o,a,f=!0,l=!0,c=Vf[0];return h.event=function(n){n.each(function(){var n=e.of(this,arguments),r={x:i,y:s,i:o,j:a},u=this.__chart__||r;this.__chart__=r,Hf?t.select(this).transition().each("start.brush",function(){o=u.i,a=u.j,i=u.x,s=u.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=Ao(i,r.x),t=Ao(s,r.y);return o=a=null,function(o){i=r.x=e(o),s=r.y=t(o),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=r.i,a=r.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},h.x=function(e){return arguments.length?(n=e,c=Vf[!n<<1|!r],h):n},h.y=function(e){return arguments.length?(r=e,c=Vf[!n<<1|!r],h):r},h.clamp=function(e){return arguments.length?(n&&r?(f=!!e[0],l=!!e[1]):n?f=!!e:r&&(l=!!e),h):n&&r?[f,l]:n?f:r?l:null},h.extent=function(e){var t,u,f,l,c;if(!arguments.length)return n&&(o?(t=o[0],u=o[1]):(t=i[0],u=i[1],n.invert&&(t=n.invert(t),u=n.invert(u)),u<t&&(c=t,t=u,u=c))),r&&(a?(f=a[0],l=a[1]):(f=s[0],l=s[1],r.invert&&(f=r.invert(f),l=r.invert(l)),l<f&&(c=f,f=l,l=c))),n&&r?[[t,f],[u,l]]:n?[t,u]:r&&[f,l];if(n){t=e[0],u=e[1],r&&(t=t[0],u=u[0]),o=[t,u],n.invert&&(t=n(t),u=n(u)),u<t&&(c=t,t=u,u=c);if(t!=i[0]||u!=i[1])i=[t,u]}if(r){f=e[0],l=e[1],n&&(f=f[1],l=l[1]),a=[f,l],r.invert&&(f=r(f),l=r(l)),l<f&&(c=f,f=l,l=c);if(f!=s[0]||l!=s[1])s=[f,l]}return h},h.clear=function(){return h.empty()||(i=[0,0],s=[0,0],o=a=null),h},h.empty=function(){return!!n&&i[0]==i[1]||!!r&&s[0]==s[1]},t.rebind(h,e,"on")};var Xf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$f=Jn.format=Tr.timeFormat,Jf=$f.utc,Kf=Jf("%Y-%m-%dT%H:%M:%S.%LZ");$f.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?Qf:Kf,Qf.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Qf.toString=Kf.toString,Jn.second=Yn(function(e){return new Kn(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()}),Jn.seconds=Jn.second.range,Jn.seconds.utc=Jn.second.utc.range,Jn.minute=Yn(function(e){return new Kn(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()}),Jn.minutes=Jn.minute.range,Jn.minutes.utc=Jn.minute.utc.range,Jn.hour=Yn(function(e){var t=e.getTimezoneOffset()/60;return new Kn((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()}),Jn.hours=Jn.hour.range,Jn.hours.utc=Jn.hour.utc.range,Jn.month=Yn(function(e){return e=Jn.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Jn.months=Jn.month.range,Jn.months.utc=Jn.month.utc.range;var Zf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],el=[[Jn.second,1],[Jn.second,5],[Jn.second,15],[Jn.second,30],[Jn.minute,1],[Jn.minute,5],[Jn.minute,15],[Jn.minute,30],[Jn.hour,1],[Jn.hour,3],[Jn.hour,6],[Jn.hour,12],[Jn.day,1],[Jn.day,2],[Jn.week,1],[Jn.month,1],[Jn.month,3],[Jn.year,1]],tl=$f.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",fi]]),nl={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(Yf)},floor:H,ceil:H};el.year=Jn.year,Jn.scale=function(){return Gf(t.scale.linear(),el,tl)};var rl=el.map(function(e){return[e[0].utc,e[1]]}),il=Jf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",fi]]);rl.year=Jn.year.utc,Jn.scale.utc=function(){return Gf(t.scale.linear(),rl,il)},t.text=Ln(function(e){return e.responseText}),t.json=function(e,t){return An(e,"application/json",sl,t)},t.html=function(e,t){return An(e,"text/html",ol,t)},t.xml=Ln(function(e){return e.responseXML}),typeof e=="function"&&e.amd?(this.d3=t,e(t)):typeof n=="object"&&n.exports?n.exports=t:this.d3=t}()},{}],73:[function(e,t,n){"use strict";function s(e,t){this.point=e,this.index=t}function o(e,t){var n=e.point,r=t.point,i=n.length;for(var s=0;s<i;++s){var o=r[s]-n[s];if(o)return o}return 0}function u(e,t,n){if(e===1)return n?[[-1,0]]:[];var r=t.map(function(e,t){return[e[0],t]});r.sort(function(e,t){return e[0]-t[0]});var i=new Array(e-1);for(var s=1;s<e;++s){var o=r[s-1],u=r[s];i[s-1]=[o[1],u[1]]}return n&&i.push([-1,i[0][1]],[i[e-1][1],-1]),i}function a(e,t){var n=e.length;if(n===0)return[];var a=e[0].length;if(a<1)return[];if(a===1)return u(n,e,t);var f=new Array(n),l=1;for(var c=0;c<n;++c){var h=e[c],p=new Array(a+1),d=0;for(var v=0;v<a;++v){var m=h[v];p[v]=m,d+=m*m}p[a]=d,f[c]=new s(p,c),l=Math.max(d,l)}i(f,o),n=f.length;var g=new Array(n+a+1),y=new Array(n+a+1),b=(a+1)*(a+1)*l,w=new Array(a+1);for(var c=0;c<=a;++c)w[c]=0;w[a]=b,g[0]=w.slice(),y[0]=-1;for(var c=0;c<=a;++c){var p=w.slice();p[c]=1,g[c+1]=p,y[c+1]=-1}for(var c=0;c<n;++c){var E=f[c];g[c+a+1]=E.point,y[c+a+1]=E.index}var S=r(g,!1);t?S=S.filter(function(e){var t=0;for(var n=0;n<=a;++n){var r=y[e[n]];if(r<0&&++t>=2)return!1;e[n]=r}return!0}):S=S.filter(function(e){for(var t=0;t<=a;++t){var n=y[e[t]];if(n<0)return!1;e[t]=n}return!0});if(a&1)for(var c=0;c<S.length;++c){var E=S[c],p=E[0];E[0]=E[1],E[1]=p}return S}var r=e("incremental-convex-hull"),i=e("uniq");t.exports=a},{"incremental-convex-hull":194,uniq:238}],74:[function(e,t,n){"use strict";function r(e,t,n){var i=e[n]|0;if(i<=0)return[];var s=new Array(i),o;if(n===e.length-1)for(o=0;o<i;++o)s[o]=t;else for(o=0;o<i;++o)s[o]=r(e,t,n+1);return s}function i(e,t){var n,r;n=new Array(e);for(r=0;r<e;++r)n[r]=t;return n}function s(e,t){typeof t=="undefined"&&(t=0);switch(typeof e){case"number":if(e>0)return i(e|0,t);break;case"object":if(typeof e.length=="number")return r(e,t,0)}return[]}t.exports=s},{}],75:[function(t,n,r){(function(r,i){(function(){"use strict";function s(e){return typeof e=="function"||typeof e=="object"&&e!==null}function o(e){return typeof e=="function"}function u(e){return typeof e=="object"&&e!==null}function d(e){h=e}function v(e){p=e}function E(){return function(){r.nextTick(k)}}function S(){return function(){c(k)}}function x(){var e=0,t=new y(k),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function T(){var e=new MessageChannel;return e.port1.onmessage=k,function(){e.port2.postMessage(0)}}function N(){return function(){setTimeout(k,1)}}function k(){for(var e=0;e<l;e+=2){var t=C[e],n=C[e+1];t(n),C[e]=undefined,C[e+1]=undefined}l=0}function L(){try{var e=t,n=e("vertx");return c=n.runOnLoop||n.runOnContext,S()}catch(r){return N()}}function O(e,t){var n=this,r=n._state;if(r===B&&!e||r===j&&!t)return this;var i=new this.constructor(P),s=n._result;if(r){var o=arguments[r-1];p(function(){tt(r,i,o,s)})}else Q(n,i,e,t);return i}function _(e){var t=this;if(e&&typeof e=="object"&&e.constructor===t)return e;var n=new t(P);return V(n,e),n}function P(){}function I(){return new TypeError("You cannot resolve a promise with itself")}function q(){return new TypeError("A promises callback cannot return that same promise.")}function R(e){try{return e.then}catch(t){return F.error=t,F}}function U(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function z(e,t,n){p(function(e){var r=!1,i=U(n,t,function(n){if(r)return;r=!0,t!==n?V(e,n):J(e,n)},function(t){if(r)return;r=!0,K(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,K(e,i))},e)}function W(e,t){t._state===B?J(e,t._result):t._state===j?K(e,t._result):Q(t,undefined,function(t){V(e,t)},function(t){K(e,t)})}function X(e,t,n){t.constructor===e.constructor&&n===M&&constructor.resolve===D?W(e,t):n===F?K(e,F.error):n===undefined?J(e,t):o(n)?z(e,t,n):J(e,t)}function V(e,t){e===t?K(e,I()):s(t)?X(e,t,R(t)):J(e,t)}function $(e){e._onerror&&e._onerror(e._result),G(e)}function J(e,t){if(e._state!==H)return;e._result=t,e._state=B,e._subscribers.length!==0&&p(G,e)}function K(e,t){if(e._state!==H)return;e._state=j,e._result=t,p($,e)}function Q(e,t,n,r){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+B]=n,i[s+j]=r,s===0&&e._state&&p(G,e)}function G(e){var t=e._subscribers,n=e._state;if(t.length===0)return;var r,i,s=e._result;for(var o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?tt(n,r,i,s):i(s);e._subscribers.length=0}function Y(){this.error=null}function et(e,t){try{return e(t)}catch(n){return Z.error=n,Z}}function tt(e,t,n,r){var i=o(n),s,u,a,f;if(i){s=et(n,r),s===Z?(f=!0,u=s.error,s=null):a=!0;if(t===s){K(t,q());return}}else s=r,a=!0;t._state===H&&(i&&a?V(t,s):f?K(t,u):e===B?J(t,s):e===j&&K(t,s))}function nt(e,t){try{t(function(n){V(e,n)},function(n){K(e,n)})}catch(n){K(e,n)}}function rt(e){return(new dt(this,e)).promise}function st(e){function i(e){V(n,e)}function s(e){K(n,e)}var t=this,n=new t(P);if(!f(e))return K(n,new TypeError("You must pass an array to race.")),n;var r=e.length;for(var o=0;n._state===H&&o<r;o++)Q(t.resolve(e[o]),undefined,i,s);return n}function ut(e){var t=this,n=new t(P);return K(n,e),n}function lt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ct(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function pt(e){this._id=ft++,this._state=undefined,this._result=undefined,this._subscribers=[],P!==e&&(typeof e!="function"&&lt(),this instanceof pt?nt(this,e):ct())}function vt(e,t){this._instanceConstructor=e,this.promise=new e(P),Array.isArray(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),this.length===0?J(this.promise,this._result):(this.length=this.length||0,this._enumerate(),this._remaining===0&&J(this.promise,this._result))):K(this.promise,this._validationError())}function mt(){var e;if(typeof i!="undefined")e=i;else if(typeof self!="undefined")e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n&&Object.prototype.toString.call(n.resolve())==="[object Promise]"&&!n.cast)return;e.Promise=ht}var a;Array.isArray?a=Array.isArray:a=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var f=a,l=0,c,h,p=function(t,n){C[l]=t,C[l+1]=n,l+=2,l===2&&(h?h(k):A())},m=typeof window!="undefined"?window:undefined,g=m||{},y=g.MutationObserver||g.WebKitMutationObserver,b=typeof r!="undefined"&&{}.toString.call(r)==="[object process]",w=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined",C=new Array(1e3),A;b?A=E():y?A=x():w?A=T():m===undefined&&typeof t=="function"?A=L():A=N();var M=O,D=_,H=void 0,B=1,j=2,F=new Y,Z=new Y,it=rt,ot=st,at=ut,ft=0,ht=pt;pt.all=it,pt.race=ot,pt.resolve=D,pt.reject=at,pt._setScheduler=d,pt._setAsap=v,pt._asap=p,pt.prototype={constructor:pt,then:M,"catch":function(e){return this.then(null,e)}};var dt=vt;vt.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},vt.prototype._enumerate=function(){var e=this.length,t=this._input;for(var n=0;this._state===H&&n<e;n++)this._eachEntry(t[n],n)},vt.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===D){var i=R(e);if(i===M&&e._state!==H)this._settledAt(e._state,t,e._result);else if(typeof i!="function")this._remaining--,this._result[t]=e;else if(n===ht){var s=new n(P);X(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(r(e),t)},vt.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===H&&(this._remaining--,e===j?K(r,n):this._result[t]=n),this._remaining===0&&J(r,this._result)},vt.prototype._willSettleAt=function(e,t){var n=this;Q(e,undefined,function(e){n._settledAt(B,t,e)},function(e){n._settledAt(j,t,e)})};var gt=mt,yt={Promise:ht,polyfill:gt};typeof e=="function"&&e.amd?e(function(){return yt}):typeof n!="undefined"&&n.exports?n.exports=yt:typeof this!="undefined"&&(this.ES6Promise=yt),gt()}).call(this)}).call(this,t("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:56}],76:[function(e,t,n){"use strict";function r(e){var t=e.length,n;for(var r=0;r<t;r++){n=e.charCodeAt(r);if((n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1}return!0}t.exports=function(e){var t=typeof e;if(t==="string"){var n=e;e=+e;if(e===0&&r(n))return!1}else if(t!=="number")return!1;return e-e<1}},{}],77:[function(e,t,n){"use strict";function u(e,t,n,r,i){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=i}function f(e,t,n,r,i,s){var o=i.length*i.BYTES_PER_ELEMENT;if(s<0)return e.bufferData(t,i,r),o;if(o+s>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,s,i),n}function l(e,t){var n=r.malloc(e.length,t),i=e.length;for(var s=0;s<i;++s)n[s]=e[s];return n}function c(e,t){var n=1;for(var r=t.length-1;r>=0;--r){if(t[r]!==n)return!1;n*=e[r]}return!0}function h(e,t,n,r){n=n||e.ARRAY_BUFFER,r=r||e.DYNAMIC_DRAW;if(n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==e.DYNAMIC_DRAW&&r!==e.STATIC_DRAW&&r!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer(),s=new u(e,n,i,0,r);return s.update(t),s}var r=e("typedarray-pool"),i=e("ndarray-ops"),s=e("ndarray"),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],a=u.prototype;a.bind=function(){this.gl.bindBuffer(this.type,this.handle)},a.unbind=function(){this.gl.bindBuffer(this.type,null)},a.dispose=function(){this.gl.deleteBuffer(this.handle)},a.update=function(e,t){typeof t!="number"&&(t=-1),this.bind();if(typeof e=="object"&&typeof e.shape!="undefined"){var n=e.dtype;o.indexOf(n)<0&&(n="float32");if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){var u=gl.getExtension("OES_element_index_uint");u&&n!=="uint16"?n="uint32":n="uint16"}if(n===e.dtype&&c(e.shape,e.stride))e.offset===0&&e.data.length===e.shape[0]?this.length=f(this.gl,this.type,this.length,this.usage,e.data,t):this.length=f(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var a=r.malloc(e.size,n),h=s(a,e.shape);i.assign(h,e),t<0?this.length=f(this.gl,this.type,this.length,this.usage,a,t):this.length=f(this.gl,this.type,this.length,this.usage,a.subarray(0,e.size),t),r.free(a)}}else if(Array.isArray(e)){var p;this.type===this.gl.ELEMENT_ARRAY_BUFFER?p=l(e,"uint16"):p=l(e,"float32"),t<0?this.length=f(this.gl,this.type,this.length,this.usage,p,t):this.length=f(this.gl,this.type,this.length,this.usage,p.subarray(0,e.length),t),r.free(p)}else if(typeof e=="object"&&typeof e.length=="number")this.length=f(this.gl,this.type,this.length,this.usage,e,t);else{if(typeof e!="number"&&e!==undefined)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e|=0,e<=0&&(e=1),this.gl.bufferData(this.type,e|0,this.usage),this.length=e}},t.exports=h},{ndarray:212,"ndarray-ops":211,"typedarray-pool":237}],78:[function(e,t,n){"use strict";function a(e,t,n){this.plot=e,this.shader=t,this.buffer=n,this.bounds=[Infinity,Infinity,-Infinity,-Infinity],this.numPoints=0,this.color=[0,0,0,1]}function l(e,t){var n=r(e.gl,o.vertex,o.fragment),s=i(e.gl),u=new a(e,n,s);return u.update(t),e.addObject(u),u}var r=e("gl-shader"),i=e("gl-buffer"),s=e("typedarray-pool"),o=e("./lib/shaders");t.exports=l;var u=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],f=a.prototype;f.draw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[1,1];return function(){var n=this.plot,r=this.shader,i=this.buffer,s=this.bounds,o=this.numPoints;if(!o)return;var a=n.gl,f=n.dataBox,l=n.viewBox,c=n.pixelRatio,h=s[2]-s[0],p=s[3]-s[1],d=f[2]-f[0],v=f[3]-f[1];e[0]=2*h/d,e[4]=2*p/v,e[6]=2*(s[0]-f[0])/d-1,e[7]=2*(s[1]-f[1])/v-1;var m=l[2]-l[0],g=l[3]-l[1];t[0]=2*c/m,t[1]=2*c/g,i.bind(),r.bind(),r.uniforms.viewTransform=e,r.uniforms.pixelScale=t,r.uniforms.color=this.color,r.attributes.position.pointer(a.FLOAT,!1,16,0),r.attributes
.pixelOffset.pointer(a.FLOAT,!1,16,8),a.drawArrays(a.TRIANGLES,0,o*u.length)}}(),f.drawPick=function(e){return e},f.pick=function(e,t){return null},f.update=function(e){e=e||{};var t,n,r,i=e.positions||[],o=e.errors||[],a=1;"lineWidth"in e&&(a=+e.lineWidth);var f=5;"capSize"in e&&(f=+e.capSize),this.color=(e.color||[0,0,0,1]).slice();var l=this.bounds=[Infinity,Infinity,-Infinity,-Infinity],c=this.numPoints=i.length>>1;for(t=0;t<c;++t)n=i[t*2],r=i[t*2+1],l[0]=Math.min(n,l[0]),l[1]=Math.min(r,l[1]),l[2]=Math.max(n,l[2]),l[3]=Math.max(r,l[3]);l[2]===l[0]&&(l[2]+=1),l[3]===l[1]&&(l[3]+=1);var h=1/(l[2]-l[0]),p=1/(l[3]-l[1]),d=l[0],v=l[1],m=s.mallocFloat32(c*u.length*4),g=0;for(t=0;t<c;++t){n=i[2*t],r=i[2*t+1];var y=o[4*t],b=o[4*t+1],w=o[4*t+2],E=o[4*t+3];for(var S=0;S<u.length;++S){var x=u[S],T=x[0],N=x[1];T<0?T*=y:T>0&&(T*=b),N<0?N*=w:N>0&&(N*=E),m[g++]=h*(n-d+T),m[g++]=p*(r-v+N),m[g++]=a*x[2]+(f+a)*x[4],m[g++]=a*x[3]+(f+a)*x[5]}}this.buffer.update(m),s.free(m)},f.dispose=function(){this.plot.removeObject(this),this.shader.dispose(),this.buffer.dispose()}},{"./lib/shaders":79,"gl-buffer":77,"gl-shader":156,"typedarray-pool":237}],79:[function(e,t,n){t.exports={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 pixelOffset;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvoid main() {\n  vec3 scrPosition = viewTransform * vec3(position, 1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],80:[function(e,t,n){"use strict";function u(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function f(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}function c(e,t,n,r){var i=l[r];for(var s=0;s<i.length;++s){var o=i[s];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}function h(e){var t=e.gl,n=r(t),o=i(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),a=s(t);a.attributes.position.location=0,a.attributes.color.location=1,a.attributes.offset.location=2;var f=new u(t,n,o,a);return f.update(e),f}t.exports=h;var r=e("gl-buffer"),i=e("gl-vao"),s=e("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a=u.prototype;a.isOpaque=function(){return this.opacity>=1},a.isTransparent=function(){return this.opacity<1},a.drawTransparent=a.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||o,i=n.projection=e.projection||o;n.model=e.model||o,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var s=r[12],u=r[13],a=r[14],f=r[15],l=this.pixelRatio*(i[3]*s+i[7]*u+i[11]*a+i[15]*f)/t.drawingBufferHeight;this.vao.bind();for(var c=0;c<3;++c)t.lineWidth(this.lineWidth[c]),n.capSize=this.capSize[c]*l,t.drawArrays(t.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var l=function(){var e=new Array(3);for(var t=0;t<3;++t){var n=[];for(var r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var s=(r+t)%3,o=[0,0,0];o[s]=i,n.push(o)}e[t]=n}return e}();a.update=function(e){e=e||{},"lineWidth"in e&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in e&&(this.opacity=e.opacity);var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;Array.isArray(t[0])||(t=[t,t,t]);if(n&&r){var i=[],s=n.length,o=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],this.lineCount=[0,0,0];for(var u=0;u<3;++u){this.lineOffset[u]=o;e:for(var a=0;a<s;++a){var l=n[a];for(var h=0;h<3;++h)if(isNaN(l[h])||!isFinite(l[h]))continue e;var p=r[a],d=t[u];Array.isArray(d[0])&&(d=t[a]),d.length===3&&(d=[d[0],d[1],d[2],1]);if(isNaN(p[0][u])||isNaN(p[1][u]))continue;if(p[0][u]<0){var v=l.slice();v[u]+=p[0][u],i.push(l[0],l[1],l[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),f(this.bounds,v),o+=2+c(i,v,d,u)}if(p[1][u]>0){var v=l.slice();v[u]+=p[1][u],i.push(l[0],l[1],l[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),f(this.bounds,v),o+=2+c(i,v,d,u)}}this.lineCount[u]=o-this.lineOffset[u]}this.buffer.update(i)}},a.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":81,"gl-buffer":77,"gl-vao":185}],81:[function(e,t,n){"use strict";var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}",s="precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"},{name:"offset",type:"vec3"},{name:"color",type:"vec4"}])}},{"gl-shader":156}],82:[function(e,t,n){"use strict";function f(e){var t=e.getParameter(e.FRAMEBUFFER_BINDING),n=e.getParameter(e.RENDERBUFFER_BINDING),r=e.getParameter(e.TEXTURE_BINDING_2D);return[t,n,r]}function l(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function c(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);i=new Array(n+1);for(var r=0;r<=n;++r){var s=new Array(n);for(var o=0;o<r;++o)s[o]=e.COLOR_ATTACHMENT0+o;for(var o=r;o<n;++o)s[o]=e.NONE;i[r]=s}}function h(e){switch(e){case s:throw new Error("gl-fbo: Framebuffer unsupported");case o:throw new Error("gl-fbo: Framebuffer incomplete attachment");case u:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case a:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(e,t,n,i,s,o){if(!i)return null;var u=r(e,t,n,s,i);return u.magFilter=e.NEAREST,u.minFilter=e.NEAREST,u.mipSamples=1,u.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,u.handle,0),u}function d(e,t,n,r,i){var s=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,s),s}function v(e){var t=f(e.gl),n=e.gl,r=e.handle=n.createFramebuffer(),s=e._shape[0],o=e._shape[1],u=e.color.length,a=e._ext,c=e._useStencil,v=e._useDepth,m=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var g=0;g<u;++g)e.color[g]=p(n,s,o,m,n.RGBA,n.COLOR_ATTACHMENT0+g);u===0?(e._color_rb=d(n,s,o,n.RGBA4,n.COLOR_ATTACHMENT0),a&&a.drawBuffersWEBGL(i[0])):u>1&&a.drawBuffersWEBGL(i[u]);var y=n.getExtension("WEBGL_depth_texture");y?c?e.depth=p(n,s,o,y.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):v&&(e.depth=p(n,s,o,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):v&&c?e._depth_rb=d(n,s,o,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):v?e._depth_rb=d(n,s,o,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):c&&(e._depth_rb=d(n,s,o,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var b=n.checkFramebufferStatus(n.FRAMEBUFFER);if(b!==n.FRAMEBUFFER_COMPLETE){e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(var g=0;g<e.color.length;++g)e.color[g].dispose(),e.color[g]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),l(n,t),h(b)}l(n,t)}function m(e,t,n,r,i,s,o,u){this.gl=e,this._shape=[t|0,n|0],this._destroyed=!1,this._ext=u,this.color=new Array(i);for(var a=0;a<i;++a)this.color[a]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=s,this._useStencil=o;var f=this,l=[t|0,n|0];Object.defineProperties(l,{0:{get:function(){return f._shape[0]},set:function(e){return f.width=e}},1:{get:function(){return f._shape[1]},set:function(e){return f.height=e}}}),this._shapeVector=l,v(this)}function y(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]===t&&e._shape[1]===n)return;var r=e.gl,i=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;var s=f(r);for(var o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,e._shape[0],e._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,e.handle);var u=r.checkFramebufferStatus(r.FRAMEBUFFER);u!==r.FRAMEBUFFER_COMPLETE&&(e.dispose(),l(r,s),h(u)),l(r,s)}function b(e,t,n,r){s||(s=e.FRAMEBUFFER_UNSUPPORTED,o=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,u=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,a=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var f=e.getExtension("WEBGL_draw_buffers");!i&&f&&c(e,f),Array.isArray(t)&&(r=n,n=t[1]|0,t=t[0]|0);if(typeof t!="number")throw new Error("gl-fbo: Missing shape parameter");var l=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>l||n<0||n>l)throw new Error("gl-fbo: Parameters are too large for FBO");r=r||{};var h=1;if("color"in r){h=Math.max(r.color|0,0);if(h<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!f)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>e.getParameter(f.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var p=e.UNSIGNED_BYTE,d=e.getExtension("OES_texture_float");if(r.float&&h>0){if(!d)throw new Error("gl-fbo: Context does not support floating point textures");p=e.FLOAT}else r.preferFloat&&h>0&&d&&(p=e.FLOAT);var v=!0;"depth"in r&&(v=!!r.depth);var g=!1;return"stencil"in r&&(g=!!r.stencil),new m(e,t,n,p,h,v,g,f)}var r=e("gl-texture2d");t.exports=b;var i=null,s,o,u,a,g=m.prototype;Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){Array.isArray(e)||(e=[e|0,e|0]);if(e.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var t=e[0]|0,n=e[1]|0;return y(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return e|=0,y(this,e,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,y(this,this._shape[0],e),e},enumerable:!1}}),g.bind=function(){if(this._destroyed)return;var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])},g.dispose=function(){if(this._destroyed)return;this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}},{"gl-texture2d":181}],83:[function(e,t,n){n.lineVertex="precision mediump float;\n#define GLSLIFY 1\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\nvoid main() {\n  vec2 dir = (matrix * vec3(d, 0)).xy;\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = 0.5 * width *\n    normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n}\n",n.lineFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}\n",n.mitreVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 p;\n\nuniform mat3  matrix;\nuniform vec2 screenShape;\nuniform float radius;\n\nvoid main() {\n  vec3 pp = matrix * vec3(p, 1);\n  gl_Position  = vec4(pp.xy, 0, pp.z);\n  gl_PointSize = radius;\n}\n",n.mitreFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}\n",n.pickVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a, d;\nattribute vec4 pick0, pick1;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = width *\n    normalize(screenShape.yx * vec2(d.y, -d.x)) / screenShape.xy;\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}\n",n.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}\n",n.fillVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 projectAxis;\nuniform float projectValue;\nuniform float depth;\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 p = base.xy / base.z;\n  if(d.y < 0.0 || (d.y == 0.0 && d.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}\n",n.fillFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"},{}],84:[function(e,t,n){"use strict";function f(e,t,n,r,i,s,o,u){this.plot=e,this.dashPattern=t,this.lineBuffer=n,this.pickBuffer=r,this.lineShader=i,this.mitreShader=s,this.fillShader=o,this.pickShader=u,this.usingDashes=!1,this.bounds=[Infinity,Infinity,-Infinity,-Infinity],this.width=1,this.color=[0,0,1,1],this.fill=[!1,!1,!1,!1],this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.data=null,this.numPoints=0,this.vertCount=0,this.pickOffset=0,this.lodBuffer=[]}function c(e){return e.map(function(e){return e.slice()})}function h(e,t){var n=e.gl,o=i(n),u=i(n),l=s(n,[1,1]),c=r(n,a.lineVertex,a.lineFragment),h=r(n,a.mitreVertex,a.mitreFragment),p=r(n,a.fillVertex,a.fillFragment),d=r(n,a.pickVertex,a.pickFragment),v=new f(e,l,o,u,c,h,p,d);return e.addObject(v),v.update(t),v}t.exports=h;var r=e("gl-shader"),i=e("gl-buffer"),s=e("gl-texture2d"),o=e("ndarray"),u=e("typedarray-pool"),a=e("./lib/shaders"),l=f.prototype;l.draw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0],n=[1,0],r=[-1,0],i=[0,1],s=[0,-1];return function(){var o=this.plot,u=this.color,a=this.width,f=this.numPoints,l=this.bounds,c=this.vertCount;if(!c)return;var h=o.gl,p=o.viewBox,d=o.dataBox,v=o.pixelRatio,m=l[2]-l[0],g=l[3]-l[1],y=d[2]-d[0],b=d[3]-d[1],w=p[2]-p[0],E=p[3]-p[1];e[0]=2*m/y,e[4]=2*g/b,e[6]=2*(l[0]-d[0])/y-1,e[7]=2*(l[1]-d[1])/b-1,t[0]=w,t[1]=E;var S=this.lineBuffer;S.bind();var x=this.fill;if(x[0]||x[1]||x[2]||x[3]){var T=this.fillShader;T.bind();var N=T.uniforms;N.matrix=e,N.depth=o.nextDepthValue();var C=T.attributes;C.a.pointer(h.FLOAT,!1,16,0),C.d.pointer(h.FLOAT,!1,16,8),h.depthMask(!0),h.enable(h.DEPTH_TEST);var k=this.fillColor;x[0]&&(N.color=k[0],N.projectAxis=r,N.projectValue=1,h.drawArrays(h.TRIANGLES,0,c)),x[1]&&(N.color=k[1],N.projectAxis=s,N.projectValue=1,h.drawArrays(h.TRIANGLES,0,c)),x[2]&&(N.color=k[2],N.projectAxis=n,N.projectValue=1,h.drawArrays(h.TRIANGLES,0,c)),x[3]&&(N.color=k[3],N.projectAxis=i,N.projectValue=1,h.drawArrays(h.TRIANGLES,0,c)),h.depthMask(!1),h.disable(h.DEPTH_TEST)}var L=this.lineShader;L.bind();var A=L.uniforms;A.matrix=e,A.color=u,A.width=a*v,A.screenShape=t,A.dashPattern=this.dashPattern.bind(),A.dashLength=this.dashLength*v;var O=L.attributes;O.a.pointer(h.FLOAT,!1,16,0),O.d.pointer(h.FLOAT,!1,16,8),h.drawArrays(h.TRIANGLES,0,c);if(a>2&&!this.usingDashes){var M=this.mitreShader;M.bind();var _=M.uniforms;_.matrix=e,_.color=u,_.screenShape=t,_.radius=a*v,M.attributes.p.pointer(h.FLOAT,!1,48,0),h.drawArrays(h.POINTS,0,c/3|0)}}}(),l.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0],n=[0,0,0,0];return function(r){var i=this.plot,s=this.pickShader,o=this.lineBuffer,u=this.pickBuffer,a=this.width,f=this.numPoints,l=this.bounds,c=this.vertCount,h=i.gl,p=i.viewBox,d=i.dataBox,v=i.pickPixelRatio,m=l[2]-l[0],g=l[3]-l[1],y=d[2]-d[0],b=d[3]-d[1],w=p[2]-p[0],E=p[3]-p[1];this.pickOffset=r;if(!c)return r+f;e[0]=2*m/y,e[4]=2*g/b,e[6]=2*(l[0]-d[0])/y-1,e[7]=2*(l[1]-d[1])/b-1,t[0]=w,t[1]=E,n[0]=r&255,n[1]=r>>>8&255,n[2]=r>>>16&255,n[3]=r>>>24,s.bind();var S=s.uniforms;S.matrix=e,S.width=a*v,S.pickOffset=n,S.screenShape=t;var x=s.attributes;return o.bind(),x.a.pointer(h.FLOAT,!1,16,0),x.d.pointer(h.FLOAT,!1,16,8),u.bind(),x.pick0.pointer(h.UNSIGNED_BYTE,!1,8,0),x.pick1.pointer(h.UNSIGNED_BYTE,!1,8,4),h.drawArrays(h.TRIANGLES,0,c),r+f}}(),l.pick=function(e,t,n){var r=this.pickOffset,i=this.numPoints;if(n<r||n>=r+i)return null;var s=n-r,o=this.data;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}},l.update=function(e){e=e||{};var t=this.plot.gl,n=!!e.connectGaps;this.color=(e.color||[0,0,1,1]).slice(),this.width=+(e.width||1),this.fill=(e.fill||[!1,!1,!1,!1]).slice(),this.fillColor=c(e.fillColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var r=e.dashes||[1],i=0;for(var a=0;a<r.length;++a)i+=r[a];var f=u.mallocUint8(i),l=0,h=255;for(var a=0;a<r.length;++a){for(var p=0;p<r[a];++p)f[l++]=h;h^=255}this.dashPattern.dispose(),this.usingDashes=r.length>1,this.dashPattern=s(t,o(f,[i,1,4],[1,0,0])),this.dashPattern.minFilter=t.NEAREST,this.dashPattern.magFilter=t.NEAREST,this.dashLength=i,u.free(f);var d=e.positions;this.data=d;var v=this.bounds;v[0]=v[1]=Infinity,v[2]=v[3]=-Infinity;var m=this.numPoints=d.length>>>1;if(m===0)return;for(var a=0;a<m;++a){var g=d[2*a],y=d[2*a+1];if(isNaN(g)||isNaN(y))continue;v[0]=Math.min(v[0],g),v[1]=Math.min(v[1],y),v[2]=Math.max(v[2],g),v[3]=Math.max(v[3],y)}v[0]===v[2]&&(v[2]+=1),v[3]===v[1]&&(v[3]+=1);var b=u.mallocFloat32(24*(m-1)),w=u.mallocUint32(12*(m-1)),E=b.length,S=w.length,l=m,x=0;while(l>1){var T=--l,g=d[2*l],y=d[2*l+1],N=T-1,C=d[2*N],k=d[2*N+1];if(isNaN(g)||isNaN(y)||isNaN(C)||isNaN(k))continue;x+=1,g=(g-v[0])/(v[2]-v[0]),y=(y-v[1])/(v[3]-v[1]),C=(C-v[0])/(v[2]-v[0]),k=(k-v[1])/(v[3]-v[1]);var L=C-g,A=k-y,O=T|1<<24,M=T-1,_=T,D=T-1|1<<24;b[--E]=-A,b[--E]=-L,b[--E]=y,b[--E]=g,w[--S]=O,w[--S]=M,b[--E]=A,b[--E]=L,b[--E]=k,b[--E]=C,w[--S]=_,w[--S]=D,b[--E]=-A,b[--E]=-L,b[--E]=k,b[--E]=C,w[--S]=_,w[--S]=D,b[--E]=A,b[--E]=L,b[--E]=k,b[--E]=C,w[--S]=_,w[--S]=D,b[--E]=-A,b[--E]=-L,b[--E]=y,b[--E]=g,w[--S]=O,w[--S]=M,b[--E]=A,b[--E]=L,b[--E]=y,b[--E]=g,w[--S]=O,w[--S]=M}this.vertCount=6*x,this.lineBuffer.update(b.subarray(E)),this.pickBuffer.update(w.subarray(S)),u.free(b),u.free(w)},l.dispose=function(){this.plot.removeObject(this),this.lineBuffer.dispose(),this.pickBuffer.dispose(),this.lineShader.dispose(),this.mitreShader.dispose(),this.fillShader.dispose(),this.pickShader.dispose(),this.dashPattern.dispose()}},{"./lib/shaders":83,"gl-buffer":77,"gl-shader":156,"gl-texture2d":181,ndarray:212,"typedarray-pool":237}],85:[function(e,t,n){var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",s="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",o="precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(e){return r(e,i,s,null,u)},n.createPickShader=function(e){return r(e,i,o,null,u)}},{"gl-shader":156}],86:[function(e,t,n){"use strict";function p(e,t){var n=0;for(var r=0;r<3;++r){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function d(e){var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function v(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function m(e,t,n,r,i,s){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=s,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function y(e){var t=e.gl||e.scene&&e.scene.gl,n=l(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var o=c(t);o.attributes.position.location=0,o.attributes.nextPosition.location=1,o.attributes.arcLength.location=2,o.attributes.lineWidth.location=3,o.attributes.color.location=4;var u=r(t),f=i(t,[{buffer:u,size:3,offset:0,stride:48},{buffer:u,size:3,offset:12,stride:48},{buffer:u,size:1,offset:24,stride:48},{buffer:u,size:1,offset:28,stride:48},{buffer:u,size:4,offset:32,stride:48}]),h=a(new Array(1024),[256,1,4]);for(var p=0;p<1024;++p)h.data[p]=255;var d=s(t,h);d.wrap=t.REPEAT;var v=new m(t,n,o,u,f,d);return v.update(e),v}t.exports=y;var r=e("gl-buffer"),i=e("gl-vao"),s=e("gl-texture2d"),o=e("glsl-read-float"),u=e("binary-search-bounds"),a=e("ndarray"),f=e("./lib/shaders"),l=f.createShader,c=f.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=m.prototype;g.isTransparent=function(){return this.opacity<1},g.isOpaque=function(){return this.opacity>=1},g.pickSlots=1,g.setPickBase=function(e){this.pickId=e},g.drawTransparent=g.draw=function(e){var t=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:e.model||h,view:e.view||h,projection:e.projection||h,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount)},g.drawPick=function(e){var t=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:e.model||h,view:e.view||h,projection:e.projection||h,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount)},g.update=function(e){var t,n;this.dirty=!0;var r=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),"opacity"in e&&(this.opacity=+e.opacity);var i=e.position||e.positions;if(!i)return;var s=e.color||e.colors||[0,0,0,1],o=e.lineWidth||1,f=[],l=[],c=[],h=0,d=0,v=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],m=!1;e:for(t=1;t<i.length;++t){var g=i[t-1],y=i[t];l.push(h),c.push(g.slice());for(n=0;n<3;++n){if(isNaN(g[n])||isNaN(y[n])||!isFinite(g[n])||!isFinite(y[n])){if(!r&&f.length>0){for(var b=0;b<24;++b)f.push(f[f.length-12]);d+=2,m=!0}continue e}v[0][n]=Math.min(v[0][n],g[n],y[n]),v[1][n]=Math.max(v[1][n],g[n],y[n])}var w,E;Array.isArray(s[0])?(w=s[t-1],E=s[t]):w=E=s,w.length===3&&(w=[w[0],w[1],w[2],1]),E.length===3&&(E=[E[0],E[1],E[2],1]);var S;Array.isArray(o)?S=o[t-1]:S=o;var x=h;h+=p(g,y);if(m){for(n=0;n<2;++n)f.push(g[0],g[1],g[2],y[0],y[1],y[2],x,S,w[0],w[1],w[2],w[3]);d+=2,m=!1}f.push(g[0],g[1],g[2],y[0],y[1],y[2],x,S,w[0],w[1],w[2],w[3],g[0],g[1],g[2],y[0],y[1],y[2],x,-S,w[0],w[1],w[2],w[3],y[0],y[1],y[2],g[0],g[1],g[2],h,-S,E[0],E[1],E[2],E[3],y[0],y[1],y[2],g[0],g[1],g[2],h,S,E[0],E[1],E[2],E[3]),d+=4}this.buffer.update(f),l.push(h),c.push(i[i.length-1].slice()),this.bounds=v,this.vertexCount=d,this.points=c,this.arcLength=l;if("dashes"in 
e){var T=e.dashes,N=T.slice();N.unshift(0);for(t=1;t<N.length;++t)N[t]=N[t-1]+N[t];var C=a(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)C.set(t,0,n,0);u.le(N,N[N.length-1]*t/255)&1?C.set(t,0,0,0):C.set(t,0,0,255)}this.texture.setPixels(C)}},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},g.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=o(e.value[0],e.value[1],e.value[2],0),n=u.le(this.arcLength,t);if(n<0)return null;if(n===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);var r=this.points[n],i=this.points[Math.min(n+1,this.points.length-1)],s=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),a=1-s,f=[0,0,0];for(var l=0;l<3;++l)f[l]=a*r[l]+s*i[l];var c=Math.min(s<.5?n:n+1,this.points.length-1);return new v(t,f,c,this.points[c])}},{"./lib/shaders":85,"binary-search-bounds":87,"gl-buffer":77,"gl-texture2d":181,"gl-vao":185,"glsl-read-float":88,ndarray:212}],87:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],88:[function(e,t,n){function s(e,t,n,s){return r[0]=s,r[1]=n,r[2]=t,r[3]=e,i[0]}t.exports=s;var r=new Uint8Array(4),i=new Float32Array(r.buffer)},{}],89:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null}t.exports=r},{}],90:[function(e,t,n){function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],91:[function(e,t,n){function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],92:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x}t.exports=r},{}],93:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=r*o,c=r*u,h=i*o,p=i*u,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-c-d,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-f-d,e[6]=p+v,e[7]=0,e[8]=h+m,e[9]=p-v,e[10]=1-f-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],94:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}t.exports=r},{}],95:[function(e,t,n){function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],96:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null}t.exports=r},{}],97:[function(e,t,n){function i(e,t,n,i){var s,o,u,a,f,l,c,h,p,d,v=t[0],m=t[1],g=t[2],y=i[0],b=i[1],w=i[2],E=n[0],S=n[1],x=n[2];return Math.abs(v-E)<1e-6&&Math.abs(m-S)<1e-6&&Math.abs(g-x)<1e-6?r(e):(c=v-E,h=m-S,p=g-x,d=1/Math.sqrt(c*c+h*h+p*p),c*=d,h*=d,p*=d,s=b*p-w*h,o=w*c-y*p,u=y*h-b*c,d=Math.sqrt(s*s+o*o+u*u),d?(d=1/d,s*=d,o*=d,u*=d):(s=0,o=0,u=0),a=h*u-p*o,f=p*s-c*u,l=c*o-h*s,d=Math.sqrt(a*a+f*f+l*l),d?(d=1/d,a*=d,f*=d,l*=d):(a=0,f=0,l=0),e[0]=s,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=f,e[6]=h,e[7]=0,e[8]=u,e[9]=l,e[10]=p,e[11]=0,e[12]=-(s*v+o*m+u*g),e[13]=-(a*v+f*m+l*g),e[14]=-(c*v+h*m+p*g),e[15]=1,e)}var r=e("./identity");t.exports=i},{"./identity":95}],98:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e}t.exports=r},{}],99:[function(e,t,n){function r(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}t.exports=r},{}],100:[function(e,t,n){function r(e,t,n,r){var i=r[0],s=r[1],o=r[2],u=Math.sqrt(i*i+s*s+o*o),a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M;return Math.abs(u)<1e-6?null:(u=1/u,i*=u,s*=u,o*=u,a=Math.sin(n),f=Math.cos(n),l=1-f,c=t[0],h=t[1],p=t[2],d=t[3],v=t[4],m=t[5],g=t[6],y=t[7],b=t[8],w=t[9],E=t[10],S=t[11],x=i*i*l+f,T=s*i*l+o*a,N=o*i*l-s*a,C=i*s*l-o*a,k=s*s*l+f,L=o*s*l+i*a,A=i*o*l+s*a,O=s*o*l-i*a,M=o*o*l+f,e[0]=c*x+v*T+b*N,e[1]=h*x+m*T+w*N,e[2]=p*x+g*T+E*N,e[3]=d*x+y*T+S*N,e[4]=c*C+v*k+b*L,e[5]=h*C+m*k+w*L,e[6]=p*C+g*k+E*L,e[7]=d*C+y*k+S*L,e[8]=c*A+v*O+b*M,e[9]=h*A+m*O+w*M,e[10]=p*A+g*O+E*M,e[11]=d*A+y*O+S*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}t.exports=r},{}],101:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e}t.exports=r},{}],102:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e}t.exports=r},{}],103:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e}t.exports=r},{}],104:[function(e,t,n){function r(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=r},{}],105:[function(e,t,n){function r(e,t,n){var r=n[0],i=n[1],s=n[2],o,u,a,f,l,c,h,p,d,v,m,g;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],u=t[1],a=t[2],f=t[3],l=t[4],c=t[5],h=t[6],p=t[7],d=t[8],v=t[9],m=t[10],g=t[11],e[0]=o,e[1]=u,e[2]=a,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=p,e[8]=d,e[9]=v,e[10]=m,e[11]=g,e[12]=o*r+l*i+d*s+t[12],e[13]=u*r+c*i+v*s+t[13],e[14]=a*r+h*i+m*s+t[14],e[15]=f*r+p*i+g*s+t[15]),e}t.exports=r},{}],106:[function(e,t,n){function r(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],107:[function(e,t,n){"use strict";function s(e,t){var n=[0,0,0,0];for(var r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=e[4*r+i]*t[r];return n}function o(e,t,n,r,i){var o=s(r,s(n,s(t,[e[0],e[1],e[2],1])));for(var u=0;u<3;++u)o[u]/=o[3];return[.5*i[0]*(1+o[0]),.5*i[1]*(1-o[1])]}function u(e,t){if(e.length===2){var n=0,s=0;for(var o=0;o<2;++o)n+=Math.pow(t[o]-e[0][o],2),s+=Math.pow(t[o]-e[1][o],2);return n=Math.sqrt(n),s=Math.sqrt(s),n+s<1e-6?[1,0]:[s/(n+s),n/(s+n)]}if(e.length===3){var u=[0,0];return i(e[0],e[1],e[2],t,u),r(e,u)}return[]}function a(e,t){var n=[0,0,0];for(var r=0;r<e.length;++r){var i=e[r],s=t[r];for(var o=0;o<3;++o)n[o]+=s*i[o]}return n}function f(e,t,n,r,i,s){if(e.length===1)return[0,e[0].slice()];var f=new Array(e.length);for(var l=0;l<e.length;++l)f[l]=o(e[l],n,r,i,s);var c=0,h=Infinity;for(var l=0;l<f.length;++l){var p=0;for(var d=0;d<2;++d)p+=Math.pow(f[l][d]-t[d],2);p<h&&(h=p,c=l)}var v=u(f,t),m=0;for(var l=0;l<3;++l){if(v[l]<-0.001||v[l]>1.0001)return null;m+=v[l]}return Math.abs(m-1)>.001?null:[c,a(e,v),v]}var r=e("barycentric"),i=e("polytope-closest-point/lib/closest_point_2d.js");t.exports=f},{barycentric:110,"polytope-closest-point/lib/closest_point_2d.js":112}],108:[function(e,t,n){var r="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",i="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",s="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",o="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",u="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",a="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",l="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",c="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",p="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n";n.meshShader={vertex:r,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:u,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{}],109:[function(e,t,n){"use strict";function x(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,x,T,N,C,k){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=s,this.pointPickShader=o,this.contourShader=u,this.trianglePositions=a,this.triangleColors=l,this.triangleNormals=h,this.triangleUVs=c,this.triangleIds=f,this.triangleVAO=p,this.triangleCount=0,this.lineWidth=1,this.edgePositions=d,this.edgeColors=m,this.edgeUVs=g,this.edgeIds=v,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=E,this.pointUVs=x,this.pointSizes=T,this.pointIds=w,this.pointVAO=N,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=C,this.contourVAO=k,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=S,this._view=S,this._projection=S,this._resolution=[1,1]}function N(e){var t=c({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024);for(var r=0;r<256;++r){var i=t[r];for(var s=0;s<3;++s)n[4*r+s]=i[s];n[4*r+3]=i[3]*255}return l(n,[256,256,4],[4,0,1])}function C(e,t,n){var r=new Array(t);for(var i=0;i<t;++i)r[i]=0;var s=e.length;for(var i=0;i<s;++i){var o=e[i];for(var u=0;u<o.length;++u)r[o[u]]=n[i]}return r}function k(e){var t=e.length,n=new Array(t);for(var r=0;r<t;++r)n[r]=e[r][2];return n}function L(e){var t=r(e,m);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}function A(e){var t=r(e,g);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}function O(e){var t=r(e,y);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function M(e){var t=r(e,b);return t.attributes.position.location=0,t.attributes.id.location=1,t}function _(e){var t=r(e,w);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function D(e){var t=r(e,E);return t.attributes.position.location=0,t}function P(e){var t=e.gl,n=L(t),r=A(t),u=O(t),a=M(t),f=_(t),c=D(t),h=o(t,l(new Uint8Array([255,255,255,255]),[1,1,4]));h.generateMipmap(),h.minFilter=t.LINEAR_MIPMAP_LINEAR,h.magFilter=t.LINEAR;var p=i(t),d=i(t),v=i(t),m=i(t),g=i(t),y=s(t,[{buffer:p,type:t.FLOAT,size:3},{buffer:g,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:d,type:t.FLOAT,size:4},{buffer:v,type:t.FLOAT,size:2},{buffer:m,type:t.FLOAT,size:3}]),b=i(t),w=i(t),E=i(t),S=i(t),T=s(t,[{buffer:b,type:t.FLOAT,size:3},{buffer:S,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:w,type:t.FLOAT,size:4},{buffer:E,type:t.FLOAT,size:2}]),N=i(t),C=i(t),k=i(t),P=i(t),H=i(t),B=s(t,[{buffer:N,type:t.FLOAT,size:3},{buffer:H,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:t.FLOAT,size:4},{buffer:k,type:t.FLOAT,size:2},{buffer:P,type:t.FLOAT,size:1}]),j=i(t),F=s(t,[{buffer:j,type:t.FLOAT,size:3}]),I=new x(t,h,n,r,u,a,f,c,p,g,d,v,m,y,b,S,w,E,T,N,H,C,k,P,B,j,F);return I.update(e),I}var r=e("gl-shader"),i=e("gl-buffer"),s=e("gl-vao"),o=e("gl-texture2d"),u=e("normals"),a=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),l=e("ndarray"),c=e("colormap"),h=e("simplicial-complex-contour"),p=e("typedarray-pool"),d=e("./lib/shaders"),v=e("./lib/closest-point"),m=d.meshShader,g=d.wireShader,y=d.pointShader,b=d.pickShader,w=d.pointPickShader,E=d.contourShader,S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T=x.prototype;T.isOpaque=function(){return this.opacity>=1},T.isTransparent=function(){return this.opacity<1},T.pickSlots=1,T.setPickBase=function(e){this.pickId=e},T.highlight=function(e){if(!e||!this.contourEnable){this.contourCount=0;return}var t=h(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,i=t.vertexWeights,s=n.length,o=p.mallocFloat32(6*s),u=0;for(var a=0;a<s;++a){var f=n[a];for(var l=0;l<2;++l){var c=f[0];f.length===2&&(c=f[l]);var d=r[c][0],v=r[c][1],m=i[c],g=1-m,y=this.positions[d],b=this.positions[v];for(var w=0;w<3;++w)o[u++]=m*y[w]+g*b[w]}}this.contourCount=u/3|0,this.contourPositions.update(o.subarray(0,u)),p.free(o)},T.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"opacity"in e&&(this.opacity=e.opacity),e.texture?(this.texture.dispose(),this.texture=o(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(N(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(!r||!n)return;var i=[],s=[],a=[],f=[],l=[],c=[],h=[],p=[],d=[],v=[],m=[],g=[],y=[],b=[];this.cells=n,this.positions=r;var w=e.vertexNormals,E=e.cellNormals;e.useFacetNormals&&!E&&(E=u.faceNormals(n,r)),!E&&!w&&(w=u.vertexNormals(n,r));var S=e.vertexColors,x=e.cellColors,T=e.meshColor||[1,1,1,1],L=e.vertexUVs,A=e.vertexIntensity,O=e.cellUVs,M=e.cellIntensity,_=Infinity,D=-Infinity;if(!L&&!O)if(A)for(var P=0;P<A.length;++P){var H=A[P];_=Math.min(_,H),D=Math.max(D,H)}else if(M)for(var P=0;P<M.length;++P){var H=M[P];_=Math.min(_,H),D=Math.max(D,H)}else for(var P=0;P<r.length;++P){var H=r[P][2];_=Math.min(_,H),D=Math.max(D,H)}A?this.intensity=A:M?this.intensity=C(n,r.length,M):this.intensity=k(r);var B=e.pointSizes,j=e.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(var P=0;P<r.length;++P){var F=r[P];for(var I=0;I<3;++I){if(isNaN(F[I])||!isFinite(F[I]))continue;this.bounds[0][I]=Math.min(this.bounds[0][I],F[I]),this.bounds[1][I]=Math.max(this.bounds[1][I],F[I])}}var q=0,R=0,U=0;e:for(var P=0;P<n.length;++P){var z=n[P];switch(z.length){case 1:var W=z[0],F=r[W];for(var I=0;I<3;++I)if(isNaN(F[I])||!isFinite(F[I]))continue e;v.push(F[0],F[1],F[2]);var X;S?X=S[W]:x?X=x[P]:X=T,X.length===3?m.push(X[0],X[1],X[2],1):m.push(X[0],X[1],X[2],X[3]);var V;L?V=L[W]:A?V=[(A[W]-_)/(D-_),0]:O?V=O[P]:M?V=[(M[P]-_)/(D-_),0]:V=[(F[2]-_)/(D-_),0],g.push(V[0],V[1]),B?y.push(B[W]):y.push(j),b.push(P),U+=1;break;case 2:for(var I=0;I<2;++I){var W=z[I],F=r[W];for(var $=0;$<3;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e}for(var I=0;I<2;++I){var W=z[I],F=r[W];c.push(F[0],F[1],F[2]);var X;S?X=S[W]:x?X=x[P]:X=T,X.length===3?h.push(X[0],X[1],X[2],1):h.push(X[0],X[1],X[2],X[3]);var V;L?V=L[W]:A?V=[(A[W]-_)/(D-_),0]:O?V=O[P]:M?V=[(M[P]-_)/(D-_),0]:V=[(F[2]-_)/(D-_),0],p.push(V[0],V[1]),d.push(P)}R+=1;break;case 3:for(var I=0;I<3;++I){var W=z[I],F=r[W];for(var $=0;$<3;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e}for(var I=0;I<3;++I){var W=z[I],F=r[W];i.push(F[0],F[1],F[2]);var X;S?X=S[W]:x?X=x[P]:X=T,X.length===3?s.push(X[0],X[1],X[2],1):s.push(X[0],X[1],X[2],X[3]);var V;L?V=L[W]:A?V=[(A[W]-_)/(D-_),0]:O?V=O[P]:M?V=[(M[P]-_)/(D-_),0]:V=[(F[2]-_)/(D-_),0],f.push(V[0],V[1]);var J;w?J=w[W]:J=E[P],a.push(J[0],J[1],J[2]),l.push(P)}q+=1;break;default:}}this.pointCount=U,this.edgeCount=R,this.triangleCount=q,this.pointPositions.update(v),this.pointColors.update(m),this.pointUVs.update(g),this.pointSizes.update(y),this.pointIds.update(new Uint32Array(b)),this.edgePositions.update(c),this.edgeColors.update(h),this.edgeUVs.update(p),this.edgeIds.update(new Uint32Array(d)),this.trianglePositions.update(i),this.triangleColors.update(s),this.triangleUVs.update(f),this.triangleNormals.update(a),this.triangleIds.update(new Uint32Array(l))},T.drawTransparent=T.draw=function(e){e=e||{};var t=this.gl,n=e.model||S,r=e.view||S,i=e.projection||S,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var o=0;o<3;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);var u={model:n,view:r,projection:i,clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var l=new Array(16);a(l,u.view,u.model),a(l,u.projection,l),f(l,l);for(var o=0;o<3;++o)u.eyePosition[o]=l[12+o]/l[15];var c=l[15];for(var o=0;o<3;++o)c+=this.lightPosition[o]*l[4*o+3];for(var o=0;o<3;++o){var h=l[12+o];for(var p=0;p<3;++p)h+=l[4*p+o]*this.lightPosition[p];u.lightPosition[o]=h/c}if(this.triangleCount>0){var d=this.triShader;d.bind(),d.uniforms=u,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var d=this.lineShader;d.bind(),d.uniforms=u,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var d=this.pointShader;d.bind(),d.uniforms=u,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var d=this.contourShader;d.bind(),d.uniforms=u,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},T.drawPick=function(e){e=e||{};var t=this.gl,n=e.model||S,r=e.view||S,i=e.projection||S,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]];for(var o=0;o<3;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var u={model:n,view:r,projection:i,clipBounds:s,pickId:this.pickId/255},a=this.pickShader;a.bind(),a.uniforms=u,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,this.edgeCount*2),this.edgeVAO.unbind());if(this.pointCount>0){var a=this.pointPickShader;a.bind(),a.uniforms=u,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},T.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,i=new Array(n.length);for(var s=0;s<n.length;++s)i[s]=r[n[s]];var o=v(i,[e.coord[0],this._resolution[1]-e.coord[1]],this._model,this._view,this._projection,this._resolution);if(!o)return null;var u=o[2],a=0;for(var s=0;s<n.length;++s)a+=u[s]*this.intensity[n[s]];return{position:o[1],index:n[o[0]],cell:n,cellId:t,intensity:a,dataCoordinate:this.positions[n[o[0]]]}},T.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=P},{"./lib/closest-point":107,"./lib/shaders":108,colormap:59,"gl-buffer":77,"gl-mat4/invert":96,"gl-mat4/multiply":98,"gl-shader":156,"gl-texture2d":181,"gl-vao":185,ndarray:212,normals:111,"simplicial-complex-contour":113,"typedarray-pool":237}],110:[function(e,t,n){"use strict";function i(e){var t=0;for(var n=0;n<e.length;++n)t+=e[n];return t}function s(e,t){var n=t.length,s=new Array(n+1);for(var o=0;o<n;++o){var u=new Array(n+1);for(var a=0;a<=n;++a)u[a]=e[a][o];s[o]=u}s[n]=new Array(n+1);for(var o=0;o<=n;++o)s[n][o]=1;var f=new Array(n+1);for(var o=0;o<n;++o)f[o]=t[o];f[n]=1;var l=r(s,f),c=i(l[n+1]);c===0&&(c=1);var h=new Array(n+1);for(var o=0;o<=n;++o)h[o]=i(l[o])/c;return h}t.exports=s;var r=e("robust-linear-solve")},{"robust-linear-solve":215}],111:[function(e,t,n){var r=1e-6;n.vertexNormals=function(e,t){var n=t.length,i=new Array(n);for(var s=0;s<n;++s)i[s]=[0,0,0];for(var s=0;s<e.length;++s){var o=e[s],u=0,a=o[o.length-1],f=o[0];for(var l=0;l<o.length;++l){u=a,a=f,f=o[(l+1)%o.length];var c=t[u],h=t[a],p=t[f],d=new Array(3),v=0,m=new Array(3),g=0;for(var y=0;y<3;++y)d[y]=c[y]-h[y],v+=d[y]*d[y],m[y]=p[y]-h[y],g+=m[y]*m[y];if(v*g>r){var b=i[a],w=1/Math.sqrt(v*g);for(var y=0;y<3;++y){var E=(y+1)%3,S=(y+2)%3;b[y]+=w*(m[E]*d[S]-m[S]*d[E])}}}}for(var s=0;s<n;++s){var b=i[s],x=0;for(var y=0;y<3;++y)x+=b[y]*b[y];if(x>r){var w=1/Math.sqrt(x);for(var y=0;y<3;++y)b[y]*=w}else for(var y=0;y<3;++y)b[y]=0}return i},n.faceNormals=function(e,t){var n=e.length,i=new Array(n);for(var s=0;s<n;++s){var o=e[s],u=new Array(3);for(var a=0;a<3;++a)u[a]=t[o[a]];var f=new Array(3),l=new Array(3);for(var a=0;a<3;++a)f[a]=u[1][a]-u[0][a],l[a]=u[2][a]-u[0][a];var c=new Array(3),h=0;for(var a=0;a<3;++a){var p=(a+1)%3,d=(a+2)%3;c[a]=f[p]*l[d]-f[d]*l[p],h+=c[a]*c[a]}h>r?h=1/Math.sqrt(h):h=0;for(var a=0;a<3;++a)c[a]*=h;i[s]=c}return i}},{}],112:[function(e,t,n){"use strict";function o(e,t,n,o,u){r.length<o.length&&(r=new Float64Array(o.length),i=new Float64Array(o.length),s=new Float64Array(o.length));for(var a=0;a<o.length;++a)r[a]=e[a]-o[a],i[a]=t[a]-e[a],s[a]=n[a]-e[a];var f=0,l=0,c=0,h=0,p=0,d=0;for(var a=0;a<o.length;++a){var v=i[a],m=s[a],g=r[a];f+=v*v,l+=v*m,c+=m*m,h+=g*v,p+=g*m,d+=g*g}var y=Math.abs(f*c-l*l),b=l*p-c*h,w=l*h-f*p,E;if(b+w<=y)if(b<0)w<0?h<0?(w=0,-h>=f?(b=1,E=f+2*h+d):(b=-h/f,E=h*b+d)):(b=0,p>=0?(w=0,E=d):-p>=c?(w=1,E=c+2*p+d):(w=-p/c,E=p*w+d)):(b=0,p>=0?(w=0,E=d):-p>=c?(w=1,E=c+2*p+d):(w=-p/c,E=p*w+d));else if(w<0)w=0,h>=0?(b=0,E=d):-h>=f?(b=1,E=f+2*h+d):(b=-h/f,E=h*b+d);else{var S=1/y;b*=S,w*=S,E=b*(f*b+l*w+2*h)+w*(l*b+c*w+2*p)+d}else{var x,T,N,C;b<0?(x=l+h,T=c+p,T>x?(N=T-x,C=f-2*l+c,N>=C?(b=1,w=0,E=f+2*h+d):(b=N/C,w=1-b,E=b*(f*b+l*w+2*h)+w*(l*b+c*w+2*p)+d)):(b=0,T<=0?(w=1,E=c+2*p+d):p>=0?(w=0,E=d):(w=-p/c,E=p*w+d))):w<0?(x=l+p,T=f+h,T>x?(N=T-x,C=f-2*l+c,N>=C?(w=1,b=0,E=c+2*p+d):(w=N/C,b=1-w,E=b*(f*b+l*w+2*h)+w*(l*b+c*w+2*p)+d)):(w=0,T<=0?(b=1,E=f+2*h+d):h>=0?(b=0,E=d):(b=-h/f,E=h*b+d))):(N=c+p-l-h,N<=0?(b=0,w=1,E=c+2*p+d):(C=f-2*l+c,N>=C?(b=1,w=0,E=f+2*h+d):(b=N/C,w=1-b,E=b*(f*b+l*w+2*h)+w*(l*b+c*w+2*p)+d)))}var k=1-b-w;for(var a=0;a<o.length;++a)u[a]=k*e[a]+b*t[a]+w*n[a];return E<0?0:E}var r=new Float64Array(4),i=new Float64Array(4),s=new Float64Array(4);t.exports=o},{}],113:[function(e,t,n){"use strict";function u(e){var t=e.length,n=0;for(var r=0;r<t;++r)n=Math.max(n,e[r].length)|0;return n-1}function a(e,t){var n=e.length,r=i.mallocUint8(n);for(var s=0;s<n;++s)r[s]=e[s]<t|0;return r}function f(e,t){var n=e.length,o=t*(t+1)/2*n|0,u=i.mallocUint32(o*2),a=0;for(var f=0;f<n;++f){var l=e[f],t=l.length;for(var c=0;c<t;++c)for(var h=0;h<c;++h){var p=l[h],d=l[c];u[a++]=Math.min(p,d)|0,u[a++]=Math.max(p,d)|0}}var v=a/2|0;s(r(u,[v,2]));var m=2;for(var f=2;f<a;f+=2){if(u[f-2]===u[f]&&u[f-1]===u[f+1])continue;u[m++]=u[f],u[m++]=u[f+1]}return r(u,[m/2|0,2])}function l(e,t,n,s){var o=e.data,u=e.shape[0],a=i.mallocDouble(u),f=0;for(var l=0;l<u;++l){var c=o[2*l],h=o[2*l+1];if(n[c]===n[h])continue;var p=t[c],d=t[h];o[2*f]=c,o[2*f+1]=h,a[f++]=(d-s)/(d-p)}return e.shape[0]=f,r(a,[f])}function c(e,t){var n=i.mallocInt32(t*2),r=e.shape[0],s=e.data;n[0]=0;var o=0;for(var u=0;u<r;++u){var a=s[2*u];if(a!==o){n[2*o+1]=u;while(++o<a)n[2*o]=u,n[2*o+1]=u;n[2*o]=u}}n[2*o+1]=r;while(++o<t)n[2*o]=n[2*o+1]=r;return n}function h(e){var t=e.shape[0]|0,n=e.data,r=new Array(t);for(var i=0;i<t;++i)r[i]=[n[2*i],n[2*i+1]];return r}function p(e,t,n,r){n=n||0,typeof r=="undefined"&&(r=u(e));var s=e.length;if(s===0||r<1)return{cells:[],vertexIds:[],vertexWeights:[]};var p=a(t,+n),d=f(e,r),v=l(d,t,p,+n),m=c(d,t.length|0),g=o(r)(e,
d.data,m,p),y=h(d),b=[].slice.call(v.data,0,v.shape[0]);return i.free(p),i.free(d.data),i.free(v.data),i.free(m),{cells:g,vertexIds:y,vertexWeights:b}}t.exports=p;var r=e("ndarray"),i=e("typedarray-pool"),s=e("ndarray-sort"),o=e("./lib/codegen")},{"./lib/codegen":114,ndarray:212,"ndarray-sort":117,"typedarray-pool":237}],114:[function(e,t,n){"use strict";function o(e){function f(e){if(e.length<=0)return;a.push("R.push(");for(var t=0;t<e.length;++t){var n=e[t];t>0&&a.push(","),a.push("[");for(var r=0;r<n.length;++r){var i=n[r];r>0&&a.push(","),a.push("B(C,E,c[",i[0],"],c[",i[1],"])")}a.push("]")}a.push(");")}var t=0,n=new Array(e+1);n[0]=[[]];for(var s=1;s<=e;++s){var o=n[s]=i(s);for(var u=0;u<o.length;++u)t=Math.max(t,o[s].length)}var a=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",e,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];for(var s=e+1;s>1;--s){s<e+1&&a.push("else "),a.push("if(l===",s,"){");var l=[];for(var u=0;u<s;++u)l.push("(S[c["+u+"]]<<"+u+")");a.push("var M=",l.join("+"),";if(M===0||M===",(1<<s)-1,"){continue}switch(M){");var o=n[s-1];for(var u=0;u<o.length;++u)a.push("case ",u,":"),f(o[u]),a.push("break;");a.push("}}")}a.push("}return R;};return getContour",e,"d");var c=new Function("pool",a.join(""));return c(r)}function u(e){var t=s[e];return t||(t=s[e]=o(e)),t}t.exports=u;var r=e("typedarray-pool"),i=e("marching-simplex-table"),s={}},{"marching-simplex-table":115,"typedarray-pool":237}],115:[function(e,t,n){"use strict";function i(e,t,n){var r=new Array(e);for(var i=0;i<e;++i)r[i]=0,i===t&&(r[i]+=.5),i===n&&(r[i]+=.5);return r}function s(e,t){if(t===0||t===(1<<e+1)-1)return[];var n=[],s=[];for(var o=0;o<=e;++o)if(t&1<<o){n.push(i(e,o-1,o-1)),s.push(null);for(var u=0;u<=e;++u)~t&1<<u&&(n.push(i(e,o-1,u-1)),s.push([o,u]))}var a=r(n),f=[];e:for(var o=0;o<a.length;++o){var l=a[o],c=[];for(var u=0;u<l.length;++u){if(!s[l[u]])continue e;c.push(s[l[u]].slice())}f.push(c)}return f}function o(e){var t=1<<e+1,n=new Array(t);for(var r=0;r<t;++r)n[r]=s(e,r);return n}t.exports=o;var r=e("convex-hull")},{"convex-hull":61}],116:[function(e,t,n){"use strict";function s(e){switch(e){case"uint8":return[r.mallocUint8,r.freeUint8];case"uint16":return[r.mallocUint16,r.freeUint16];case"uint32":return[r.mallocUint32,r.freeUint32];case"int8":return[r.mallocInt8,r.freeInt8];case"int16":return[r.mallocInt16,r.freeInt16];case"int32":return[r.mallocInt32,r.freeInt32];case"float32":return[r.mallocFloat,r.freeFloat];case"float64":return[r.mallocDouble,r.freeDouble];default:return null}}function o(e){var t=[];for(var n=0;n<e;++n)t.push("s"+n);for(var n=0;n<e;++n)t.push("n"+n);for(var n=1;n<e;++n)t.push("d"+n);for(var n=1;n<e;++n)t.push("e"+n);for(var n=1;n<e;++n)t.push("f"+n);return t}function u(e,t){function c(e){return t==="generic"?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function h(e,n){return t==="generic"?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}var n=["'use strict'"],r=["ndarrayInsertionSort",e.join("d"),t].join(""),i=["left","right","data","offset"].concat(o(e.length)),u=s(t),a=["i,j,cptr,ptr=left*s0+offset"];if(e.length>1){var f=[];for(var l=1;l<e.length;++l)a.push("i"+l),f.push("n"+l);u?a.push("scratch=malloc("+f.join("*")+")"):a.push("scratch=new Array("+f.join("*")+")"),a.push("dptr","sptr","a","b")}else a.push("scratch");n.push(["function ",r,"(",i.join(","),"){var ",a.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr");if(e.length>1){n.push("dptr=0;sptr=ptr");for(var l=e.length-1;l>=0;--l){var p=e[l];if(p===0)continue;n.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}n.push("scratch[dptr++]=",c("sptr"));for(var l=0;l<e.length;++l){var p=e[l];if(p===0)continue;n.push("sptr+=d"+p,"}")}n.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var l=1;l<e.length;++l)l===1&&n.push("__l:"),n.push(["for(i",l,"=0;i",l,"<n",l,";++i",l,"){"].join(""));n.push(["a=",c("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var l=e.length-1;l>=1;--l)n.push("sptr+=e"+l,"dptr+=f"+l,"}");n.push("dptr=cptr;sptr=cptr-s0");for(var l=e.length-1;l>=0;--l){var p=e[l];if(p===0)continue;n.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}n.push(h("dptr",c("sptr")));for(var l=0;l<e.length;++l){var p=e[l];if(p===0)continue;n.push(["dptr+=d",p,";sptr+=d",p].join(""),"}")}n.push("cptr-=s0\n}"),n.push("dptr=cptr;sptr=0");for(var l=e.length-1;l>=0;--l){var p=e[l];if(p===0)continue;n.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""))}n.push(h("dptr","scratch[sptr++]"));for(var l=0;l<e.length;++l){var p=e[l];if(p===0)continue;n.push("dptr+=d"+p,"}")}}else n.push("scratch="+c("ptr"),"while((j-->left)&&("+c("cptr-s0")+">scratch)){",h("cptr",c("cptr-s0")),"cptr-=s0","}",h("cptr","scratch"));n.push("}"),e.length>1&&u&&n.push("free(scratch)"),n.push("} return "+r);if(u){var d=new Function("malloc","free",n.join("\n"));return d(u[0],u[1])}var d=new Function(n.join("\n"));return d()}function a(e,t,n){function d(e){return["(offset+",e,"*s0)"].join("")}function v(e){return t==="generic"?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function m(e,n){return t==="generic"?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}function g(t,n,i){if(t.length===1)r.push("ptr0="+d(t[0]));else for(var s=0;s<t.length;++s)r.push(["b_ptr",s,"=s0*",t[s]].join(""));n&&r.push("pivot_ptr=0"),r.push("ptr_shift=offset");for(var s=e.length-1;s>=0;--s){var o=e[s];if(o===0)continue;r.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""))}if(t.length>1)for(var s=0;s<t.length;++s)r.push(["ptr",s,"=b_ptr",s,"+ptr_shift"].join(""));r.push(i),n&&r.push("++pivot_ptr");for(var s=0;s<e.length;++s){var o=e[s];if(o===0)continue;t.length>1?r.push("ptr_shift+=d"+o):r.push("ptr0+=d"+o),r.push("}")}}function y(t,n,i,s){if(n.length===1)r.push("ptr0="+d(n[0]));else{for(var o=0;o<n.length;++o)r.push(["b_ptr",o,"=s0*",n[o]].join(""));r.push("ptr_shift=offset")}i&&r.push("pivot_ptr=0"),t&&r.push(t+":");for(var o=1;o<e.length;++o)r.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(n.length>1)for(var o=0;o<n.length;++o)r.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));r.push(s);for(var o=e.length-1;o>=1;--o)i&&r.push("pivot_ptr+=f"+o),n.length>1?r.push("ptr_shift+=e"+o):r.push("ptr0+=e"+o),r.push("}")}function b(){e.length>1&&f&&r.push("free(pivot1)","free(pivot2)")}function w(t,n){var i="el"+t,s="el"+n;if(e.length>1){var o="__l"+ ++l;y(o,[i,s],!1,["comp=",v("ptr0"),"-",v("ptr1"),"\n","if(comp>0){tmp0=",i,";",i,"=",s,";",s,"=tmp0;break ",o,"}\n","if(comp<0){break ",o,"}"].join(""))}else r.push(["if(",v(d(i)),">",v(d(s)),"){tmp0=",i,";",i,"=",s,";",s,"=tmp0}"].join(""))}function E(t,n){e.length>1?g([t,n],!1,m("ptr0",v("ptr1"))):r.push(m(d(t),v(d(n))))}function S(t,n,i){if(e.length>1){var s="__l"+ ++l;y(s,[n],!0,[t,"=",v("ptr0"),"-pivot",i,"[pivot_ptr]\n","if(",t,"!==0){break ",s,"}"].join(""))}else r.push([t,"=",v(d(n)),"-pivot",i].join(""))}function x(t,n){e.length>1?g([t,n],!1,["tmp=",v("ptr0"),"\n",m("ptr0",v("ptr1")),"\n",m("ptr1","tmp")].join("")):r.push(["ptr0=",d(t),"\n","ptr1=",d(n),"\n","tmp=",v("ptr0"),"\n",m("ptr0",v("ptr1")),"\n",m("ptr1","tmp")].join(""))}function T(t,n,i){e.length>1?(g([t,n,i],!1,["tmp=",v("ptr0"),"\n",m("ptr0",v("ptr1")),"\n",m("ptr1",v("ptr2")),"\n",m("ptr2","tmp")].join("")),r.push("++"+n,"--"+i)):r.push(["ptr0=",d(t),"\n","ptr1=",d(n),"\n","ptr2=",d(i),"\n","++",n,"\n","--",i,"\n","tmp=",v("ptr0"),"\n",m("ptr0",v("ptr1")),"\n",m("ptr1",v("ptr2")),"\n",m("ptr2","tmp")].join(""))}function N(e,t){x(e,t),r.push("--"+t)}function C(t,n,i){e.length>1?g([t,n],!0,[m("ptr0",v("ptr1")),"\n",m("ptr1",["pivot",i,"[pivot_ptr]"].join(""))].join("")):r.push(m(d(t),v(d(n))),m(d(n),"pivot"+i))}function k(t,n){r.push(["if((",n,"-",t,")<=",i,"){\n","insertionSort(",t,",",n,",data,offset,",o(e.length).join(","),")\n","}else{\n",u,"(",t,",",n,",data,offset,",o(e.length).join(","),")\n","}"].join(""))}function L(t,n,i){e.length>1?(r.push(["__l",++l,":while(true){"].join("")),g([t],!0,["if(",v("ptr0"),"!==pivot",n,"[pivot_ptr]){break __l",l,"}"].join("")),r.push(i,"}")):r.push(["while(",v(d(t)),"===pivot",n,"){",i,"}"].join(""))}var r=["'use strict'"],u=["ndarrayQuickSort",e.join("d"),t].join(""),a=["left","right","data","offset"].concat(o(e.length)),f=s(t),l=0;r.push(["function ",u,"(",a.join(","),"){"].join(""));var c=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(e.length>1){var h=[];for(var p=1;p<e.length;++p)h.push("n"+p),c.push("i"+p);for(var p=0;p<8;++p)c.push("b_ptr"+p);c.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+h.join("*")),f?c.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):c.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else c.push("pivot1","pivot2");r.push("var "+c.join(",")),w(1,2),w(4,5),w(1,3),w(2,3),w(1,4),w(3,4),w(2,5),w(2,3),w(4,5),e.length>1?g(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",v("ptr1"),"\n","pivot2[pivot_ptr]=",v("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",v("ptr0"),"\n","y=",v("ptr2"),"\n","z=",v("ptr4"),"\n",m("ptr5","x"),"\n",m("ptr6","y"),"\n",m("ptr7","z")].join("")):r.push(["pivot1=",v(d("el2")),"\n","pivot2=",v(d("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",v(d("el1")),"\n","y=",v(d("el3")),"\n","z=",v(d("el5")),"\n",m(d("index1"),"x"),"\n",m(d("index3"),"y"),"\n",m(d("index5"),"z")].join("")),E("index2","left"),E("index4","right"),r.push("if(pivots_are_equal){"),r.push("for(k=less;k<=great;++k){"),S("comp","k",1),r.push("if(comp===0){continue}"),r.push("if(comp<0){"),r.push("if(k!==less){"),x("k","less"),r.push("}"),r.push("++less"),r.push("}else{"),r.push("while(true){"),S("comp","great",1),r.push("if(comp>0){"),r.push("great--"),r.push("}else if(comp<0){"),T("k","less","great"),r.push("break"),r.push("}else{"),N("k","great"),r.push("break"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}else{"),r.push("for(k=less;k<=great;++k){"),S("comp_pivot1","k",1),r.push("if(comp_pivot1<0){"),r.push("if(k!==less){"),x("k","less"),r.push("}"),r.push("++less"),r.push("}else{"),S("comp_pivot2","k",2),r.push("if(comp_pivot2>0){"),r.push("while(true){"),S("comp","great",2),r.push("if(comp>0){"),r.push("if(--great<k){break}"),r.push("continue"),r.push("}else{"),S("comp","great",1),r.push("if(comp<0){"),T("k","less","great"),r.push("}else{"),N("k","great"),r.push("}"),r.push("break"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),C("left","(less-1)",1),C("right","(great+1)",2),k("left","(less-2)"),k("(great+2)","right"),r.push("if(pivots_are_equal){"),b(),r.push("return"),r.push("}"),r.push("if(less<index1&&great>index5){"),L("less",1,"++less"),L("great",2,"--great"),r.push("for(k=less;k<=great;++k){"),S("comp_pivot1","k",1),r.push("if(comp_pivot1===0){"),r.push("if(k!==less){"),x("k","less"),r.push("}"),r.push("++less"),r.push("}else{"),S("comp_pivot2","k",2),r.push("if(comp_pivot2===0){"),r.push("while(true){"),S("comp","great",2),r.push("if(comp===0){"),r.push("if(--great<k){break}"),r.push("continue"),r.push("}else{"),S("comp","great",1),r.push("if(comp<0){"),T("k","less","great"),r.push("}else{"),N("k","great"),r.push("}"),r.push("break"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),r.push("}"),b(),k("less","great"),r.push("}return "+u);if(e.length>1&&f){var A=new Function("insertionSort","malloc","free",r.join("\n"));return A(n,f[0],f[1])}var A=new Function("insertionSort",r.join("\n"));return A(n)}function f(e,t){var n=["'use strict'"],r=["ndarraySortWrapper",e.join("d"),t].join(""),s=["array"];n.push(["function ",r,"(",s.join(","),"){"].join(""));var f=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"];for(var l=0;l<e.length;++l)f.push(["s",l,"=stride[",l,"]|0,n",l,"=shape[",l,"]|0"].join(""));var c=new Array(e.length),h=[];for(var l=0;l<e.length;++l){var p=e[l];if(p===0)continue;h.length===0?c[p]="1":c[p]=h.join("*"),h.push("n"+p)}var d=-1,v=-1;for(var l=0;l<e.length;++l){var m=e[l];m!==0&&(d>0?f.push(["d",m,"=s",m,"-d",d,"*n",d].join("")):f.push(["d",m,"=s",m].join("")),d=m);var p=e.length-1-l;p!==0&&(v>0?f.push(["e",p,"=s",p,"-e",v,"*n",v,",f",p,"=",c[p],"-f",v,"*n",v].join("")):f.push(["e",p,"=s",p,",f",p,"=",c[p]].join("")),v=p)}n.push("var "+f.join(","));var g=["0","n0-1","data","offset"].concat(o(e.length));n.push(["if(n0<=",i,"){","insertionSort(",g.join(","),")}else{","quickSort(",g.join(","),")}"].join("")),n.push("}return "+r);var y=new Function("insertionSort","quickSort",n.join("\n")),b=u(e,t),w=a(e,t,b);return y(b,w)}var r=e("typedarray-pool"),i=32;t.exports=f},{"typedarray-pool":237}],117:[function(e,t,n){"use strict";function s(e){var t=e.order,n=e.dtype,s=[t,n],o=s.join(":"),u=i[o];return u||(i[o]=u=r(t,n)),u(e),e}var r=e("./lib/compile_sort.js"),i={};t.exports=s},{"./lib/compile_sort.js":116}],118:[function(e,t,n){"use strict";function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function a(e){var t=e.gl,n=r(t,[0,0,0,1,1,0,1,1]),u=i(t,s.boxVert,s.lineFrag);return new o(e,n,u)}t.exports=a;var r=e("gl-buffer"),i=e("gl-shader"),s=e("./shaders"),u=o.prototype;u.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},u.drawBox=function(){var e=[0,0],t=[0,0];return function(n,r,i,s,o){var u=this.plot,a=this.shader,f=u.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=s,a.uniforms.lo=e,a.uniforms.hi=t,a.uniforms.color=o,f.drawArrays(f.TRIANGLE_STRIP,0,4)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":121,"gl-buffer":77,"gl-shader":156}],119:[function(e,t,n){"use strict";function u(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function a(e,t){return e-t}function l(e){var t=e.gl,n=r(t),s=i(t,o.gridVert,o.gridFrag),a=i(t,o.tickVert,o.gridFrag),f=new u(e,n,s,a);return f}t.exports=l;var r=e("gl-buffer"),i=e("gl-shader"),s=e("binary-search-bounds"),o=e("./shaders"),f=u.prototype;f.draw=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){var r=this.plot,i=this.vbo,s=this.shader,o=this.ticks,u=r.gl,a=r._tickBounds,f=r.dataBox,l=r.viewBox,c=r.gridLineWidth,h=r.gridLineColor,p=r.gridLineEnable,d=r.pixelRatio;for(var v=0;v<2;++v){var m=a[v],g=a[v+2],y=g-m,b=.5*(f[v+2]+f[v]),w=f[v+2]-f[v];t[v]=2*y/w,e[v]=2*(m-b)/w}s.bind(),i.bind(),s.attributes.dataCoord.pointer(),s.uniforms.dataShift=e,s.uniforms.dataScale=t;var E=0;for(var v=0;v<2;++v){n[0]=n[1]=0,n[v]=1,s.uniforms.dataAxis=n,s.uniforms.lineWidth=c[v]/(l[v+2]-l[v])*d,s.uniforms.color=h[v];var S=o[v].length*6;p[v]&&S&&u.drawArrays(u.TRIANGLES,E,S),E+=S}}}(),f.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],r=[0,1],i=[0,0],o=[0,0];return function(){var u=this.plot,f=this.vbo,l=this.tickShader,c=this.ticks,h=u.gl,p=u._tickBounds,d=u.dataBox,v=u.viewBox,m=u.pixelRatio,g=u.screenBox,y=g[2]-g[0],b=g[3]-g[1],w=v[2]-v[0],E=v[3]-v[1];for(var S=0;S<2;++S){var x=p[S],T=p[S+2],N=T-x,C=.5*(d[S+2]+d[S]),k=d[S+2]-d[S];t[S]=2*N/k,e[S]=2*(x-C)/k}t[0]*=w/y,e[0]*=w/y,t[1]*=E/b,e[1]*=E/b,l.bind(),f.bind(),l.attributes.dataCoord.pointer();var L=l.uniforms;L.dataShift=e,L.dataScale=t;var A=u.tickMarkLength,O=u.tickMarkWidth,M=u.tickMarkColor,_=0,D=c[0].length*6,P=Math.min(s.ge(c[0],(d[0]-p[0])/(p[2]-p[0]),a),c[0].length),H=Math.min(s.gt(c[0],(d[2]-p[0])/(p[2]-p[0]),a),c[0].length),B=_+6*P,j=6*Math.max(0,H-P),F=Math.min(s.ge(c[1],(d[1]-p[1])/(p[3]-p[1]),a),c[1].length),I=Math.min(s.gt(c[1],(d[3]-p[1])/(p[3]-p[1]),a),c[1].length),q=D+6*F,R=6*Math.max(0,I-F);i[0]=2*(v[0]-A[1])/y-1,i[1]=(v[3]+v[1])/b-1,o[0]=A[1]*m/y,o[1]=O[1]*m/b,R&&(L.color=M[1],L.tickScale=o,L.dataAxis=r,L.screenOffset=i,h.drawArrays(h.TRIANGLES,q,R)),i[0]=(v[2]+v[0])/y-1,i[1]=2*(v[1]-A[0])/b-1,o[0]=O[0]*m/y,o[1]=A[0]*m/b,j&&(L.color=M[0],L.tickScale=o,L.dataAxis=n,L.screenOffset=i,h.drawArrays(h.TRIANGLES,B,j)),i[0]=2*(v[2]+A[3])/y-1,i[1]=(v[3]+v[1])/b-1,o[0]=A[3]*m/y,o[1]=O[3]*m/b,R&&(L.color=M[3],L.tickScale=o,L.dataAxis=r,L.screenOffset=i,h.drawArrays(h.TRIANGLES,q,R)),i[0]=(v[2]+v[0])/y-1,i[1]=2*(v[3]+A[2])/b-1,o[0]=O[2]*m/y,o[1]=A[2]*m/b,j&&(L.color=M[2],L.tickScale=o,L.dataAxis=n,L.screenOffset=i,h.drawArrays(h.TRIANGLES,B,j))}}(),f.update=function(){var e=[1,1,-1,-1,1,-1],t=[1,-1,1,1,-1,-1];return function(n){var r=n.ticks,i=n.bounds,s=new Float32Array(18*(r[0].length+r[1].length)),o=this.plot.zeroLineEnable,u=0,a=[[],[]];for(var f=0;f<2;++f){var l=a[f],c=r[f],h=i[f],p=i[f+2];for(var d=0;d<c.length;++d){var v=(c[d].x-h)/(p-h);l.push(v);for(var m=0;m<6;++m)s[u++]=v,s[u++]=e[m],s[u++]=t[m]}}this.ticks=a,this.vbo.update(s)}}(),f.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":121,"binary-search-bounds":123,"gl-buffer":77,"gl-shader":156}],120:[function(e,t,n){"use strict";function o(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function a(e){var t=e.gl,n=r(t,[-1,-1,-1,1,1,-1,1,1]),u=i(t,s.lineVert,s.lineFrag),a=new o(e,n,u);return a}t.exports=a;var r=e("gl-buffer"),i=e("gl-shader"),s=e("./shaders"),u=o.prototype;u.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},u.drawLine=function(){var e=[0,0],t=[0,0];return function(n,r,i,s,o,u){var a=this.plot,f=this.shader,l=a.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=s,f.uniforms.start=e,f.uniforms.end=t,f.uniforms.width=o*a.pixelRatio,f.uniforms.color=u,l.drawArrays(l.TRIANGLE_STRIP,0,4)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":121,"gl-buffer":77,"gl-shader":156}],121:[function(e,t,n){"use strict";var r="precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";t.exports={lineVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:r,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:r,gridVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:r,boxVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],122:[function(e,t,n){"use strict";function a(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function l(e){var t=e.gl,n=r(t),s=i(t,u.textVert,u.textFrag),o=new a(e,n,s);return o}t.exports=l;var r=e("gl-buffer"),i=e("gl-shader"),s=e("text-cache"),o=e("binary-search-bounds"),u=e("./shaders"),f=a.prototype;f.drawTicks=function(){var e=[0,0],t=[0,0],n=[0,0];return function(r){var i=this.plot,s=this.shader,u=this.tickX[r],a=this.tickOffset[r],f=i.gl,l=i.viewBox,c=i.dataBox,h=i.screenBox,p=i.pixelRatio,d=i.tickEnable,v=i.tickPad,m=i.tickColor,g=i.tickAngle,y=i.tickMarkLength,b=i.labelEnable,w=i.labelPad,E=i.labelColor,S=i.labelAngle,x=this.labelOffset[r],T=this.labelCount[r],N=o.lt(u,c[r]),C=o.le(u,c[r+2]);e[0]=e[1]=0,e[r]=1,t[r]=(l[2+r]+l[r])/(h[2+r]-h[r])-1;var k=2/h[2+(r^1)]-h[r^1];t[r^1]=k*l[r^1]-1,d[r]&&(t[r^1]-=k*p*v[r],N<C&&a[C]>a[N]&&(s.uniforms.dataAxis=e,s.uniforms.screenOffset=t,s.uniforms.color=m[r],s.uniforms.angle=g[r],f.drawArrays(f.TRIANGLES,a[N],a[C]-a[N]))),b[r]&&T&&(t[r^1]-=k*p*w[r],s.uniforms.dataAxis=n,s.uniforms.screenOffset=t,s.uniforms.color=E[r],s.uniforms.angle=S[r],f.drawArrays(f.TRIANGLES,x,T)),t[r^1]=k*l[2+(r^1)]-1,d[r+2]&&(t[r^1]+=k*p*v[r+2],N<C&&a[C]>a[N]&&(s.uniforms.dataAxis=e,s.uniforms.screenOffset=t,s.uniforms.color=m[r+2],s.uniforms.angle=g[r+2],f.drawArrays(f.TRIANGLES,a[N],a[C]-a[N]))),b[r+2]&&T&&(t[r^1]+=k*p*w[r+2],s.uniforms.dataAxis=n,s.uniforms.screenOffset=t,s.uniforms.color=E[r+2],s.uniforms.angle=S[r+2],f.drawArrays(f.TRIANGLES,x,T))}}(),f.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var n=this.plot,r=this.shader,i=n.gl,s=n.screenBox,o=n.titleCenter,u=n.titleAngle,a=n.titleColor,o=n.titleCenter,f=n.pixelRatio;if(!this.titleCount)return;for(var l=0;l<2;++l)t[l]=2*(o[l]*f-s[l])/(s[2+l]-s[l])-1;r.bind(),r.uniforms.dataAxis=e,r.uniforms.screenOffset=t,r.uniforms.angle=u,r.uniforms.color=a,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}(),f.bind=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){var r=this.plot,i=this.shader,s=r._tickBounds,o=r.dataBox,u=r.screenBox,a=r.viewBox;i.bind();for(var f=0;f<2;++f){var l=s[f],c=s[f+2],h=c-l,p=.5*(o[f+2]+o[f]),d=o[f+2]-o[f],v=a[f],m=a[f+2],g=m-v,y=u[f],b=u[f+2],w=b-y;t[f]=2*h/d*g/w,e[f]=2*(l-p)/d*g/w}n[1]=2*r.pixelRatio/(u[3]-u[1]),n[0]=n[1]*(u[3]-u[1])/(u[2]-u[0]),i.uniforms.dataScale=t,i.uniforms.dataShift=e,i.uniforms.textScale=n,this.vbo.bind(),i.attributes.textCoordinate.pointer()}}(),f.update=function(e){var t=[],n=e.ticks,r=e.bounds;for(var i=0;i<2;++i){var o=[Math.floor(t.length/3)],u=[-Infinity],a=n[i];for(var f=0;f<a.length;++f){var l=a[f],c=l.x,h=l.text,p=l.font||"sans-serif",d=l.fontSize||12,v=s(p,h).data,m=1/(r[i+2]-r[i]),g=r[i];for(var y=0;y<v.length;y+=2)t.push(v[y]*d,-v[y+1]*d,(c-g)*m);o.push(Math.floor(t.length/3)),u.push(c)}this.tickOffset[i]=o,this.tickX[i]=u}for(var i=0;i<2;++i){this.labelOffset[i]=Math.floor(t.length/3);var v=s(e.labelFont[i],e.labels[i]).data,d=e.labelSize[i];for(var f=0;f<v.length;f+=2)t.push(v[f]*d,-v[f+1]*d,0);this.labelCount[i]=Math.floor(t.length/3)-this.labelOffset[i]}this.titleOffset=Math.floor(t.length/3);var v=s(e.titleFont,e.title).data,d=e.titleSize;for(var f=0;f<v.length;f+=2)t.push(v[f]*d,-v[f+1]*d,0);this.titleCount=Math.floor(t.length/3)-this.titleOffset,this.vbo.update(t)},f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":121,"binary-search-bounds":123,"gl-buffer":77,"gl-shader":156,"text-cache":232}],123:[function(e,t,n){"use strict";function r(e,t,n,r,i){var s=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",t,"){i=m;"),n?s.push("l=m+1}else{h=m-1}"):s.push("h=m-1}else{l=m+1}"),s.push("}"),i?s.push("return -1};"):s.push("return i};"),s.join("")}function i(e,t,n,i){var s=new Function([r("A","x"+e+"y",t,["y"],i),r("P","c(x,y)"+e+"0",t,["y","c"],i),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""));return s()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],124:[function(e,t,n){"use strict";function a(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity],this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function l(e,t,n){var r=.5*(n+1);return Math.floor((1-r)*e+r*t)|0}function c(e){var t=e.slice();for(var n=0;n<t.length;++n)t[n]=t[n].slice();return t}function h(e,t){return e.x-t.x}function p(e){var t=e.gl,n=r(t,[t.drawingBufferWidth,t.drawingBufferHeight]),f=new a(t,n);return f.grid=i(f),f.text=s(f),f.line=o(f),f.box=u(f),f.update(e),f}t.exports=p;var r=e("gl-select-static"),i=e("./lib/grid"),s=e("./lib/text"),o=e("./lib/line"),u=e("./lib/box"),f=a.prototype;f.setDirty=function(){this.dirty=this.pickDirty=!0},f.setOverlayDirty=function(){this.dirty=!0},f.nextDepthValue=function(){return this._depthCounter++/65536},f.draw=function(){var e=[0,0,0,0];return function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,s=this.grid,o=this.line,u=this.text,a=this.objects;this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(!this.dirty)return;this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var f=this.borderColor;e.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var l=this.backgroundColor;e.clearColor(l[0]*l[3],l[1]*l[3],l[2]*l[3],l[3]),e.clear(e.COLOR_BUFFER_BIT),s.draw();var c=this.zeroLineEnable,h=this.zeroLineColor,p=this.zeroLineWidth;if(c[0]||c[1]){o.bind();for(var d=0;d<2;++d){if(!c[d]||!(r[d]<=0&&r[d+2]>=0))continue;var v=t[d]-r[d]*(t[d+2]-t[d])/(r[d+2]-r[d]);d===0?o.drawLine(v,t[1],v,t[3],p[d],h[d]):o.drawLine(t[0],v,t[2],v,p[d],h[d])}}for(var d=0;d<a.length;++d)a[d].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var m=this.borderLineEnable,g=this.borderLineWidth,y=this.borderLineColor;m[1]&&o.drawLine(n[0],n[1]-.5*g[1]*i,n[0],n[3]+.5*g[3]*i,g[1],y[1]),m[0]&&o.drawLine(n[0]-.5*g[0]*i,n[1],n[2]+.5*g[2]*i,n[1],g[0],y[0]),m[3]&&o.drawLine(n[2],n[1]-.5*g[1]*i,n[2],n[3]+.5*g[3]*i,g[3],y[3]),m[2]&&o.drawLine(n[0]-.5*g[0]*i,n[3],n[2]+.5*g[2]*i,n[3],g[2],y[2]),u.bind();for(var d=0;d<2;++d)u.drawTicks(d);this.titleEnable&&u.drawTitle();var b=this.overlays;for(var d=0;d<b.length;++d)b[d].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}}(),f.drawPick=function(){return function(){var e=this.pickBuffer,t=this.gl;this._pickTimeout=null,e.begin();var n=1,r=this.objects;for(var i=0;i<r.length;++i)n=r[i].drawPick(n);e.end()}}(),f.pick=function(){return function(e,t){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,s=Math.round((e-i[0]/n)*r)|0,o=Math.round((t-i[1]/n)*r)|0,u=this.pickBuffer.query(s,o,this.pickRadius);if(!u)return null;var a=u.id+(u.value[0]<<8)+(u.value[1]<<16)+(u.value[2]<<24),f=this.objects;for(var l=0;l<f.length;++l){var c=f[l].pick(s,o,a);if(c)return c}return null}}(),f.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=Math.round(e[0]*n)|0,t[1]=Math.round(e[1]*n)|0,t[2]=Math.round(e[2]*n)|0,t[3]=Math.round(e[3]*n)|0,this.setDirty()},f.setDataBox=function(e){var t=this.dataBox,n=t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3];n&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},f.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=Math.round(e[0]*t)|0,n[1]=Math.round(e[1]*t)|0,n[2]=Math.round(e[2]*t)|0,n[3]=Math.round(e[3]*t)|0;var r=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((e[2]-e[0])*r)|0,Math.round((e[3]-e[1])*r)|0],this.setDirty()},f.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]);var r=this.screenBox;this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var i=this.viewBox,s=(i[2]-i[0])/(i[3]-i[1]);this.setDataBox(e.dataBox||[-10,-10/s,10,10/s]),this.borderColor=(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(i[0]+i[2])/n,(i[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e)||!!e.titleEnable,this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var o=e.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=Infinity,u[2]=u[3]=-Infinity;for(var a=0;a<2;++a){var f=o[a].slice(0);if(f.length===0)continue;f.sort(h),u[a]=Math.min(u[a],f[0].x),u[a+2]=Math.max(u[a+2],f[f.length-1].x)}this.grid.update({bounds:u,ticks:o}),this.text.update({bounds:u,ticks:o,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.setDirty()},f.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();this.objects.length=0;for(var e=this
.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},f.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},f.removeObject=function(e){var t=this.objects;for(var n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},f.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},f.removeOverlay=function(e){var t=this.overlays;for(var n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}}},{"./lib/box":118,"./lib/grid":119,"./lib/line":120,"./lib/text":122,"gl-select-static":155}],125:[function(e,t,n){var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",s="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec2"}])}},{"gl-shader":156}],126:[function(e,t,n){"use strict";function u(e,t){e=e||document.body,t=t||{};var n=[.01,Infinity];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var u=i({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,l=e.clientWidth,c=e.clientHeight,h={view:u,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:u.modes,tick:function(){var t=r(),n=this.delay;u.idle(t-n),u.flush(t-(100+n*2));var i=t-2*n;u.recalcMatrix(i);var s=!0,o=u.computedMatrix;for(var h=0;h<16;++h)s=s&&a[h]===o[h],a[h]=o[h];var p=e.clientWidth===l&&e.clientHeight===c;return l=e.clientWidth,c=e.clientHeight,s?!p:(f=Math.exp(u.computedRadius[0]),!0)},lookAt:function(e,t,n){u.lookAt(u.lastT(),e,t,n)},rotate:function(e,t,n){u.rotate(u.lastT(),e,t,n)},pan:function(e,t,n){u.pan(u.lastT(),e,t,n)},translate:function(e,t,n){u.translate(u.lastT(),e,t,n)}};Object.defineProperties(h,{matrix:{get:function(){return u.computedMatrix},set:function(e){return u.setMatrix(u.lastT(),e),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(e){return u.setMode(e),u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(e){return u.lookAt(u.lastT(),e),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(e){return u.lookAt(u.lastT(),null,e),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(e){return u.lookAt(u.lastT(),null,null,e),u.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(e){return u.setDistance(u.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(n)},set:function(e){return u.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var p=0,d=0;return s(e,function(t,n,i,s){var o=1/e.clientHeight,a=o*(n-p),l=o*(i-d),c=h.flipX?1:-1,v=h.flipY?1:-1,m=Math.PI*h.rotateSpeed,g=r();if(t&1)s.shift?u.rotate(g,0,0,-a*m):u.rotate(g,c*m*a,-v*m*l,0);else if(t&2)u.pan(g,-h.translateSpeed*a*f,h.translateSpeed*l*f,0);else if(t&4){var y=h.zoomSpeed*l/window.innerHeight*(g-u.lastT())*50;u.pan(g,0,0,f*(Math.exp(y)-1))}p=n,d=i}),o(e,function(e,t,n){var i=h.flipX?1:-1,s=h.flipY?1:-1,o=r();if(Math.abs(e)>Math.abs(t))u.rotate(o,0,0,-e*i*Math.PI*h.rotateSpeed/window.innerWidth);else{var a=h.zoomSpeed*s*t/window.innerHeight*(o-u.lastT())/100;u.pan(o,0,0,f*(Math.exp(a)-1))}},!0),h}t.exports=u;var r=e("right-now"),i=e("3d-view"),s=e("mouse-change"),o=e("mouse-wheel")},{"3d-view":39,"mouse-change":200,"mouse-wheel":204,"right-now":214}],127:[function(e,t,n){(function(){"use strict";function n(e){e.permitHostObjects___&&e.permitHostObjects___(n)}function v(e){return e.substr(0,c.length)!=c||e.substr(e.length-3)!=="___"}function g(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[h];if(t&&t.key===e)return t;if(!l(e))return void 0;t={key:e};try{return f(e,h,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(n){return void 0}}function y(e){return e.prototype=null,Object.freeze(e)}function w(){!b&&typeof console!="undefined"&&(b=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=n);var r=!1;if(typeof WeakMap=="function"){var i=WeakMap;if(typeof navigator=="undefined"||!/Firefox/.test(navigator.userAgent)){var s=new i,o=Object.freeze({});s.set(o,1);if(s.get(o)===1){t.exports=WeakMap;return}r=!0}}var u=Object.prototype.hasOwnProperty,a=Object.getOwnPropertyNames,f=Object.defineProperty,l=Object.isExtensible,c="weakmap:",h=c+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var p=new ArrayBuffer(25),d=new Uint8Array(p);crypto.getRandomValues(d),h=c+"rand:"+Array.prototype.map.call(d,function(e){return(e%36).toString(36)}).join("")+"___"}f(Object,"getOwnPropertyNames",{value:function(t){return a(t).filter(v)}});if("getPropertyNames"in Object){var m=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(t){return m(t).filter(v)}})}(function(){var e=Object.freeze;f(Object,"freeze",{value:function(n){return g(n),e(n)}});var t=Object.seal;f(Object,"seal",{value:function(n){return g(n),t(n)}});var n=Object.preventExtensions;f(Object,"preventExtensions",{value:function(t){return g(t),n(t)}})})();var b=!1,E=0,S=function(){function r(r,i){var s,o=g(r);return o?n in o?o[n]:i:(s=e.indexOf(r),s>=0?t[s]:i)}function i(t){var r=g(t);return r?n in r:e.indexOf(t)>=0}function s(r,i){var s,o=g(r);return o?o[n]=i:(s=e.indexOf(r),s>=0?t[s]=i:(s=e.length,t[s]=i,e[s]=r)),this}function o(r){var i=g(r),s,o;return i?n in i&&delete i[n]:(s=e.indexOf(r),s<0?!1:(o=e.length-1,e[s]=void 0,t[s]=t[o],e[s]=e[o],e.length=o,t.length=o,!0))}this instanceof S||w();var e=[],t=[],n=E++;return Object.create(S.prototype,{get___:{value:y(r)},has___:{value:y(i)},set___:{value:y(s)},delete___:{value:y(o)}})};S.prototype=Object.create(Object.prototype,{get:{value:function(t,n){return this.get___(t,n)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,n){return this.set___(t,n)},writable:!0,configurable:!0},"delete":{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),typeof i=="function"?function(){function e(){function o(n,r){return t?e.has(n)?e.get(n):t.get___(n,r):e.get(n,r)}function u(n){return e.has(n)||(t?t.has___(n):!1)}function f(n){var r=!!e["delete"](n);return t?t.delete___(n)||r:r}this instanceof S||w();var e=new i,t=undefined,s=!1,a;return r?a=function(n,r){return e.set(n,r),e.has(n)||(t||(t=new S),t.set(n,r)),this}:a=function(n,r){if(s)try{e.set(n,r)}catch(i){t||(t=new S),t.set___(n,r)}else e.set(n,r);return this},Object.create(S.prototype,{get___:{value:y(o)},has___:{value:y(u)},set___:{value:y(a)},delete___:{value:y(f)},permitHostObjects___:{value:y(function(e){if(e!==n)throw new Error("bogus call to permitHostObjects___");s=!0})}})}r&&typeof Proxy!="undefined"&&(Proxy=undefined),e.prototype=S.prototype,t.exports=e,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=undefined),t.exports=S)})()},{}],128:[function(e,t,n){"use strict";function u(e){var t=o.get(e);if(!t||!e.isBuffer(t._triangleBuffer.buffer)){var n=i(e,new Float32Array([-1,-1,-1,4,4,-1]));t=s(e,[{buffer:n,type:e.FLOAT,size:2}]),t._triangleBuffer=n,o.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}var r=typeof WeakMap=="undefined"?e("weak-map"):WeakMap,i=e("gl-buffer"),s=e("gl-vao"),o=new r;t.exports=u},{"gl-buffer":77,"gl-vao":185,"weak-map":127}],129:[function(e,t,n){"use strict";function f(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function l(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=s(e)}function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function d(e,t,n,r,i){var s=e.primalOffset,o=e.primalMinor,u=e.mirrorOffset,a=e.mirrorMinor,f=r[t];for(var l=0;l<3;++l){if(t===l)continue;var c=s,h=u,p=o,d=a;f&1<<l&&(c=u,h=s,p=a,d=o),c[l]=n[0][l],h[l]=n[1][l],i[l]>0?(p[l]=-1,d[l]=0):(p[l]=0,d[l]=1)}}function w(e,t){var n=new l(e);return n.update(t),n}t.exports=w;var r=e("./lib/text.js"),i=e("./lib/lines.js"),s=e("./lib/background.js"),o=e("./lib/cube.js"),u=e("./lib/ticks.js"),a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=l.prototype;c.update=function(e){function t(t,n,r){if(r in e){var i=e[r],s=this[r],o;(t?Array.isArray(i)&&Array.isArray(i[0]):Array.isArray(i))?this[r]=o=[n(i[0]),n(i[1]),n(i[2])]:this[r]=o=[n(i),n(i),n(i)];for(var u=0;u<3;++u)if(o[u]!==s[u])return!0}return!1}e=e||{};var n=t.bind(this,!1,Number),s=t.bind(this,!1,Boolean),o=t.bind(this,!1,String),a=t.bind(this,!0,function(e){if(Array.isArray(e)){if(e.length===3)return[+e[0],+e[1],+e[2],1];if(e.length===4)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),f,l=!1,c=!1;if("bounds"in e){var h=e.bounds;for(var p=0;p<2;++p)for(var d=0;d<3;++d)h[p][d]!==this.bounds[p][d]&&(c=!0),this.bounds[p][d]=h[p][d]}if("ticks"in e){f=e.ticks,l=!0,this.autoTicks=!1;for(var p=0;p<3;++p)this.tickSpacing[p]=0}else n("tickSpacing")&&(this.autoTicks=!0,c=!0);this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),c=!0,l=!0,this._firstInit=!1),c&&this.autoTicks&&(f=u.create(this.bounds,this.tickSpacing),l=!0);if(l){for(var p=0;p<3;++p)f[p].sort(function(e,t){return e.x-t.x});u.equal(f,this.ticks)?l=!1:this.ticks=f}s("tickEnable"),o("tickFont")&&(l=!0),n("tickSize"),n("tickAngle"),n("tickPad"),a("tickColor");var v=o("labels");o("labelFont")&&(v=!0),s("labelEnable"),n("labelSize"),n("labelPad"),a("labelColor"),s("lineEnable"),s("lineMirror"),n("lineWidth"),a("lineColor"),s("lineTickEnable"),s("lineTickMirror"),n("lineTickLength"),n("lineTickWidth"),a("lineTickColor"),s("gridEnable"),n("gridWidth"),a("gridColor"),s("zeroEnable"),a("zeroLineColor"),n("zeroLineWidth"),s("backgroundEnable"),a("backgroundColor"),this._text?this._text&&(v||l)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&l&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var p=[new h,new h,new h],v=[0,0,0],m={model:a,view:a,projection:a};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(e){};var g=[0,0,0],y=[0,0,0],b=[0,0,0];c.draw=function(e){e=e||m;var t=this.gl,n=e.model||a,r=e.view||a,i=e.projection||a,s=this.bounds,u=o(n,r,i,s),l=u.cubeEdges,c=u.axis,h=r[12],w=r[13],E=r[14],S=r[15],x=this.pixelRatio*(i[3]*h+i[7]*w+i[11]*E+i[15]*S)/t.drawingBufferHeight;for(var T=0;T<3;++T)this.lastCubeProps.cubeEdges[T]=l[T],this.lastCubeProps.axis[T]=c[T];var N=p;for(var T=0;T<3;++T)d(p[T],T,this.bounds,l,c);var t=this.gl,C=v;for(var T=0;T<3;++T)this.backgroundEnable[T]?C[T]=c[T]:C[T]=0;this._background.draw(n,r,i,s,C,this.backgroundColor),this._lines.bind(n,r,i,this);for(var T=0;T<3;++T){var k=[0,0,0];c[T]>0?k[T]=s[1][T]:k[T]=s[0][T];for(var L=0;L<2;++L){var A=(T+1+L)%3,O=(T+1+(L^1))%3;this.gridEnable[A]&&this._lines.drawGrid(A,O,this.bounds,k,this.gridColor[A],this.gridWidth[A]*this.pixelRatio)}for(var L=0;L<2;++L){var A=(T+1+L)%3,O=(T+1+(L^1))%3;this.zeroEnable[O]&&s[0][O]<=0&&s[1][O]>=0&&this._lines.drawZero(A,O,this.bounds,k,this.zeroLineColor[O],this.zeroLineWidth[O]*this.pixelRatio)}}for(var T=0;T<3;++T){this.lineEnable[T]&&this._lines.drawAxisLine(T,this.bounds,N[T].primalOffset,this.lineColor[T],this.lineWidth[T]*this.pixelRatio),this.lineMirror[T]&&this._lines.drawAxisLine(T,this.bounds,N[T].mirrorOffset,this.lineColor[T],this.lineWidth[T]*this.pixelRatio);var M=f(g,N[T].primalMinor),_=f(y,N[T].mirrorMinor),D=this.lineTickLength,P=0;for(var L=0;L<3;++L){var H=x/n[5*L];M[L]*=D[L]*H,_[L]*=D[L]*H}this.lineTickEnable[T]&&this._lines.drawAxisTicks(T,N[T].primalOffset,M,this.lineTickColor[T],this.lineTickWidth[T]*this.pixelRatio),this.lineTickMirror[T]&&this._lines.drawAxisTicks(T,N[T].mirrorOffset,_,this.lineTickColor[T],this.lineTickWidth[T]*this.pixelRatio)}this._text.bind(n,r,i,this.pixelRatio);for(var T=0;T<3;++T){var B=N[T].primalMinor,j=f(b,N[T].primalOffset);for(var L=0;L<3;++L)this.lineTickEnable[T]&&(j[L]+=x*B[L]*Math.max(this.lineTickLength[L],0)/n[5*L]);if(this.tickEnable[T]){for(var L=0;L<3;++L)j[L]+=x*B[L]*this.tickPad[L]/n[5*L];this._text.drawTicks(T,this.tickSize[T],this.tickAngle[T],j,this.tickColor[T])}if(this.labelEnable[T]){for(var L=0;L<3;++L)j[L]+=x*B[L]*this.labelPad[L]/n[5*L];j[T]+=.5*(s[0][T]+s[1][T]),this._text.drawLabel(T,this.labelSize[T],this.labelAngle[T],j,this.labelColor[T])}}},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":130,"./lib/cube.js":131,"./lib/lines.js":132,"./lib/text.js":134,"./lib/ticks.js":135}],130:[function(e,t,n){"use strict";function o(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}function a(e){var t=[],n=[],u=0;for(var a=0;a<3;++a){var f=(a+1)%3,l=(a+2)%3,c=[0,0,0],h=[0,0,0];for(var p=-1;p<=1;p+=2){n.push(u,u+2,u+1,u+1,u+2,u+3),c[a]=p,h[a]=p;for(var d=-1;d<=1;d+=2){c[f]=d;for(var v=-1;v<=1;v+=2)c[l]=v,t.push(c[0],c[1],c[2],h[0],h[1],h[2]),u+=1}var m=f;f=l,l=m}}var g=r(e,new Float32Array(t)),y=r(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),b=i(e,[{buffer:g,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:e.FLOAT,size:3,offset:12,stride:24}],y),w=s(e);return w.attributes.position.location=0,w.attributes.normal.location=1,new o(e,g,b,w)}t.exports=a;var r=e("gl-buffer"),i=e("gl-vao"),s=e("./shaders").bg,u=o.prototype;u.draw=function(e,t,n,r,i,s){var o=!1;for(var u=0;u<3;++u)o=o||i[u];if(!o)return;var a=this.gl;a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:i,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),a.disable(a.POLYGON_OFFSET_FILL)},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":133,"gl-buffer":77,"gl-vao":185}],131:[function(e,t,n){"use strict";function d(e,t,n){for(var r=0;r<4;++r){e[r]=n[12+r];for(var i=0;i<3;++i)e[r]+=t[i]*n[4*i+r]}}function m(e){for(var t=0;t<v.length;++t){e=o.positive(e,v[t]);if(e.length<3)return 0}var n=e[0],r=n[0]/n[3],i=n[1]/n[3],s=0;for(var t=1;t+1<e.length;++t){var u=e[t],a=e[t+1],f=u[0]/u[3],l=u[1]/u[3],c=a[0]/a[3],h=a[1]/a[3],p=f-r,d=l-i,m=c-r,g=h-i;s+=Math.abs(p*g-d*m)}return s}function w(e,t,n,s){i(a,t,e),i(a,n,a);var o=0;for(var f=0;f<2;++f){h[2]=s[f][2];for(var v=0;v<2;++v){h[1]=s[v][1];for(var w=0;w<2;++w)h[0]=s[w][0],d(l[o],h,a),o+=1}}var E=-1;for(var f=0;f<8;++f){var S=l[f][3];for(var T=0;T<3;++T)c[f][T]=l[f][T]/S;S<0&&(E<0?E=f:c[f][2]<c[E][2]&&(E=f))}if(E<0){E=0;for(var N=0;N<3;++N){var C=(N+2)%3,k=(N+1)%3,L=-1,A=-1;for(var O=0;O<2;++O){var M=O<<N,_=M+(O<<C)+(1-O<<k),D=M+(1-O<<C)+(O<<k);if(u(c[M],c[_],c[D],p)<0)continue;O?L=1:A=1}if(L<0||A<0){A>L&&(E|=1<<N);continue}for(var O=0;O<2;++O){var M=O<<N,_=M+(O<<C)+(1-O<<k),D=M+(1-O<<C)+(O<<k),P=m([l[M],l[_],l[D],l[M+(1<<C)+(1<<k)]]);O?L=P:A=P}if(A>L){E|=1<<N;continue}}}var H=7^E,B=-1;for(var f=0;f<8;++f){if(f===E||f===H)continue;B<0?B=f:c[B][1]>c[f][1]&&(B=f)}var j=-1;for(var f=0;f<3;++f){var F=B^1<<f;if(F===E||F===H)continue;j<0&&(j=F);var k=c[F];k[0]<c[j][0]&&(j=F)}var I=-1;for(var f=0;f<3;++f){var F=B^1<<f;if(F===E||F===H||F===j)continue;I<0&&(I=F);var k=c[F];k[0]>c[I][0]&&(I=F)}var q=g;q[0]=q[1]=q[2]=0,q[r.log2(j^B)]=B&j,q[r.log2(B^I)]=B&I;var R=I^7;R===E||R===H?(R=j^7,q[r.log2(I^R)]=R&I):q[r.log2(j^R)]=R&j;var U=y,z=E;for(var N=0;N<3;++N)z&1<<N?U[N]=-1:U[N]=1;return b}t.exports=w;var r=e("bit-twiddle"),i=e("gl-mat4/multiply"),s=e("gl-mat4/invert"),o=e("split-polygon"),u=e("robust-orientation"),a=new Array(16),f=new Array(16),l=new Array(8),c=new Array(8),h=new Array(3),p=[0,0,0];(function(){for(var e=0;e<8;++e)l[e]=[1,1,1,1],c[e]=[1,1,1]})();var v=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],g=[1,1,1],y=[0,0,0],b={cubeEdges:g,axis:y}},{"bit-twiddle":50,"gl-mat4/invert":96,"gl-mat4/multiply":98,"robust-orientation":218,"split-polygon":137}],132:[function(e,t,n){"use strict";function c(e){return e[0]=e[1]=e[2]=0,e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function p(e,t,n,r,i,s,o,u){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=s,this.gridCount=o,this.gridOffset=u}function v(e,t,n){var o=[],u=[0,0,0],a=[0,0,0],f=[0,0,0],l=[0,0,0];o.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var c=0;c<3;++c){var h=o.length/3|0;for(var d=0;d<n[c].length;++d){var v=+n[c][d].x;o.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=o.length/3|0;u[c]=h,a[c]=m-h;var h=o.length/3|0;for(var g=0;g<n[c].length;++g){var v=+n[c][g].x;o.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var m=o.length/3|0;f[c]=h,l[c]=m-h}var y=r(e,new Float32Array(o)),b=i(e,[{buffer:y,type:e.FLOAT,size:3,stride:0,offset:0}]),w=s(e);return w.attributes.position.location=0,new p(e,y,b,w,a,u,l,f)}t.exports=v;var r=e("gl-buffer"),i=e("gl-vao"),s=e("./shaders").line,o=[0,0,0],u=[0,0,0],a=[0,0,0],f=[0,0,0],l=[1,1],d=p.prototype;d.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,l[0]=this.gl.drawingBufferWidth,l[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=l,this.vao.bind()},d.drawAxisLine=function(e,t,n,r,i){var s=c(u);this.shader.uniforms.majorAxis=u,s[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=s;var o=h(f,n);o[e]+=t[0][e],this.shader.uniforms.offset=o,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=r;var l=c(a);l[(e+2)%3]=1,this.shader.uniforms.screenAxis=l,this.vao.draw(this.gl.TRIANGLES,6);var l=c(a);l[(e+1)%3]=1,this.shader.uniforms.screenAxis=l,this.vao.draw(this.gl.TRIANGLES,6)},d.drawAxisTicks=function(e,t,n,r,i){if(!this.tickCount[e])return;var s=c(o);s[e]=1,this.shader.uniforms.majorAxis=s,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=i;var u=c(a);u[e]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])},d.drawGrid=function(e,t,n,r,i,s){if(!this.gridCount[e])return;var l=c(u);l[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=l;var p=h(f,r);p[t]+=n[0][t],this.shader.uniforms.offset=p;var d=c(o);d[e]=1,this.shader.uniforms.majorAxis=d;var v=c(a);v[e]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])},d.drawZero=function(e,t,n,r,i,s){var o=c(u);this.shader.uniforms.majorAxis=o,o[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=o;var l=h(f,r);l[e]+=n[0][e],this.shader.uniforms.offset=l;var p=c(a);p[t]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},d.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":133,"gl-buffer":77,"gl-vao":185}],133:[function(e,t,n){"use strict";var r=e("gl-shader"),i="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",s="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";n.line=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"}])};var o="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",u="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";n.text=function(e){return r(e,o,u,null,[{name:"position",type:"vec3"}])};var a="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",f="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}";n.bg=function(e){return r(e,a,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":156}],134:[function(e,t,n){(function(n){"use strict";function c(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function m(e,t){try{return s(e,t)}catch(n){return console.warn("error vectorizing text:",n),{cells:[],positions:[]}}}function g(e,t,n,s,u,a){var f=r(e),l=i(e,[{buffer:f,size:3}]),h=o(e);h.attributes.position.location=0;var p=new c(e,h,f,l);return p.update(t,n,s,u,a),p}t.exports=g;var r=e("gl-buffer"),i=e("gl-vao"),s=e("vectorize-text"),o=e("./shaders").text,u=window||n.global||{},a=u.__TEXT_CACHE||{};u.__TEXT_CACHE={};var f=3,l=f*4,h=c.prototype,p=[0,0];h.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=n,i.pixelScale=r,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},h.update=function(e,t,n,r,i){function u(e,t,n,r){var i=a[n];i||(i=a[n]={});var s=i[t];s||(s=i[t]=m(t,{triangles:!0,font:n,textAlign:"center",textBaseline:"middle"}));var u=(r||12)/12,f=s.positions,l=s.cells,c=[Infinity,Infinity],h=[-Infinity,-Infinity];for(var p=0,d=l.length;p<d;++p){var v=l[p];for(var g=2;g>=0;--g){var y=f[v[g]];o.push(u*y[0],-u*y[1],e)}}}var s=this.gl,o=[],l=[0,0,0],c=[0,0,0],h=[0,0,0],p=[0,0,0];for(var d=0;d<3;++d){h[d]=o.length/f|0,u(.5*(e[0][d]+e[1][d]),t[d],n),p[d]=(o.length/f|0)-h[d],l[d]=o.length/f|0;for(var v=0;v<r[d].length;++v){if(!r[d][v].text)continue;u(r[d][v].x,r[d][v].text,r[d][v].font||i,r[d][v].fontSize||12)}c[d]=(o.length/f|0)-l[d]}this.buffer.update(o),this.tickOffset=l,this.tickCount=c,this.labelOffset=h,this.labelCount=p};var d=[0,0,0];h.drawTicks=function(e,t,n,r,i){if(!this.tickCount[e])return;var s=d;s[0]=s[1]=s[2]=0,s[e]=1,this.shader.uniforms.axis=s,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])};var v=[0,0,0];h.drawLabel=function(e,t,n,r,i){if(!this.labelCount[e])return;this.shader.uniforms.axis=v,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e])},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,e("_process"))},{"./shaders":133,_process:56,"gl-buffer":77,"gl-vao":185,"vectorize-text":239}],135:[function(e,t,n){"use strict";function r(e,t){var n=e+"",r=n.indexOf("."),i=0;r>=0&&(i=n.length-r-1);var s=Math.pow(10,i),o=Math.round(e*t*s),u=o+"";if(u.indexOf("e")>=0)return u;var a=o/s,f=o%s;o<0?(a=-Math.ceil(a)|0,f=-f|0):(a=Math.floor(a)|0,f|=0);var l=""+a;o<0&&(l="-"+l);if(i){var c=""+f;while(c.length<i)c="0"+c;return l+"."+c}return l}function i(e,t){var n=[];for(var i=0;i<3;++i){var s=[],o=.5*(e[0][i]+e[1][i]);for(var u=0;u*t[i]<=e[1][i];++u)s.push({x:u*t[i],text:r(t[i],u)});for(var u=-1;u*t[i]>=e[0][i];--u)s.push({x:u*t[i],text:r(t[i],u)});n.push(s)}return n}function s(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var i=e[n][r],s=t[n][r];if(i.x!==s.x||i.text!==s.text)return!1}}return!0}n.create=i,n.equal=s},{}],136:[function(e,t,n){"use strict";function r(e,t,n){var r=t||0,i=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[r*e[12]+e[8],r*e[13]+e[9],r*e[14]+e[10],r*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}t.exports=r},{}],137:[function(e,t,n){"use strict";function s(e,t){var n=i(r(e,t),[t[t.length-1]]);return n[n.length-1]}function o(e,t,n,r){var i=r-t,s=-t/i;s<0?s=0:s>1&&(s=1);var o=1-s,u=e.length,a=new Array(u);for(var f=0;f<u;++f)a[f]=s*e[f]+o*n[f];return a}function u(e,t){var n=[],r=[],i=s(e[e.length-1],t);for(var u=e[e.length-1],a=e[0],f=0;f<e.length;++f,u=a){a=e[f];var l=s(a,t);if(i<0&&l>0||i>0&&l<0){var c=o(u,l,a,i);n.push(c),r.push(c.slice())}l<0?r.push(a.slice()):l>0?n.push(a.slice()):(n.push(a.slice()),r.push(a.slice())),i=l}return{positive:n,negative:r}}function a(e,t){var n=[],r=s(e[e.length-1],t);for(var i=e[e.length-1],u=e[0],a=0;a<e.length;++a,i=u){u=e[a];var f=s(u,t);(r<0&&f>0||r>0&&f<0)&&n.push(o(i,f,u,r)),f>=0&&n.push(u.slice()),r=f}return n}function f(e,t){var n=[],r=s(e[e.length-1],t);for(var i=e[e.length-1],u=e[0],a=0;a<e.length;++a,i=u){u=e[a];var f=s(u,t);(r<0&&f>0||r>0&&f<0)&&n.push(o(i,f,u,r)),f<=0&&n.push(u.slice()),r=f}return n}var r=e("robust-dot-product"),i=e("robust-sum");t.exports=u,t.exports.positive=a,t.exports.negative=f},{"robust-dot-product":138,"robust-sum":221}],138:[function(e,t,n){"use strict";function s(e,t){var n=r(e[0],t[0]);for(var s=1;s<e.length;++s)n=i(n,r(e[s],t[s]));return n}var r=e("two-product"),i=e("robust-sum");t.exports=s},{"robust-sum":221,"two-product":235}],139:[function(e,t,n){"use strict";function c(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}function d(e,t,n,r,i){for(var s=0;s<3;++s){var o=h,u=p;for(var f=0;f<3;++f)u[f]=o[f]=n[f];u[3]=o[3]=1,u[s]+=1,a(u,u,t),u[3]<0&&(e[s]=Infinity),o[s]-=1,a(o,o,t),o[3]<0&&(e[s]=Infinity);var l=(o[0]/o[3]-u[0]/u[3])*r,c=(o[1]/o[3]-u[1]/u[3])*i;e[s]=.25*Math.sqrt(l*l+c*c)}return e}function g(e,t,n,a,c){var h=t.model||f,p=t.view||f,g=t.projection||f,y=e.bounds,c=c||s(h,p,g,y),b=c.axis,w=c.edges;o(l,p,h),o(l,g,l);var E=v;for(var S=0;S<3;++S)E[S].lo=Infinity,E[S].hi=-Infinity,E[S].pixelsPerDataUnit=Infinity;var x=r(u(l,l));u(l,l);for(var T=0;T<3;++T){var N=(T+1)%3,C=(T+2)%3,k=m;e:for(var S=0;S<2;++S){var L=[];if(b[T]<0==!!S)continue;k[T]=y[S][T];for(var A=0;A<2;++A){k[N]=y[A^S][N];for(var O=0;O<2;++O)k[C]=y[O^A^S][C],L.push(k.slice())}for(var A=0;A<x.length;++A){if(L.length===0)continue e;L=i.positive(L,x[A])}for(var A=0;A<L.length;++A){var C=L[A],M=d(m,l,C,n,a);for(var O=0;O<3;++O)E[O].lo=Math.min(E[O].lo,C[O]),E[O].hi=Math.max(E[O].hi,C[O]),O!==T&&(E[O].pixelsPerDataUnit=Math.min(E[O].pixelsPerDataUnit,Math.abs(M[O])))}}}return E}t.exports=g;var r=e("extract-frustum-planes"),i=e("split-polygon"),s=e("./lib/cube.js"),o=e("gl-mat4/multiply"),u=e("gl-mat4/transpose"),a=e("gl-vec4/transformMat4"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l=new Float32Array(16),h=[0,0,0,1],p=[0,0,0,1],v=[new c(Infinity,-Infinity,Infinity),new c(Infinity,-Infinity,Infinity),new c(Infinity,-Infinity,Infinity)],m=[0,0,0]},{"./lib/cube.js":131,"extract-frustum-planes":136,"gl-mat4/multiply":98,"gl-mat4/transpose":106,"gl-vec4/transformMat4":186,"split-polygon":137}],140:[function(e,t,n){"use strict";var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",s="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}";t.exports=function(e){return r(e,i,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":156}],141:[function(e,t,n){"use strict";function u(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function h(e,t){function o(e,t,r,i,s,o){var u=[e,t,r,0,0,0,1];u[i+3]=1,u[i]=s,n.push.apply(n,u),u[6]=-1,n.push.apply(n,u),u[i]=o,n.push.apply(n,u),n.push.apply(n,u),u[6]=1,n.push.apply(n,u),u[i]=s,n.push.apply(n,u)}var n=[];o(0,0,0,0,0,1),o(0,0,0,1,0,1),o(0,0,0,2,0,1),o(1,0,0,1,-1,1),o(1,0,0,2,-1,1),o(0,1,0,0,-1,1),o(0,1,0,2,-1,1),o(0,0,1,0,-1,1),o(0,0,1,1,-1,1);var a=r(e,n),f=i(e,[{type:e.FLOAT,buffer:a,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:a,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:a,size:1,offset:24,stride:28}]),l=s(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.weight
.location=2;var c=new u(e,a,f,l);return c.update(t),c}var r=e("gl-buffer"),i=e("gl-vao"),s=e("./shaders/index");t.exports=h;var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a=u.prototype,f=[0,0,0],l=[0,0,0],c=[0,0];a.isTransparent=function(){return!1},a.drawTransparent=function(e){},a.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i=e.model||o,s=e.view||o,u=e.projection||o,a;this.axes&&(a=this.axes.lastCubeProps.axis);var h=f,p=l;for(var d=0;d<3;++d)a&&a[d]<0?(h[d]=this.bounds[0][d],p[d]=this.bounds[1][d]):(h[d]=this.bounds[1][d],p[d]=this.bounds[0][d]);c[0]=t.drawingBufferWidth,c[1]=t.drawingBufferHeight,r.uniforms.model=i,r.uniforms.view=s,r.uniforms.projection=u,r.uniforms.coordinates=[this.position,h,p],r.uniforms.colors=this.colors,r.uniforms.screenShape=c;for(var d=0;d<3;++d)r.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(n.draw(t.TRIANGLES,6,6*d),this.drawSides[d]&&n.draw(t.TRIANGLES,12,18+12*d));n.unbind()},a.update=function(e){if(!e)return;"bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides)},a.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":77,"gl-vao":185}],142:[function(e,t,n){"use strict";function p(){this.mouse=[-1,-1],this.screen=null,this.distance=Infinity,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function d(e,t){var n=null;try{n=e.getContext("webgl",t),n||(n=e.getContext("experimental-webgl",t))}catch(r){return null}return n}function v(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(t>0){var n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}return Math.ceil(e)}function m(e){return typeof e=="boolean"?e:!0}function g(e){function R(){if(t)return;if(!I.autoResize)return;var e=g.parentNode,n=1,r=1;e&&e!==document.body?(n=e.clientWidth,r=e.clientHeight):(n=window.innerWidth,r=window.innerHeight);var i=Math.ceil(n*I.pixelRatio)|0,s=Math.ceil(r*I.pixelRatio)|0;if(i!==g.width||s!==g.height){g.width=i,g.height=s;var o=g.style;o.position=o.position||"absolute",o.left="0px",o.top="0px",o.width=n+"px",o.height=r+"px",D=!0}}function U(){var e=A.length,t=_.length;for(var n=0;n<t;++n)M[n]=0;e:for(var n=0;n<e;++n){var r=A[n],i=r.pickSlots;if(!i){O[n]=-1;continue}for(var s=0;s<t;++s)if(M[s]+i<255){O[n]=s,r.setPickBase(M[s]+1),M[s]+=i;continue e}var o=u(b,F);O[n]=t,_.push(o),M.push(i),r.setPickBase(1),t+=1}while(t>0&&M[t-1]===0)M.pop(),_.pop().dispose()}function X(){if(I.contextLost)return!0;b.isContextLost()&&(I.contextLost=!0,I.mouseListener.enabled=!1,I.selection.object=null,I.oncontextloss&&I.oncontextloss())}function V(){if(X())return;b.colorMask(!0,!0,!0,!0),b.depthMask(!0),b.disable(b.BLEND),b.enable(b.DEPTH_TEST);var e=A.length,t=_.length;for(var n=0;n<t;++n){var r=_[n];r.shape=q,r.begin();for(var i=0;i<e;++i){if(O[i]!==n)continue;var s=A[i];s.drawPick&&(s.pixelRatio=1,s.drawPick(j))}r.end()}}function K(){if(X())return;R();var e=I.camera.tick();j.view=I.camera.matrix,D=D||e,P=P||e,C.pixelRatio=I.pixelRatio,L.pixelRatio=I.pixelRatio;var t=A.length,n=$[0],r=$[1];n[0]=n[1]=n[2]=Infinity,r[0]=r[1]=r[2]=-Infinity;for(var i=0;i<t;++i){var o=A[i];o.pixelRatio=I.pixelRatio,o.axes=I.axes,D=D||!!o.dirty,P=P||!!o.dirty;var u=o.bounds;if(u){var a=u[0],l=u[1];for(var h=0;h<3;++h)n[h]=Math.min(n[h],a[h]),r[h]=Math.max(r[h],l[h])}}var p=I.bounds;if(I.autoBounds)for(var h=0;h<3;++h){if(r[h]<n[h])n[h]=-1,r[h]=1;else{n[h]===r[h]&&(n[h]-=1,r[h]+=1);var d=.05*(r[h]-n[h]);n[h]=n[h]-d,r[h]=r[h]+d}p[0][h]=n[h],p[1][h]=r[h]}var m=!1;for(var h=0;h<3;++h)m=m||J[0][h]!==p[0][h]||J[1][h]!==p[1][h],J[0][h]=p[0][h],J[1][h]=p[1][h];if(m){var g=[0,0,0];for(var i=0;i<3;++i)g[i]=v((p[1][i]-p[0][i])/10);C.autoTicks?C.update({bounds:p,tickSpacing:g}):C.update({bounds:p})}P=P||m,D=D||m;var y=b.drawingBufferWidth,w=b.drawingBufferHeight;F[0]=y,F[1]=w,q[0]=Math.max(y/I.pixelRatio,1)|0,q[1]=Math.max(w/I.pixelRatio,1)|0,c(H,I.fovy,y/w,I.zNear,I.zFar);for(var i=0;i<16;++i)B[i]=0;B[15]=1;var T=0;for(var i=0;i<3;++i)T=Math.max(T,p[1][i]-p[0][i]);for(var i=0;i<3;++i)I.autoScale?B[5*i]=I.aspect[i]/(p[1][i]-p[0][i]):B[5*i]=1/T,I.autoCenter&&(B[12+i]=-B[5*i]*.5*(p[0][i]+p[1][i]));for(var i=0;i<t;++i){var o=A[i];o.axesBounds=p,I.clipToBounds&&(o.clipBounds=p)}E.object&&(I.snapToData?L.position=E.dataCoordinate:L.position=E.dataPosition,L.bounds=p),P&&(P=!1,V());if(!D)return;I.axesPixels=s(I.axes,j,y,w),I.onrender&&I.onrender(),b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,y,w);var N=I.clearColor;b.clearColor(N[0],N[1],N[2],N[3]),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),b.depthMask(!0),b.colorMask(!0,!0,!0,!0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.disable(b.BLEND),b.disable(b.CULL_FACE);var k=!1;C.enable&&(k=k||C.isTransparent(),C.draw(j)),L.axes=C,E.object&&L.draw(j),b.disable(b.CULL_FACE);for(var i=0;i<t;++i){var o=A[i];o.axes=C,o.pixelRatio=I.pixelRatio,o.isOpaque&&o.isOpaque()&&o.draw(j),o.isTransparent&&o.isTransparent()&&(k=!0)}if(k){S.shape=F,S.bind(),b.clear(b.DEPTH_BUFFER_BIT),b.colorMask(!1,!1,!1,!1),b.depthMask(!0),b.depthFunc(b.LESS),C.enable&&C.isTransparent()&&C.drawTransparent(j);for(var i=0;i<t;++i){var o=A[i];o.isOpaque&&o.isOpaque()&&o.draw(j)}b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.colorMask(!0,!0,!0,!0),b.depthMask(!1),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),C.isTransparent()&&C.drawTransparent(j);for(var i=0;i<t;++i){var o=A[i];o.isTransparent&&o.isTransparent()&&o.drawTransparent(j)}b.bindFramebuffer(b.FRAMEBUFFER,null),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.disable(b.DEPTH_TEST),x.bind(),S.color[0].bind(0),x.uniforms.accumBuffer=0,f(b),b.disable(b.BLEND)}D=!1;for(var i=0;i<t;++i)A[i].dirty=!1}function Q(){if(t||I.contextLost)return;requestAnimationFrame(Q),K()}e=e||{};var t=!1,n=e.pixelRatio||parseFloat(window.devicePixelRatio),g=e.canvas;if(!g){g=document.createElement("canvas");if(e.container){var y=e.container;y.appendChild(g)}else document.body.appendChild(g)}var b=e.gl;b||(b=d(g,e.glOptions||{premultipliedAlpha:!0,antialias:!0}));if(!b)throw new Error("webgl not supported");var w=e.bounds||[[-10,-10,-10],[10,10,10]],E=new p,S=a(b,[b.drawingBufferWidth,b.drawingBufferHeight],{preferFloat:!0}),x=h(b),T=e.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},N=e.axes||{},C=i(b,N);C.enable=!N.disable;var k=e.spikes||{},L=o(b,k),A=[],O=[],M=[],_=[],D=!0,P=!0,H=new Array(16),B=new Array(16),j={view:null,projection:H,model:B},P=!0,F=[b.drawingBufferWidth,b.drawingBufferHeight],I={gl:b,contextLost:!1,pixelRatio:e.pixelRatio||parseFloat(window.devicePixelRatio),canvas:g,selection:E,camera:r(g,T),axes:C,axesPixels:null,spikes:L,bounds:w,objects:A,shape:F,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:m(e.autoResize),autoBounds:m(e.autoBounds),autoScale:!!e.autoScale,autoCenter:m(e.autoCenter),clipToBounds:m(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:j,oncontextloss:null,mouseListener:null},q=[b.drawingBufferWidth/I.pixelRatio|0,b.drawingBufferHeight/I.pixelRatio|0];I.autoResize&&R(),window.addEventListener("resize",R),I.update=function(e){if(t)return;e=e||{},D=!0,P=!0},I.add=function(e){if(t)return;e.axes=C,A.push(e),O.push(-1),D=!0,P=!0,U()},I.remove=function(e){if(t)return;var n=A.indexOf(e);if(n<0)return;A.splice(n,1),O.pop(),D=!0,P=!0,U()},I.dispose=function(){if(t)return;t=!0,window.removeEventListener("resize",R),g.removeEventListener("webglcontextlost",X),I.mouseListener.enabled=!1;if(I.contextLost)return;C.dispose(),L.dispose();for(var e=0;e<A.length;++e)A[e].dispose();S.dispose();for(var e=0;e<_.length;++e)_[e].dispose();x.dispose(),b=null,C=null,L=null,A=[]};var z=!1,W=0;I.mouseListener=l(g,function(e,n,r){if(t)return;var i=_.length,s=A.length,o=E.object;E.distance=Infinity,E.mouse[0]=n,E.mouse[1]=r,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var u=!1;if(e&&W)z=!0;else{z&&(P=!0),z=!1;for(var a=0;a<i;++a){var f=_[a].query(n,q[1]-r-1,I.pickRadius);if(f){if(f.distance>E.distance)continue;for(var l=0;l<s;++l){var c=A[l];if(O[l]!==a)continue;var h=c.pick(f);h&&(E.buttons=e,E.screen=f.coord,E.distance=f.distance,E.object=c,E.index=h.distance,E.dataPosition=h.position,E.dataCoordinate=h.dataCoordinate,E.data=h,u=!0)}}}}o&&o!==E.object&&(o.highlight&&o.highlight(null),D=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),D=!0),u=u||E.object!==o,u&&I.onselect&&I.onselect(E),e&1&&!(W&1)&&I.onclick&&I.onclick(E),W=e}),g.addEventListener("webglcontextlost",X);var $=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],J=[$[0].slice(),$[1].slice()];return Q(),I.redraw=function(){if(t)return;D=!0,K()},I}t.exports=g;var r=e("3d-view-controls"),i=e("gl-axes3d"),s=e("gl-axes3d/properties"),o=e("gl-spikes3d"),u=e("gl-select-static"),a=e("gl-fbo"),f=e("a-big-triangle"),l=e("mouse-change"),c=e("gl-mat4/perspective"),h=e("./lib/shader")},{"./lib/shader":125,"3d-view-controls":126,"a-big-triangle":128,"gl-axes3d":129,"gl-axes3d/properties":139,"gl-fbo":82,"gl-mat4/perspective":99,"gl-select-static":155,"gl-spikes3d":141,"mouse-change":200}],143:[function(e,t,n){"use strict";t.exports={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  fragColor = color;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",fragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",pickVertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 id;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\nuniform vec4 pickOffset;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",pickFragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],144:[function(e,t,n){"use strict";function l(e){if(e in f)return f[e];var t=u(e,{polygons:!0,font:"sans-serif",textAlign:"left",textBaseline:"alphabetic"}),n=[],r=[];t.forEach(function(e){e.forEach(function(e){for(var t=0;t<e.length;++t){var i=e[(t+e.length-1)%e.length],s=e[t],o=e[(t+1)%e.length],u=e[(t+2)%e.length],a=s[0]-i[0],f=s[1]-i[1],l=Math.sqrt(a*a+f*f);a/=l,f/=l,n.push(i[0],i[1]+1.4),r.push(f,-a),n.push(i[0],i[1]+1.4),r.push(-f,a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(i[0],i[1]+1.4),r.push(f,-a),n.push(s[0],s[1]+1.4),r.push(f,-a);var c=u[0]-o[0],h=u[1]-o[1],p=Math.sqrt(c*c+h*h);c/=p,h/=p,n.push(s[0],s[1]+1.4),r.push(f,-a),n.push(s[0],s[1]+1.4),r.push(-f,a),n.push(o[0],o[1]+1.4),r.push(-h,c),n.push(o[0],o[1]+1.4),r.push(-h,c),n.push(s[0],s[1]+1.4),r.push(h,-c),n.push(o[0],o[1]+1.4),r.push(h,-c)}})});var i=[Infinity,Infinity,-Infinity,-Infinity];for(var s=0;s<n.length;s+=2)for(var o=0;o<2;++o)i[o]=Math.min(i[o],n[s+o]),i[2+o]=Math.max(i[2+o],n[s+o]);return f[e]={coords:n,normals:r,bounds:i}}function p(e,t,n,r,i,s,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.offsetBuffer=i,this.colorBuffer=s,this.idBuffer=o,this.bounds=[Infinity,Infinity,-Infinity,-Infinity],this.numPoints=0,this.numVertices=0,this.pickOffset=0,this.points=null}function v(e,t){var n=e.gl,s=r(n,a.vertex,a.fragment),o=r(n,a.pickVertex,a.pickFragment),u=i(n),f=i(n),l=i(n),c=i(n),h=new p(e,s,o,u,f,l,c);return h.update(t),e.addObject(h),h}t.exports=v;var r=e("gl-shader"),i=e("gl-buffer"),s=e("text-cache"),o=e("typedarray-pool"),u=e("vectorize-text"),a=e("./lib/shaders"),f={},c=9,h=c*4,d=p.prototype;(function(){function n(){var n=this.plot,r=this.bounds,i=n.viewBox,s=n.dataBox,o=n.pixelRatio,u=r[2]-r[0],a=r[3]-r[1],f=s[2]-s[0],l=s[3]-s[1];e[0]=2*u/f,e[4]=2*a/l,e[6]=2*(r[0]-s[0])/f-1,e[7]=2*(r[1]-s[1])/l-1;var c=i[2]-i[0],h=i[3]-i[1];t[0]=2*o/c,t[1]=2*o/h}var e=[1,0,0,0,1,0,0,0,1],t=[1,1];d.draw=function(){var r=this.plot,i=this.shader,s=this.numVertices;if(!s)return;var o=r.gl;n.call(this),i.bind(),i.uniforms.pixelScale=t,i.uniforms.viewTransform=e,this.positionBuffer.bind(),i.attributes.position.pointer(),this.offsetBuffer.bind(),i.attributes.offset.pointer(),this.colorBuffer.bind(),i.attributes.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,s)};var r=[0,0,0,0];d.drawPick=function(i){var s=this.plot,o=this.pickShader,u=this.numVertices,a=s.gl;this.pickOffset=i;if(!u)return i;for(var f=0;f<4;++f)r[f]=i>>f*8&255;return n.call(this),o.bind(),o.uniforms.pixelScale=t,o.uniforms.viewTransform=e,o.uniforms.pickOffset=r,this.positionBuffer.bind(),o.attributes.position.pointer(),this.offsetBuffer.bind(),o.attributes.offset.pointer(),this.idBuffer.bind(),o.attributes.id.pointer(a.UNSIGNED_BYTE,!1),a.drawArrays(a.TRIANGLES,0,u),i+this.numPoints}})(),d.pick=function(e,t,n){var r=this.pickOffset,i=this.numPoints;if(n<r||n>=r+i)return null;var s=n-r,o=this.points;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}},d.update=function(e){e=e||{};var t=e.positions||[],n=e.colors||[],r=e.glyphs||[],i=e.sizes||[],u=e.borderWidths||[],a=e.borderColors||[];this.points=t;var f=this.bounds=[Infinity,Infinity,-Infinity,-Infinity],c=0;for(var h=0;h<r.length;++h){c+=s("sans-serif",r[h]).data.length+l(r[h]).coords.length>>1;for(var p=0;p<2;++p)f[p]=Math.min(f[p],t[2*h+p]),f[2+p]=Math.max(f[2+p],t[2*h+p])}f[0]===f[2]&&(f[2]+=1),f[3]===f[1]&&(f[3]+=1);var d=1/(f[2]-f[0]),v=1/(f[3]-f[1]),m=f[0],g=f[1],y=o.mallocFloat32(2*c),b=o.mallocFloat32(2*c),w=o.mallocUint8(4*c),E=o.mallocUint32(c),S=0;for(var h=0;h<r.length;++h){var x=s("sans-serif",r[h]),T=l(r[h]),N=d*(t[2*h]-m),C=v*(t[2*h+1]-g),k=i[h],L=n[4*h]*255,A=n[4*h+1]*255,O=n[4*h+2]*255,M=n[4*h+3]*255,_=.5*(T.bounds[0]+T.bounds[2]),D=.5*(T.bounds[1]+T.bounds[3]);for(var p=0;p<x.data.length;p+=2)y[2*S]=N,y[2*S+1]=C,b[2*S]=-k*(x.data[p]-_),b[2*S+1]=-k*(x.data[p+1]-D),w[4*S]=L,w[4*S+1]=A,w[4*S+2]=O,w[4*S+3]=M,E[S]=h,S+=1;var P=u[h];L=a[4*h]*255,A=a[4*h+1]*255,O=a[4*h+2]*255,M=a[4*h+3]*255;for(var p=0;p<T.coords.length;p+=2)y[2*S]=N,y[2*S+1]=C,b[2*S]=-(k*(T.coords[p]-_)+P*T.normals[p]),b[2*S+1]=-(k*(T.coords[p+1]-D)+P*T.normals[p+1]),w[4*S]=L,w[4*S+1]=A,w[4*S+2]=O,w[4*S+3]=M,E[S]=h,S+=1}this.numPoints=r.length,this.numVertices=c,this.positionBuffer.update(y),this.offsetBuffer.update(b),this.colorBuffer.update(w),this.idBuffer.update(E),o.free(y),o.free(b),o.free(w),o.free(E)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.offsetBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":143,"gl-buffer":77,"gl-shader":156,"text-cache":232,"typedarray-pool":237,"vectorize-text":239}],145:[function(e,t,n){n.pointVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute float weight;\n\nuniform mat3 matrix;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}\n",n.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n",n.pickVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",n.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],146:[function(e,t,n){arguments[4][123][0].apply(n,arguments)},{dup:123}],147:[function(e,t,n){"use strict";function i(e,t,n,i,o){o<=4*r?s(0,o-1,e,t,n,i):h(0,o-1,e,t,n,i)}function s(e,t,n,r,i,s){for(var o=e+1;o<=t;++o){var u=n[o],a=r[2*o],f=r[2*o+1],l=i[o],c=s[o],h=o;while(h>e){var p=n[h-1],d=r[2*(h-1)];if((p-u||a-d)>=0)break;n[h]=p,r[2*h]=d,r[2*h+1]=r[2*h-1],i[h]=i[h-1],s[h]=s[h-1],h-=1}n[h]=u,r[2*h]=a,r[2*h+1]=f,i[h]=l,s[h]=c}}function o(e,t,n,r,i,s){var o=n[e],u=r[2*e],a=r[2*e+1],f=i[e],l=s[e];n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],s[e]=s[t],n[t]=o,r[2*t]=u,r[2*t+1]=a,i[t]=f,s[t]=l}function u(e,t,n,r,i,s){n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],s[e]=s[t]}function a(e,t,n,r,i,s,o){var u=r[e],a=i[2*e],f=i[2*e+1],l=s[e],c=o[e];r[e]=r[t],i[2*e]=i[2*t],i[2*e+1]=i[2*t+1],s[e]=s[t],o[e]=o[t],r[t]=r[n],i[2*t]=i[2*n],i[2*t+1]=i[2*n+1],s[t]=s[n],o[t]=o[n],r[n]=u,i[2*n]=a,i[2*n+1]=f,s[n]=l,o[n]=c}function f(e,t,n,r,i,s,o,u,a,f,l){u[e]=u[t],a[2*e]=a[2*t],a[2*e+1]=a[2*t+1],f[e]=f[t],l[e]=l[t],u[t]=n,a[2*t]=r,a[2*t+1]=i,f[t]=s,l[t]=o}function l(e,t,n,r,i){return(n[e]-n[t]||r[2*t]-r[2*e]||i[e]-i[t])<0}function c(e,t,n,r,i,s,o,u){return(t-s[e]||o[2*e]-n||i-u[e])<0}function h(e,t,n,i,p,d){var v=(t-e+1)/6|0,m=e+v,g=t-v,y=e+t>>1,b=y-v,w=y+v,E=m,S=b,x=y,T=w,N=g,C=e+1,k=t-1,L=0;l(E,S,n,i,p,d)&&(L=E,E=S,S=L),l(T,N,n,i,p,d)&&(L=T,T=N,N=L),l(E,x,n,i,p,d)&&(L=E,E=x,x=L),l(S,x,n,i,p,d)&&(L=S,S=x,x=L),l(E,T,n,i,p,d)&&(L=E,E=T,T=L),l(x,T,n,i,p,d)&&(L=x,x=T,T=L),l(S,N,n,i,p,d)&&(L=S,S=N,N=L),l(S,x,n,i,p,d)&&(L=S,S=x,x=L),l(T,N,n,i,p,d)&&(L=T,T=N,N=L);var A=n[S],O=i[2*S],M=i[2*S+1],_=p[S],D=d[S],P=n[T],H=i[2*T],B=i[2*T+1],j=p[T],F=d[T],I=E,q=x,R=N,U=m,z=y,W=g,X=n[I],V=n[q],$=n[R];n[U]=X,n[z]=V,n[W]=$;for(var J=0;J<2;++J){var K=i[2*I+J],Q=i[2*q+J],G=i[2*R+J];i[2*U+J]=K,i[2*z+J]=Q,i[2*W+J]=G}var Y=p[I],Z=p[q],et=p[R];p[U]=Y,p[z]=Z,p[W]=et;var tt=d[I],nt=d[q],rt=d[R];d[U]=tt,d[z]=nt,d[W]=rt,u(b,e,n,i,p,d),u(w,t,n,i,p,d);for(var it=C;it<=k;++it)if(c(it,A,O,M,_,n,i,p))it!==C&&o(it,C,n,i,p,d),++C;else if(!c(it,P,H,B,j,n,i,p))for(;;){if(!c(k,P,H,B,j,n,i,p)){if(--k<it)break;continue}c(k,A,O,M,_,n,i,p)?(a(it,C,k,n,i,p,d),++C,--k):(o(it,k,n,i,p,d),--k);break}f(e,C-1,A,O,M,_,D,n,i,p,d),f(t,k+1,P,H,B,j,F,n,i,p,d),C-2-e<=r?s(e,C-2,n,i,p,d):h(e,C-2,n,i,p,d),t-(k+2)<=r?s(k+2,t,n,i,p,d):h(k+2,t,n,i,p,d),k-C<=r?s(C,k,n,i,p,d):h(C,k,n,i,p,d)}t.exports=i;var r=32},{}],148:[function(e,t,n){"use strict";function s(e,t,n,r,i,s,o,u){var a=n;for(var f=n;f<r;++f){var l=e[2*f],c=e[2*f+1],h=t[f];i<=l&&l<=o&&s<=c&&c<=u&&(f===a?a+=1:(e[2*f]=e[2*a],e[2*f+1]=e[2*a+1],t[f]=t[a],e[2*a]=l,e[2*a+1]=c,t[a]=h,a+=1))}return a}function o(e,t,n){this.pixelSize=e,this.offset=t,this.count=n}function u(e,t,n,u){function E(r,i,o,u,a,f){var l=o*.5,c=u+1,h=a-u;n[w]=h,b[w++]=f;for(var p=0;p<2;++p)for(var d=0;d<2;++d){var v=r+p*l,m=i+d*l,g=s(e,t,c,a,v,m,v+l,m+l);if(g===c)continue;if(g-c>=Math.max(.9*h,32)){var y=a+u>>>1;E(v,m,l,c,y,f+1),c=y}E(v,m,l,c,g,f+1),c=g}}var a=e.length>>>1;if(a<1)return[];var f=Infinity,l=Infinity,c=-Infinity,h=-Infinity;for(var p=0;p<a;++p){var d=e[2*p],v=e[2*p+1];f=Math.min(f,d),c=Math.max(c,d),l=Math.min(l,v),h=Math.max(h,v),t[p]=p}f===c&&(c+=1+Math.abs(c)),l===h&&(h+=1+Math.abs(c));var m=1/(c-f),g=1/(h-l),y=Math.max(c-f,h-l);u=u||[0,0,0,0],u[0]=f,u[1]=l,u[2]=c,u[3]=h;var b=r.mallocInt32(a),w=0;E(f,l,y,0,a,0),i(b,e,t,n,a);var S=[],x=0,T=a;for(var w=a-1;w>=0;--w){e[2*w]=(e[2*w]-f)*m,e[2*w+1]=(e[2*w+1]-l)*g;var N=b[w];if(N===x)continue;S.push(new o(y*Math.pow(.5,N),w+1,T-(w+1))),T=w+1,x=N}return S.push(new o(y*Math.pow(.5,N+1),0,T)),r.free(b),S}var r=e("typedarray-pool"),i=e("./lib/sort");t.exports=u},{"./lib/sort":147,"typedarray-pool":237}],149:[function(e,t,n){"use strict";function f(e,t,n,r,i,s){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.weightBuffer=r,this.shader=i,this.pickShader=s,this.scales=[],this.size=12,this.borderSize=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.bounds=[Infinity,Infinity,-Infinity,-Infinity],this.pickOffset=0,this.points=null,this.xCoords=null}function c(e,t){var n=e.gl,s=i(n),o=i(n),u=i(n),l=r(n,a.pointVertex,a.pointFragment),c=r(n,a.pickVertex,a.pickFragment),h=new f(e,s,o,u,l,c);return h.update(t),e.addObject(h),h}var r=e("gl-shader"),i=e("gl-buffer"),s=e("binary-search-bounds"),o=e("snap-points-2d"),u=e("typedarray-pool"),a=e("./lib/shader");t.exports=c;var l=f.prototype;l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.xCoords&&u.free(this.xCoords),this.plot.removeObject(this)},l.update=function(e){function t(t,n){return t in e?e[t]:n}e=e||{},this.size=t("size",12),this.color=t("color",[1,0,0,1]).slice(),this.borderSize=t("borderSize",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.xCoords&&u.free(this.xCoords);var n=e.positions,r=u.mallocFloat32(n.length),i=u.mallocInt32(n.length>>>1);r.set(n);var s=u.mallocFloat32(n.length);this.points=n,this.scales=o(r,i,s,this.bounds),this.offsetBuffer.update(r),this.pickBuffer.update(i),this.weightBuffer.update(s);var a=u.mallocFloat32(n.length>>>1);for(var f=0,l=0;f<n.length;f+=2,++l)a[l]=r[f];u.free(i),u.free(r),u.free(s),this.xCoords=a,this.pointCount=n.length>>>1,this.pickOffset=0},l.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=this.plot,i=this.pickShader,o=this.scales,u=this.offsetBuffer,a=this.pickBuffer,f=this.bounds,l=this.size,c=this.borderSize,h=r.gl,p=r.pickPixelRatio,d=r.viewBox,v=r.dataBox;if(this.pointCount===0)return n;var m=f[2]-f[0],g=f[3]-f[1],y=v[2]-v[0],b=v[3]-v[1],w=(d[2]-d[0])*p/r.pixelRatio,E=(d[3]-d[1])*p/r.pixelRatio,S=Math.min(y/w,b/E),x=S;e[0]=2*m/y,e[4]=2*g/b,e[6]=2*(f[0]-v[0])/y-1,e[7]=2*(f[1]-v[1])/b-1,this.pickOffset=n,t[0]=n&255,t[1]=n>>8&255,t[2]=n>>16&255,t[3]=n>>24&255,i.bind(),i.uniforms.matrix=e,i.uniforms.color=this.color,i.uniforms.borderColor=this.borderColor,i.uniforms.pointSize=p*(l+c),i.uniforms.pickOffset=t,this.borderSize===0?i.uniforms.centerFraction=2:i.uniforms.centerFraction=l/(l+c+1.25),u.bind(),i.attributes.position.pointer(),a.bind(),i.attributes.pickId.pointer(h.UNSIGNED_BYTE);var T=this.xCoords,N=(v[0]-f[0]-S*l*p)/m,C=(v[2]-f[0]+S*l*p)/m;for(var k=o.length-1;k>=0;--k){var L=o[k];if(L.pixelSize<S&&k>1)continue;var A=L.offset,O=L.count+A,M=s.ge(T,N,A,O-1),_=s.lt(T,C,M,O-1)+1;_>M&&h.drawArrays(h.POINTS,M,_-M)}return n+this.pointCount}}(),l.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot,n=this.shader,r=this.scales,i=this.offsetBuffer,o=this.bounds,u=this.size,a=this.borderSize,f=t.gl,l=t.pixelRatio,c=t.viewBox,h=t.dataBox;if(this.pointCount===0)return;var p=o[2]-o[0],d=o[3]-o[1],v=h[2]-h[0],m=h[3]-h[1],g=c[2]-c[0],y=c[3]-c[1],b=Math.min(v/g,m/y),w=b;e[0]=2*p/v,e[4]=2*d/m,e[6]=2*(o[0]-h[0])/v-1,e[7]=2*(o[1]-h[1])/m-1,n.bind(),n.uniforms.matrix=e,n.uniforms.color=this.color,n.uniforms.borderColor=this.borderColor,n.uniforms.pointSize=l*(u+a),n.uniforms.useWeight=1,this.borderSize===0?n.uniforms.centerFraction=2:n.uniforms.centerFraction=u/(u+a+1.25),i.bind(),n.attributes.position.pointer(),this.weightBuffer.bind(),n.attributes.weight.pointer();var E=this.xCoords,S=(h[0]-o[0]-b*u*l)/p,x=(h[2]-o[0]+b*u*l)/p,T=!0;for(var N=r.length-1;N>=0;--N){var C=r[N];if(C.pixelSize<b&&N>1)continue;var k=C.offset,L=C.count+k,A=s.ge(E,S,k,L-1),O=s.lt(E,x,A,L-1)+1;O>A&&f.drawArrays(f.POINTS,A,O-A),T&&(T=!1,n.uniforms.useWeight=0)}}}(),l.pick=function(e,t,n){var r=this.pickOffset,i=this.pointCount;if(n<r||n>=r+i)return null;var s=n-r,o=this.points;return{object:this,pointId:s,dataCoord:[o[2*s],o[2*s+1]]}}},{"./lib/shader":145,"binary-search-bounds":146,"gl-buffer":77,"gl-shader":156,"snap-points-2d":148,"typedarray-pool":237}],150:[function(e,t,n){"use strict";function s(e,t){var n=i[t];n||(n=i[t]={});if(e in n)return n[e];var s=r(e,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),o=r(e,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),u=[[Infinity,Infinity],[-Infinity,-Infinity]];for(var a=0;a<s.positions.length;++a){var f=s.positions[a];for(var l=0;l<2;++l)u[0][l]=Math.min(u[0][l],f[l]),u[1][l]=Math.max(u[1][l],f[l])}return n[e]=[o,s,u]}var r=e("vectorize-text");t.exports=s;var i={}},{"vectorize-text":239}],151:[function(e,t,n){function m(e,t){var n=r(e,t),i=n.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,n}var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",s="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",o="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",u="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",a="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:i,fragment:u,attributes:f},c={vertex:s,fragment:u,attributes:f},h={vertex:o,fragment:u,attributes:f},p={vertex:i,fragment:a,attributes:f},d={vertex:s,fragment:a,attributes:f},v={vertex:o,fragment:a,attributes:f};n.createPerspective=function(e){return m(e,l)},n.createOrtho=function(e){return m(e,c)},n.createProject=function(e){return m(e,h)},n.createPickPerspective=function(e){return m(e,p)},n.createPickOrtho=function(e){return m(e,d)},n.createPickProject=function(e){return m(e,v)}},{"gl-shader":156}],152:[function(e,t,n){"use strict";function l(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*s,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*s,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*s,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*s,e}function c(e,t,n,r){return l(r,r,n),l(r,r,t),l(r,r,e)}function h(e){var t=new Array(3);for(var n=0;n<3;++n)t[n]=Math.min(Math.max(e[n],-1e8),1e8);return t}function p(e,t){this.index=e,this.dataCoordinate=this.position=t}function d(e,t,n,r,i,s,o,u,a,f,l,c){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=s,this.glyphBuffer=o,this.idBuffer=u,this.vao=a,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=f,this.pickOrthoShader=l,this.pickProjectShader=c,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.dirty=!0}function T(e){return e[0]=e[1]=e[2]=0,e}function N(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function C(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function k(e){var t=x;for(var n=0;n<2;++n)for(var r=0;r<3;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}function L(e,t,n,r,i){var s=t.axesProject,u=t.gl,a=e.uniforms,l=n.model||f,h=n.view||f,p=n.projection||f,d=t.axesBounds,v=k(t
.clipBounds),x;t.axes?x=t.axes.lastCubeProps.axis:x=[1,1,1],m[0]=2/u.drawingBufferWidth,m[1]=2/u.drawingBufferHeight,e.bind(),a.view=h,a.projection=p,a.screenSize=m,a.highlightId=t.highlightId,a.highlightScale=t.highlightScale,a.clipBounds=v,a.pickGroup=t.pickId/255,a.pixelRatio=t.pixelRatio;for(var L=0;L<3;++L){if(!s[L])continue;if(t.projectOpacity[L]<1!==r)continue;a.scale=t.projectScale[L],a.opacity=t.projectOpacity[L];var A=E;for(var O=0;O<16;++O)A[O]=0;for(var O=0;O<4;++O)A[5*O]=1;A[5*L]=0,x[L]<0?A[12+L]=d[0][L]:A[12+L]=d[1][L],o(A,l,A),a.model=A;var M=(L+1)%3,_=(L+2)%3,D=T(g),P=T(y);D[M]=1,P[_]=1;var H=c(p,h,l,N(b,D)),B=c(p,h,l,N(w,P));if(Math.abs(H[1])>Math.abs(B[1])){var j=H;H=B,B=j,j=D,D=P,P=j;var F=M;M=_,_=F}H[0]<0&&(D[M]=-1),B[1]>0&&(P[_]=-1);var I=0,q=0;for(var O=0;O<4;++O)I+=Math.pow(l[4*M+O],2),q+=Math.pow(l[4*_+O],2);D[M]/=Math.sqrt(I),P[_]/=Math.sqrt(q),a.axes[0]=D,a.axes[1]=P,a.fragClipBounds[0]=C(S,v[0],L,-1e8),a.fragClipBounds[1]=C(S,v[1],L,1e8),t.vao.draw(u.TRIANGLES,t.vertexCount),t.lineWidth>0&&(u.lineWidth(t.lineWidth),t.vao.draw(u.LINES,t.lineVertexCount,t.vertexCount))}}function _(e,t,n,r,i,s){var o=n.gl;n.vao.bind();if(i===n.opacity<1||s){e.bind();var u=e.uniforms;u.model=r.model||f,u.view=r.view||f,u.projection=r.projection||f,m[0]=2/o.drawingBufferWidth,m[1]=2/o.drawingBufferHeight,u.screenSize=m,u.highlightId=n.highlightId,u.highlightScale=n.highlightScale,u.fragClipBounds=M,u.clipBounds=n.axes.bounds,u.opacity=n.opacity,u.pickGroup=n.pickId/255,u.pixelRatio=n.pixelRatio,n.vao.draw(o.TRIANGLES,n.vertexCount),n.lineWidth>0&&(o.lineWidth(n.lineWidth),n.vao.draw(o.LINES,n.lineVertexCount,n.vertexCount))}L(t,n,r,i,s),n.vao.unbind()}function D(e){var t=e.gl,n=u.createPerspective(t),s=u.createOrtho(t),o=u.createProject(t),a=u.createPickPerspective(t),f=u.createPickOrtho(t),l=u.createPickProject(t),c=r(t),h=r(t),p=r(t),v=r(t),m=i(t,[{buffer:c,size:3,type:t.FLOAT},{buffer:h,size:4,type:t.FLOAT},{buffer:p,size:2,type:t.FLOAT},{buffer:v,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),g=new d(t,n,s,o,c,h,p,v,m,a,f,l);return g.update(e),g}var r=e("gl-buffer"),i=e("gl-vao"),s=e("typedarray-pool"),o=e("gl-mat4/multiply"),u=e("./lib/shaders"),a=e("./lib/glyphs"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.exports=D;var v=d.prototype;v.pickSlots=1,v.setPickBase=function(e){this.pickId=e},v.isTransparent=function(){if(this.opacity<1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]<1)return!0;return!1},v.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]>=1)return!0;return!1};var m=[0,0],g=[0,0,0],y=[0,0,0],b=[0,0,0,1],w=[0,0,0,1],E=f.slice(),S=[0,0,0],x=[[0,0,0],[0,0,0]],A=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],M=[A,O];v.draw=function(e){var t=this.useOrtho?this.orthoShader:this.shader;_(t,this.projectShader,this,e,!1,!1)},v.drawTransparent=function(e){var t=this.useOrtho?this.orthoShader:this.shader;_(t,this.projectShader,this,e,!0,!1)},v.drawPick=function(e){var t=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;_(t,this.pickProjectShader,this,e,!1,!0)},v.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var n=this.points[t],r=this._selectResult;r.index=t;for(var i=0;i<3;++i)r.position[i]=r.dataCoordinate[i]=n[i];return r},v.highlight=function(e){if(!e)this.highlightId=[1,1,1,1];else{var t=e.index,n=t&255,r=t>>8&255,i=t>>16&255;this.highlightId=[n/255,r/255,i/255,0]}},v.update=function(e){e=e||{},"perspective"in e&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth);if("project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if("projectOpacity"in e)if(Array.isArray(e.projectOpacity))this.projectOpacity=e.projectOpacity.slice();else{var n=+e.projectOpacity;this.projectOpacity=[n,n,n]}"opacity"in e&&(this.opacity=e.opacity),this.dirty=!0;var r=e.position;if(!r)return;var i=e.font||"normal",o=e.alignment||[0,0],u=[Infinity,Infinity,Infinity],f=[-Infinity,-Infinity,-Infinity],l=e.glyph,c=e.color,h=e.size,p=e.angle,d=e.lineColor,v=0,m=0,g=0,y=r.length;e:for(var b=0;b<y;++b){var w=r[b];for(var E=0;E<3;++E)if(isNaN(w[E])||!isFinite(w[E]))continue e;var S;Array.isArray(l)?S=a(l[b],i):l?S=a(l,i):S=a("",i);var x=S[0],T=S[1],N=S[2];m+=x.cells.length*3,g+=T.edges.length*2}var C=m+g,k=s.mallocFloat(3*C),L=s.mallocFloat(4*C),A=s.mallocFloat(2*C),O=s.mallocUint32(C),M=[0,o[1]],_=0,D=m,P=[0,0,0,1],H=[0,0,0,1],B=Array.isArray(c)&&Array.isArray(c[0]),j=Array.isArray(d)&&Array.isArray(d[0]);t:for(var b=0;b<y;++b){var w=r[b];for(var E=0;E<3;++E){if(isNaN(w[E])||!isFinite(w[E])){v+=1;continue t}f[E]=Math.max(f[E],w[E]),u[E]=Math.min(u[E],w[E])}var S;Array.isArray(l)?S=a(l[b],i):l?S=a(l,i):S=a("",i);var x=S[0],T=S[1],N=S[2];if(Array.isArray(c)){var F;B?F=c[b]:F=c;if(F.length===3){for(var E=0;E<3;++E)P[E]=F[E];P[3]=1}else if(F.length===4)for(var E=0;E<4;++E)P[E]=F[E]}else P[0]=P[1]=P[2]=0,P[3]=1;if(Array.isArray(d)){var F;j?F=d[b]:F=d;if(F.length===3){for(var E=0;E<3;++E)H[E]=F[E];H[E]=1}else if(F.length===4)for(var E=0;E<4;++E)H[E]=F[E]}else H[0]=H[1]=H[2]=0,H[3]=1;var I=.5;Array.isArray(h)?I=+h[b]:h?I=+h:this.useOrtho&&(I=12);var q=0;Array.isArray(p)?q=+p[b]:p&&(q=+p);var R=Math.cos(q),U=Math.sin(q),w=r[b];for(var E=0;E<3;++E)f[E]=Math.max(f[E],w[E]),u[E]=Math.min(u[E],w[E]);o[0]<0?M[0]=o[0]*(1+N[1][0]):o[0]>0&&(M[0]=-o[0]*(1+N[0][0]));var z=x.cells,W=x.positions;for(var E=0;E<z.length;++E){var X=z[E];for(var V=0;V<3;++V){for(var $=0;$<3;++$)k[3*_+$]=w[$];for(var $=0;$<4;++$)L[4*_+$]=P[$];O[_]=v;var J=W[X[V]];A[2*_]=I*(R*J[0]-U*J[1]+M[0]),A[2*_+1]=I*(U*J[0]+R*J[1]+M[1]),_+=1}}var z=T.edges,W=T.positions;for(var E=0;E<z.length;++E){var X=z[E];for(var V=0;V<2;++V){for(var $=0;$<3;++$)k[3*D+$]=w[$];for(var $=0;$<4;++$)L[4*D+$]=H[$];O[D]=v;var J=W[X[V]];A[2*D]=I*(R*J[0]-U*J[1]+M[0]),A[2*D+1]=I*(U*J[0]+R*J[1]+M[1]),D+=1}}v+=1}this.vertexCount=m,this.lineVertexCount=g,this.pointBuffer.update(k),this.colorBuffer.update(L),this.glyphBuffer.update(A),this.idBuffer.update(new Uint32Array(O)),s.free(k),s.free(L),s.free(A),s.free(O),this.bounds=[u,f],this.points=r,this.pointCount=r.length},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":150,"./lib/shaders":151,"gl-buffer":77,"gl-mat4/multiply":98,"gl-vao":185,"typedarray-pool":237}],153:[function(e,t,n){"use strict";n.boxVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",n.boxFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],154:[function(e,t,n){"use strict";function o(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[Infinity,Infinity,-Infinity,-Infinity],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function a(e,t){var n=e.gl,u=i(n,[0,0,0,1,1,0,1,1]),a=r(n,s.boxVertex,s.boxFragment),f=new o(e,u,a);return f.update(t),e.addOverlay(f),f}var r=e("gl-shader"),i=e("gl-buffer"),s=e("./lib/shaders");t.exports=a;var u=o.prototype;u.draw=function(){if(!this.enabled)return;var e=this.plot,t=this.selectBox,n=this.borderWidth,r=this.innerFill,i=this.innerColor,s=this.outerFill,o=this.outerColor,u=this.borderColor,a=e.box,f=e.screenBox,l=e.dataBox,c=e.viewBox,h=e.pixelRatio,p=(t[0]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],d=(t[1]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1],v=(t[2]-l[0])*(c[2]-c[0])/(l[2]-l[0])+c[0],m=(t[3]-l[1])*(c[3]-c[1])/(l[3]-l[1])+c[1];p=Math.max(p,c[0]),d=Math.max(d,c[1]),v=Math.min(v,c[2]),m=Math.min(m,c[3]);if(v<p||m<d)return;a.bind();var g=f[2]-f[0],y=f[3]-f[1];this.outerFill&&(a.drawBox(0,0,g,d,o),a.drawBox(0,d,p,m,o),a.drawBox(0,m,g,y,o),a.drawBox(v,d,g,m,o)),this.innerFill&&a.drawBox(p,d,v,m,i);if(n>0){var b=n*h;a.drawBox(p-b,d-b,v+b,d+b,u),a.drawBox(p-b,m-b,v+b,m+b,u),a.drawBox(p-b,d-b,p+b,m+b,u),a.drawBox(v-b,d-b,v+b,m+b,u)}},u.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":153,"gl-buffer":77,"gl-shader":156}],155:[function(e,t,n){"use strict";function a(e,t,n,r,i){this.coord=[e,t],this.id=n,this.value=r,this.distance=i}function f(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){if(!r.gl)return;t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null}}function c(e,t){var n=r(e,t),s=i.mallocUint8(t[0]*t[1]*4);return new f(e,n,s)}t.exports=c;var r=e("gl-fbo"),i=e("typedarray-pool"),s=e("ndarray"),o=e("bit-twiddle").nextPow2,u=e("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(255>_inline_34_arg0_||255>_inline_34_arg1_||255>_inline_34_arg2_||255>_inline_34_arg3_){var _inline_34_l=_inline_34_arg4_-_inline_34_arg6_[0],_inline_34_a=_inline_34_arg5_-_inline_34_arg6_[1],_inline_34_f=_inline_34_l*_inline_34_l+_inline_34_a*_inline_34_a;_inline_34_f<this_closestD2&&(this_closestD2=_inline_34_f,this_closestX=_inline_34_arg6_[0],this_closestY=_inline_34_arg6_[1])}}",args:[{name:"_inline_34_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_34_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_34_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_34_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_34_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_34_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_34_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_34_a","_inline_34_f","_inline_34_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),l=f.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(!this.gl)return;this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){i.free(this.buffer);var r=this.buffer=i.mallocUint8(o(n*t*4));for(var s=0;s<n*t*4;++s)r[s]=255}return e}}),l.begin=function(){var e=this.gl,t=this.shape;if(!e)return;this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},l.end=function(){var e=this.gl;if(!e)return;e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1)},l.query=function(e,t,n){if(!this.gl)return null;var r=this.fbo.shape.slice();e|=0,t|=0,typeof n!="number"&&(n=1);var i=Math.min(Math.max(e-n,0),r[0])|0,o=Math.min(Math.max(e+n,0),r[0])|0,f=Math.min(Math.max(t-n,0),r[1])|0,l=Math.min(Math.max(t+n,0),r[1])|0;if(o<=i||l<=f)return null;var c=[o-i,l-f],h=s(this.buffer,[c[0],c[1],4],[4,r[0]*4,1],4*(i+r[0]*f)),p=u(h.hi(c[0],c[1],1),n,n),d=p[0],v=p[1];if(d<0||Math.pow(this.radius,2)<p[2])return null;var m=h.get(d,v,0),g=h.get(d,v,1),y=h.get(d,v,2),b=h.get(d,v,3);return new a(d+i|0,v+f|0,m,[g,y,b],Math.sqrt(p[2]))},l.dispose=function(){if(!this.gl)return;this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout)}},{"bit-twiddle":50,"cwise/lib/wrapper":71,"gl-fbo":82,ndarray:212,"typedarray-pool":237}],156:[function(e,t,n){"use strict";function f(e){this.gl=e,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function c(e,t){return e.name<t.name?-1:1}function h(e,t,n,r,i){var s=new f(e);return s.update(t,n,r,i),s}var r=e("./lib/create-uniforms"),i=e("./lib/create-attributes"),s=e("./lib/reflect"),o=e("./lib/shader-cache"),u=e("./lib/runtime-reflect"),a=e("./lib/GLError"),l=f.prototype;l.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},l.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},l.update=function(e,t,n,f){function L(){h.program=o.program(p,h._vref,h._fref,b,w);for(var e=0;e<n.length;++e)k[e]=p.getUniformLocation(h.program,n[e].name)}if(!t||arguments.length===1){var l=e;e=l.vertex,t=l.fragment,n=l.uniforms,f=l.attributes}var h=this,p=h.gl,d=h._vref;h._vref=o.shader(p,p.VERTEX_SHADER,e),d&&d.dispose(),h.vertShader=h._vref.shader;var v=this._fref;h._fref=o.shader(p,p.FRAGMENT_SHADER,t),v&&v.dispose(),h.fragShader=h._fref.shader;if(!n||!f){var m=p.createProgram();p.attachShader(m,h.fragShader),p.attachShader(m,h.vertShader),p.linkProgram(m);if(!p.getProgramParameter(m,p.LINK_STATUS)){var g=p.getProgramInfoLog(m);throw new a(g,"Error linking program:"+g)}n=n||u.uniforms(p,m),f=f||u.attributes(p,m),p.deleteProgram(m)}f=f.slice(),f.sort(c);var y=[],b=[],w=[];for(var E=0;E<f.length;++E){var S=f[E];if(S.type.indexOf("mat")>=0){var x=S.type.charAt(S.type.length-1)|0,T=new Array(x);for(var N=0;N<x;++N)T[N]=w.length,b.push(S.name+"["+N+"]"),typeof S.location=="number"?w.push(S.location+N):Array.isArray(S.location)&&S.location.length===x&&typeof S.location[N]=="number"?w.push(S.location[N]|0):w.push(-1);y.push({name:S.name,type:S.type,locations:T})}else y.push({name:S.name,type:S.type,locations:[w.length]}),b.push(S.name),typeof S.location=="number"?w.push(S.location|0):w.push(-1)}var C=0;for(var E=0;E<w.length;++E)if(w[E]<0){while(w.indexOf(C)>=0)C+=1;w[E]=C}var k=new Array(n.length);L(),h._relink=L,h.types={uniforms:s(n),attributes:s(f)},h.attributes=i(p,h,y,w),Object.defineProperty(h,"uniforms",r(p,h,n,k))},t.exports=h},{"./lib/GLError":157,"./lib/create-attributes":158,"./lib/create-uniforms":159,"./lib/reflect":160,"./lib/runtime-reflect":161,"./lib/shader-cache":162}],157:[function(e,t,n){function r(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,t.exports=r},{}],158:[function(e,t,n){"use strict";function i(e,t,n,r,i,s){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=i,this._constFunc=s}function o(e,t,n,r,s,o,u){var a=["gl","v"],f=[];for(var l=0;l<s;++l)a.push("x"+l),f.push("x"+l);a.push("if(x0.length===void 0){return gl.vertexAttrib"+s+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+s+"fv(v,x0)}");var c=Function.apply(null,a),h=new i(e,t,n,r,s,c);Object.defineProperty(o,u,{set:function(t){return e.disableVertexAttribArray(r[n]),c(e,r[n],t),t},get:function(){return h},enumerable:!0})}function u(e,t,n,r,i,s,u){var a=new Array(i),f=new Array(i);for(var l=0;l<i;++l)o(e,t,n[l],r,i,a,l),f[l]=a[l];Object.defineProperty(a,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<i;++t)f[t].location=e[t];else for(var t=0;t<i;++t)f[t].location=e+t;return e},get:function(){var e=new Array(i);for(var t=0;t<i;++t)e[t]=r[n[t]];return e},enumerable:!0}),a.pointer=function(t,s,o,u){t=t||e.FLOAT,s=!!s,o=o||i*i,u=u||0;for(var a=0;a<i;++a){var f=r[n[a]];e.vertexAttribPointer(f,i,t,s,o,u+a*i),e.enableVertexAttribArray(f)}};var c=new Array(i),h=e["vertexAttrib"+i+"fv"];Object.defineProperty(s,u,{set:function(t){for(var s=0;s<i;++s){var o=r[n[s]];e.disableVertexAttribArray(o);if(Array.isArray(t[0]))h.call(e,o,t[s]);else{for(var u=0;u<i;++u)c[u]=t[i*s+u];h.call(e,o,c)}}return t},get:function(){return a},enumerable:!0})}function a(e,t,n,i){var s={};for(var a=0,f=n.length;a<f;++a){var l=n[a],c=l.name,h=l.type,p=l.locations;switch(h){case"bool":case"int":case"float":o(e,t,p[0],i,1,s,c);break;default:if(h.indexOf("vec")>=0){var d=h.charCodeAt(h.length-1)-48;if(d<2||d>4)throw new r("","Invalid data type for attribute "+c+": "+h);o(e,t,p[0],i,d,s,c)}else{if(!(h.indexOf("mat")>=0))throw new r("","Unknown data type for attribute "+c+": "+h);var d=h.charCodeAt(h.length-1)-48;if(d<2||d>4)throw new r("","Invalid data type for attribute "+c+": "+h);u(e,t,p,i,d,s,c)}}}return s}t.exports=a;var r=e("./GLError"),s=i.prototype;s.pointer=function(t,n,r,i){var s=this,o=s._gl,u=s._locations[s._index];o.vertexAttribPointer(u,s._dimension,t||o.FLOAT,!!n,r||0,i||0),o.enableVertexAttribArray(u)},s.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(s,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=e|0,this._wrapper.program=null),e|0}})},{"./GLError":157}],159:[function(e,t,n){"use strict";function s(e){var t=new Function("y","return function(){return y}");return t(e)}function o(e,t){var n=new Array(e);for(var r=0;r<e;++r)n[r]=t;return n}function u(e,t,n,u){function a(n){var r=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}");return r(e,t,u)}function f(e,t,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var r=n.indexOf("vec");if(!(0<=r&&r<=1&&n.length===4+r)){if(n.indexOf("mat")===0&&n.length===4){var s=n.charCodeAt(n.length-1)-48;if(s<2||s>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+n);return"gl.uniformMatrix"+s+"fv(locations["+t+"],false,obj"+e+")"}throw new i("","Unknown uniform data type for "+name+": "+n)}var s=n.charCodeAt(n.length-1)-48;if(s<2||s>4)throw new i("","Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+s+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+s+"fv(locations["+t+"],obj"+e+")";default:throw new i("","Unrecognized data type for vector "+name+": "+n)}}}function l(e,t){if(typeof t!="object")return[[e,t]];var n=[];for(var r in t){var i=t[r],s=e;parseInt(r)+""===r?s+="["+r+"]":s+="."+r,typeof i=="object"?n.push.apply(n,l(s,i)):n.push([s,i])}return n}function c(t){var r=["return function updateProperty(obj){"],i=l("",t);for(var s=0;s<i.length;++s){var o=i[s],a=o[0],c=o[1];u[c]&&r.push(f(a,c,n[c].type))}r.push("return obj}");var h=new Function("gl","locations",r.join("\n"));return h(e,u)}function h(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new i("","Invalid data type");return e.charAt(0)==="b"?o(n,!1):o(n,0)}if(e.indexOf("mat")===0&&e.length===4){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+e);return o(n*n,0)}throw new i("","Unknown uniform data type for "+name+": "+e)}}function p(e,t,r){if(typeof r=="object"){var i=d(r);Object.defineProperty(e,t,{get:s(i),set:c(r),enumerable:!0,configurable:!1})}else u[r]?Object.defineProperty(e,t,{get:a(r),set:c(r),enumerable:!0,configurable:!1}):e[t]=h(n[r].type)}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)p(t,n,e[n])}else{t={};for(var r in e)p(t,r,e[r])}return t}var v=r(n,!0);return{get:s(d(v)),set:c(v),enumerable:!0,configurable:!0}}var r=e("./reflect"),i=e("./GLError");t.exports=u},{"./GLError":157,"./reflect":160}],160:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r=0;r<e.length;++r){var i=e[r].name,s=i.split("."),o=n;for(var u=0;u<s.length;++u){var a=s[u].split("[");if(a.length>1){a[0]in o||(o[a[0]]=[]),o=o[a[0]];for(var f=1;f<a.length;++f){var l=parseInt(a[f]);f<a.length-1||u<s.length-1?(l in o||(f<a.length-1?o[l]=[]:o[l]={}),o=o[l]):t?o[l]=r:o[l]=e[r].type}}else u<s.length-1?(a[0]in o||(o[a[0]]={}),o=o[a[0]]):t?o[a[0]]=r:o[a[0]]=e[r].type}}return n}t.exports=r},{}],161:[function(e,t,n){"use strict";function s(e,t){if(!i){var n=Object.keys(r);i={};for(var s=0;s<n.length;++s){var o=n[s];i[e[o]]=r[o]}}return i[t]}function o(e,t){var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[];for(var i=0;i<n;++i){var o=e.getActiveUniform(t,i);if(o){var u=s(e,o.type);if(o.size>1)for(var a=0;a<o.size;++a)r.push({name:o.name.replace("[0]","["+a+"]"),type:u});else r.push({name:o.name,type:u})}}return r}function u(e,t){var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=[];for(var i=0;i<n;++i){var o=e.getActiveAttrib(t,i);o&&r.push({name:o.name,type:s(e,o.type)})}return r}n.uniforms=o,n.attributes=u;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null},{}],162:[function(e,t,n){"use strict";function a(e,t,n,r,i,s,o){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=s,this.programs=[],this.cache=o}function f(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function c(e,t,n){var s=e.createShader(t);e.shaderSource(s,n),e.compileShader(s);if(!e.getShaderParameter(s,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(s);try{var u=i(o,n,t)}catch(a){throw console.warn("Failed to format compiler error: "+a),new r(o,"Error compiling shader:\n"+o)}throw new r(o,u.short,u.long)}return s}function h(e,t,n,i,s){var o=e.createProgram();e.attachShader(o,t),e.attachShader(o,n);for(var u=0;u<i.length;++u)e.bindAttribLocation(o,s[u],i[u]);e.linkProgram(o);if(!e.getProgramParameter(o,e.LINK_STATUS)){var a=e.getProgramInfoLog(o);throw new r(a,"Error linking program: "+a)}return o}function p(e){var t=o.get(e);return t||(t=new f(e),o.set(e,t)),t}function d(e,t,n){return p(e).getShaderReference(t,n)}function v(e,t,n,r,i){return p(e).getProgram(t,n,r,i)}n.shader=d,n.program=v;var r=e("./GLError"),i=e("gl-format-compiler-error"),s=typeof WeakMap=="undefined"?e("weakmap-shim"):WeakMap,o=new s,u=0;a.prototype.dispose=function(){if(--this.count===0){var e=this.cache,t=e.gl,n=this.programs;for(var r=0,i=n.length;r<i;++r){var s=e.programs[n[r]];s&&(delete e.programs[r],t.deleteProgram(s))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var l=f.prototype;l.getShaderReference=function(e,t){var n=this.gl,r=this.shaders[e===n.FRAGMENT_SHADER|0],i=r[t];if(!i||!n.isShader(i.shader)){var s=c(n,e,t);i=r[t]=new a(u++,t,e,s,[],1,this)}else i.count+=1;return i},l.getProgram=function(e,t,n,r){var i=[e.id,t.id,n.join(":"),r.join(":")].join("@"),s=this.programs[i];if(!s||!this.gl.isProgram(s))this.programs[i]=s=h(this.gl,e.shader,t.shader,n,r),e.programs.push(i),t.programs.push(i);return s}},{"./GLError":157,"gl-format-compiler-error":163,"weakmap-shim":173}],163:[function(e,t,n){function u(e,t,n){"use strict";var u=s(t)||"of unknown name (see npm glsl-shader-name)",a="unknown type";n!==undefined&&(a=n===i.FRAGMENT_SHADER?"fragment":"vertex");var f=r("Error compiling %s shader %s:\n",a,u),l=r("%s%s",f,e),c=e.split("\n"),h={};for(var p=0;p<c.length;p++){var d=c[p];if(d==="")continue;var v=parseInt(d.split(":")[2]);if(isNaN(v))throw new Error(r("Could not parse error: %s",d));h[v]=d}var m=o(t).split("\n");for(var p=0;p<m.length;p++){if(!h[p+3]&&!h[p+2]&&!h[p+1])continue;var g=m[p];f+=g+"\n";if(h[p+1]){var y=h[p+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),f+=r("^^^ %s\n\n",y)}}return{"long":f.trim(),"short":l.trim()}}var r=e("sprintf-js").sprintf,i=e("gl-constants/lookup"),s=e("glsl-shader-name"),o=e("add-line-numbers");t.exports=u},{"add-line-numbers":164,"gl-constants/lookup":167,"glsl-shader-name":168,"sprintf-js":170}],164:[function(e,t,n){function i(e,t,n){t=typeof t=="number"?t:1,n=n||": ";var i=e.split(/\r?\n/),s=String(i.length+t-1).length;return i.map(function(e,i){var o=i+t,u=String(o).length,a=r(o,s-u);return a+n+e}).join("\n")}var r=e("pad-left");t.exports=i},{"pad-left":165}],165:[function(e,t,n){"use strict";var r=e("repeat-string");t.exports=function(t,n,i){return i=typeof i!="undefined"?i+"":" ",r(i,n)+t}},{"repeat-string":213}],166:[function(e,t,n){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],167:[function(e,t,n){var r=e("./1.0/numbers");t.exports=function(t){return r[t]}},{"./1.0/numbers":166}],168:[function(e,t,n){function s(e){var t=Array.isArray(e)?e:r(e);for(var n=0;n<t.length;n++){var s=t[n];if(s.type!=="preprocessor")continue;var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!o)continue;if(!o[2])continue;var u=o[1],a=o[2];return(u?i(a):a).trim()}}var r=e("glsl-tokenizer"),i=e("atob-lite");t.exports=s},{"atob-lite":169,"glsl-tokenizer":193}],169:[function(e,t,n){t.exports=function(t){return atob(t)}},{}],170:[function(t,n,r){(function(t){function i(){var e=arguments[0],t=i.cache;if(!t[e]||!t.hasOwnProperty(e))t[e]=i.parse(e);return i.format.call(null,t[e],arguments)}function o(e){return Object.prototype.toString.call(e).slice
(8,-1).toLowerCase()}function u(e,t){return Array(t+1).join(e)}var n={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};i.format=function(e,t){var r=1,s=e.length,a="",f,l=[],c,h,p,d,v,m,g=!0,y="";for(c=0;c<s;c++){a=o(e[c]);if(a==="string")l[l.length]=e[c];else if(a==="array"){p=e[c];if(p[2]){f=t[r];for(h=0;h<p[2].length;h++){if(!f.hasOwnProperty(p[2][h]))throw new Error(i("[sprintf] property '%s' does not exist",p[2][h]));f=f[p[2][h]]}}else p[1]?f=t[p[1]]:f=t[r++];o(f)=="function"&&(f=f());if(n.not_string.test(p[8])&&n.not_json.test(p[8])&&o(f)!="number"&&isNaN(f))throw new TypeError(i("[sprintf] expecting number but found %s",o(f)));n.number.test(p[8])&&(g=f>=0);switch(p[8]){case"b":f=f.toString(2);break;case"c":f=String.fromCharCode(f);break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,p[6]?parseInt(p[6]):0);break;case"e":f=p[7]?f.toExponential(p[7]):f.toExponential();break;case"f":f=p[7]?parseFloat(f).toFixed(p[7]):parseFloat(f);break;case"g":f=p[7]?parseFloat(f).toPrecision(p[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=String(f))&&p[7]?f.substring(0,p[7]):f;break;case"u":f>>>=0;break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}n.json.test(p[8])?l[l.length]=f:(n.number.test(p[8])&&(!g||p[3])?(y=g?"+":"-",f=f.toString().replace(n.sign,"")):y="",v=p[4]?p[4]==="0"?"0":p[4].charAt(1):" ",m=p[6]-(y+f).length,d=p[6]?m>0?u(v,m):"":"",l[l.length]=p[5]?y+f+d:v==="0"?y+d+f:d+y+f)}}return l.join("")},i.cache={},i.parse=function(e){var t=e,r=[],i=[],s=0;while(t){if((r=n.text.exec(t))!==null)i[i.length]=r[0];else if((r=n.modulo.exec(t))!==null)i[i.length]="%";else{if((r=n.placeholder.exec(t))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){s|=1;var o=[],u=r[2],a=[];if((a=n.key.exec(u))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=a[1];while((u=u.substring(a[0].length))!=="")if((a=n.key_access.exec(u))!==null)o[o.length]=a[1];else{if((a=n.index_access.exec(u))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=a[1]}r[2]=o}else s|=2;if(s===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=r}t=t.substring(r[0].length)}return i};var s=function(e,t,n){return n=(t||[]).slice(0),n.splice(0,0,e),i.apply(null,n)};typeof r!="undefined"?(r.sprintf=i,r.vsprintf=s):(t.sprintf=i,t.vsprintf=s,typeof e=="function"&&e.amd&&e(function(){return{sprintf:i,vsprintf:s}}))})(typeof window=="undefined"?this:window)},{}],171:[function(e,t,n){function i(){var e={};return function(t){if(typeof t=="object"&&t!==null||typeof t=="function"){var n=t.valueOf(e);return n&&n.identity===e?n:r(t,e)}throw new Error("Weakmap-shim: Key must be object")}}var r=e("./hidden-store.js");t.exports=i},{"./hidden-store.js":172}],172:[function(e,t,n){function r(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}t.exports=r},{}],173:[function(e,t,n){function i(){var e=r();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){e(t).value=n},has:function(t){return"value"in e(t)},"delete":function(t){return delete e(t).value}}}var r=e("./create-store.js");t.exports=i},{"./create-store.js":171}],174:[function(e,t,n){"use strict";function r(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[Infinity,Infinity]}function s(e,t){var n=new r(e);return n.update(t),e.addOverlay(n),n}t.exports=s;var i=r.prototype;i.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[Infinity,Infinity]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,i=this.plot,s=i.line,o=i.dataBox,u=i.viewBox;s.bind();if(o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var a=u[0]+(r[0]-o[0])/(o[2]-o[0])*(u[2]-u[0]),f=u[1]+(r[1]-o[1])/(o[3]-o[1])*(u[3]-u[1]);e[0]&&s.drawLine(a,f,u[0],f,t[0],n[0]),e[1]&&s.drawLine(a,f,a,u[1],t[1],n[1]),e[2]&&s.drawLine(a,f,u[2],f,t[2],n[2]),e[3]&&s.drawLine(a,f,a,u[3],t[3],n[3])}},i.dispose=function(){this.plot.removeOverlay(this)}},{}],175:[function(e,t,n){var r=e("gl-shader"),i="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n",s="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = texture2D(colormap, vec2(value, value));\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",o="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",u="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n";n.createShader=function(e){var t=r(e,i,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createPickShader=function(e){var t=r(e,i,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},n.createContourShader=function(e){var t=r(e,o,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},n.createPickContourShader=function(e){var t=r(e,o,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},{"gl-shader":156}],176:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],177:[function(e,t,n){"use strict";function l(e){if(e in s)return s[e];var t=[];for(var n=0;n<e;++n)t.push("out",n,"s=0.5*(inp",n,"l-inp",n,"r);");var o=["array"],a=["junk"];for(var n=0;n<e;++n){o.push("array"),a.push("out"+n+"s");var f=r(e);f[n]=-1,o.push({array:0,offset:f.slice()}),f[n]=1,o.push({array:0,offset:f.slice()}),a.push("inp"+n+"l","inp"+n+"r")}return s[e]=i({args:o,pre:u,post:u,body:{body:t.join(""),args:a.map(function(e){return{name:e,lvalue:e.indexOf("out")===0,rvalue:e.indexOf("inp")===0,count:e!=="junk"|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+e})}function c(e){function u(t){var n=r-t.length,s=[],o=[],u=[];for(var a=0;a<r;++a)t.indexOf(a+1)>=0?u.push("0"):t.indexOf(-(a+1))>=0?u.push("s["+a+"]-1"):(u.push("-1"),s.push("1"),o.push("s["+a+"]-2"));var f=".lo("+s.join()+").hi("+o.join()+")";s.length===0&&(f="");if(n>0){i.push("if(1");for(var a=0;a<r;++a){if(t.indexOf(a+1)>=0||t.indexOf(-(a+1))>=0)continue;i.push("&&s[",a,"]>2")}i.push("){grad",n,"(src.pick(",u.join(),")",f);for(var a=0;a<r;++a){if(t.indexOf(a+1)>=0||t.indexOf(-(a+1))>=0)continue;i.push(",dst.pick(",u.join(),",",a,")",f)}i.push(");")}for(var a=0;a<t.length;++a){var l=Math.abs(t[a])-1,c="dst.pick("+u.join()+","+l+")"+f;switch(e[l]){case"clamp":var h=u.slice(),p=u.slice();t[a]<0?h[l]="s["+l+"]-2":p[l]="1",n===0?i.push("if(s[",l,"]>1){dst.set(",u.join(),",",l,",0.5*(src.get(",h.join(),")-src.get(",p.join(),")))}else{dst.set(",u.join(),",",l,",0)};"):i.push("if(s[",l,"]>1){diff(",c,",src.pick(",h.join(),")",f,",src.pick(",p.join(),")",f,");}else{zero(",c,");};");break;case"mirror":n===0?i.push("dst.set(",u.join(),",",l,",0);"):i.push("zero(",c,");");break;case"wrap":var d=u.slice(),v=u.slice();t[a]<0?(d[l]="s["+l+"]-2",v[l]="0"):(d[l]="s["+l+"]-1",v[l]="1"),n===0?i.push("if(s[",l,"]>2){dst.set(",u.join(),",",l,",0.5*(src.get(",d.join(),")-src.get(",v.join(),")))}else{dst.set(",u.join(),",",l,",0)};"):i.push("if(s[",l,"]>2){diff(",c,",src.pick(",d.join(),")",f,",src.pick(",v.join(),")",f,");}else{zero(",c,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}n>0&&i.push("};")}var t=e.join(),n=o[t];if(n)return n;var r=e.length,i=["function gradient(dst,src){var s=src.shape.slice();"];for(var c=0;c<1<<r;++c){var h=[];for(var p=0;p<r;++p)c&1<<p&&h.push(p+1);for(var d=0;d<1<<h.length;++d){var v=h.slice();for(var p=0;p<h.length;++p)d&1<<p&&(v[p]=-v[p]);u(v)}}i.push("return dst;};return gradient");var m=["diff","zero"],g=[a,f];for(var c=1;c<=r;++c)m.push("grad"+c),g.push(l(c));m.push(i.join(""));var y=Function.apply(void 0,m),n=y.apply(void 0,g);return s[t]=n,n}function h(e,t,n){if(Array.isArray(n)){if(n.length!==t.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else typeof n=="string"?n=r(t.dimension,n):n=r(t.dimension,"clamp");if(e.dimension!==t.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(e.shape[t.dimension]!==t.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var i=0;i<t.dimension;++i)if(e.shape[i]!==t.shape[i])throw new Error("ndarray-gradient: shape mismatch");if(t.size===0)return e;if(t.dimension<=0)return e.set(0),e;var s=c(n);return s(e,t)}t.exports=h;var r=e("dup"),i=e("cwise-compiler"),s={},o={},u={body:"",args:[],thisVars:[],localVars:[]},a=i({args:["array","array","array"],pre:u,post:u,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),f=i({args:["array"],pre:u,post:u,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":68,dup:74}],178:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(t,n){var s=[],o=t,u=1;while(o instanceof Array)s.push(o.length),u*=o.length,o=o[0];return s.length===0?r():(n||(n=r(new Float64Array(u),s)),i(n,t),n)}},{"./doConvert.js":179,ndarray:212}],179:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":68}],180:[function(e,t,n){"use strict";function C(e,t,n,r,i){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=i}function L(e){var t=l([a({colormap:e,nshades:k,format:"rgba"}).map(function(e){return[e[0],e[1],e[2],255*e[3]]})]);return f.divseq(t,255),t}function A(e,t,n,r,i,s,o,a,f,l,h,p,d,v){this.gl=e,this.shape=t,this.bounds=n,this.intensityBounds=[],this._shader=r,this._pickShader=i,this._coordinateBuffer=s,this._vao=o,this._colorMap=a,this._contourShader=f,this._contourPickShader=l,this._contourBuffer=h,this._contourVAO=p,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new C([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=d,this._dynamicVAO=v,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(u.mallocFloat(1024),[0,0]),c(u.mallocFloat(1024),[0,0]),c(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.dirty=!0}function D(e,t){var n,r,i,s=t.axes&&t.axes.lastCubeProps.axis||M,o=t.showSurface,u=t.showContour;for(n=0;n<3;++n){o=o||t.surfaceProject[n];for(r=0;r<3;++r)u=u||t.contourProject[n][r]}for(n=0;n<3;++n){var a=_.projections[n];for(r=0;r<16;++r)a[r]=0;for(r=0;r<4;++r)a[5*r]=1;a[5*n]=0,a[12+n]=t.axesBounds[+(s[n]>0)][n],p(a,e.model,a);var f=_.clipBounds[n];for(i=0;i<2;++i)for(r=0;r<3;++r)f[i][r]=e.clipBounds[i][r];f[0][n]=-1e8,f[1][n]=1e8}return _.showSurface=o,_.showContour=u,_}function j(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=P;r.model=e.model||x,r.view=e.view||x,r.projection=e.projection||x,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.contourColor=this.contourColor[0],r.inverseModel=d(r.inverseModel,r.model);for(var i=0;i<2;++i){var s=r.clipBounds[i];for(var o=0;o<3;++o)s[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8)}r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=B;var u=H;p(u,r.view,r.model),p(u,r.projection,u),d(u,u);for(i=0;i<3;++i)r.eyePosition[i]=u[12+i]/u[15];var a=u[15];for(i=0;i<3;++i)a+=this.lightPosition[i]*u[4*i+3];for(i=0;i<3;++i){var f=u[12+i];for(o=0;o<3;++o)f+=u[4*o+i]*this.lightPosition[o];r.lightPosition[i]=f/a}var l=D(r,this);if(l.showSurface&&t===this.opacity<1){this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount);for(i=0;i<3;++i){if(!this.surfaceProject[i]||!this.vertexCount)continue;this._shader.uniforms.model=l.projections[i],this._shader.uniforms.clipBounds=l.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount)}this._vao.unbind()}if(l.showContour&&!t){var c=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,c.bind(),c.uniforms=r;var h=this._contourVAO;h.bind();for(i=0;i<3;++i){c.uniforms.permutation=N[i],n.lineWidth(this.contourWidth[i]);for(o=0;o<this.contourLevels[i].length;++o){if(!this._contourCounts[i][o])continue;if(o===this.highlightLevel[i])c.uniforms.contourColor=this.highlightColor[i],c.uniforms.contourTint=this.highlightTint[i];else if(o===0||o-1===this.highlightLevel[i])c.uniforms.contourColor=this.contourColor[i],c.uniforms.contourTint=this.contourTint[i];c.uniforms.height=this.contourLevels[i][o],h.draw(n.LINES,this._contourCounts[i][o],this._contourOffsets[i][o])}}for(i=0;i<3;++i){c.uniforms.model=l.projections[i],c.uniforms.clipBounds=l.clipBounds[i];for(o=0;o<3;++o){if(!this.contourProject[i][o])continue;c.uniforms.permutation=N[o],n.lineWidth(this.contourWidth[o]);for(var v=0;v<this.contourLevels[o].length;++v){if(v===this.highlightLevel[o])c.uniforms.contourColor=this.highlightColor[o],c.uniforms.contourTint=this.highlightTint[o];else if(v===0||v-1===this.highlightLevel[o])c.uniforms.contourColor=this.contourColor[o],c.uniforms.contourTint=this.contourTint[o];c.uniforms.height=this.contourLevels[o][v],h.draw(n.LINES,this._contourCounts[o][v],this._contourOffsets[o][v])}}}h=this._dynamicVAO,h.bind();for(i=0;i<3;++i){if(this._dynamicCounts[i]===0)continue;c.uniforms.model=r.model,c.uniforms.clipBounds=r.clipBounds,c.uniforms.permutation=N[i],n.lineWidth(this.dynamicWidth[i]),c.uniforms.contourColor=this.dynamicColor[i],c.uniforms.contourTint=this.dynamicTint[i],c.uniforms.height=this.dynamicLevel[i],h.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]);for(o=0;o<3;++o){if(!this.contourProject[o][i])continue;c.uniforms.model=l.projections[o],c.uniforms.clipBounds=l.clipBounds[o],h.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i])}}h.unbind()}}function I(e,t){var n=t.shape.slice(),r=e.shape.slice();f.assign(e.lo(1,1).hi(n[0],n[1]),t),f.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),f.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),f.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),f.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))}function q(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function R(e){return Array.isArray(e)?e.length===3?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function U(e){if(Array.isArray(e)){if(Array.isArray(e))return[R(e[0]),R(e[1]),R(e[2])];var t=R(e);return[t.slice(),t.slice(),t.slice()]}}function z(e){var t=e.gl,n=y(t),r=w(t),u=b(t),a=E(t),f=i(t),l=s(t,[{buffer:f,size:4,stride:S,offset:0},{buffer:f,size:3,stride:S,offset:16},{buffer:f,size:3,stride:S,offset:28}]),c=i(t),h=s(t,[{buffer:c,size:4,stride:20,offset:0},{buffer:c,size:1,stride:20,offset:16}]),p=i(t),d=s(t,[{buffer:p,size:2,type:t.FLOAT}]),v=o(t,1,k,t.RGBA,t.UNSIGNED_BYTE);v.minFilter=t.LINEAR,v.magFilter=t.LINEAR;var m=new A(t,[0,0],[[0,0,0],[0,0,0]],n,r,f,l,v,u,a,c,h,p,d),g={levels:[[],[],[]]};for(var x in e)g[x]=e[x];return g.colormap=g.colormap||"jet",m.update(g),m}t.exports=z;var r=e("bit-twiddle"),i=e("gl-buffer"),s=e("gl-vao"),o=e("gl-texture2d"),u=e("typedarray-pool"),a=e("colormap"),f=e("ndarray-ops"),l=e("ndarray-pack"),c=e("ndarray"),h=e("surface-nets"),p=e("gl-mat4/multiply"),d=e("gl-mat4/invert"),v=e("binary-search-bounds"),m=e("ndarray-gradient"),g=e("./lib/shaders"),y=g.createShader,b=g.createContourShader,w=g.createPickShader,E=g.createPickContourShader,S=40,x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],N=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var e=0;e<3;++e){var t=N[e],n=(e+1)%3,r=(e+2)%3;t[n+0]=1,t[r+3]=1,t[e+6]=1}})();var k=265,O=A.prototype;O.isTransparent=function(){return this.opacity<1},O.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this._contourCounts[e].length>0||this._dynamicCounts[e]>0)return!0;return!1},O.pickSlots=1,O.setPickBase=function(e){this.pickId=e};var M=[0,0,0],_={showSurface:!1,showContour:!1,projections:[x.slice(),x.slice(),x.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},P={model:x,view:x,projection:x,inverseModel:x.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-0.0001,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1},H=x.slice(),B=[1,0,0,0,1,0,0,0,1];O.draw=function(e){return j.call(this,e,!1)},O.drawTransparent=function(e){return j.call(this,e,!0)};var F={model:x,view:x,projection:x,inverseModel:x,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};O.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=F;n.model=e.model||x,n.view=e.view||x,n.projection=e.projection||x,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.permutation=B;for(var r=0;r<2;++r){var i=n.clipBounds[r];for(var s=0;s<3;++s)i[s]=Math.min(Math.max(this.clipBounds[r][s],-1e8),1e8)}var o=D(n,this);if(o.showSurface){this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount);for(r=0;r<3;++r){if(!this.surfaceProject[r])continue;this._pickShader.uniforms.model=o.projections[r],this._pickShader.uniforms.clipBounds=o.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount)}this._vao.unbind()}if(o.showContour){var u=this._contourPickShader;u.bind(),u.uniforms=n;var a=this._contourVAO;a.bind();for(s=0;s<3;++s){t.lineWidth(this.contourWidth[s]),u.uniforms.permutation=N[s];for(r=0;r<this.contourLevels[s].length;++r)this._contourCounts[s][r]&&(u.uniforms.height=this.contourLevels[s][r],a.draw(t.LINES,this._contourCounts[s][r],this._contourOffsets[s][r]))}for(r=0;r<3;++r){u.uniforms.model=o.projections[r],u.uniforms.clipBounds=o.clipBounds[r];for(s=0;s<3;++s){if(!this.contourProject[r][s])continue;u.uniforms.permutation=N[s],t.lineWidth(this.contourWidth[s]);for(var f=0;f<this.contourLevels[s].length;++f)this._contourCounts[s][f]&&(u.uniforms.height=this.contourLevels[s][f],a.draw(t.LINES,this._contourCounts[s][f],this._contourOffsets[s][f]))}}a.unbind()}},O.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(r),s=r-i,o=t[1]*(e.value[1]+(e.value[2]&15)/16)/255,u=Math.floor(o),a=o-u;i+=1,u+=1;var f=n.position;f[0]=f[1]=f[2]=0;for(var l=0;l<2;++l){var c=l?s:1-s;for(var h=0;h<2;++h){var p=h?a:1-a,d=i+l,m=u+h,g=c*p;for(var y=0;y<3;++y)f[y]+=this._field[y].get(d,m)*g}}var b=this._pickResult.level;for(var w=0;w<3;++w){b[w]=v.le(this.contourLevels[w],f[w]);if(b[w]<0)this.contourLevels[w].length>0&&(b[w]=0);else if(b[w]<this.contourLevels[w].length-1){var E=this.contourLevels[w][b[w]],S=this.contourLevels[w][b[w]+1];Math.abs(E-f[w])>Math.abs(S-f[w])&&(b[w]+=1)}}n.index[0]=s<.5?i:i+1,n.index[1]=a<.5?u:u+1,n.uv[0]=r/t[0],n.uv[1]=o/t[1];for(y=0;y<3;++y)n.dataCoordinate[y]=this._field[y].get(n.index[0],n.index[1]);return n},O.update=function(e){e=e||{},this.dirty=!0,"contourWidth"in e&&(this.contourWidth=q(e.contourWidth,Number)),"showContour"in e&&(this.showContour=q(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=q(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=U(e.contourColor)),"contourProject"in e&&(this.contourProject=q(e.contourProject,function(e){return q(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=U(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=q(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=q(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"colorBounds"in e&&(this.colorBounds=e.colorBounds);var t=e.field||e.coords&&e.coords[2]||null,n=!1;t||(this._field[2].shape[0]||this._field[2].shape[2]?t=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):t=this._field[2].hi(0,0));if("field"in e||"coords"in e){var i=(t.shape[0]+2)*(t.shape[1]+2);i>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(r.nextPow2(i))),this._field[2]=c(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),I(this._field[2],t),this.shape=t.shape.slice();var s=this.shape;for(var o=0;o<2;++o)this._field[2].size>this._field[o].data.length&&(u.freeFloat(this._field[o].data),this._field[o].data=u.mallocFloat(this._field[2].size)),this._field[o]=c(this._field[o].data,[s[0]+2,s[1]+2]);if(e.coords){var a=e.coords;if(!Array.isArray(a)||a.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(o=0;o<2;++o){var f=a[o];for(g=0;g<2;++g)if(f.shape[g]!==s[g])throw new Error("gl-surface: coords have incorrect shape");I(this._field[o],f)}}else if(e.ticks){var l=e.ticks;if(!Array.isArray(l)||l.length!==2)throw new Error("gl-surface: invalid ticks");for(o=0;o<2;++o){var p=l[o];if(Array.isArray(p)||p.length)p=c(p);if(p.shape[0]!==s[o])throw new Error("gl-surface: invalid tick length");var d=c(p.data,s);d.stride[o]=p.stride[0],d.stride[o^1]=0,I(this._field[o],d)}}else{for(o=0;o<2;++o){var v=[0,0];v[o]=1,this._field[o]=c(this._field[o].data,[s[0]+2,s[1]+2],v,0)}this._field[0].set(0,0,0);for(var g=0;g<s[0];++g)this._field[0].set(g+1,0,g);this._field[0].set(s[0]+1,0,s[0]-1),this._field[1].set(0,0,0);for(g=0;g<s[1];++g)this._field[1].set(0,g+1,g);this._field[1].set(0,s[1]+1,s[1]-1)}var y=this._field,b=c(u.mallocFloat(y[2].size*3*2),[3,s[0]+2,s[1]+2,2]);for(o=0;o<3;++o)m(b.pick(o),y[o],"mirror");var w=c(u.mallocFloat(y[2].size*3),[s[0]+2,s[1]+2,3]);for(o=0;o<s[0]+2;++o)for(g=0;g<s[1]+2;++g){var E=b.get(0,o,g,0),S=b.get(0,o,g,1),x=b.get(1,o,g,0),N=b.get(1,o,g,1),C=b.get(2,o,g,0),k=b.get(2,o,g,1),A=x*k-N*C,O=C*S-k*E,M=E*N-S*x,_=Math.sqrt(A*A+O*O+M*M);_<1e-8?(_=Math.max(Math.abs(A),Math.abs(O),Math.abs(M)),_<1e-8?(M=1,O=A=0,_=1):_=1/_):_=1/Math.sqrt(_),w.set(o,g,0,A*_),w.set(o,g,1,O*_),w.set(o,g,2,M*_)}u.free(b.data);var D=[Infinity,Infinity,Infinity],P=[-Infinity,-Infinity,-Infinity],H=Infinity,B=-Infinity,j=(s[0]-1)*(s[1]-1)*6,F=u.mallocFloat(r.nextPow2(10*j)),R=0,z=0;for(o=0;o<s[0]-1;++o)e:for(g=0;g<s[1]-1;++g){for(var W=0;W<2;++W)for(var X=0;X<2;++X)for(var V=0;V<3;++V){var $=this._field[V].get(1+o+W,1+g+X);if(isNaN($)||!isFinite($))continue e}for(V=0;V<6;++V){var J=o+T[V][0],K=g+T[V][1],Q=this._field[0].get(J+1,K+1),G=this._field[1].get(J+1,K+1);$=this._field[2].get(J+1,K+1);var Y=$;A=w.get(J+1,K+1,0),O=w.get(J+1,K+1,1),M=w.get(J+1,K+1,2),e.intensity&&(Y=e.intensity.get(J,K)),F[R++]=J,F[R++]=K,F[R++]=Q,F[R++]=G,F[R++]=$,F[R++]=0,F[R++]=Y,F[R++]=A,F[R++]=O,F[R++]=M,D[0]=Math.min(D[0],Q),D[1]=Math.min(D[1],G),D[2]=Math.min(D[2],$),H=Math.min(H,Y),P[0]=Math.max(P[0],Q),P[1]=Math.max(P[1],G),P[2]=Math.max(P[2],$),B=Math.max(B,Y),z+=1}}e.intensityBounds&&(H=+e.intensityBounds[0],B=+e.intensityBounds[1]);for(o=6;o<R;o+=10)F[o]=(F[o]-H)/(B-H);this._vertexCount=z,this._coordinateBuffer.update(F.subarray(0,R)),u.freeFloat(F),u.free(w.data),this.bounds=[D,P],this.intensity=e.intensity||this._field[2];if(this.intensityBounds[0]!==H||this.intensityBounds[1]!==B)n=!0;this.intensityBounds=[H,B]}if("levels"in e){var Z=e.levels;Array.isArray(Z[0])?Z=Z.slice():Z=[[],[],Z];for(o=0;o<3;++o)Z[o]=Z[o].slice(),Z.sort(function(e,t){return e-t});t:for(o=0;o<3;++o){if(Z[o].length!==this.contourLevels[o].length){n=!0;break}for(g=0;g<Z[o].length;++g)if(Z[o][g]!==this.contourLevels[o][g]){n=!0;break t}}this.contourLevels=Z}if(n){y=this._field,s=this.shape;var et=[];for(var tt=0;tt<3;++tt){Z=this.contourLevels[tt];var nt=[],rt=[],it=[0,0,0];for(o=0;o<Z.length;++o){var st=h(this._field[tt],Z[o]);nt.push(et.length/5|0),z=0;n:for(g=0;g<st.cells.length;++g){var ot=st.cells[g];for(V=0;V<2;++V){var ut=st.positions[ot[V]],at=ut[0],ft=Math.floor(at)|0,lt=at-ft,ct=ut[1],ht=Math.floor(ct)|0,pt=ct-ht,dt=!1;r:for(var vt=0;vt<3;++vt){it[vt]=0;var mt=(tt+vt+1)%3;for(W=0;W<2;++W){var gt=W?lt:1-lt;J=Math.min(Math.max(ft+W,0),s[0])|0;for(X=0;X<2;++X){var yt=X?pt:1-pt;K=Math.min(Math.max(ht+X,0),s[1])|0,vt<2?$=this._field[mt].get(J,K):$=(this.intensity.get(J,K)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite($)||isNaN($)){dt=!0;break r}var bt=gt*yt;it[vt]+=bt*$}}}if(!!dt){if(V>0){for(var wt=0;wt<5;++wt)et.pop();z-=1}continue n}et.push(it[0],it[1],ut[0],ut[1],it[2]),z+=1}}rt.push(z)}this._contourOffsets[tt]=nt,this._contourCounts[tt]=rt}var Et=u.mallocFloat(et.length);for(o=0;o<et.length;++o)Et[o]=et[o];this._contourBuffer.update(Et),u.freeFloat(Et)}e.colormap&&this._colorMap.setPixels(L(e.colormap))},O.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)u.freeFloat(this._field[e].data)},O.highlight=function(e){if(!e){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(var t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;var n;this.snapToData?n=e.dataCoordinate:n=e.position;if(!(!!this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||!!this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||!!this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]))return;var r=0,i=this.shape,s=u.mallocFloat(12*i[0]*i[1]);for(var o=0;o<3;++o){if(!this.enableDynamic[o]){this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;continue}this.dynamicLevel[o]=n[o];var a=(o+1)%3,f=(o+2)%3,l=this._field[o],c=this._field[a],p=this._field[f],d=this.intensity,v=h(l,n[o]),m=v.cells,g=v.positions;this._dynamicOffsets[o]=r;for(t=0;t<m.length;++t){var y=m[t];for(var b=0;b<2;++b){var w=g[y[b]],E=+w[0],S=E|0,x=Math.min(S+1,i[0])|0,T=E-S,N=1-T,C=+w[1],k=C|0,L=Math.min(k+1,i[1])|0,A=C-k,O=1-A,M=N*O,_=N*A,D=T*O,P=T*A,H=M*c.get(S,k)+_*c.get(S,L)+D*c.get
(x,k)+P*c.get(x,L),B=M*p.get(S,k)+_*p.get(S,L)+D*p.get(x,k)+P*p.get(x,L);if(isNaN(H)||isNaN(B)){b&&(r-=1);break}s[2*r+0]=H,s[2*r+1]=B,r+=1}}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}this._dynamicBuffer.update(s.subarray(0,2*r)),u.freeFloat(s)}},{"./lib/shaders":175,"binary-search-bounds":176,"bit-twiddle":50,colormap:59,"gl-buffer":77,"gl-mat4/invert":96,"gl-mat4/multiply":98,"gl-texture2d":181,"gl-vao":185,ndarray:212,"ndarray-gradient":177,"ndarray-ops":211,"ndarray-pack":178,"surface-nets":231,"typedarray-pool":237}],181:[function(e,t,n){"use strict";function f(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],u=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],a=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function c(e,t,n){var r=e.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function h(e,t,n,r,i,s){this.gl=e,this.handle=t,this.format=i,this.type=s,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,u=[this._wrapS,this._wrapT];Object.defineProperties(u,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=u;var a=[this._shape[0],this._shape[1]];Object.defineProperties(a,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=a}function d(e,t){return e.length===3?t[2]===1&&t[1]===e[0]*e[2]&&t[0]===e[2]:t[0]===1&&t[1]===e[0]}function v(e,t,n,o,u,a,f,c){var h=c.dtype,p=c.shape.slice();if(p.length<2||p.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=0,m=0,g=d(p,c.stride.slice());h==="float32"?v=e.FLOAT:h==="float64"?(v=e.FLOAT,g=!1,h="float32"):h==="uint8"?v=e.UNSIGNED_BYTE:(v=e.UNSIGNED_BYTE,g=!1,h="uint8");var y=1;if(p.length===2)m=e.LUMINANCE,p=[p[0],p[1],1],c=r(c.data,p,[c.stride[0],c.stride[1],1],c.offset);else{if(p.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(p[2]===1)m=e.ALPHA;else if(p[2]===2)m=e.LUMINANCE_ALPHA;else if(p[2]===3)m=e.RGB;else{if(p[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");m=e.RGBA}y=p[2]}(m===e.LUMINANCE||m===e.ALPHA)&&(u===e.LUMINANCE||u===e.ALPHA)&&(m=u);if(m!==u)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var b=c.size,w=f.indexOf(o)<0;w&&f.push(o);if(v===a&&g)c.offset===0&&c.data.length===b?w?e.texImage2D(e.TEXTURE_2D,o,u,p[0],p[1],0,u,a,c.data):e.texSubImage2D(e.TEXTURE_2D,o,t,n,p[0],p[1],u,a,c.data):w?e.texImage2D(e.TEXTURE_2D,o,u,p[0],p[1],0,u,a,c.data.subarray(c.offset,c.offset+b)):e.texSubImage2D(e.TEXTURE_2D,o,t,n,p[0],p[1],u,a,c.data.subarray(c.offset,c.offset+b));else{var E;a===e.FLOAT?E=s.mallocFloat32(b):E=s.mallocUint8(b);var S=r(E,p,[p[2],p[2]*p[0],1]);v===e.FLOAT&&a===e.UNSIGNED_BYTE?l(S,c):i.assign(S,c),w?e.texImage2D(e.TEXTURE_2D,o,u,p[0],p[1],0,u,a,E.subarray(0,b)):e.texSubImage2D(e.TEXTURE_2D,o,t,n,p[0],p[1],u,a,E.subarray(0,b)),a===e.FLOAT?s.freeFloat32(E):s.freeUint8(E)}}function m(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function g(e,t,n,r,i){var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>s||n<0||n>s)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=m(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,i,null),new h(e,o,t,n,r,i)}function y(e,t,n,r){var i=m(e);return e.texImage2D(e.TEXTURE_2D,0,n,n,r,t),new h(e,i,t.width|0,t.height|0,n,r)}function b(e,t){var n=t.dtype,o=t.shape.slice(),u=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>u||o[1]<0||o[1]>u)throw new Error("gl-texture2d: Invalid texture size");var a=d(o,t.stride.slice()),f=0;n==="float32"?f=e.FLOAT:n==="float64"?(f=e.FLOAT,a=!1,n="float32"):n==="uint8"?f=e.UNSIGNED_BYTE:(f=e.UNSIGNED_BYTE,a=!1,n="uint8");var c=0;if(o.length===2)c=e.LUMINANCE,o=[o[0],o[1],1],t=r(t.data,o,[t.stride[0],t.stride[1],1],t.offset);else{if(o.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(o[2]===1)c=e.ALPHA;else if(o[2]===2)c=e.LUMINANCE_ALPHA;else if(o[2]===3)c=e.RGB;else{if(o[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");c=e.RGBA}}f===e.FLOAT&&!e.getExtension("OES_texture_float")&&(f=e.UNSIGNED_BYTE,a=!1);var p,v,g=t.size;if(!a){var y=[o[2],o[2]*o[0],1];v=s.malloc(g,n);var b=r(v,o,y,0);n!=="float32"&&n!=="float64"||f!==e.UNSIGNED_BYTE?i.assign(b,t):l(b,t),p=v.subarray(0,g)}else t.offset===0&&t.data.length===g?p=t.data:p=t.data.subarray(t.offset,t.offset+g);var w=m(e);return e.texImage2D(e.TEXTURE_2D,0,c,o[0],o[1],0,c,f,p),a||s.free(v),new h(e,w,o[0],o[1],c,f)}function w(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");o||f(e);if(typeof arguments[1]=="number")return g(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(e,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var t=arguments[1];if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof ImageData)return y(e,t,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return b(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var r=e("ndarray"),i=e("ndarray-ops"),s=e("typedarray-pool");t.exports=w;var o=null,u=null,a=null,l=function(e,t){i.muls(e,t,255)},p=h.prototype;Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST));if(u.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;this.type===t.FLOAT&&o.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST));if(u.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;this._anisoSamples=Math.max(e,1)|0;if(t!==this._anisoSamples){var n=gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){this.bind();if(a.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){this.bind();if(a.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){Array.isArray(e)||(e=[e,e]);if(e.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(a.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(!Array.isArray(e))e=[e|0,e|0];else if(e.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return c(this,e[0]|0,e[1]|0),[e[0]|0,e[1]|0]}},width:{get:function(){return this._shape[0]},set:function(e){return e|=0,c(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,c(this,this._shape[0],e),e}}}),p.bind=function(e){var t=this.gl;return e!==undefined&&t.activeTexture(t.TEXTURE0+(e|0)),t.bindTexture(t.TEXTURE_2D,this.handle),e!==undefined?e|0:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);var e=Math.min(this._shape[0],this._shape[1]);for(var t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},p.setPixels=function(e,t,n,r){var i=this.gl;this.bind(),Array.isArray(t)?(r=n,n=t[1]|0,t=t[0]|0):(t=t||0,n=n||0),r=r||0;if(e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLVideoElement){var s=this._mipLevels.indexOf(r)<0;s?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,e),this._mipLevels.push(r)):i.texSubImage2D(i.TEXTURE_2D,r,t,n,this.format,this.type,e)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>r||n+e.shape[0]>this._shape[0]>>>r||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");v(i,t,n,r,this.format,this.type,this._mipLevels,e)}}},{ndarray:212,"ndarray-ops":211,"typedarray-pool":237}],182:[function(e,t,n){"use strict";function r(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=e.getParameter(e.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var s=n[i];if(s.buffer){var o=s.buffer,u=s.size||4,a=s.type||e.FLOAT,f=!!s.normalized,l=s.stride||0,c=s.offset||0;o.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,u,a,f,l,c)}else{if(typeof s=="number")e.vertexAttrib1f(i,s);else if(s.length===1)e.vertexAttrib1f(i,s[0]);else if(s.length===2)e.vertexAttrib2f(i,s[0],s[1]);else if(s.length===3)e.vertexAttrib3f(i,s[0],s[1],s[2]);else{if(s.length!==4)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,s[0],s[1],s[2],s[3])}e.disableVertexAttribArray(i)}}for(;i<r;++i)e.disableVertexAttribArray(i)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var i=0;i<r;++i)e.disableVertexAttribArray(i)}}t.exports=r},{}],183:[function(e,t,n){"use strict";function i(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}function s(e){return new i(e)}var r=e("./do-bind.js");i.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},i.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=s},{"./do-bind.js":182}],184:[function(e,t,n){"use strict";function i(e,t,n,r,i,s){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=i,this.d=s}function s(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}function o(e,t){return new s(e,t,t.createVertexArrayOES())}var r=e("./do-bind.js");i.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},s.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},s.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},s.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},s.prototype.update=function(e,t,n){this.bind(),r(this.gl,t,e),this.unbind(),this._attribs.length=0;if(e)for(var s=0;s<e.length;++s){var o=e[s];typeof o=="number"?this._attribs.push(new i(s,1,o)):Array.isArray(o)&&this._attribs.push(new i(s,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},s.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)},t.exports=o},{"./do-bind.js":182}],185:[function(e,t,n){"use strict";function s(e,t,n,s){var o=e.getExtension("OES_vertex_array_object"),u;return o?u=r(e,o):u=i(e),u.update(t,n,s),u}var r=e("./lib/vao-native.js"),i=e("./lib/vao-emulated.js");t.exports=s},{"./lib/vao-emulated.js":183,"./lib/vao-native.js":184}],186:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}t.exports=r},{}],187:[function(e,t,n){function x(e){function I(e){e.length&&k.push({type:S[x],data:e,position:_,line:O,column:M})}function q(e){t=0,H+=e,B=H.length;var r;while(T=H[t],t<B){r=t;switch(x){case l:t=V();break;case c:t=X();break;case h:t=W();break;case p:t=$();break;case d:t=Q();break;case E:t=K();break;case v:t=G();break;case f:t=Y();break;case b:t=z();break;case a:t=U()}if(r!==t)switch(H[r]){case"\n":M=0,++O;break;default:++M}}return n+=t,H=H.slice(t),k}function R(e){return C.length&&I(C.join("")),x=w,I("(eof)"),k}function U(){return C=C.length?[]:C,N==="/"&&T==="*"?(_=n+t-1,x=l,N=T,t+1):N==="/"&&T==="/"?(_=n+t-1,x=c,N=T,t+1):T==="#"?(x=h,_=n+t,t):/\s/.test(T)?(x=b,_=n+t,t):(D=/\d/.test(T),P=/[^\w_]/.test(T),_=n+t,x=D?d:P?p:f,t)}function z(){return/[^\s]/g.test(T)?(I(C.join("")),x=a,t):(C.push(T),N=T,t+1)}function W(){return T==="\n"&&N!=="\\"?(I(C.join("")),x=a,t):(C.push(T),N=T,t+1)}function X(){return W()}function V(){return T==="/"&&N==="*"?(C.push(T),I(C.join("")),x=a,t+1):(C.push(T),N=T,t+1)}function $(){if(N==="."&&/\d/.test(T))return x=v,t;if(N==="/"&&T==="*")return x=l,t;if(N==="/"&&T==="/")return x=c,t;if(T==="."&&C.length){while(J(C));return x=v,t}if(T===";"||T===")"||T==="("){if(C.length)while(J(C));return I(T),x=a,t+1}var e=C.length===2&&T!=="=";if(/[\w_\d\s]/.test(T)||e){while(J(C));return x=a,t}return C.push(T),N=T,t+1}function J(e){var t=0,n,r;do{n=i.indexOf(e.slice(0,e.length+t).join("")),r=i[n];if(n===-1){if(t-- +e.length>0)continue;r=e.slice(0,1).join("")}return I(r),_+=r.length,C=C.slice(r.length),C.length}while(1)}function K(){return/[^a-fA-F0-9]/.test(T)?(I(C.join("")),x=a,t):(C.push(T),N=T,t+1)}function Q(){return T==="."?(C.push(T),x=v,N=T,t+1):/[eE]/.test(T)?(C.push(T),x=v,N=T,t+1):T==="x"&&C.length===1&&C[0]==="0"?(x=E,C.push(T),N=T,t+1):/[^\d]/.test(T)?(I(C.join("")),x=a,t):(C.push(T),N=T,t+1)}function G(){return T==="f"&&(C.push(T),N=T,t+=1),/[eE]/.test(T)?(C.push(T),N=T,t+1):T==="-"&&/[eE]/.test(N)?(C.push(T),N=T,t+1):/[^\d]/.test(T)?(I(C.join("")),x=a,t):(C.push(T),N=T,t+1)}function Y(){if(/[^\d\w_]/.test(T)){var e=C.join("");return F.indexOf(e)>-1?x=y:j.indexOf(e)>-1?x=g:x=m,I(C.join("")),x=a,t}return C.push(T),N=T,t+1}var t=0,n=0,x=a,T,N,C=[],k=[],L=0,A=0,O=1,M=0,_=0,D=!1,P=!1,H="",B;e=e||{};var j=s,F=r;return e.version==="300 es"&&(j=u,F=o),function(e){return k=[],e!==null?q(e):R()}}t.exports=x;var r=e("./lib/literals"),i=e("./lib/operators"),s=e("./lib/builtins"),o=e("./lib/literals-300es"),u=e("./lib/builtins-300es"),a=999,f=9999,l=0,c=1,h=2,p=3,d=4,v=5,m=6,g=7,y=8,b=9,w=10,E=11,S=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":189,"./lib/builtins-300es":188,"./lib/literals":191,"./lib/literals-300es":190,"./lib/operators":192}],188:[function(e,t,n){var r=e("./builtins");r=r.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)}),t.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":189}],189:[function(e,t,n){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],190:[function(e,t,n){var r=e("./literals");t.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":191}],191:[function(e,t,n){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],192:[function(e,t,n){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],193:[function(e,t,n){function i(e,t){var n=r(t),i=[];return i=i.concat(n(e)),i=i.concat(n(null)),i}var r=e("./index");t.exports=i},{"./index":187}],194:[function(e,t,n){"use strict";function s(e,t){return e-t}function o(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function u(e,t,n){this.vertices=e,this.cell=t,this.index=n}function a(e,t){return i(e.vertices,t.vertices)}function f(e){var t=["function orient(){var tuple=this.tuple;return test("];for(var n=0;n<=e;++n)n>0&&t.push(","),t.push("tuple[",n,"]");t.push(")}return orient");var i=new Function("test",t.join("")),s=r[e+1];return s||(s=r),i(s)}function c(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var r=0;r<=e;++r)this.tuple[r]=this.vertices[r];var i=l[e];i||(i=l[e]=f(e)),this.orient=i}function p(e,t){var n=e.length;if(n===0)throw new Error("Must have at least d+1 points");var i=e[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var s=e.slice(0,i+1),u=r.apply(void 0,s);if(u===0)throw new Error("Input not in general position");var a=new Array(i+1);for(var f=0;f<=i;++f)a[f]=f;u<0&&(a[0]=1,a[1]=0);var l=new o(a,new Array(i+1),!1),h=l.adjacent,p=new Array(i+2);for(var f=0;f<=i;++f){var d=a.slice();for(var v=0;v<=i;++v)v===f&&(d[v]=-1);var m=d[0];d[0]=d[1],d[1]=m;var g=new o(d,new Array(i+1),!0);h[f]=g,p[f]=g}p[i+1]=l;for(var f=0;f<=i;++f){var d=h[f].vertices,y=h[f].adjacent;for(var v=0;v<=i;++v){var b=d[v];if(b<0){y[v]=l;continue}for(var w=0;w<=i;++w)h[w].vertices.indexOf(b)<0&&(y[v]=h[w])}}var E=new c(i,s,p),S=!!t;for(var f=i+1;f<n;++f)E.insert(e[f],S);return E.boundary()}t.exports=p;var r=e("robust-orientation"),i=e("simplicial-complex").compareCells;o.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var l=[],h=c.prototype;h.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,s=this.vertices,o=[e];e.lastVisited=-r;while(o.length>0){e=o.pop();var u=e.vertices,a=e.adjacent;for(var f=0;f<=n;++f){var l=a[f];if(!l.boundary||l.lastVisited<=-r)continue;var c=l.vertices;for(var h=0;h<=n;++h){var p=c[h];p<0?i[h]=t:i[h]=s[p]}var d=this.orient();if(d>0)return l;l.lastVisited=-r,d===0&&o.push(l)}}return null},h.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,s=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[o];e:while(!u.boundary){var a=u.vertices,f=u.adjacent;for(var l=0;l<=r;++l)s[l]=i[a[l]];u.lastVisited=n;for(var l=0;l<=r;++l){var c=f[l];if(c.lastVisited>=n)continue;var h=s[l];s[l]=e;var p=this.orient();s[l]=h;if(p<0){u=c;continue e}c.boundary?c.lastVisited=-n:c.lastVisited=n}return}return u},h.addPeaks=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,s=this.tuple,f=this.interior,l=this.simplices,c=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,f.push(t);var h=[];while(c.length>0){var t=c.pop(),p=t.vertices,d=t.adjacent,v=p.indexOf(n);if(v<0)continue;for(var m=0;m<=r;++m){if(m===v)continue;var g=d[m];if(!g.boundary||g.lastVisited>=n)continue;var y=g.vertices;if(g.lastVisited!==-n){var b=0;for(var w=0;w<=r;++w)y[w]<0?(b=w,s[w]=e):s[w]=i[y[w]];var E=this.orient();if(E>0){y[b]=n,g.boundary=!1,f.push(g),c.push(g),g.lastVisited=n;continue}g.lastVisited=-n}var S=g.adjacent,x=p.slice(),T=d.slice(),N=new o(x,T,!0);l.push(N);var C=S.indexOf(t);if(C<0)continue;S[C]=N,T[v]=g,x[m]=-1,T[m]=t,d[m]=N,N.flip();for(var w=0;w<=r;++w){var k=x[w];if(k<0||k===n)continue;var L=new Array(r-1),A=0;for(var O=0;O<=r;++O){var M=x[O];if(M<0||O===w)continue;L[A++]=M}h.push(new u(L,N,w))}}}h.sort(a);for(var m=0;m+1<h.length;m+=2){var _=h[m],D=h[m+1],P=_.index,H=D.index;if(P<0||H<0)continue;_.cell.adjacent[_.index]=D.cell,D.cell.adjacent[D.index]=_.cell}},h.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(!r)return;var i=this.dimension,s=this.tuple;for(var o=0;o<=i;++o){var u=r.vertices[o];u<0?s[o]=e:s[o]=n[u]}var a=this.orient(s);if(a<0)return;if(a===0){r=this.handleBoundaryDegeneracy(r,e);if(!r)return}this.addPeaks(e,r)},h.boundary=function(){var e=this.dimension,t=[],n=this.simplices,r=n.length;for(var i=0;i<r;++i){var s=n[i];if(s.boundary){var o=new Array(e),u=s.vertices,a=0,f=0;for(var l=0;l<=e;++l)u[l]>=0?o[a++]=u[l]:f=l&1;if(f===(e&1)){var c=o[0];o[0]=o[1],o[1]=c}t.push(o)}}return t}},{"robust-orientation":218,"simplicial-complex":197}],195:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],196:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r;var i=r.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.find=function(e){var t=e,n=this.roots;while(n[e]!==e)e=n[e];while(n[t]!==e){var r=n[t];n[t]=e,t=r}return e},i.link=function(e,t){var n=this.find(e),r=this.find(t);if(n===r)return;var i=this.ranks,s=this.roots,o=i[n],u=i[r];o<u?s[n]=r:u<o?s[r]=n:(s[r]=n,++i[n])}},{}],197:[function(e,t,n){"use strict";"use restrict";function s(e){var t=0,n=Math.max;for(var r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1}function o(e){var t=-1,n=Math.max;for(var r=0,i=e.length;r<i;++r){var s=e[r];for(var o=0,u=s.length;o<u;++o)t=n(t,s[o])}return t+1}function u(e){var t=new Array(e.length);for(var n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t}function a(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:var s=e[0]+e[1]-t[0]-t[1];if(s)return s;return i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],u=t[0]+t[1];s=o+e[2]-(u+t[2]);if(s)return s;var a=i(e[0],e[1]),f=i(t[0],t[1]),s=i(a,e[2])-i(f,t[2]);if(s)return s;return i(a+e[2],o)-i(f+t[2],u);default:var l=e.slice(0);l.sort();var c=t.slice(0);c.sort();for(var h=0;h<n;++h){r=l[h]-c[h];if(r)return r}return 0}}function f(e,t){return a(e[0],t[0])}function l(e,t){if(t){var n=e.length,r=new Array(n);for(var i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(f);for(var i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(a),e}function c(e){if(e.length===0)return[];var t=1,n=e.length;for(var r=1;r<n;++r){var i=e[r];if(a(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function h(e,t){var n=0,r=e.length-1,i=-1;while(n<=r){var s=n+r>>1,o=a(e[s],t);o<=0?(o===0&&(i=s),n=s+1):o>0&&(r=s-1)}return i}function p(e,t){var n=new Array(e.length);for(var i=0,s=n.length;i<s;++i)n[i]=[];var o=[];for(var i=0,u=t.length;i<u;++i){var f=t[i],l=f.length;for(var c=1,p=1<<l;c<p;++c){o.length=r.popCount(c);var d=0;for(var v=0;v<l;++v)c&1<<v&&(o[d++]=f[v]);var m=h(e,o);if(m<0)continue;for(;;){n[m++].push(i);if(m>=e.length||a(e[m],o)!==0)break}}}return n}function d(e,t){if(!t)return p(c(m(e,0)),e,0);var n=new Array(t);for(var r=0;r<t;++r)n[r]=[];for(var r=0,i=e.length;r<i;++r){var s=e[r];for(var o=0,u=s.length;o<u;++o)n[s[o]].push(r)}return n}function v(e){var t=[];for(var n=0,r=e.length;n<r;++n){var i=e[n],s=i.length|0;for(var o=1,u=1<<s;o<u;++o){var a=[];for(var f=0;f<s;++f)o>>>f&1&&a.push(i[f]);t.push(a)}}return l(t)}function m(e,t){if(t<0)return[];var n=[],i=(1<<t+1)-1;for(var s=0;s<e.length;++s){var o=e[s];for(var u=i;u<1<<o.length;u=r.nextCombination(u)){var a=new Array(t+1),f=0;for(var c=0;c<o.length;++c)u&1<<c&&(a[f++]=o[c]);n.push(a)}}return l(n)}function g(e){var t=[];for(var n=0,r=e.length;n<r;++n){var i=e[n];for(var s=0,o=i.length;s<o;++s){var u=new Array(i.length-1);for(var a=0,f=0;a<o;++a)a!==s&&(u[f++]=i[a]);t.push(u)}}return l(t)}function y(e,t){var n=new i(t);for(var r=0;r<e.length;++r){var s=e[r];for(var o=0;o<s.length;++o)for(var u=o+1;u<s.length;++u)n.link(s[o],s[u])}var a=[],f=n.ranks;for(var r=0;r<f.length;++r)f[r]=-1;for(var r=0;r<e.length;++r){var l=n.find(e[r][0]);f[l]<0?(f[l]=a.length,a.push([e[r].slice(0)])):a[f[l]].push(e[r].slice(0))}return a}function b(e){var t=c(l(m(e,0))),n=new i(t.length);for(var r=0;r<e.length;++r){var s=e[r];for(var o=0;o<s.length;++o){var u=h(t,[s[o]]);for(var a=o+1;a<s.length;++a)n.link(u,h(t,[s[a]]))}}var f=[],p=n.ranks;for(var r=0;r<p.length;++r)p[r]=-1;for(var r=0;r<e.length;++r){var d=n.find(h(t,[e[r][0]]));p[d]<0?(p[d]=f.length,f.push([e[r].slice(0)])):f[p[d]].push(e[r].slice(0))}return f}function w(e,t){return t?y(e,t):b(e)}var r=e("bit-twiddle"),i=e("union-find");n.dimension=s,n.countVertices=o,n.cloneCells=u,n.compareCells=a,n.normalize=l,n.unique=c,n.findCell=h,n.incidence=p,n.dual=d,n.explode=v,n.skeleton=m,n.boundary=g,n.connectedComponents=w},{"bit-twiddle":195,"union-find":196}],198:[function(e,t,n){"use strict";function r(e){var t=new Array(e);for(var n=0;n<e;++n)t[n]=n;return t}t.exports=r},{}],199:[function(e,t,n){t.exports=function(e){return e!=null&&!!(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}},{}],200:[function(e,t,n){"use strict";function i(e,t){function a(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function f(e,u){var f=r.x(u),l=r.y(u);"buttons"in u&&(e=u.buttons|0);if(e!==n||f!==i||l!==s||a(u))n=e|0,i=f||0,s=l||0,t(n,i,s,o)}function l(e){f(0,e)}function c(){if(n||i||s||o.shift||o.alt||o.meta||o.control)i=s=0,n=0,o.shift=o.alt=o.control=o.meta=!1,t(0,0,0,o)}function h(e){a(e)&&t(n,i,s,o)}function p(e){r.buttons(e)===0?f(0,e):f(n,e)}function d(e){f(n|r.buttons(e),e)}function v(e){f(n&~r.buttons(e),e)}function m(){if(u)return;u=!0,e.addEventListener("mousemove",p),e.addEventListener("mousedown",d),e.addEventListener("mouseup",v),e.addEventListener("mouseleave",l),e.addEventListener("mouseenter",l),e.addEventListener("mouseout",l),e.addEventListener("mouseover",l),e.addEventListener("blur",c),e.addEventListener("keyup",h),e.addEventListener("keydown",h),e.addEventListener("keypress",h),e!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h))}function g(){if(!u)return;u=!1,e.removeEventListener("mousemove",p),e.removeEventListener("mousedown",d),e.removeEventListener("mouseup",v),e.removeEventListener("mouseleave",l),e.removeEventListener
("mouseenter",l),e.removeEventListener("mouseout",l),e.removeEventListener("mouseover",l),e.removeEventListener("blur",c),e.removeEventListener("keyup",h),e.removeEventListener("keydown",h),e.removeEventListener("keypress",h),e!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h))}t||(t=e,e=window);var n=0,i=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},u=!1;m();var y={element:e};return Object.defineProperties(y,{enabled:{get:function(){return u},set:function(e){e?m():g},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),y}t.exports=i;var r=e("mouse-event")},{"mouse-event":201}],201:[function(e,t,n){"use strict";function r(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(t===2)return 4;if(t===3)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(t===1)return 4;if(t===2)return 2;if(t>=0)return 1<<t}}return 0}function i(e){return e.target||e.srcElement||window}function s(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var t=i(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0}function o(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var t=i(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}n.buttons=r,n.element=i,n.x=s,n.y=o},{}],202:[function(e,t,n){t.exports=function(t,n){n||(n=[0,""]),t=String(t);var r=parseFloat(t,10);return n[0]=r,n[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],203:[function(e,t,n){"use strict";function s(e,t){var n=r(getComputedStyle(e).getPropertyValue(t));return n[0]*u(n[1],e)}function o(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=s(n,"font-size")/128;return t.removeChild(n),r}function u(e,t){t=t||document.body,e=(e||"px").trim().toLowerCase();if(t===window||t===document)t=document.body;switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return s(t,"font-size");case"rem":return s(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}var r=e("parse-unit");t.exports=u;var i=96},{"parse-unit":202}],204:[function(e,t,n){"use strict";function i(e,t,n){typeof e=="function"&&(n=!!t,t=e,e=window);var i=r("ex",e),s=function(e){n&&e.preventDefault();var r=e.deltaX||0,s=e.deltaY||0,o=e.deltaZ||0,u=e.deltaMode,a=1;switch(u){case 1:a=i;break;case 2:a=window.innerHeight}r*=a,s*=a,o*=a;if(r||s||o)return t(r,s,o)};return e.addEventListener("wheel",s),s}var r=e("to-px");t.exports=i},{"to-px":203}],205:[function(e,t,n){"use strict";var r=e("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_4_arg1_=_inline_4_arg2_.apply(void 0,_inline_4_arg0_)}",args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});t.exports=function(e,t){return r(e,t),e}},{"cwise/lib/wrapper":71}],206:[function(e,t,n){"use strict";function o(e,t){switch(t.length){case 0:break;case 1:e[0]=1/t[0];break;case 4:r(e,t);break;case 9:i(e,t);break;case 16:s(e,t);break;default:throw new Error("currently supports matrices up to 4x4")}return e}t.exports=o;var r=e("gl-mat2/invert"),i=e("gl-mat3/invert"),s=e("gl-mat4/invert")},{"gl-mat2/invert":207,"gl-mat3/invert":89,"gl-mat4/invert":96}],207:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}t.exports=r},{}],208:[function(e,t,n){"use strict";function r(e,t){var n=Math.floor(t),r=t-n,i=0<=n&&n<e.shape[0],s=0<=n+1&&n+1<e.shape[0],o=i?+e.get(n):0,u=s?+e.get(n+1):0;return(1-r)*o+r*u}function i(e,t,n){var r=Math.floor(t),i=t-r,s=0<=r&&r<e.shape[0],o=0<=r+1&&r+1<e.shape[0],u=Math.floor(n),a=n-u,f=0<=u&&u<e.shape[1],l=0<=u+1&&u+1<e.shape[1],c=s&&f?e.get(r,u):0,h=s&&l?e.get(r,u+1):0,p=o&&f?e.get(r+1,u):0,d=o&&l?e.get(r+1,u+1):0;return(1-a)*((1-i)*c+i*p)+a*((1-i)*h+i*d)}function s(e,t,n,r){var i=Math.floor(t),s=t-i,o=0<=i&&i<e.shape[0],u=0<=i+1&&i+1<e.shape[0],a=Math.floor(n),f=n-a,l=0<=a&&a<e.shape[1],c=0<=a+1&&a+1<e.shape[1],h=Math.floor(r),p=r-h,d=0<=h&&h<e.shape[2],v=0<=h+1&&h+1<e.shape[2],m=o&&l&&d?e.get(i,a,h):0,g=o&&c&&d?e.get(i,a+1,h):0,y=u&&l&&d?e.get(i+1,a,h):0,b=u&&c&&d?e.get(i+1,a+1,h):0,w=o&&l&&v?e.get(i,a,h+1):0,E=o&&c&&v?e.get(i,a+1,h+1):0,S=u&&l&&v?e.get(i+1,a,h+1):0,x=u&&c&&v?e.get(i+1,a+1,h+1):0;return(1-p)*((1-f)*((1-s)*m+s*y)+f*((1-s)*g+s*b))+p*((1-f)*((1-s)*w+s*S)+f*((1-s)*E+s*x))}function o(e){var t=e.shape.length|0,n=new Array(t),r=new Array(t),i=new Array(t),s=new Array(t),o,u;for(o=0;o<t;++o)u=+arguments[o+1],n[o]=Math.floor(u),r[o]=u-n[o],i[o]=0<=n[o]&&n[o]<e.shape[o],s[o]=0<=n[o]+1&&n[o]+1<e.shape[o];var a=0,f,l,c;e:for(o=0;o<1<<t;++o){l=1,c=e.offset;for(f=0;f<t;++f)if(o&1<<f){if(!s[f])continue e;l*=r[f],c+=e.stride[f]*(n[f]+1)}else{if(!i[f])continue e;l*=1-r[f],c+=e.stride[f]*n[f]}a+=l*e.data[c]}return a}function u(e,t,n,u){switch(e.shape.length){case 0:return 0;case 1:return r(e,t);case 2:return i(e,t,n);case 3:return s(e,t,n,u);default:return o.apply(undefined,arguments)}}t.exports=u,t.exports.d1=r,t.exports.d2=i,t.exports.d3=s},{}],209:[function(e,t,n){"use strict";var r=e("ndarray-linear-interpolate"),i=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_18_arg4_)}",args:[{name:"_inline_18_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_18_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_18_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_18_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_18_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),s=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_22_arg2_(this_warped,_inline_22_arg0_),_inline_22_arg1_=_inline_22_arg3_(_inline_22_arg4_,this_warped[0])}",args:[{name:"_inline_22_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_22_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),o=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_25_arg2_(this_warped,_inline_25_arg0_),_inline_25_arg1_=_inline_25_arg3_(_inline_25_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_25_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_25_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_25_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_25_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_25_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),u=e("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_28_arg2_(this_warped,_inline_28_arg0_),_inline_28_arg1_=_inline_28_arg3_(_inline_28_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_28_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_28_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_28_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_28_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_28_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});t.exports=function(t,n,a){switch(n.shape.length){case 1:s(t,a,r.d1,n);break;case 2:o(t,a,r.d2,n);break;case 3:u(t,a,r.d3,n);break;default:i(t,a,r.bind(undefined,n),n.shape.length)}return t}},{"cwise/lib/wrapper":71,"ndarray-linear-interpolate":208}],210:[function(e,t,n){"use strict";function s(e,t,n){var s=t.dimension,o=i([],n);return r(e,t,function(e,t){for(var n=0;n<s;++n){e[n]=o[(s+1)*s+n];for(var r=0;r<s;++r)e[n]+=o[(s+1)*r+n]*t[r]}var i=o[(s+1)*(s+1)-1];for(var r=0;r<s;++r)i+=o[(s+1)*r+s]*t[r];var u=1/i;for(var n=0;n<s;++n)e[n]*=u;return e}),e}var r=e("ndarray-warp"),i=e("gl-matrix-invert");t.exports=s},{"gl-matrix-invert":206,"ndarray-warp":209}],211:[function(e,t,n){"use strict";function s(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var n=e.args[t];t===0?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){return r({args:e.args,pre:s(e.pre),body:s(e.body),post:s(e.proc),funcName:e.funcName})}function u(e){var t=[];for(var n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(o(e))}var r=e("cwise-compiler"),i={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var e in a){var t=a[e];n[e]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}})();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var e in f){var t=f[e];n[e]=u({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=u({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var e in l){var t=l[e];n[e]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}})();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var e=0;e<c.length;++e){var t=c[e];n[t]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=u({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var e=0;e<h.length;++e){var t=h[e];n[t]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}})();var p=["atan2","pow"];(function(){for(var e=0;e<p.length;++e){var t=p[e];n[t+"op"]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}})(),n.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=u({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=u({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=u({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":68}],212:[function(e,t,n){function o(e,t){return e[0]-t[0]}function u(){var e=this.stride,t=new Array(e.length),n;for(n=0;n<t.length;++n)t[n]=[Math.abs(e[n]),n];t.sort(o);var r=new Array(t.length);for(n=0;n<r.length;++n)r[n]=t[n][1];return r}function a(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i=e==="generic";if(t===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=new Function(s);return o()}if(t===0){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=new Function("TrivialArray",s);return o(l[e][0])}var s=["'use strict'"],a=r(t),f=a.map(function(e){return"i"+e}),c="this.offset+"+a.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=a.map(function(e){return"b"+e}).join(","),p=a.map(function(e){return"c"+e}).join(",");s.push("function "+n+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),t===1?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),t<4?(s.push("function "+n+"_order(){"),t===2?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+f.join(",")+",v){"),i?s.push("return this.data.set("+c+",v)}"):s.push("return this.data["+c+"]=v}"),s.push("proto.get=function "+n+"_get("+f.join(",")+"){"),i?s.push("return this.data.get("+c+")}"):s.push("return this.data["+c+"]}"),s.push("proto.index=function "+n+"_index(",f.join(),"){return "+c+"}"),s.push("proto.hi=function "+n+"_hi("+f.join(",")+"){return new "+n+"(this.data,"+a.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+a.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=a.map(function(e){return"a"+e+"=this.shape["+e+"]"}),v=a.map(function(e){return"c"+e+"=this.stride["+e+"]"});s.push("proto.lo=function "+n+"_lo("+f.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+v.join(","));for(var m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");s.push("return new "+n+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"c"+e}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+f.join(",")+"){var "+a.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+a.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");s.push("return new "+n+"(this.data,"+a.map(function(e){return"a"+e}).join(",")+","+a.map(function(e){return"b"+e}).join(",")+",c)}");var g=new Array(t),y=new Array(t);for(var m=0;m<t;++m)g[m]="a[i"+m+"]",y[m]="b[i"+m+"]";s.push("proto.transpose=function "+n+"_transpose("+f+"){"+f.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+f+"){var a=[],b=[],c=this.offset");for(var m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(e){return"shape["+e+"]"}).join(",")+","+a.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",s.join("\n"));return o(l[e],u)}function f(e){if(i(e))return"buffer";if(s)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function c(e,t,n,r){if(e===undefined){var i=l.array[0];return i([])}typeof e=="number"&&(e=[e]),t===undefined&&(t=[e.length]);var s=t.length;if(n===undefined){n=new Array(s);for(var o=s-1,u=1;o>=0;--o)n[o]=u,u*=t[o]}if(r===undefined){r=0;for(var o=0;o<s;++o)n[o]<0&&(r-=(t[o]-1)*n[o])}var c=f(e),h=l[c];while(h.length<=s+1)h.push(a(c,h.length-1));var i=h[s+1];return i(e,t,n,r)}var r=e("iota-array"),i=e("is-buffer"),s=typeof Float64Array!="undefined",l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var e in l)l[e].push(a(e,-1))}),t.exports=c},{"iota-array":198,"is-buffer":199}],213:[function(e,t,n){"use strict";function s(e,t){if(typeof e!="string")throw new TypeError("repeat-string expects a string.");if(t===1)return e;if(t===2)return e+e;var n=e.length*t;if(i!==e||typeof i=="undefined")i=e,r="";while(n>r.length&&t>0){t&1&&(r+=e),t>>=1;if(!t)break;e+=e}return r.substr(0,n)}var r="",i;t.exports=s},{}],214:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+(new Date)}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],215:[function(e,t,n){"use strict";function s(e){var t="robustLinearSolve"+e+"d",n=["function ",t,"(A,b){return ["];for(var i=0;i<e;++i){n.push("det([");for(var s=0;s<e;++s){s>0&&n.push(","),n.push("[");for(var o=0;o<e;++o)o>0&&n.push(","),o===i?n.push("+b[",s,"]"):n.push("+A[",s,"][",o,"]");n.push("]")}n.push("]),")}n.push("det(A)]}return ",t);var u=new Function("det",n.join(""));return e<6?u(r[e]):u(r)}function o(){return[0]}function u(e,t){return[[t[0]],[e[0][0]]]}function f(){while(a.length<i)a.push(s(a.length));var e=[],n=["function dispatchLinearSolve(A,b){switch(A.length){"];for(var r=0;r<i;++r)e.push("s"+r),n.push("case ",r,":return s",r,"(A,b);");n.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",n.join(""));var o=Function.apply(undefined,e);t.exports=o.apply(undefined,a.concat([a,s]));for(var r=0;r<i;++r)t.exports[r]=a[r]}var r=e("robust-determinant"),i=6,a=[o,u];f()},{"robust-determinant":217}],216:[function(e,t,n){"use strict";function r(e){var t=e.length,n=e[e.length-1],r=t;for(var i=t-2;i>=0;--i){var s=n,o=e[i];n=s+o;var u=n-s,a=o-u;a&&(e[--r]=n,n=a)}var f=0;for(var i=r;i<t;++i){var s=e[i],o=n;n=s+o;var u=n-s,a=o-u;a&&(e[f++]=a)}return e[f++]=n,e.length=f,e}t.exports=r},{}],217:[function(e,t,n){"use strict";function a(e,t){var n=new Array(e.length-1);for(var r=1;r<e.length;++r){var i=n[r-1]=new Array(e.length-1);for(var s=0,o=0;s<e.length;++s){if(s===t)continue;i[o++]=e[r][s]}}return n}function f(e){var t=new Array(e);for(var n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m[",n,"][",r,"]"].join("")}return t}function l(e){return e&1?"-":""}function c(e){if(e.length===1)return e[0];if(e.length===2)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",c(e.slice(0,t)),",",c(e.slice(t)),")"].join("")}function h(e){if(e.length===2)return["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("");var t=[];for(var n=0;n<e.length;++n)t.push(["scale(",h(a(e,n)),",",l(n),e[0][n],")"].join(""));return c(t)}function p(e){var t=new Function("sum","scale","prod","compress",["function robustDeterminant",e,"(m){return compress(",h(f(e)),")};return robustDeterminant",e].join(""));return t(i,s,r,o)}function v(){while(d.length<u)d.push(p(d.length));var e=[],n=["function robustDeterminant(m){switch(m.length){"];for(var r=0;r<u;++r)e.push("det"+r),n.push("case ",r,":return det",r,"(m);");n.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",n.join(""));var i=Function.apply(undefined,e);t.exports=i.apply(undefined,d.concat([d,p]));for(var r=0;r<d.length;++r)t.exports[r]=d[r]}var r=e("two-product"),i=e("robust-sum"),s=e("robust-scale"),o=e("robust-compress"),u=6,d=[function(){return[0]},function(t){return[t[0][0]]}];v()},{"robust-compress":216,"robust-scale":219,"robust-sum":221,"two-product":235}],218:[function(e,t,n){"use strict";function c(e,t){var n=new Array(e.length-1);for(var r=1;r<e.length;++r){var i=n[r-1]=new Array(e.length-1);for(var s=0,o=0;s<e.length;++s){if(s===t)continue;i[o++]=e[r][s]}}return n}function h(e){var t=new Array(e);for(var n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}function p(e){return e&1?"-":""}function d(e){if(e.length===1)return e[0];if(e.length===2)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",d(e.slice(0,t)),",",d(e.slice(t)),")"].join("")}function v(e){if(e.length===2)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];var t=[];for(var n=0;n<e.length;++n)t.push(["scale(",d(v(c(e,n))),",",p(n),e[0][n],")"].join(""));return t}function m(e){var t=[],n=[],u=h(e),a=[];for(var f=0;f<e;++f)(f&1)===0?t.push.apply(t,v(c(u,f))):n.push.apply(n,v(c(u,f))),a.push("m"+f);var l=d(t),p=d(n),m="orientation"+e+"Exact",g=["function ",m,"(",a.join(),"){var p=",l,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",m].join(""),y=new Function("sum","prod","scale","sub",g);return y(i,r,s,o)}function w(e){var t=b[e.length];return t||(t=b[e.length]=m(e.length)),t.apply(undefined,e)}function E(){while(b.length<=u)b.push(m(b.length));var e=[],n=["slow"];for(var r=0;r<=u;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var r=2;r<=u;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(undefined,n);t.exports=s.apply(undefined,[w].concat(b));for(var r=0;r<=u;++r)t.exports[r]=b[r]}var r=e("two-product"),i=e("robust-sum"),s=e("robust-scale"),o=e("robust-subtract"),u=5,a=1.1102230246251565e-16,f=(3+16*a)*a,l=(7+56*a)*a,g=m(3),y=m(4),b=[function(){return 0},function(){return 0},function(t,n){return n[0]-t[0]},function(t,n,r){var i=(t[1]-r[1])*(n[0]-r[0]),s=(t[0]-r[0])*(n[1]-r[1]),o=i-s,u;if(i>0){if(s<=0)return o;u=i+s}else{if(!(i<0))return o;if(s>=0)return o;u=-(i+s)}var a=f*u;return o>=a||o<=-a?o:g(t,n,r)},function(t,n,r,i){var s=t[0]-i[0],o=n[0]-i[0],u=r[0]-i[0],a=t[1]-i[1],f=n[1]-i[1],c=r[1]-i[1],h=t[2]-i[2],p=n[2]-i[2],d=r[2]-i[2],v=o*c,m=u*f,g=u*a,b=s*c,w=s*f,E=o*a,S=h*(v-m)+p*(g-b)+d*(w-E),x=(Math.abs(v)+Math.abs(m))*Math.abs(h)+(Math.abs(g)+Math.abs(b))*Math.abs(p)+(Math.abs(w)+Math.abs(E))*Math.abs(d),T=l*x;return S>T||-S>T?S:y(t,n,r,i)}];E()},{"robust-scale":219,"robust-subtract":220,"robust-sum":221,"two-product":235}],219:[function(e,t,n){"use strict";function s(e,t){var n=e.length;if(n===1){var s=r(e[0],t);return s[0]?s:[s[1]]}var o=new Array(2*n),u=[.1,.1],a=[.1,.1],f=0;r(e[0],t,u),u[0]&&(o[f++]=u[0]);for(var l=1;l<n;++l){r(e[l],t,a);var c=u[1];i(c,a[0],u),u[0]&&(o[f++]=u[0]);var h=a[1],p=u[1],d=h+p,v=d-h,m=p-v;u[1]=d,m&&(o[f++]=m)}return u[1]&&(o[f++]=u[1]),f===0&&(o[f++]=0),o.length=f,o}var r=e("two-product"),i=e("two-sum");t.exports=s},{"two-product":235,"two-sum":236}],220:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=n-r,s=t-r,o=e-i,u=o+s;return u?[u,n]:[n]}function i(e,t){var n=e.length|0,i=t.length|0;if(n===1&&i===1)return r(e[0],-t[0]);var s=n+i,o=new Array(s),u=0,a=0,f=0,l=Math.abs,c=e[a],h=l(c),p=-t[f],d=l(p),v,m;h<d?(m=c,a+=1,a<n&&(c=e[a],h=l(c))):(m=p,f+=1,f<i&&(p=-t[f],d=l(p))),a<n&&h<d||f>=i?(v=c,a+=1,a<n&&(c=e[a],h=l(c))):(v=p,f+=1,f<i&&(p=-t[f],d=l(p)));var g=v+m,y=g-v,b=m-y,w=b,E=g,S,x,T,N,C;while(a<n&&f<i)h<d?(v=c,a+=1,a<n&&(c=e[a],h=l(c))):(v=p,f+=1,f<i&&(p=-t[f],d=l(p))),m=w,g=v+m,y=g-v,b=m-y,b&&(o[u++]=b),S=E+g,x=S-E,T=S-x,N=g-x,C=E-T,w=C+N,E=S;while(a<n)v=c,m=w,g=v+m,y=g-v,b=m-y,b&&(o[u++]=b),S=E+g,x=S-E,T=S-x,N=g-x,C=E-T,w=C+N,E=S,a+=1,a<n&&(c=e[a]);while(f<i)v=p,m=w,g=v+m,y=g-v,b=m-y,b&&(o[u++]=b),S=E+g,x=S-E,T=S-x,N=g-x,C=E-T,w=C+N,E=S,f+=1,f<i&&(p=-t[f]);return w&&(o[u++]=w),E&&(o[u++]=E),u||(o[u++]=0),o.length=u,o}t.exports=i},{}],221:[function(e,t,n){"use strict";function r(e,t){var n=e+t,r=n-e,i=n-r,s=t-r,o=
e-i,u=o+s;return u?[u,n]:[n]}function i(e,t){var n=e.length|0,i=t.length|0;if(n===1&&i===1)return r(e[0],t[0]);var s=n+i,o=new Array(s),u=0,a=0,f=0,l=Math.abs,c=e[a],h=l(c),p=t[f],d=l(p),v,m;h<d?(m=c,a+=1,a<n&&(c=e[a],h=l(c))):(m=p,f+=1,f<i&&(p=t[f],d=l(p))),a<n&&h<d||f>=i?(v=c,a+=1,a<n&&(c=e[a],h=l(c))):(v=p,f+=1,f<i&&(p=t[f],d=l(p)));var g=v+m,y=g-v,b=m-y,w=b,E=g,S,x,T,N,C;while(a<n&&f<i)h<d?(v=c,a+=1,a<n&&(c=e[a],h=l(c))):(v=p,f+=1,f<i&&(p=t[f],d=l(p))),m=w,g=v+m,y=g-v,b=m-y,b&&(o[u++]=b),S=E+g,x=S-E,T=S-x,N=g-x,C=E-T,w=C+N,E=S;while(a<n)v=c,m=w,g=v+m,y=g-v,b=m-y,b&&(o[u++]=b),S=E+g,x=S-E,T=S-x,N=g-x,C=E-T,w=C+N,E=S,a+=1,a<n&&(c=e[a]);while(f<i)v=p,m=w,g=v+m,y=g-v,b=m-y,b&&(o[u++]=b),S=E+g,x=S-E,T=S-x,N=g-x,C=E-T,w=C+N,E=S,f+=1,f<i&&(p=t[f]);return w&&(o[u++]=w),E&&(o[u++]=E),u||(o[u++]=0),o.length=u,o}t.exports=i},{}],222:[function(e,t,n){"use strict";function i(e){return e.split("").map(function(e){return e in r?r[e]:""}).join("")}t.exports=i;var r={" ":" ",0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"","+":"","-":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""}},{}],223:[function(e,t,n){"use strict";function i(e){return"a"+e}function s(e){return"d"+e}function o(e,t){return"c"+e+"_"+t}function u(e){return"s"+e}function a(e,t){return"t"+e+"_"+t}function f(e){return"o"+e}function l(e){return"x"+e}function c(e){return"p"+e}function h(e,t){return"d"+e+"_"+t}function p(e){return"i"+e}function d(e,t){return"u"+e+"_"+t}function v(e){return"b"+e}function m(e){return"y"+e}function g(e){return"e"+e}function y(e){return"v"+e}function N(e,t,n){var r=0;for(var i=0;i<e;++i)t&1<<i&&(r|=1<<n[i]);return r}function C(e,t,n,C,k,L){function X(e,t){_.push("for(",p(k[e]),"=",t,";",p(k[e]),"<",u(k[e]),";","++",p(k[e]),"){")}function V(e){for(var t=0;t<A;++t)_.push(c(t),"+=",d(t,k[e]),";");_.push("}")}function $(e){for(var t=e-1;t>=0;--t)X(t,0);var n=[];for(var t=0;t<A;++t)L[t]?n.push(s(t)+".get("+c(t)+")"):n.push(s(t)+"["+c(t)+"]");for(var t=0;t<C;++t)n.push(l(t));_.push(w,"[",x,"++]=phase(",n.join(),");");for(var t=0;t<e;++t)V(t);for(var r=0;r<A;++r)_.push(c(r),"+=",d(r,k[e]),";")}function J(e){for(var t=0;t<A;++t)L[t]?_.push(o(t,0),"=",s(t),".get(",c(t),");"):_.push(o(t,0),"=",s(t),"[",c(t),"];");var n=[];for(var t=0;t<A;++t)n.push(o(t,0));for(var t=0;t<C;++t)n.push(l(t));_.push(v(0),"=",w,"[",x,"]=phase(",n.join(),");");for(var r=1;r<1<<O;++r)_.push(v(r),"=",w,"[",x,"+",g(r),"];");var i=[];for(var r=1;r<1<<O;++r)i.push("("+v(0)+"!=="+v(r)+")");_.push("if(",i.join("||"),"){");var u=[];for(var t=0;t<O;++t)u.push(p(t));for(var t=0;t<A;++t){u.push(o(t,0));for(var r=1;r<1<<O;++r)L[t]?_.push(o(t,r),"=",s(t),".get(",c(t),"+",h(t,r),");"):_.push(o(t,r),"=",s(t),"[",c(t),"+",h(t,r),"];"),u.push(o(t,r))}for(var t=0;t<1<<O;++t)u.push(v(t));for(var t=0;t<C;++t)u.push(l(t));_.push("vertex(",u.join(),");",y(0),"=",b,"[",x,"]=",E,"++;");var a=(1<<O)-1,f=v(a);for(var r=0;r<O;++r)if((e&~(1<<r))===0){var d=a^1<<r,m=v(d),S=[];for(var T=d;T>0;T=T-1&d)S.push(b+"["+x+"+"+g(T)+"]");S.push(y(0));for(var T=0;T<A;++T)r&1?S.push(o(T,a),o(T,d)):S.push(o(T,d),o(T,a));r&1?S.push(f,m):S.push(m,f);for(var T=0;T<C;++T)S.push(l(T));_.push("if(",f,"!==",m,"){","face(",S.join(),")}")}_.push("}",x,"+=1;")}function K(){for(var e=1;e<1<<O;++e)_.push(T,"=",g(e),";",g(e),"=",m(e),";",m(e),"=",T,";")}function Q(e,t){if(e<0){J(t);return}$(e),_.push("if(",u(k[e]),">0){",p(k[e]),"=1;"),Q(e-1,t|1<<k[e]);for(var n=0;n<A;++n)_.push(c(n),"+=",d(n,k[e]),";");e===O-1&&(_.push(x,"=0;"),K()),X(e,2),Q(e-1,t),e===O-1&&(_.push("if(",p(k[O-1]),"&1){",x,"=0;}"),K()),V(e),_.push("}")}var A=L.length,O=k.length;if(O<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");var M="extractContour"+k.join("_"),_=[],D=[],P=[];for(var H=0;H<A;++H)P.push(i(H));for(var H=0;H<C;++H)P.push(l(H));for(var H=0;H<O;++H)D.push(u(H)+"="+i(0)+".shape["+H+"]|0");for(var H=0;H<A;++H){D.push(s(H)+"="+i(H)+".data",f(H)+"="+i(H)+".offset|0");for(var B=0;B<O;++B)D.push(a(H,B)+"="+i(H)+".stride["+B+"]|0")}for(var H=0;H<A;++H){D.push(c(H)+"="+f(H)),D.push(o(H,0));for(var B=1;B<1<<O;++B){var j=[];for(var F=0;F<O;++F)B&1<<F&&j.push("-"+a(H,F));D.push(h(H,B)+"=("+j.join("")+")|0"),D.push(o(H,B)+"=0")}}for(var H=0;H<A;++H)for(var B=0;B<O;++B){var I=[a(H,k[B])];B>0&&I.push(a(H,k[B-1])+"*"+u(k[B-1])),D.push(d(H,k[B])+"=("+I.join("-")+")|0")}for(var H=0;H<O;++H)D.push(p(H)+"=0");D.push(E+"=0");var q=["2"];for(var H=O-2;H>=0;--H)q.push(u(k[H]));D.push(S+"=("+q.join("*")+")|0",w+"=mallocUint32("+S+")",b+"=mallocUint32("+S+")",x+"=0"),D.push(v(0)+"=0");for(var B=1;B<1<<O;++B){var R=[],U=[];for(var F=0;F<O;++F)B&1<<F&&(U.length===0?R.push("1"):R.unshift(U.join("*"))),U.push(u(k[F]));var z="";R[0].indexOf(u(k[O-2]))<0&&(z="-");var W=N(O,B,k);D.push(g(W)+"=(-"+R.join("-")+")|0",m(W)+"=("+z+R.join("-")+")|0",v(W)+"=0")}D.push(y(0)+"=0",T+"=0"),Q(O-1,0),_.push("freeUint32(",b,");freeUint32(",w,");");var G=["'use strict';","function ",M,"(",P.join(),"){","var ",D.join(),";",_.join(""),"}","return ",M].join(""),Y=new Function("vertex","face","phase","mallocUint32","freeUint32",G);return Y(e,t,n,r.mallocUint32,r.freeUint32)}function k(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}typeof e!="object"&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;r<1&&t("Must have at least one array argument");var i=e.scalarArguments||0;i<0&&t("Scalar arg count must be > 0"),typeof e.vertex!="function"&&t("Must specify vertex creation function"),typeof e.cell!="function"&&t("Must specify cell creation function"),typeof e.phase!="function"&&t("Must specify phase function");var s=e.getters||[],o=new Array(r);for(var u=0;u<r;++u)s.indexOf(u)>=0?o[u]=!0:o[u]=!1;return C(e.vertex,e.cell,e.phase,i,n,o)}var r=e("typedarray-pool");t.exports=k;var b="V",w="P",E="N",S="Q",x="X",T="T"},{"typedarray-pool":237}],224:[function(e,t,n){function u(e){if(e<0)return Number("0/0");var t=o[0];for(var n=o.length-1;n>0;--n)t+=o[n]/(e+n);var r=e+s+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(r)-r+Math.log(t)-Math.log(e)}var r=7,i=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-0.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],s=607/128,o=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-0.4919138160976202,3399464998481189e-20,4652362892704858e-20,-0.00009837447530487956,.0001580887032249125,-0.00021026444172410488,.00021743961811521265,-0.0001643181065367639,8441822398385275e-20,-0.000026190838401581408,36899182659531625e-22];t.exports=function a(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*a(1-e));if(e>100)return Math.exp(u(e));e-=1;var t=i[0];for(var n=1;n<r+2;n++)t+=i[n]/(e+n);var s=e+r+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t},t.exports.log=u},{}],225:[function(e,t,n){"use strict";function s(e){var t=e.length;if(t<r){var n=1;for(var s=0;s<t;++s)for(var o=0;o<s;++o)if(e[s]<e[o])n=-n;else if(e[s]===e[o])return 0;return n}var u=i.mallocUint8(t);for(var s=0;s<t;++s)u[s]=0;var n=1;for(var s=0;s<t;++s)if(!u[s]){var a=1;u[s]=1;for(var o=e[s];o!==s;o=e[o]){if(u[o])return i.freeUint8(u),0;a+=1,u[o]=1}a&1||(n=-n)}return i.freeUint8(u),n}t.exports=s;var r=32,i=e("typedarray-pool")},{"typedarray-pool":237}],226:[function(e,t,n){"use strict";function s(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1];default:}var n=r.mallocUint32(t),s=r.mallocUint32(t),o=0,u,a,f;i(e,s);for(f=0;f<t;++f)n[f]=e[f];for(f=t-1;f>0;--f)a=s[f],u=n[f],n[f]=n[a],n[a]=u,s[f]=s[u],s[u]=a,o=(o+u)*f;return r.freeUint32(s),r.freeUint32(n),o}function o(e,t,n){switch(e){case 0:if(n)return n;return[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(t?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):t?[0,1]:[1,0];default:}n=n||new Array(e);var r,i,s,o=1;n[0]=0;for(s=1;s<e;++s)n[s]=s,o=o*s|0;for(s=e-1;s>0;--s)r=t/o|0,t=t-r*o|0,o=o/s|0,i=n[s]|0,n[s]=n[r]|0,n[r]=i|0;return n}var r=e("typedarray-pool"),i=e("invert-permutation");n.rank=s,n.unrank=o},{"invert-permutation":227,"typedarray-pool":237}],227:[function(e,t,n){"use strict";function r(e,t){t=t||new Array(e.length);for(var n=0;n<e.length;++n)t[e[n]]=n;return t}t.exports=r},{}],228:[function(e,t,n){"use strict";function o(e){if(e<0)return[];if(e===0)return[[0]];var t=Math.round(s(e+1))|0,n=[];for(var o=0;o<t;++o){var u=r.unrank(e,o),a=[0],f=0;for(var l=0;l<u.length;++l)f+=1<<u[l],a.push(f);i(u)<1&&(a[0]=f,a[e]=0),n.push(a)}return n}t.exports=o;var r=e("permutation-rank"),i=e("permutation-parity"),s=e("gamma")},{gamma:224,"permutation-parity":225,"permutation-rank":226}],229:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":68}],230:[function(e,t,n){"use strict";function i(e,t){var n=[];return t=+t||0,r(e.hi(e.shape[0]-1),n,t),n}t.exports=i;var r=e("./lib/zc-core")},{"./lib/zc-core":229}],231:[function(e,t,n){"use strict";function o(e,t){var n=e.length,s=["'use strict';"],o="surfaceNets"+e.join("_")+"d"+t;s.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),t==="generic"&&s.push("getters:[0],");var u=[],a=[];for(var f=0;f<n;++f)u.push("d"+f),a.push("d"+f);for(var f=0;f<1<<n;++f)u.push("v"+f),a.push("v"+f);for(var f=0;f<1<<n;++f)u.push("p"+f),a.push("p"+f);u.push("a","b","c"),a.push("a","c"),s.push("vertex:function vertexFunc(",u.join(),"){");var l=[];for(var f=0;f<1<<n;++f)l.push("(p"+f+"<<"+f+")");s.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var c=[],h=[];1<<(1<<n)<=128?(s.push("switch(m){"),h=s):s.push("switch(m>>>7){");for(var f=0;f<1<<(1<<n);++f){if(1<<(1<<n)>128&&f%128===0){c.length>0&&h.push("}}");var p="vExtra"+c.length;s.push("case ",f>>>7,":",p,"(m&0x7f,",a.join(),");break;"),h=["function ",p,"(m,",a.join(),"){switch(m){"],c.push(h)}h.push("case ",f&127,":");var d=new Array(n),v=new Array(n),m=new Array(n),g=new Array(n),y=0;for(var b=0;b<n;++b)d[b]=[],v[b]=[],m[b]=0,g[b]=0;for(var b=0;b<1<<n;++b)for(var w=0;w<n;++w){var E=b^1<<w;if(E>b)continue;if(!(f&1<<E)!=!(f&1<<b)){var S=1;f&1<<E?v[w].push("v"+E+"-v"+b):(v[w].push("v"+b+"-v"+E),S=-S),S<0?(d[w].push("-v"+b+"-v"+E),m[w]+=2):(d[w].push("v"+b+"+v"+E),m[w]-=2),y+=1;for(var x=0;x<n;++x){if(x===w)continue;E&1<<x?g[x]+=1:g[x]-=1}}}var T=[];for(var w=0;w<n;++w)if(d[w].length===0)T.push("d"+w+"-0.5");else{var N="";m[w]<0?N=m[w]+"*c":m[w]>0&&(N="+"+m[w]+"*c");var C=.5*(d[w].length/y),k=.5+.5*(g[w]/y);T.push("d"+w+"-"+k+"-"+C+"*("+d[w].join("+")+N+")/("+v[w].join("+")+")")}h.push("a.push([",T.join(),"]);","break;")}s.push("}},"),c.length>0&&h.push("}}");var L=[];for(var f=0;f<1<<n-1;++f)L.push("v"+f);L.push("c0","c1","p0","p1","a","b","c"),s.push("cell:function cellFunc(",L.join(),"){");var A=i(n-1);s.push("if(p0){b.push(",A.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",A.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",o,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",o,";");for(var f=0;f<c.length;++f)s.push(c[f].join(""));var O=new Function("genContour",s.join(""));return O(r)}function u(e,t){var n=s(e,t),r=n.length,i=new Array(r),o=new Array(r);for(var u=0;u<r;++u)i[u]=[n[u]],o[u]=[u];return{positions:i,cells:o}}function f(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(e.dimension===1)return u(e,t);var n=e.order.join()+"-"+e.dtype,r=a[n],t=+t||0;return r||(r=a[n]=o(e.order,e.dtype)),r(e,t)}t.exports=f;var r=e("ndarray-extract-contour"),i=e("triangulate-hypercube"),s=e("zero-crossings"),a={}},{"ndarray-extract-contour":223,"triangulate-hypercube":228,"zero-crossings":230}],232:[function(e,t,n){(function(n){"use strict";function o(e){var t=e.cells,n=e.positions,r=new Float32Array(t.length*6),i=0,s=0;for(var o=0;o<t.length;++o){var u=t[o];for(var a=0;a<3;++a){var f=n[u[a]];r[i++]=f[0],r[i++]=f[1]+1.4,s=Math.max(f[0],s)}}return{data:r,shape:s}}function u(e,t){var n=s[e];n||(n=s[e]={" ":{data:new Float32Array(0),shape:.2}});var i=n[t];if(!i)if(t.length<=1||!/\d/.test(t))i=n[t]=o(r(t,{triangles:!0,font:e,textAlign:"left",textBaseline:"alphabetic"}));else{var a=t.split(/(\d|\s)/),f=new Array(a.length),l=0,c=0;for(var h=0;h<a.length;++h)f[h]=u(e,a[h]),l+=f[h].data.length,c+=f[h].shape,h>0&&(c+=.02);var p=new Float32Array(l),d=0,v=-0.5*c;for(var h=0;h<f.length;++h){var m=f[h].data;for(var g=0;g<m.length;g+=2)p[d++]=m[g]+v,p[d++]=m[g+1];v+=f[h].shape+.02}i=n[t]={data:p,shape:c}}return i}t.exports=u;var r=e("vectorize-text"),i=window||n.global||{},s=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}}).call(this,e("_process"))},{_process:56,"vectorize-text":239}],233:[function(t,n,r){(function(){function l(e,t){e=e?e:"",t=t||{};if(e instanceof l)return e;if(!(this instanceof l))return new l(e,t);var n=c(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=o(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=n.ok,this._tc_id=i++}function c(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;return typeof e=="string"&&(e=V(e)),typeof e=="object"&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=h(e.r,e.g,e.b),r=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=U(e.s),e.v=U(e.v),t=m(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=U(e.s),e.l=U(e.l),t=d(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=H(n),{ok:r,format:e.format||i,r:u(255,a(t.r,0)),g:u(255,a(t.g,0)),b:u(255,a(t.b,0)),a:n}}function h(e,t,n){return{r:B(e,255)*255,g:B(t,255)*255,b:B(n,255)*255}}function p(e,t,n){e=B(e,255),t=B(t,255),n=B(n,255);var r=a(e,t,n),i=u(e,t,n),s,o,f=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;o=f>.5?l/(2-r-i):l/(r+i);switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4}s/=6}return{h:s,s:o,l:f}}function d(e,t,n){function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,i,s;e=B(e,360),t=B(t,100),n=B(n,100);if(t===0)r=i=s=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function v(e,t,n){e=B(e,255),t=B(t,255),n=B(n,255);var r=a(e,t,n),i=u(e,t,n),s,o,f=r,l=r-i;o=r===0?0:l/r;if(r==i)s=0;else{switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4}s/=6}return{h:s,s:o,v:f}}function m(e,t,n){e=B(e,360)*6,t=B(t,100),n=B(n,100);var r=s.floor(e),i=e-r,o=n*(1-t),u=n*(1-i*t),a=n*(1-(1-i)*t),f=r%6,l=[n,u,o,o,a,n][f],c=[a,n,n,u,o,o][f],h=[o,o,a,n,n,u][f];return{r:l*255,g:c*255,b:h*255}}function g(e,t,n,r){var i=[R(o(e).toString(16)),R(o(t).toString(16)),R(o(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function y(e,t,n,r){var i=[R(z(r)),R(o(e).toString(16)),R(o(t).toString(16)),R(o(n).toString(16))];return i.join("")}function b(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.s-=t/100,n.s=j(n.s),l(n)}function w(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.s+=t/100,n.s=j(n.s),l(n)}function E(e){return l(e).desaturate(100)}function S(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.l+=t/100,n.l=j(n.l),l(n)}function x(e,t){t=t===0?0:t||10;var n=l(e).toRgb();return n.r=a(0,u(255,n.r-o(255*-(t/100)))),n.g=a(0,u(255,n.g-o(255*-(t/100)))),n.b=a(0,u(255,n.b-o(255*-(t/100)))),l(n)}function T(e,t){t=t===0?0:t||10;var n=l(e).toHsl();return n.l-=t/100,n.l=j(n.l),l(n)}function N(e,t){var n=l(e).toHsl(),r=(o(n.h)+t)%360;return n.h=r<0?360+r:r,l(n)}function C(e){var t=l(e).toHsl();return t.h=(t.h+180)%360,l(t)}function k(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+120)%360,s:t.s,l:t.l}),l({h:(n+240)%360,s:t.s,l:t.l})]}function L(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+90)%360,s:t.s,l:t.l}),l({h:(n+180)%360,s:t.s,l:t.l}),l({h:(n+270)%360,s:t.s,l:t.l})]}function A(e){var t=l(e).toHsl(),n=t.h;return[l(e),l({h:(n+72)%360,s:t.s,l:t.l}),l({h:(n+216)%360,s:t.s,l:t.l})]}function O(e,t,n){t=t||6,n=n||30;var r=l(e).toHsl(),i=360/n,s=[l(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(l(r));return s}function M(e,t){t=t||6;var n=l(e).toHsv(),r=n.h,i=n.s,s=n.v,o=[],u=1/t;while(t--)o.push(l({h:r,s:i,v:s})),s=(s+u)%1;return o}function P(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function H(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1)e=1;return e}function B(e,t){I(e)&&(e="100%");var n=q(e);return e=u(t,a(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),s.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function j(e){return u(1,a(0,e))}function F(e){return parseInt(e,16)}function I(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function q(e){return typeof e=="string"&&e.indexOf("%")!=-1}function R(e){return e.length==1?"0"+e:""+e}function U(e){return e<=1&&(e=e*100+"%"),e}function z(e){return Math.round(parseFloat(e)*255).toString(16)}function W(e){return F(e)/255}function V(e){e=e.replace(t,"").replace(r,"").toLowerCase();var n=!1;if(_[e])e=_[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=X.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=X.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=X.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=X.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=X.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=X.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=X.hex8.exec(e))?{a:W(i[1]),r:F(i[2]),g:F(i[3]),b:F(i[4]),format:n?"name":"hex8"}:(i=X.hex6.exec(e))?{r:F(i[1]),g:F(i[2]),b:F(i[3]),format:n?"name":"hex"}:(i=X.hex3.exec(e))?{r:F(i[1]+""+i[1]),g:F(i[2]+""+i[2]),b:F(i[3]+""+i[3]),format:n?"name":"hex"}:!1}function $(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var t=/^\s+/,r=/\s+$/,i=0,s=Math,o=s.round,u=s.min,a=s.max,f=s.random;l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,i,s,o;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?i=t/12.92:i=Math.pow((t+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),.2126*i+.7152*s+.0722*o},setAlpha:function(e){return this._a=H(e),this._roundA=o(100*this._a)/100,this},toHsv:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=v(this._r,this._g,this._b),t=o(e.h*360),n=o(e.s*100),r=o(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=o(e.h*360),n=o(e.s*100),r=o(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return g(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return y(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(B(this._r,255)*100)+"%",g:o(B(this._g,255)*100)+"%",b:o(B(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(B(this._r,255)*100)+"%, "+o(B(this._g,255)*100)+"%, "+o(B(this._b,255)*100)+"%)":"rgba("+o(B(this._r,255)*100)+"%, "+o(B(this._g,255)*100)+"%, "+o(B(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:D[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+y(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=l(e);n=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="name");if(i)return e==="name"&&this._a===0?this.toName():this.toRgbString();e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString());if(e==="hex"||e==="hex6")n=this.toHexString();return e==="hex3"&&(n=this.toHexString(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString()},clone:function(){return l(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(S,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(w,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(N,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(L,arguments)}},l.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=U(e[r]));e=n}return l(e,t)},l.equals=function(e,t){return!e||!t?!1:l(e).toRgbString()==l(t).toRgbString()},l.random=function(){return l.fromRatio({r:f(),g:f(),b:f()})},l.mix=function(e,t,n){n=n===0?0:n||50;var r=l(e).toRgb(),i=l(t).toRgb(),s=n/100,o=s*2-1,u=i.a-r.a,a;o*u==-1?a=o:a=(o+u)/(1+o*u),a=(a+1)/2;var f=1-a,c={r:i.r*a+r.r*f,g:i.g*a+r.g*f,b:i.b*a+r.b*f,a:i.a*s+r.a*(1-s)};return l(c)},l.readability=function(e,t){var n=l(e),r=l(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},l.isReadable=function(e,t,n){var r=l.readability(e,t),i,s;s=!1,i=$(n);switch(i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7}return s},l.mostReadable=function(e,t,n){var r=null,i=0,s,o,u,a;n=n||{},o=n.includeFallbackColors,u=n.level,a=n.size;for(var f=0;f<t.length;f++)s=l.readability(e,t[f]),s>i&&(i=s,r=l(t[f]));return l.isReadable(e,r,{level:u,size:a})||!o?r:(n.includeFallbackColors=!1,l.mostReadable(e,["#fff","#000"],n))};var _=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=l.hexNames=P(_),X=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();typeof n!="undefined"&&n.exports?n.exports=l:typeof e=="function"&&e.amd?e(function(){return l}):window.tinycolor=l})()},{}],234:[function(t,n,r){(function(t,i){typeof r=="object"&&typeof n!="undefined"?i(r):typeof e=="function"&&e.amd?e(["exports"],i):i(t.topojson={})})(this,function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],s=e.scale[1],o=e.translate[0],u=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*s+u}}function r(e){if(!e)return t;var n,r,i=e.scale[0],s=e.scale[1],o=e.translate[0],u=e.translate[1];return function(e,t){t||(n=r=0);var a=(e[0]-o)/i|0,f=(e[1]-u)/s|0;e[0]=a-n,e[1]=f-r,n=a,r=f}}function i(e,t){var n,r=e.length,i=r-t;while(i<--r)n=e[i],e[i++]=e[r],e[r]=n}function s(e,t){var n=0,r=e.length;while(n<r){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function o(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return u(e,t)})}:u(e,t)}function u(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:a(e,t)};return t.id==null&&delete n.id,n}function a(e,t){function o(e,t){t.length&&t.pop();for(var n=s[e<0?~e:e],o=0,u=n.length,a;o<u;++o)t.push(a=n[o].slice()),r(a,o);e<0&&i(t,u)}function u(e){return e=e.slice(),r(e,0),e}function a(e){var t=[];for(var n=0,r=e.length;n<r;++n)o(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function f(e){var t=a(e);while(t.length<4)t.push(t[0].slice());return t}function l(e){return e.map(f)}function c(e){var t=e.type;return t==="GeometryCollection"?{type:t,geometries:e.geometries.map(c)}:t in h?{type:t,coordinates:h[t](e)}:null}var r=n(e.transform),s=e.arcs,h={Point:function(e){return u(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(u)},LineString:function(e){return a(e.arcs)},MultiLineString:function(e){return e.arcs.map(a)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return c(t)}function f(e,t){function u(t){var n=e.arcs[t<0?~t:t],r=n[0],i;return e.transform?(i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})):i=n[n.length-1],t<0?[i,r]:[r,i]}function a(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),s.push(i)}}var n={},r={},i={},s=[],o=-1;return t.forEach(function(n,r){var i=e.arcs[n<0?~n:n],s;i.length<3&&!i[1][0]&&!i[1][1]&&(s=t[++o],t[o]=n,t[r]=s)}),t.forEach(function(e){var t=u(e),n=t[0],s=t[1],o,a;if(o=i[n]){delete i[o.end],o.push(e),o.end=s;if(a=r[s]){delete r[a.start];var f=a===o?o:o.concat(a);r[f.start=o.start]=i[f.end=a.end]=f}else r[o.start]=i[o.end]=o}else if(o=r[s]){delete r[o.start],o.unshift(e),o.start=n;if(a=i[n]){delete i[a.end];var l=a===o?o:a.concat(o);r[l.start=a.start]=i[l.end=o.end]=l}else r[o.start]=i[o.end]=o}else o=[e],r[o.start=n]=i[o.end=s]=o}),a(i,r),a(r,i),t.forEach(function(e){n[e<0?~e:e]||s.push([e])}),s}function l(e){return a(e,c.apply(this,arguments))}function c(e,t,n){function i(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:l})}function s(e){e.forEach(i)}function o(e){e.forEach(s)}function u(e){e.type==="GeometryCollection"?e.geometries.forEach(u):e.type in c&&(l=e,c[e.type](e.arcs))}var r=[];if(arguments.length>1){var a=[],l,c={LineString:s,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};u(t),a.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&r.push(e[0].i)})}else for(var h=0,p=e.arcs.length;h<p;++h)r.push(h);return{type:"MultiLineString",arcs:f(e,r)}}function h(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function p(e){var t=-1,n=e.length,r,i=e[n-1],s=0;while(++t<n)r=i,i=e[t],s+=r[0]*i[1]-r[1]*i[0];return s/2}function d(e){return a(e,v.apply(this,arguments))}function v(e,t){function s(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function o(t){return p(a(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var n={},r=[],i=[];return t.forEach(function(e){e.type==="Polygon"?s(e.arcs):e.type==="MultiPolygon"&&e.arcs.forEach(s)}),r.forEach(function(e){if(!e._){var t=[],r=[e];e._=1,i.push(t);while(e=r.pop())t.push(e),e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var r=[],i;t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].length<2&&r.push(e)})})}),r=f(e,r);if((i=r.length)>1){var s=o(t[0][0]);for(var u=0,a;u<i;++u)if(s===o(r[u])){a=r[0],r[0]=r[u],r[u]=a;break}}return r})}}function m(e){function r(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function i(e,t){e.forEach(function(e){r(e,t)})}function o(e,t){e.type==="GeometryCollection"?e.geometries.forEach(function(e){o(e,t)}):e.type in u&&u[e.type](e.arcs,t)}var t={},n=e.map(function(){return[]
}),u={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(o);for(var a in t)for(var f=t[a],l=f.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var p=f[c],d=f[h],v;(v=n[p])[a=s(v,d)]!==d&&v.splice(a,0,d),(v=n[d])[a=s(v,p)]!==p&&v.splice(a,0,p)}return n}function g(e,t){return e[1][2]-t[1][2]}function y(){function r(e,n){while(n>0){var r=(n+1>>1)-1,i=t[r];if(g(e,i)>=0)break;t[i._=n]=i,t[e._=n=r]=e}}function i(e,r){for(;;){var i=r+1<<1,s=i-1,o=r,u=t[o];s<n&&g(t[s],u)<0&&(u=t[o=s]),i<n&&g(t[i],u)<0&&(u=t[o=i]);if(o===r)break;t[u._=r]=u,t[e._=r=o]=e}}var e={},t=[],n=0;return e.push=function(e){return r(t[e._=n]=e,n++),n},e.pop=function(){if(n<=0)return;var e=t[0],r;return--n>0&&(r=t[n],i(t[r._=0]=r,0)),e},e.remove=function(e){var s=e._,o;if(t[s]!==e)return;return s!==--n&&(o=t[n],(g(o,e)<0?r:i)(t[o._=s]=o,s)),s},e}function b(e,t){function u(e){o.remove(e),e[1][2]=t(e),o.push(e)}var i=n(e.transform),s=r(e.transform),o=y();return t||(t=h),e.arcs.forEach(function(e){var n=[],r=0,a,f,l,c;for(f=0,l=e.length;f<l;++f)c=e[f],i(e[f]=[c[0],c[1],Infinity],f);for(f=1,l=e.length-1;f<l;++f)a=e.slice(f-1,f+2),a[1][2]=t(a),n.push(a),o.push(a);for(f=0,l=n.length;f<l;++f)a=n[f],a.previous=n[f-1],a.next=n[f+1];while(a=o.pop()){var h=a.previous,p=a.next;a[1][2]<r?a[1][2]=r:r=a[1][2],h&&(h.next=p,h[2]=a[2],u(h)),p&&(p.previous=h,p[0]=a[0],u(p))}e.forEach(s)}),e}var w="1.6.24";e.version=w,e.mesh=l,e.meshArcs=c,e.merge=d,e.mergeArcs=v,e.feature=o,e.neighbors=m,e.presimplify=b})},{}],235:[function(e,t,n){"use strict";function i(e,t,n){var i=e*t,s=r*e,o=s-e,u=s-o,a=e-u,f=r*t,l=f-t,c=f-l,h=t-c,p=i-u*c,d=p-a*c,v=d-u*h,m=a*h-v;return n?(n[0]=m,n[1]=i,n):[m,i]}t.exports=i;var r=+(Math.pow(2,27)+1)},{}],236:[function(e,t,n){"use strict";function r(e,t,n){var r=e+t,i=r-e,s=r-i,o=t-i,u=e-s;return n?(n[0]=u+o,n[1]=r,n):[u+o,r]}t.exports=r},{}],237:[function(e,t,n){(function(t,r){"use strict";function l(e){if(!e)return;var t=e.length||e.byteLength,n=i.log2(t);a[n].push(e)}function c(e){l(e.buffer)}function h(e){var e=i.nextPow2(e),t=i.log2(e),n=a[t];return n.length>0?n.pop():new ArrayBuffer(e)}function p(e){return new Uint8Array(h(e),0,e)}function d(e){return new Uint16Array(h(2*e),0,e)}function v(e){return new Uint32Array(h(4*e),0,e)}function m(e){return new Int8Array(h(e),0,e)}function g(e){return new Int16Array(h(2*e),0,e)}function y(e){return new Int32Array(h(4*e),0,e)}function b(e){return new Float32Array(h(4*e),0,e)}function w(e){return new Float64Array(h(8*e),0,e)}function E(e){return o?new Uint8ClampedArray(h(e),0,e):p(e)}function S(e){return new DataView(h(e),0,e)}function x(e){e=i.nextPow2(e);var t=i.log2(e),n=f[t];return n.length>0?n.pop():new r(e)}var i=e("bit-twiddle"),s=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:s([32,0]),UINT16:s([32,0]),UINT32:s([32,0]),INT8:s([32,0]),INT16:s([32,0]),INT32:s([32,0]),FLOAT:s([32,0]),DOUBLE:s([32,0]),DATA:s([32,0]),UINT8C:s([32,0]),BUFFER:s([32,0])});var o=typeof Uint8ClampedArray!="undefined",u=t.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=s([32,0])),u.BUFFER||(u.BUFFER=s([32,0]));var a=u.DATA,f=u.BUFFER;n.free=function(t){if(r.isBuffer(t))f[i.log2(t.length)].push(t);else{Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer);if(!t)return;var n=t.length||t.byteLength,s=i.log2(n)|0;a[s].push(t)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=c,n.freeArrayBuffer=l,n.freeBuffer=function(t){f[i.log2(t.length)].push(t)},n.malloc=function(t,n){if(n===undefined||n==="arraybuffer")return h(t);switch(n){case"uint8":return p(t);case"uint16":return d(t);case"uint32":return v(t);case"int8":return m(t);case"int16":return g(t);case"int32":return y(t);case"float":case"float32":return b(t);case"double":case"float64":return w(t);case"uint8_clamped":return E(t);case"buffer":return x(t);case"data":case"dataview":return S(t);default:return null}return null},n.mallocArrayBuffer=h,n.mallocUint8=p,n.mallocUint16=d,n.mallocUint32=v,n.mallocInt8=m,n.mallocInt16=g,n.mallocInt32=y,n.mallocFloat32=n.mallocFloat=b,n.mallocFloat64=n.mallocDouble=w,n.mallocUint8Clamped=E,n.mallocDataView=S,n.mallocBuffer=x,n.clearCache=function(){for(var t=0;t<32;++t)u.UINT8[t].length=0,u.UINT16[t].length=0,u.UINT32[t].length=0,u.INT8[t].length=0,u.INT16[t].length=0,u.INT32[t].length=0,u.FLOAT[t].length=0,u.DOUBLE[t].length=0,u.UINT8C[t].length=0,a[t].length=0,f[t].length=0}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},e("buffer").Buffer)},{"bit-twiddle":50,buffer:51,dup:74}],238:[function(e,t,n){"use strict";function r(e,t){var n=1,r=e.length,i=e[0],s=e[0];for(var o=1;o<r;++o){s=i,i=e[o];if(t(i,s)){if(o===n){n++;continue}e[n++]=i}}return e.length=n,e}function i(e){var t=1,n=e.length,r=e[0],i=e[0];for(var s=1;s<n;++s,i=r){i=r,r=e[s];if(r!==i){if(s===t){t++;continue}e[t++]=r}}return e.length=t,e}function s(e,t,n){return e.length===0?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),i(e))}t.exports=s},{}],239:[function(e,t,n){"use strict";function o(e,t){if(typeof t!="object"||t===null)t={};return r(e,t.canvas||i,t.context||s,t)}t.exports=o;var r=e("./lib/vtext"),i=null,s=null;typeof document!="undefined"&&(i=document.createElement("canvas"),i.width=8192,i.height=1024,s=i.getContext("2d"))},{"./lib/vtext":240}],240:[function(e,t,n){"use strict";function f(e,t,n){var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",s=[1<<30,1<<30],o=[0,0],u=e.length;for(var a=0;a<u;++a){var f=e[a];for(var l=0;l<2;++l)s[l]=Math.min(s[l],f[l])|0,o[l]=Math.max(o[l],f[l])|0}var c=0;switch(r){case"center":c=-0.5*(s[0]+o[0]);break;case"right":case"end":c=-o[0];break;case"left":case"start":c=-s[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var h=0;switch(i){case"hanging":case"top":h=-s[1];break;case"middle":h=-0.5*(s[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*n;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/n;return"lineHeight"in t?p*=+t.lineHeight:"width"in t?p=t.width/(o[0]-s[0]):"height"in t&&(p=t.height/(o[1]-s[1])),e.map(function(e){return[p*(e[0]+c),p*(e[1]+h)]})}function l(e,t,n,r){var s=Math.ceil(t.measureText(n).width+2*r)|0;if(s>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var o=3*r;e.height<o&&(e.height=o),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(n,r,2*r);var u=t.getImageData(0,0,s,o),a=i(u.data,[o,s,4]);return a.pick(-1,-1,0).transpose(1,0)}function c(e,t){var n=r(e,128);return t?s(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function h(e,t,n,r){var i=c(e,r),s=f(i.positions,t,n),l=i.edges,h="ccw"===t.orientation;o(s,l);if(t.polygons||t.polygon||t.polyline){var p=a(l,s),d=new Array(p.length);for(var v=0;v<p.length;++v){var m=p[v],g=new Array(m.length);for(var y=0;y<m.length;++y){var b=m[y],w=new Array(b.length);for(var E=0;E<b.length;++E)w[E]=s[b[E]].slice();h&&w.reverse(),g[y]=w}d[v]=g}return d}return t.triangles||t.triangulate||t.triangle?{cells:u(s,l,{delaunay:!1,exterior:!1,interior:!0}),positions:s}:{edges:l,positions:s}}function p(e,t,n){try{return h(e,t,n,!0)}catch(r){}try{return h(e,t,n,!1)}catch(r){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function d(e,t,n,r){var i=r.size||64,s=r.font||"normal";n.font=i+"px "+s,n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr";var o=l(t,n,e,i);return p(o,r,i)}t.exports=d,t.exports.processPixels=p;var r=e("surface-nets"),i=e("ndarray"),s=e("simplify-planar-graph"),o=e("clean-pslg"),u=e("cdt2d"),a=e("planar-graph-to-polyline")},{cdt2d:241,"clean-pslg":248,ndarray:212,"planar-graph-to-polyline":294,"simplify-planar-graph":298,"surface-nets":231}],241:[function(e,t,n){"use strict";function u(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function a(e,t){return e[0]-t[0]||e[1]-t[1]}function f(e){return e.map(u).sort(a)}function l(e,t,n){return t in e?e[t]:n}function c(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var u=!!l(n,"delaunay",!0),a=!!l(n,"interior",!0),c=!!l(n,"exterior",!0),h=!!l(n,"infinity",!1);if(!a&&!c||e.length===0)return[];var p=r(e,t);if(u||a!==c||h){var d=i(e.length,f(t));for(var v=0;v<p.length;++v){var m=p[v];d.addTriangle(m[0],m[1],m[2])}return u&&s(e,d),c?a?h?o(d,0,h):d.cells():o(d,1,h):o(d,-1)}return p}var r=e("./lib/monotone"),i=e("./lib/triangulation"),s=e("./lib/delaunay"),o=e("./lib/filter");t.exports=c},{"./lib/delaunay":242,"./lib/filter":243,"./lib/monotone":244,"./lib/triangulation":245}],242:[function(e,t,n){"use strict";function s(e,t,n,i,s,o){var u=t.opposite(i,s);if(u<0)return;if(s<i){var a=i;i=s,s=a,a=o,o=u,u=a}if(t.isConstraint(i,s))return;r(e[i],e[s],e[o],e[u])<0&&n.push(i,s)}function o(e,t){var n=[],i=e.length,o=t.stars;for(var u=0;u<i;++u){var a=o[u];for(var f=1;f<a.length;f+=2){var l=a[f];if(l<u)continue;if(t.isConstraint(u,l))continue;var c=a[f-1],h=-1;for(var p=1;p<a.length;p+=2)if(a[p-1]===l){h=a[p];break}if(h<0)continue;r(e[u],e[l],e[c],e[h])<0&&n.push(u,l)}}while(n.length>0){var l=n.pop(),u=n.pop(),c=-1,h=-1,a=o[u];for(var d=1;d<a.length;d+=2){var v=a[d-1],m=a[d];v===l?h=m:m===l&&(c=v)}if(c<0||h<0)continue;if(r(e[u],e[l],e[c],e[h])>=0)continue;t.flip(u,l),s(e,t,n,c,u,h),s(e,t,n,u,h,c),s(e,t,n,h,l,c),s(e,t,n,l,c,h)}}var r=e("robust-in-sphere")[4],i=e("binary-search-bounds");t.exports=o},{"binary-search-bounds":246,"robust-in-sphere":247}],243:[function(e,t,n){"use strict";function i(e,t,n,r,i,s,o){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=s,this.boundary=o}function o(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function u(e,t){var n=e.cells(),r=n.length;for(var s=0;s<r;++s){var u=n[s],a=u[0],f=u[1],l=u[2];f<l?f<a&&(u[0]=f,u[1]=l,u[2]=a):l<a&&(u[0]=l,u[1]=a,u[2]=f)}n.sort(o);var c=new Array(r);for(var s=0;s<c.length;++s)c[s]=0;var h=[],p=[],d=new Array(3*r),v=new Array(3*r),m=null;t&&(m=[]);var g=new i(n,d,v,c,h,p,m);for(var s=0;s<r;++s){var u=n[s];for(var y=0;y<3;++y){var a=u[y],f=u[(y+1)%3],b=d[3*s+y]=g.locate(f,a,e.opposite(f,a)),w=v[3*s+y]=e.isConstraint(a,f);b<0&&(w?p.push(s):(h.push(s),c[s]=1),t&&m.push([f,a,-1]))}}return g}function a(e,t,n){var r=0;for(var i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}function f(e,t,n){var r=u(e,n);if(t===0)return n?r.cells.concat(r.boundary):r.cells;var i=1,s=r.active,o=r.next,f=r.flags,l=r.cells,c=r.constraint,h=r.neighbor;while(s.length>0||o.length>0){while(s.length>0){var p=s.pop();if(f[p]===-i)continue;f[p]=i;var d=l[p];for(var v=0;v<3;++v){var m=h[3*p+v];m>=0&&f[m]===0&&(c[3*p+v]?o.push(m):(s.push(m),f[m]=i))}}var g=o;o=s,s=g,o.length=0,i=-i}var y=a(l,f,t);return n?y.concat(r.boundary):y}var r=e("binary-search-bounds");t.exports=f;var s=i.prototype;s.locate=function(){var e=[0,0,0];return function(t,n,i){var s=t,u=n,a=i;return n<i?n<t&&(s=n,u=i,a=t):i<t&&(s=i,u=t,a=n),s<0?-1:(e[0]=s,e[1]=u,e[2]=a,r.eq(this.cells,e,o))}}()},{"binary-search-bounds":246}],244:[function(e,t,n){"use strict";function a(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function f(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function l(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;if(n)return n;if(e.type!==s){n=i(e.a,e.b,t.b);if(n)return n}return e.idx-t.idx}function c(e,t){return i(e.a,e.b,t)}function h(e,t,n,s,o){var u=r.lt(t,s,c),a=r.gt(t,s,c);for(var f=u;f<a;++f){var l=t[f],h=l.lowerIds,p=h.length;while(p>1&&i(n[h[p-2]],n[h[p-1]],s)>0)e.push([h[p-1],h[p-2],o]),p-=1;h.length=p,h.push(o);var d=l.upperIds,p=d.length;while(p>1&&i(n[d[p-2]],n[d[p-1]],s)<0)e.push([d[p-2],d[p-1],o]),p-=1;d.length=p,d.push(o)}}function p(e,t){var n;return e.a[0]<t.a[0]?n=i(e.a,e.b,t.a):n=i(t.b,t.a,e.a),n?n:(t.b[0]<e.b[0]?n=i(e.a,e.b,t.b):n=i(t.b,t.a,e.b),n||e.idx-t.idx)}function d(e,t,n){var i=r.le(e,n,p),s=e[i],o=s.upperIds,u=o[o.length-1];s.upperIds=[u],e.splice(i+1,0,new a(n.a,n.b,n.idx,[u],o))}function v(e,t,n){var i=n.a;n.a=n.b,n.b=i;var s=r.eq(e,n,p),o=e[s],u=e[s-1];u.upperIds=o.upperIds,e.splice(s,1)}function m(e,t){var n=e.length,r=t.length,i=[];for(var c=0;c<n;++c)i.push(new f(e[c],null,s,c));for(var c=0;c<r;++c){var p=t[c],m=e[p[0]],g=e[p[1]];m[0]<g[0]?i.push(new f(m,g,u,c),new f(g,m,o,c)):m[0]>g[0]&&i.push(new f(g,m,u,c),new f(m,g,o,c))}i.sort(l);var y=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),b=[new a([y,1],[y,0],-1,[],[],[],[])],w=[];for(var c=0,E=i.length;c<E;++c){var S=i[c],x=S.type;x===s?h(w,b,e,S.a,S.idx):x===u?d(b,e,S):v(b,e,S)}return w}var r=e("binary-search-bounds"),i=e("robust-orientation")[3],s=0,o=1,u=2;t.exports=m},{"binary-search-bounds":246,"robust-orientation":218}],245:[function(e,t,n){"use strict";function i(e,t){this.stars=e,this.edges=t}function o(e,t,n){for(var r=1,i=e.length;r<i;r+=2)if(e[r-1]===t&&e[r]===n){e[r-1]=e[i-2],e[r]=e[i-1],e.length=i-2;return}}function u(e,t){var n=new Array(e);for(var r=0;r<e;++r)n[r]=[];return new i(n,t)}var r=e("binary-search-bounds");t.exports=u;var s=i.prototype;s.isConstraint=function(){function t(e,t){return e[0]-t[0]||e[1]-t[1]}var e=[0,0];return function(n,i){return e[0]=Math.min(n,i),e[1]=Math.max(n,i),r.eq(this.edges,e,t)>=0}}(),s.removeTriangle=function(e,t,n){var r=this.stars;o(r[e],t,n),o(r[t],n,e),o(r[n],e,t)},s.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},s.opposite=function(e,t){var n=this.stars[t];for(var r=1,i=n.length;r<i;r+=2)if(n[r]===e)return n[r-1];return-1},s.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},s.edges=function(){var e=this.stars,t=[];for(var n=0,r=e.length;n<r;++n){var i=e[n];for(var s=0,o=i.length;s<o;s+=2)t.push([i[s],i[s+1]])}return t},s.cells=function(){var e=this.stars,t=[];for(var n=0,r=e.length;n<r;++n){var i=e[n];for(var s=0,o=i.length;s<o;s+=2){var u=i[s],a=i[s+1];n<Math.min(u,a)&&t.push([n,u,a])}}return t}},{"binary-search-bounds":246}],246:[function(e,t,n){arguments[4][123][0].apply(n,arguments)},{dup:123}],247:[function(e,t,n){"use strict";function a(e,t){var n=new Array(e.length-1);for(var r=1;r<e.length;++r){var i=n[r-1]=new Array(e.length-1);for(var s=0,o=0;s<e.length;++s){if(s===t)continue;i[o++]=e[r][s]}}return n}function f(e){var t=new Array(e);for(var n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-2,"]"].join("")}return t}function l(e){if(e.length===1)return e[0];if(e.length===2)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",l(e.slice(0,t)),",",l(e.slice(t)),")"].join("")}function c(e,t){if(e.charAt(0)==="m"){if(t.charAt(0)==="w"){var n=e.split("[");return["w",t.substr(1),"m",n[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return c(t,e)}function h(e){return e&!0?"-":""}function p(e){if(e.length===2)return[["diff(",c(e[0][0],e[1][1]),",",c(e[1][0],e[0][1]),")"].join("")];var t=[];for(var n=0;n<e.length;++n)t.push(["scale(",l(p(a(e,n))),",",h(n),e[0][n],")"].join(""));return t}function d(e,t){var n=[];for(var r=0;r<t-2;++r)n.push(["prod(m",e,"[",r,"],m",e,"[",r,"])"].join(""));return l(n)}function v(e){var t=[],n=[],u=f(e);for(var c=0;c<e;++c)u[0][c]="1",u[e-1][c]="w"+c;for(var c=0;c<e;++c)(c&1)===0?t.push.apply(t,p(a(u,c))):n.push.apply(n,p(a(u,c)));var h=l(t),v=l(n),m="exactInSphere"+e,g=[];for(var c=0;c<e;++c)g.push("m"+c);var y=["function ",m,"(",g.join(),"){"];for(var c=0;c<e;++c){y.push("var w",c,"=",d(c,e),";");for(var b=0;b<e;++b)b!==c&&y.push("var w",c,"m",b,"=scale(w",c,",m",b,"[0]);")}y.push("var p=",h,",n=",v,",d=diff(p,n);return d[d.length-1];}return ",m);var w=new Function("sum","diff","prod","scale",y.join(""));return w(i,s,r,o)}function m(){return 0}function g(){return 0}function y(){return 0}function w(e){var t=b[e.length];return t||(t=b[e.length]=v(e.length)),t.apply(undefined,e)}function E(){while(b.length<=u)b.push(v(b.length));var e=[],n=["slow"];for(var r=0;r<=u;++r)e.push("a"+r),n.push("o"+r);var i=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var r=2;r<=u;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),n.push(i.join(""));var s=Function.apply(undefined,n);t.exports=s.apply(undefined,[w].concat(b));for(var r=0;r<=u;++r)t.exports[r]=b[r]}var r=e("two-product"),i=e("robust-sum"),s=e("robust-subtract"),o=e("robust-scale"),u=6,b=[m,g,y];E()},{"robust-scale":219,"robust-subtract":220,"robust-sum":221,"two-product":235}],248:[function(e,t,n){"use strict";function p(e){var t=f(e),n=a(u(t),e);return n<0?[t,c(t,Infinity)]:n>0?[c(t,-Infinity),t]:[t,t]}function d(e,t){var n=new Array(t.length);for(var r=0;r<t.length;++r){var i=t[r],s=e[i[0]],o=e[i[1]];n[r]=[Math.min(s[0],o[0]),Math.min(s[1],o[1]),Math.max(s[0],o[0]),Math.max(s[1],o[1])]}return n}function v(e){var t=new Array(e.length);for(var n=0;n<e.length;++n){var r=e[n];t[n]=[r[0],r[1],r[0],r[1]]}return t}function m(e,t,n){var r=[];return i(n,function(n,i){var s=t[n],u=t[i];if(s[0]===u[0]||s[0]===u[1]||s[1]===u[0]||s[1]===u[1])return;var a=e[s[0]],f=e[s[1]],l=e[u[0]],c=e[u[1]];o(a,f,l,c)&&r.push([n,i])}),r}function g(e,t,n,r){var s=[];return i(n,r,function(n,r){var i=t[n];if(i[0]===r||i[1]===r)return;var u=e[r],a=e[i[0]],f=e[i[1]];o(a,f,u,u)&&s.push([n,r])}),s}function y(e,t,n,r,i){function y(t){if(t>=e.length)return s[t-e.length];var n=e[t];return[u(n[0]),u(n[1])]}var s=[];for(var o=0;o<n.length;++o){var f=n[o],c=f[0],p=f[1],d=t[c],v=t[p],m=h(l(e[d[0]]),l(e[d[1]]),l(e[v[0]]),l(e[v[1]]));if(!m)continue;var g=s.length+e.length;s.push(m),r.push([c,g],[p,g])}r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=y(e[1]),r=y(t[1]);return a(n[0],r[0])||a(n[1],r[1])});for(var o=r.length-1;o>=0;--o){var b=r[o],c=b[0],w=t[c],E=w[0],S=w[1],x=e[E],T=e[S];if((x[0]-T[0]||x[1]-T[1])<0){var N=E;E=S,S=N}w[0]=E;var C=w[1]=b[1],k;i&&(k=w[2]);while(o>0&&r[o-1][0]===c){var b=r[--o],L=b[1];i?t.push([C,L,k]):t.push([C,L]),C=L}i?t.push([C,S,k]):t.push([C,S])}return s}function b(e,t,n){var s=e.length+t.length,o=new r(s),u=n;for(var a=0;a<t.length;++a){var l=t[a],c=p(l[0]),h=p(l[1]);u.push([c[0],h[0],c[1],h[1]]),e.push([f(l[0]),f(l[1])])}i(u,function(e,t){o.link(e,t)});var d=0,v=!0,m=new Array(s);for(var a=0;a<s;++a){var g=o.find(a);g===a?(m[a]=d,e[d++]=e[a]):(v=!1,m[a]=-1)}e.length=d;if(v)return null;for(var a=0;a<s;++a)m[a]<0&&(m[a]=m[o.find(a)]);return m}function w(e,t){return e[0]-t[0]||e[1]-t[1]}function E(e,t){var n=e[0]-t[0]||e[1]-t[1];return n?n:e[2]<t[2]?-1:e[2]>t[2]?1:0}function S(e,t,n){if(e.length===0)return;if(t)for(var r=0;r<e.length;++r){var i=e[r],s=t[i[0]],o=t[i[1]];i[0]=Math.min(s,o),i[1]=Math.max(s,o)}else for(var r=0;r<e.length;++r){var i=e[r],s=i[0],o=i[1];i[0]=Math.min(s,o),i[1]=Math.max(s,o)}n?e.sort(E):e.sort(w);var u=1;for(var r=1;r<e.length;++r){var a=e[r-1],f=e[r];if(f[0]===a[0]&&f[1]===a[1]&&(!n||f[2]===a[2]))continue;e[u++]=f}e.length=u}function x(e,t,n){var r=d(e,t),i=m(e,t,r),s=v(e),o=g(e,t,r,s),u=y(e,t,i,o,n),a=b(e,u,s);return S(t,a,n),a?!0:i.length>0||o.length>0}function T(e,t,n){var r=!1,i;if(n){i=t;var s=new Array(t.length);for(var o=0;o<t.length;++o){var u=t[o];s[o]=[u[0],u[1],n[o]]}t=s}while(x(e,t,!!n))r=!0;if(!!n&&r){i.length=0,n.length=0;for(var o=0;o<t.length;++o){var u=t[o];i.push([u[0],u[1]]),n.push(u[2])}}return r}t.exports=T;var r=e("union-find"),i=e("box-intersect"),s=e("compare-cell"),o=e("robust-segment-intersect"),u=e("big-rat"),a=e("big-rat/cmp"),f=e("big-rat/to-float"),l=e("rat-vec"),c=e("nextafter"),h=e("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":249,"big-rat":253,"big-rat/cmp":251,"big-rat/to-float":266,"box-intersect":267,"compare-cell":60,nextafter:275,"rat-vec":277,"robust-segment-intersect":280,"union-find":281}],249:[function(e,t,n){"use strict";function c(e,t){return s(r(e[0],t[1]),r(e[1],t[0]))}function h(e,t,n,r){var s=u(t,e),l=u(r,n),h=c(s,l);if(o(h)===0)return null;var p=u(e,n),d=c(l,p),v=i(d,h);return a(e,f(s,v))}t.exports=h;var r=e("big-rat/mul"),i=e("big-rat/div"),s=e("big-rat/sub"),o=e("big-rat/sign"),u=e("rat-vec/sub"),a=e("rat-vec/add"),f=e("rat-vec/muls"),l=e("big-rat/to-float")},{"big-rat/div":252,"big-rat/mul":262,"big-rat/sign":264,"big-rat/sub":265,"big-rat/to-float":266,"rat-vec/add":276,"rat-vec/muls":278,"rat-vec/sub":279}],250:[function(e,t,n){"use strict";function i(e,t){return r(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}var r=e("./lib/rationalize");t.exports=i},{"./lib/rationalize":260}],251:[function(e,t,n){"use strict";function r(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}t.exports=r},{}],252:[function(e,t,n){"use strict";function i(e,t){return r(e[0].mul(t[1]),e[1].mul(t[0]))}var r=e("./lib/rationalize");t.exports=i},{"./lib/rationalize":260}],253:[function(e,t,n){"use strict";function f(e,t){if(r(e))return t?a(e,f(t)):[e[0].clone(),e[1].clone()];var n=0,l,c;if(i(e))l=e.clone();else if(typeof e=="string")l=o(e);else{if(e===0)return[s(0),s(1)];if(e===Math.floor(e))l=s(e);else{while(e!==Math.floor(e))e*=Math.pow(2,256),n-=256;l=s(e)}}if(r(t))l.mul(t[1]),c=t[0].clone();else if(i(t))c=t.clone();else if(typeof t=="string")c=o(t);else if(!t)c=s(1);else if(t===Math.floor(t))c=s(t);else{while(t!==Math.floor(t))t*=Math.pow(2,256),n+=256;c=s(t)}return n>0?l=l.shln(n):n<0&&(c=c.shln(-n)),u(l,c)}var r=e("./is-rat"),i=e("./lib/is-bn"),s=e("./lib/num-to-bn"),o=e("./lib/str-to-bn"),u=e("./lib/rationalize"),a=e("./div");t.exports=f},{"./div":252,"./is-rat":254,"./lib/is-bn":258,"./lib/num-to-bn":259,"./lib/rationalize":260,"./lib/str-to-bn":261}],254:[function(e,t,n){"use strict";function i(e){return Array.isArray(e)&&e.length===2&&r(e[0])&&r(e[1])}var r=e("./lib/is-bn");t.exports=i},{"./lib/is-bn":258}],255:[function(e,t,n){"use strict";function i(e){return e.cmp(new r(0))}var r=e("bn.js");t.exports=i},{"bn.js":263}],256:[function(e,t,n){"use strict";function r(e){var t=e.length,n=e.words,r=0;if(t===1)r=n[0];else if(t===2)r=n[0]+n[1]*67108864;else{var r=0;for(var i=0;i<t;i++){var s=n[i];r+=s*Math.pow(67108864,i)}}return e.sign?-r:r}t.exports=r},{}],257:[function(e,t,n){"use strict";function s(e){var t=i(r.lo(e));if(t<32)return t;var n=i(r.hi(e));return n>20?52:n+32}var r=e("double-bits"),i=e("bit-twiddle").countTrailingZeros;t.exports=s},{"bit-twiddle":50,"double-bits":274}],258:[function(e,t,n){"use strict";function i(e){return e&&typeof e=="object"&&Boolean(e.words)}var r=e("bn.js");t.exports=i},{"bn.js":263}],259:[function(e,t,n){"use strict";function s(e){var t=i.exponent(e);return t<52?new r(e):(new r(e*Math.pow(2,52-t))).shln(t-52)}var r=e("bn.js"),i=e("double-bits");t.exports=s},{"bn.js":263,"double-bits":274}],260:[function(e,t,n){"use strict";function s(e,t){var n=i(e),s=i(t);if(n===0)return[r(0),r(1)];if(s===0)return[r(0),r(0)];s<0&&(e=e.neg(),t=t.neg());var o=e.gcd(t);return o.cmpn(1)?[e.div(o),t.div(o)]:[e,t]}var r=e("./num-to-bn"),i=e("./bn-sign");t.exports=s},{"./bn-sign":255,"./num-to-bn":259}],261:[function(e,t,n){"use strict";function i(e){return new r(e)}var r=e("bn.js");t.exports=i},{"bn.js":263}],262:[function(e,t,n){"use strict";function i(e,t){return r(e[0].mul(t[0]),e[1].mul(t[1]))}var r=e("./lib/rationalize");t.exports=i},{"./lib/rationalize":260}],263:[function(e,t,n){(function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(e!==null&&typeof e=="object"&&Array.isArray(e.words))return e;this.sign=!1,this.words=null,this.length=0,this.red=null;if(t==="le"||t==="be")n=t,t=10;e!==null&&this._init(e||0,t||10,n||"be")}function s(e,t,n){var r=0,i=Math.min(e.length,n);for(var s=t;s<i;s++){var o=e.charCodeAt(s)-48;r<<=4,o>=49&&o<=54?r|=o-49+10:o>=17&&o<=22?r|=o-17+10:r|=o&15}return r}function o(e,t,n,r){var i=0,s=Math.min(e.length,n);for(var o=t;o<s;o++){var u=e.charCodeAt(o)-48;i*=r,u>=49?i+=u-49+10:u>=17?i+=u-17+10:i+=u}return i}function c(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=(new i(1)).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function h(){c.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){c.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function d(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(e){if(typeof e=="string"){var t=i._prime(e);this.m=t.p,this.prime=t}else this.m=e,this.prime=null}function g(e){m.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=(new i(1)).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26,i.prototype._init=function(t,r,i){if(typeof t=="number")return this._initNumber(t,r,i);if(typeof t=="object")return this._initArray(t,r,i);r==="hex"&&(r=16),n(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var s=0;t[0]==="-"&&s++,r===16?this._parseHex(t,s):this._parseBase(t,r,s),t[0]==="-"&&(this.sign=!0),this.strip();if(i!=="le")return;this._initArray(this.toArray(),r,i)},i.prototype._initNumber=function(t,r,i){t<0&&(this.sign=!0,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3);if(i!=="le")return;this._initArray(this.toArray(),r,i)},i.prototype._initArray=function(t,r,i){n(typeof t.length=="number");if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var o=0;if(i==="be")for(var s=t.length-1,u=0;s>=0;s-=3){var a=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[u]|=a<<o&67108863,this.words[u+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,u++)}else if(i==="le")for(var s=0,u=0;s<t.length;s+=3){var a=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[u]|=a<<o&67108863,this.words[u+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,u++)}return this.strip()},i.prototype._parseHex=function(t,n){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0;for(var r=t.length-6,o=0;r>=n;r-=6){var u=s(t,r,r+6);this.words[o]|=u<<i&67108863,this.words[o+1]|=u>>>26-i&4194303,i+=24,i>=26&&(i-=26,o++)}if(r+6!==n){var u=s(t,n,r+6);this.words[o]|=u<<i&67108863,this.words[o+1]|=u>>>26-i&4194303}this.strip()},i.prototype._parseBase=function(t,n,r){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=n)i++;i--,s=s/n|0;var u=t.length-r,a=u%i,f=Math.min(u,u-a)+r,l=0;for(var c=r;c<f;c+=i)l=o(t,c,c+i,n),this.imuln(s),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(a!==0){var h=1,l=o(t,c,t.length,n);for(var c=0;c<a;c++)h*=n;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},i.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.sign=this.sign,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype.strip=function(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.sign=!1),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function y(e,t){e=e||10;if(e===16||e==="hex"){var r="",i=0,t=t|0||1,s=0;for(var o=0;o<this.length;o++){var l=this.words[o],c=((l<<i|s)&16777215).toString(16);s=l>>>24-i&16777215,s!==0||o!==this.length-1?r=u[6-c.length]+c+r:r=c+r,i+=2,i>=26&&(i-=26,o--)}s!==0&&(r=s.toString(16)+r);while(r.length%t!==0)r="0"+r;return this.sign&&(r="-"+r),r}if(e===(e|0)&&e>=2&&e<=36){var h=a[e],p=f[e],r="",d=this.clone();d.sign=!1;while(d.cmpn(0)!==0){var v=d.modn(p).toString(e);d=d.idivn(p),d.cmpn(0)!==0?r=u[h-v.length]+v+r:r=v+r}return this.cmpn(0)===0&&(r="0"+r),this.sign&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toArray=function(t){this.strip();var n=new Array(this.byteLength());n[0]=0;var r=this.clone();if(t!=="le")for(var i=0;r.cmpn(0)!==0;i++){var s=r.andln(255);r.ishrn(8),n[n.length-i-1]=s}else for(var i=0;r.cmpn(0)!==0;i++){var s=r.andln(255);r.ishrn(8),n[i]=s}return n},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var n=t,r=0;return n>=4096&&(r+=13,n>>>=13),n>=64&&(r+=7,n>>>=7),n>=8&&(r+=4,n>>>=4),n>=2&&(r+=2,n>>>=2),r+n},i.prototype._zeroBits=function(t){if(t===0)return 26;var n=t,r=0;return(n&8191)===0&&(r+=13,n>>>=13),(n&127)===0&&(r+=7,n>>>=7),(n&15)===0&&(r+=4,n>>>=4),(n&3)===0&&(r+=2,n>>>=2),(n&1)===0&&r++,r},i.prototype.bitLength=function(){var t=0,n=this.words[this.length-1],t=this._countBits(n);return(this.length-1)*26+t},i.prototype.zeroBits=function(){if(this.cmpn(0)===0)return 0;var t=0;for(var n=0;n<this.length;n++){var r=this._zeroBits(this.words[n]);t+=r;if(r!==26)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.neg=function(){if(this.cmpn(0)===0)return this.clone();var t=this.clone();return t.sign=!this.sign,t},i.prototype.ior=function(t){this.sign=this.sign||t.sign;while(this.length<t.length)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.iand=function(t){this.sign=this.sign&&t.sign;var n;this.length>t.length?n=t:n=this;for(var r=0;r<n.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=n.length,this.strip()},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.ixor=function(t){this.sign=this.sign||t.sign;var n,r;this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=n.words[i]^r.words[i];if(this!==n)for(;i<n.length;i++)this.words[i]=n.words[i];return this.length=n.length,this.strip()},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.setn=function(t,r){n(typeof t=="number"&&t>=0);var i=t/26|0,s=t%26;while(this.length<=i)this.words[this.length++]=0;return r?this.words[i]=this.words[i]|1<<s:this.words[i]=this.words[i]&~(1<<s),this.strip()},i.prototype.iadd=function(t){if(this.sign&&!t.sign){this.sign=!1;var n=this.isub(t);return this.sign=!this.sign,this._normSign()}if(!this.sign&&t.sign){t.sign=!1;var n=this.isub(t);return t.sign=!0,n._normSign()}var r,i;this.length>t.length?(r=this,i=t):(r=t,i=this);var s=0;for(var o=0;o<i.length;o++){var n=r.words[o]+i.words[o]+s;this.words[o]=n&67108863,s=n>>>26}for(;s!==0&&o<r.length;o++){var n=r.words[o]+s;this.words[o]=n&67108863,s=n>>>26}this.length=r.length;if(s!==0)this.words[this.length]=s,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){if(t.sign&&!this.sign){t.sign=!1;var n=this.sub(t);return t.sign=!0,n}if(!t.sign&&this.sign){this.sign=!1;var n=t.sub(this);return this.sign=!0,n}return this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(t.sign){t.sign=!1;var n=this.iadd(t);return t.sign=!0,n._normSign()}if(this.
sign)return this.sign=!1,this.iadd(t),this.sign=!0,this._normSign();var r=this.cmp(t);if(r===0)return this.sign=!1,this.length=1,this.words[0]=0,this;var i,s;r>0?(i=this,s=t):(i=t,s=this);var o=0;for(var u=0;u<s.length;u++){var n=i.words[u]-s.words[u]+o;o=n>>26,this.words[u]=n&67108863}for(;o!==0&&u<i.length;u++){var n=i.words[u]+o;o=n>>26,this.words[u]=n&67108863}if(o===0&&u<i.length&&i!==this)for(;u<i.length;u++)this.words[u]=i.words[u];return this.length=Math.max(this.length,u),i!==this&&(this.sign=!0),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)},i.prototype._smallMulTo=function(t,n){n.sign=t.sign!==this.sign,n.length=this.length+t.length;var r=0;for(var i=0;i<n.length-1;i++){var s=r>>>26,o=r&67108863,u=Math.min(i,t.length-1);for(var a=Math.max(0,i-this.length+1);a<=u;a++){var f=i-a,l=this.words[f]|0,c=t.words[a]|0,h=l*c,p=h&67108863;s=s+(h/67108864|0)|0,p=p+o|0,o=p&67108863,s=s+(p>>>26)|0}n.words[i]=o,r=s}return r!==0?n.words[i]=r:n.length--,n.strip()},i.prototype._bigMulTo=function(t,n){n.sign=t.sign!==this.sign,n.length=this.length+t.length;var r=0,i=0;for(var s=0;s<n.length-1;s++){var o=i;i=0;var u=r&67108863,a=Math.min(s,t.length-1);for(var f=Math.max(0,s-this.length+1);f<=a;f++){var l=s-f,c=this.words[l]|0,h=t.words[f]|0,p=c*h,d=p&67108863;o=o+(p/67108864|0)|0,d=d+u|0,u=d&67108863,o=o+(d>>>26)|0,i+=o>>>26,o&=67108863}n.words[s]=u,r=o,o=i}return r!==0?n.words[s]=r:n.length--,n.strip()},i.prototype.mulTo=function(t,n){var r;return this.length+t.length<63?r=this._smallMulTo(t,n):r=this._bigMulTo(t,n),r},i.prototype.mul=function(t){var n=new i(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},i.prototype.imul=function(t){if(this.cmpn(0)===0||t.cmpn(0)===0)return this.words[0]=0,this.length=1,this;var n=this.length,r=t.length;this.sign=t.sign!==this.sign,this.length=this.length+t.length,this.words[this.length-1]=0;for(var i=this.length-2;i>=0;i--){var s=0,o=0,u=Math.min(i,r-1);for(var a=Math.max(0,i-n+1);a<=u;a++){var f=i-a,l=this.words[f],c=t.words[a],h=l*c,p=h&67108863;s+=h/67108864|0,p+=o,o=p&67108863,s+=p>>>26}this.words[i]=o,this.words[i+1]+=s,s=0}var s=0;for(var f=1;f<this.length;f++){var d=this.words[f]+s;this.words[f]=d&67108863,s=d>>>26}return this.strip()},i.prototype.imuln=function(t){n(typeof t=="number");var r=0;for(var i=0;i<this.length;i++){var s=this.words[i]*t,o=(s&67108863)+(r&67108863);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=o&67108863}return r!==0&&(this.words[i]=r,this.length++),this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.mul(this)},i.prototype.ishln=function(t){n(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(r!==0){var o=0;for(var u=0;u<this.length;u++){var a=this.words[u]&s,f=this.words[u]-a<<r;this.words[u]=f|o,o=a>>>26-r}o&&(this.words[u]=o,this.length++)}if(i!==0){for(var u=this.length-1;u>=0;u--)this.words[u+i]=this.words[u];for(var u=0;u<i;u++)this.words[u]=0;this.length+=i}return this.strip()},i.prototype.ishrn=function(t,r,i){n(typeof t=="number"&&t>=0);var s;r?s=(r-r%26)/26:s=0;var o=t%26,u=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,f=i;s-=u,s=Math.max(0,s);if(f){for(var l=0;l<u;l++)f.words[l]=this.words[l];f.length=u}if(u!==0)if(this.length>u){this.length-=u;for(var l=0;l<this.length;l++)this.words[l]=this.words[l+u]}else this.words[0]=0,this.length=1;var c=0;for(var l=this.length-1;l>=0&&(c!==0||l>=s);l--){var h=this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&a}return f&&c!==0&&(f.words[f.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip(),this},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.testn=function(t){n(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26,s=1<<r;if(this.length<=i)return!1;var o=this.words[i];return!!(o&s)},i.prototype.imaskn=function(t){n(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26;n(!this.sign,"imaskn works only with positive numbers"),r!==0&&i++,this.length=Math.min(i,this.length);if(r!==0){var s=67108863^67108863>>>r<<r;this.words[this.length-1]&=s}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return n(typeof t=="number"),t<0?this.isubn(-t):this.sign?this.length===1&&this.words[0]<t?(this.words[0]=t-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(t),this.sign=!0,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},i.prototype.isubn=function(t){n(typeof t=="number");if(t<0)return this.iaddn(-t);if(this.sign)return this.sign=!1,this.iaddn(t),this.sign=!0,this;this.words[0]-=t;for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.sign=!1,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,r,i){var s=t.length+i,o;if(this.words.length<s){var u=new Array(s);for(var o=0;o<this.length;o++)u[o]=this.words[o];this.words=u}else o=this.length;this.length=Math.max(this.length,s);for(;o<this.length;o++)this.words[o]=0;var a=0;for(var o=0;o<t.length;o++){var f=this.words[o+i]+a,l=t.words[o]*r;f-=l&67108863,a=(f>>26)-(l/67108864|0),this.words[o+i]=f&67108863}for(;o<this.length-i;o++){var f=this.words[o+i]+a;a=f>>26,this.words[o+i]=f&67108863}if(a===0)return this.strip();n(a===-1),a=0;for(var o=0;o<this.length;o++){var f=-this.words[o]+a;a=f>>26,this.words[o]=f&67108863}return this.sign=!0,this.strip()},i.prototype._wordDiv=function(t,n){var r=this.length-t.length,s=this.clone(),o=t,u=o.words[o.length-1],a=this._countBits(u);r=26-a,r!==0&&(o=o.shln(r),s.ishln(r),u=o.words[o.length-1]);var f=s.length-o.length,l;if(n!=="mod"){l=new i(null),l.length=f+1,l.words=new Array(l.length);for(var c=0;c<l.length;c++)l.words[c]=0}var h=s.clone()._ishlnsubmul(o,1,f);h.sign||(s=h,l&&(l.words[f]=1));for(var p=f-1;p>=0;p--){var d=s.words[o.length+p]*67108864+s.words[o.length+p-1];d=Math.min(d/u|0,67108863),s._ishlnsubmul(o,d,p);while(s.sign)d--,s.sign=!1,s._ishlnsubmul(o,1,p),s.cmpn(0)!==0&&(s.sign=!s.sign);l&&(l.words[p]=d)}return l&&l.strip(),s.strip(),n!=="div"&&r!==0&&s.ishrn(r),{div:l?l:null,mod:s}},i.prototype.divmod=function(t,r){n(t.cmpn(0)!==0);if(this.sign&&!t.sign){var s=this.neg().divmod(t,r),o,u;return r!=="mod"&&(o=s.div.neg()),r!=="div"&&(u=s.mod.cmpn(0)===0?s.mod:t.sub(s.mod)),{div:o,mod:u}}if(!this.sign&&t.sign){var s=this.divmod(t.neg(),r),o;return r!=="mod"&&(o=s.div.neg()),{div:o,mod:s.mod}}if(this.sign&&t.sign)return this.neg().divmod(t.neg(),r);if(t.length>this.length||this.cmp(t)<0)return{div:new i(0),mod:this};if(t.length===1)return r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))};return this._wordDiv(t,r)},i.prototype.div=function(t){return this.divmod(t,"div").div},i.prototype.mod=function(t){return this.divmod(t,"mod").mod},i.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.cmpn(0)===0)return n.div;var r=n.div.sign?n.mod.isub(t):n.mod,i=t.shrn(1),s=t.andln(1),o=r.cmp(i);return o<0||s===1&&o===0?n.div:n.div.sign?n.div.isubn(1):n.div.iaddn(1)},i.prototype.modn=function(t){n(t<=67108863);var r=(1<<26)%t,i=0;for(var s=this.length-1;s>=0;s--)i=(r*i+this.words[s])%t;return i},i.prototype.idivn=function(t){n(t<=67108863);var r=0;for(var i=this.length-1;i>=0;i--){var s=this.words[i]+r*67108864;this.words[i]=s/t|0,r=s%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){n(!t.sign),n(t.cmpn(0)!==0);var r=this,s=t.clone();r.sign?r=r.mod(t):r=r.clone();var o=new i(1),u=new i(0),a=new i(0),f=new i(1),l=0;while(r.isEven()&&s.isEven())r.ishrn(1),s.ishrn(1),++l;var c=s.clone(),h=r.clone();while(r.cmpn(0)!==0){while(r.isEven())r.ishrn(1),o.isEven()&&u.isEven()?(o.ishrn(1),u.ishrn(1)):(o.iadd(c).ishrn(1),u.isub(h).ishrn(1));while(s.isEven())s.ishrn(1),a.isEven()&&f.isEven()?(a.ishrn(1),f.ishrn(1)):(a.iadd(c).ishrn(1),f.isub(h).ishrn(1));r.cmp(s)>=0?(r.isub(s),o.isub(a),u.isub(f)):(s.isub(r),a.isub(o),f.isub(u))}return{a:a,b:f,gcd:s.ishln(l)}},i.prototype._invmp=function(t){n(!t.sign),n(t.cmpn(0)!==0);var r=this,s=t.clone();r.sign?r=r.mod(t):r=r.clone();var o=new i(1),u=new i(0),a=s.clone();while(r.cmpn(1)>0&&s.cmpn(1)>0){while(r.isEven())r.ishrn(1),o.isEven()?o.ishrn(1):o.iadd(a).ishrn(1);while(s.isEven())s.ishrn(1),u.isEven()?u.ishrn(1):u.iadd(a).ishrn(1);r.cmp(s)>=0?(r.isub(s),o.isub(u)):(s.isub(r),u.isub(o))}return r.cmpn(1)===0?o:u},i.prototype.gcd=function(t){if(this.cmpn(0)===0)return t.clone();if(t.cmpn(0)===0)return this.clone();var n=this.clone(),r=t.clone();n.sign=!1,r.sign=!1;for(var i=0;n.isEven()&&r.isEven();i++)n.ishrn(1),r.ishrn(1);do{while(n.isEven())n.ishrn(1);while(r.isEven())r.ishrn(1);var s=n.cmp(r);if(s<0){var o=n;n=r,r=o}else if(s===0||r.cmpn(1)===0)break;n.isub(r)}while(!0);return r.ishln(i)},i.prototype.invm=function(t){return this.egcd(t).a.mod(t)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){n(typeof t=="number");var r=t%26,i=(t-r)/26,s=1<<r;if(this.length<=i){for(var o=this.length;o<i+1;o++)this.words[o]=0;return this.words[i]|=s,this.length=i+1,this}var u=s;for(var o=i;u!==0&&o<this.length;o++){var a=this.words[o];a+=u,u=a>>>26,a&=67108863,this.words[o]=a}return u!==0&&(this.words[o]=u,this.length++),this},i.prototype.cmpn=function(t){var n=t<0;n&&(t=-t);if(this.sign&&!n)return-1;if(!this.sign&&n)return 1;t&=67108863,this.strip();var r;if(this.length>1)r=1;else{var i=this.words[0];r=i===t?0:i<t?-1:1}return this.sign&&(r=-r),r},i.prototype.cmp=function(t){if(this.sign&&!t.sign)return-1;if(!this.sign&&t.sign)return 1;var n=this.ucmp(t);return this.sign?-n:n},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var n=0;for(var r=this.length-1;r>=0;r--){var i=this.words[r],s=t.words[r];if(i===s)continue;i<s?n=-1:i>s&&(n=1);break}return n},i.red=function(t){return new m(t)},i.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(!this.sign,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},c.prototype.ireduce=function(t){var n=t,r;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),r=n.bitLength();while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return i===0?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n.strip(),n},c.prototype.split=function(t,n){t.ishrn(this.n,0,n)},c.prototype.imulK=function(t){return t.imul(this.k)},r(h,c),h.prototype.split=function(t,n){var r=4194303,i=Math.min(t.length,9);for(var s=0;s<i;s++)n.words[s]=t.words[s];n.length=i;if(t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];n.words[n.length++]=o&r;for(var s=10;s<t.length;s++){var u=t.words[s];t.words[s-10]=(u&r)<<4|o>>>22,o=u}t.words[s-10]=o>>>22,t.length-=9},h.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;var n,r=0;for(var i=0;i<t.length;i++){var s=t.words[i];n=s*64,r+=s*977,n+=r/67108864|0,r&=67108863,t.words[i]=r,r=n}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t},r(p,c),r(d,c),r(v,c),v.prototype.imulK=function(t){var n=0;for(var r=0;r<t.length;r++){var i=t.words[r]*19+n,s=i&67108863;i>>>=26,t.words[r]=s,n=i}return n!==0&&(t.words[t.length++]=n),t},i._prime=function b(e){if(l[e])return l[e];var b;if(e==="k256")b=new h;else if(e==="p224")b=new p;else if(e==="p192")b=new d;else{if(e!=="p25519")throw new Error("Unknown prime "+e);b=new v}return l[e]=b,b},m.prototype._verify1=function(t){n(!t.sign,"red works only with positives"),n(t.red,"red works only with red numbers")},m.prototype._verify2=function(t,r){n(!t.sign&&!r.sign,"red works only with positives"),n(t.red&&t.red===r.red,"red works only with red numbers")},m.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.mod(this.m)._forceRed(this)},m.prototype.neg=function(t){var n=t.clone();return n.sign=!n.sign,n.iadd(this.m)._forceRed(this)},m.prototype.add=function(t,n){this._verify2(t,n);var r=t.add(n);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},m.prototype.iadd=function(t,n){this._verify2(t,n);var r=t.iadd(n);return r.cmp(this.m)>=0&&r.isub(this.m),r},m.prototype.sub=function(t,n){this._verify2(t,n);var r=t.sub(n);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},m.prototype.isub=function(t,n){this._verify2(t,n);var r=t.isub(n);return r.cmpn(0)<0&&r.iadd(this.m),r},m.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.shln(n))},m.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},m.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},m.prototype.isqr=function(t){return this.imul(t,t)},m.prototype.sqr=function(t){return this.mul(t,t)},m.prototype.sqrt=function(t){if(t.cmpn(0)===0)return t.clone();var r=this.m.andln(3);n(r%2===1);if(r===3){var s=this.m.add(new i(1)).ishrn(2),o=this.pow(t,s);return o}var u=this.m.subn(1),a=0;while(u.cmpn(0)!==0&&u.andln(1)===0)a++,u.ishrn(1);n(u.cmpn(0)!==0);var f=(new i(1)).toRed(this),l=f.redNeg(),c=this.m.subn(1).ishrn(1),h=this.m.bitLength();h=(new i(2*h*h)).toRed(this);while(this.pow(h,c).cmp(l)!==0)h.redIAdd(l);var p=this.pow(h,u),o=this.pow(t,u.addn(1).ishrn(1)),d=this.pow(t,u),v=a;while(d.cmp(f)!==0){var m=d;for(var g=0;m.cmp(f)!==0;g++)m=m.redSqr();n(g<v);var y=this.pow(p,(new i(1)).ishln(v-g-1));o=o.redMul(y),p=y.redSqr(),d=d.redMul(p),v=g}return o},m.prototype.invm=function(t){var n=t._invmp(this.m);return n.sign?(n.sign=!1,this.imod(n).redNeg()):this.imod(n)},m.prototype.pow=function(t,n){var r=[];if(n.cmpn(0)===0)return new i(1);var s=n.clone();while(s.cmpn(0)!==0)r.push(s.andln(1)),s.ishrn(1);var o=t;for(var u=0;u<r.length;u++,o=this.sqr(o))if(r[u]!==0)break;if(++u<r.length)for(var s=this.sqr(o);u<r.length;u++,s=this.sqr(s)){if(r[u]===0)continue;o=this.mul(o,s)}return o},m.prototype.convertTo=function(t){var n=t.mod(this.m);return n===t?n.clone():n},m.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},i.mont=function(t){return new g(t)},r(g,m),g.prototype.convertTo=function(t){return this.imod(t.shln(this.shift))},g.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},g.prototype.imul=function(t,n){if(t.cmpn(0)===0||n.cmpn(0)===0)return t.words[0]=0,t.length=1,t;var r=t.imul(n),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(i).ishrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},g.prototype.mul=function(t,n){if(t.cmpn(0)===0||n.cmpn(0)===0)return(new i(0))._forceRed(this);var r=t.mul(n),s=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(s).ishrn(this.shift),u=o;return o.cmp(this.m)>=0?u=o.isub(this.m):o.cmpn(0)<0&&(u=o.iadd(this.m)),u._forceRed(this)},g.prototype.invm=function(t){var n=this.imod(t._invmp(this.m).mul(this.r2));return n._forceRed(this)}})(typeof t=="undefined"||t,this)},{}],264:[function(e,t,n){"use strict";function i(e){return r(e[0])*r(e[1])}var r=e("./lib/bn-sign");t.exports=i},{"./lib/bn-sign":255}],265:[function(e,t,n){"use strict";function i(e,t){return r(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}var r=e("./lib/rationalize");t.exports=i},{"./lib/rationalize":260}],266:[function(e,t,n){"use strict";function s(e){var t=e[0],n=e[1];if(t.cmpn(0)===0)return 0;var s=t.divmod(n),o=s.div,u=r(o),a=s.mod;if(a.cmpn(0)===0)return u;if(u){var f=i(u)+4,l=r(a.shln(f).divRound(n));return u<0&&(l=-l),u+l*Math.pow(2,-f)}var c=n.bitLength()-a.bitLength()+53,l=r(a.shln(c).divRound(n));return c<1023?l*Math.pow(2,-c):(l*=Math.pow(2,-1023),l*Math.pow(2,1023-c))}var r=e("./lib/bn-to-num"),i=e("./lib/ctz");t.exports=s},{"./lib/bn-to-num":256,"./lib/ctz":257}],267:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function u(e,t,n,r){var i=0,s=0;for(var u=0,a=e.length;u<a;++u){var f=e[u];if(o(t,f))continue;for(var l=0;l<2*t;++l)n[i++]=f[l];r[s++]=u}return s}function a(e,t,n,o){var a=e.length,f=t.length;if(a<=0||f<=0)return;var l=e[0].length>>>1;if(l<=0)return;var c,h=r.mallocDouble(2*l*a),p=r.mallocInt32(a);a=u(e,l,h,p);if(a>0){if(l===1&&o)i.init(a),c=i.sweepComplete(l,n,0,a,h,p,0,a,h,p);else{var d=r.mallocDouble(2*l*f),v=r.mallocInt32(f);f=u(t,l,d,v),f>0&&(i.init(a+f),l===1?c=i.sweepBipartite(l,n,0,a,h,p,0,f,d,v):c=s(l,n,o,a,h,p,f,d,v),r.free(d),r.free(v))}r.free(h),r.free(p)}return c}function l(e,t){f.push([e,t])}function c(e){return f=[],a(e,e,l,!0),f}function h(e,t){return f=[],a(e,t,l,!1),f}function p(e,t,n){var r;switch(arguments.length){case 1:return c(e);case 2:return typeof t=="function"?a(e,e,t,!0):h(e,t);case 3:return a(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}t.exports=p;var r=e("typedarray-pool"),i=e("./lib/sweep"),s=e("./lib/intersect"),f},{"./lib/intersect":269,"./lib/sweep":273,"typedarray-pool":237}],268:[function(e,t,n){"use strict";function E(e,t,n){var o="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),E=["function ",o,"(",w.join(),"){","var ",u,"=2*",r,";"],S="for(var i="+a+","+h+"="+u+"*"+a+";"+"i<"+f+";"+"++i,"+h+"+="+u+"){"+"var x0="+l+"["+i+"+"+h+"],"+"x1="+l+"["+i+"+"+h+"+"+r+"],"+"xi="+c+"[i];",x="for(var j="+p+","+g+"="+u+"*"+p+";"+"j<"+d+";"+"++j,"+g+"+="+u+"){"+"var y0="+v+"["+i+"+"+g+"],"+(n?"y1="+v+"["+i+"+"+g+"+"+r+"],":"")+"yi="+m+"[j];";return e?E.push(S,b,":",x):E.push(x,b,":",S),n?E.push("if(y1<x0||x1<y0)continue;"):t?E.push("if(y0<=x0||x1<y0)continue;"):E.push("if(y0<x0||x1<y0)continue;"),E.push("for(var k="+i+"+1;k<"+r+";++k){"+"var r0="+l+"[k+"+h+"],"+"r1="+l+"[k+"+r+"+"+h+"],"+"b0="+v+"[k+"+g+"],"+"b1="+v+"[k+"+r+"+"+g+"];"+"if(r1<b0||b1<r0)continue "+b+";}"+"var "+y+"="+s+"("),t?E.push("yi,xi"):E.push("xi,yi"),E.push(");if("+y+"!==void 0)return "+y+";}}}"),{name:o,code:E.join("")}}function S(e){function s(t,r){var s=E(t,r,e);n.push(s.code),i.push("return "+s.name+"("+w.join()+");")}var t="bruteForce"+(e?"Full":"Partial"),n=[],r=w.slice();e||r.splice(3,0,o);var i=["function "+t+"("+r.join()+"){"];i.push("if("+f+"-"+a+">"+d+"-"+p+"){"),e?(s(!0,!1),i.push("}else{"),s(!1,!1)):(i.push("if("+o+"){"),s(!0,!0),i.push("}else{"),s(!0,!1),i.push("}}else{if("+o+"){"),s(!1,!0),i.push("}else{"),s(!1,!1),i.push("}")),i.push("}}return "+t);var u=n.join("")+i.join(""),l=new Function(u);return l()}var r="d",i="ax",s="vv",o="fp",u="es",a="rs",f="re",l="rb",c="ri",h="rp",p="bs",d="be",v="bb",m="bi",g="bp",y="rv",b="Q",w=[r,i,s,a,f,l,c,p,d,v,m];n.partial=S(!1),n.full=S(!0)},{}],269:[function(e,t,n){"use strict";function N(e,t){var n=8*i.log2(t+1)*(e+1)|0,s=i.nextPow2(w*n);x.length<s&&(r.free(x),x=r.mallocInt32(s));var o=i.nextPow2(E*n);T<o&&(r.free(T),T=r.mallocDouble(o))}function C(e,t,n,r,i,s,o,u,a){var f=w*e;x[f]=t,x[f+1]=n,x[f+2]=r,x[f+3]=i,x[f+4]=s,x[f+5]=o;var l=E*e;T[l]=u,T[l+1]=a}function k(e,t,n,r,i,s,o,u,a,f,l){var c=2*e,h=a*c,p=f[h+t];e:for(var d=i,v=i*c;d<s;++d,v+=c){var m=o[v+t],g=o[v+t+e];if(p<m||g<p)continue;if(r&&p===m)continue;var y=u[d];for(var b=t+1;b<e;++b){var m=o[v+b],g=o[v+b+e],w=f[h+b],E=f[h+b+e];if(g<w||E<m)continue e}var S;r?S=n(l,y):S=n(y,l);if(S!==void 0)return S}}function L(e,t,n,r,i,s,o,u,a,f){var l=2*e,c=u*l,h=a[c+t];e:for(var p=r,d=r*l;p<i;++p,d+=l){var v=o[p];if(v===f)continue;var m=s[d+t],g=s[d+t+e];if(h<m||g<h)continue;for(var y=t+1;y<e;++y){var m=s[d+y],g=s[d+y+e],b=a[c+y],w=a[c+y+e];if(g<b||w<m)continue e}var E=n(v,f);if(E!==void 0)return E}}function A(e,t,n,r,i,s,l,S,A){N(e,r+l);var O=0,M=2*e,_;C(O++,0,0,r,0,l,n?16:0,-Infinity,Infinity),n||C(O++,0,0,l,0,r,1,-Infinity,Infinity);while(O>0){O-=1;var D=O*w,P=x[D],H=x[D+1],B=x[D+2],j=x[D+3],F=x[D+4],I=x[D+5],q=O*E,R=T[q],U=T[q+1],z=I&1,W=!!(I&16),X=i,V=s,$=S,J=A;z&&(X=S,V=A,$=i,J=s);if(I&2){B=m(e,P,H,B,X,V,U);if(H>=B)continue}if(I&4){H=g(e,P,H,B,X,V,R);if(H>=B)continue}var K=B-H,Q=F-j;if(W){if(e*K*(K+Q)<p){_=a.scanComplete(e,P,t,H,B,X,V,j,F,$,J);if(_!==void 0)return _;continue}}else{if(e*Math.min(K,Q)<c){_=o(e,P,t,z,H,B,X,V,j,F,$,J);if(_!==void 0)return _;continue}if(e*K*Q<h){_=a.scanBipartite(e,P,t,z,H,B,X,V,j,F,$,J);if(_!==void 0)return _;continue}}var G=d(e,P,H,B,X,V,R,U);if(H<G)if(e*(G-H)<c){_=u(e,P+1,t,H,G,X,V,j,F,$,J);if(_!==void 0)return _}else if(P===e-2){z?_=a.sweepBipartite(e,t,j,F,$,J,H,G,X,V):_=a.sweepBipartite(e,t,H,G,X,V,j,F,$,J);if(_!==void 0)return _}else C(O++,P+1,H,G,j,F,z,-Infinity,Infinity),C(O++,P+1,j,F,H,G,z^1,-Infinity,Infinity);if(G<B){var Y=f(e,P,j,F,$,J),Z=$[M*Y+P],et=v(e,P,Y,F,$,J,Z);et<F&&C(O++,P,G,B,et,F,(z|4)+(W?16:0),Z,U),j<Y&&C(O++,P,G,B,j,Y,(z|2)+(W?16:0),R,Z);if(Y+1===et){W?_=L(e,P,t,G,B,X,V,Y,$,J[Y]):_=k(e,P,t,z,G,B,X,V,Y,$,J[Y]);if(_!==void 0)return _}else if(Y<et){var tt;if(W){tt=y(e,P,G,B,X,V,Z);if(G<tt){var nt=v(e,P,G,tt,X,V,Z);if(P===e-2){if(G<nt){_=a.sweepComplete(e,t,G,nt,X,V,Y,et,$,J);if(_!==void 0)return _}if(nt<tt){_=a.sweepBipartite(e,t,nt,tt,X,V,Y,et,$,J);if(_!==void 0)return _}}else G<nt&&C(O++,P+1,G,nt,Y,et,16,-Infinity,Infinity),nt<tt&&(C(O++,P+1,nt,tt,Y,et,0,-Infinity,Infinity),C(O++,P+1,Y,et,nt,tt,1,-Infinity,Infinity))}}else z?tt=b(e,P,G,B,X,V,Z):tt=y(e,P,G,B,X,V,Z),G<tt&&(P===e-2?z?_=a.sweepBipartite(e,t,Y,et,$,J,G,tt,X,V):_=a.sweepBipartite(e,t,G,tt,X,V,Y,et,$,J):(C(O++,P+1,G,tt,Y,et,z,-Infinity,Infinity),C(O++,P+1,Y,et,G,tt,z^1,-Infinity,Infinity)))}}}}t.exports=A;var r=e("typedarray-pool"),i=e("bit-twiddle"),s=e("./brute"),o=s.partial,u=s.full,a=e("./sweep"),f=e("./median"),l=e("./partition"),c=128,h=1<<22,p=1<<22,d=l("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),v=l("lo===p0",["p0"]),m=l("lo<p0",["p0"]),g=l("hi<=p0",["p0"]),y=l("lo<=p0&&p0<=hi",["p0"]),b=l("lo<p0&&p0<=hi",["p0"]),w=6,E=2,S=1024,x=r.mallocInt32(S),T=r.mallocDouble(S)},{"./brute":268,"./median":270,"./partition":271,"./sweep":273,"bit-twiddle":50,"typedarray-pool":237}],270:[function(e,t,n){"use strict";function o(e,t,n,r,i,s){var o=2*e,u=o*(n+1)+t;for(var a=n+1;a<r;++a,u+=o){var f=i[u];for(var l=a,c=o*(a-1);l>n&&i[c+t]>f;--l,c-=o){var h=c,p=c+o;for(var d=0;d<o;++d,++h,++p){var v=i[h];i[h]=i[p],i[p]=v}var m=s[l];s[l]=s[l-1],s[l-1]=m}}}function u(e,t,n,r,u,a){if(r<=n+1)return n;var f=n,l=r,c=r+n>>>1,h=2*e,p=c,d=u[h*c+t];while(f<l){if(l-f<s){o(e,t,f,l,u,a),d=u[h*c+t];break}var v=l-f,m=Math.random()*v+f|0,g=u[h*m+t],y=Math.random()*v+f|0,b=u[h*y+t],w=Math.random()*v+f|0,E=u[h*w+t];g<=b?E>=b?(p=y,d=b):g>=E?(p=m,d=g):(p=w,d=E):b>=E?(p=y,d=b):E>=g?(p=m,d=g):(p=w,d=E);var S=h*(l-1),x=h*p;for(var T=0;T<h;++T,++S,++x){var N=u[S];u[S]=u[x],u[x]=N}var C=a[l-1];a[l-1]=a[p],a[p]=C,p=i(e,t,f,l-1,u,a,d);var S=h*(l-1),x=h*p;for(var T=0;T<h;++T,++S,++x){var N=u[S];u[S]=u[x],u[x]=N}var C=a[l-1];a[l-1]=a[p],a[p]=C;if(c<p){l=p-1;while(f<l&&u[h*(l-1)+t]===d)l-=1;l+=1}else{if(!(p<c))break;f=p+1;while(f<l&&u[h*f+t]===d)f+=1}}return i(e,t,n,c,u,a,u[h*c+t])}t.exports=u;var r=e("./partition"),i=r("lo<p0",["p0"]),s=8},{"./partition":271}],271:[function(e,t,n){"use strict";function i(e,t){var n="abcdef".split("").concat(t),i=[];return e.indexOf("lo")>=0&&i.push("lo=e[k+n]"),e.indexOf("hi")>=0&&i.push("hi=e[k+o]"),n.push(r.replace("_",i.join()).replace("$",e)),Function.apply(void 0,n)}t.exports=i;var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],272:[function(e,t,n){"use strict";function i(e,t){t<=4*r?s(0,t-1,e):h(0,t-1,e)}function s(e,t,n){var r=2*(e+1);for(var i=e+1;i<=t;++i){var s=n[r++],o=n[r++],u=i,a=r-2;while(u-->e){var f=n[a-2],l=n[a-1];if(f<s)break;if(f===s&&l<o)break;n[a]=f,n[a+1]=l,a-=2}n[a]=s,n[a+1]=o}}function o(e,t,n){e*=2,t*=2;var r=n[e],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function u(e,t,n){e*=2,t*=2,n[e]=n[t],n[e+1]=n[t+1]}function a(e,t,n,r){e*=2,t*=2,n*=2;var i=r[e],s=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=s}function f(e,t,n,r,i){e*=2,t*=2,i[e]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function l(e,t,n){e*=2,t*=2;var r=n[e],i=n[t];return r<i?!1:r===i?n[e+1]>n[t+1]:!0}function c(e,t,n,r){e*=2;var i=r[e];return i<t?!0:i===t?r[e+1]<n:!1}function h(e,t,n){var i=(t-e+1)/6|0,p=e+i,d=t-i,v=e+t>>1,m=v-i,g=v+i,y=p,b=m,w=v,E=g,S=d,x=e+1,T=t-1,N=0;l(y,b,n)&&(N=y,y=b,b=N),l(E,S,n)&&(N=E,E=S,S=N),l(y,w,n)&&(N=y,y=w,w=N),l(b,w,n)&&(N=b,b=w,w=N),l(y,E,n)&&(N=y,y=E,E=N),l(w,E,n)&&(N=w,w=E,E=N),l(b,S,n)&&(N=b,b=S,S=N),l(b,w,n)&&(N=b,b=w,w=N),l(E,S,n)&&(N=E,E=S,S=N);var C=n[2*b],k=n[2*b+1],L=n[2*E],A=n[2*E+1],O=2*y,M=2*w,_=2*S,D=2*p,P=2*v,H=2*d;for(var B=0;B<2;++B){var j=n[O+B],F=n[M+B],I=n[_+B];n[D+B]=j,n[P+B]=F,n[H+B]=I}u(m,e,n),u(g,t,n);for(var q=x;q<=T;++q)if(c(q,C,k,n))q!==x&&o(q,x,n),++x;else if(!c(q,L,A,n))for(;;){if(!c(T,L,A,n)){if(--T<q)break;continue}c(T,C,k,n)?(a(q,x,T,n),++x,--T):(o(q,T,n),--T);break}f(e,x-1,C,k,n),f(t,T+1,L,A,n),x-2-e<=r?s(e,x-2,n):h(e,x-2,n),t-(T+2)<=r?s(T+2,t,n):h(T+2,t,n),T-x<=r?s(x,T,n):h(x,T,n)}t.exports=i;var r=32},{}],273:[function(e,t,n){"use strict";function v(e){var t=i.nextPow2(e);a.length<t&&(r.free(a),a=r.mallocInt32(t)),f.length<t&&(r.free(f),f=r.mallocInt32(t)),l.length<t&&(r.free(l),l=r.mallocInt32(t)),c.length<t&&(r.free(c),c=r.mallocInt32(t)),h.length<t&&(r.free(h),h=r.mallocInt32(t)),p.length<t&&(r.free(p),p=r.mallocInt32(t));var n=8*t;d.length<n&&(r.free(d),d=r.mallocDouble(n))}function m(e,t,n,r){var i=t[r],s=e[n-1];e[i]=s,t[s]=i}function g(e,t,n,r){e[n]=r,t[r]=n}function y(e,t,n,r,i,u,h,p,v,y){var b=0,w=2*e,E=e-1,S=w-1;for(var x=n;x<r;++x){var T=u[x],N=w*x;d[b++]=i[N+E],d[b++]=-(T+1),d[b++]=i[N+S],d[b++]=T}for(var x=h;x<p;++x){var T=y[x]+o,C=w*x;d[b++]=v[C+E],d[b++]=-T,d[b++]=v[C+S],d[b++]=T}var k=b>>>1;s(d,k);var L=0,A=0;for(var x=0;x<k;++x){var O=d[2*x+1]|0;if(O>=o)O=O-o|0,m(l,c,A--,O);else if(O>=0)m(a,f,L--,O);else if(O<=-o){O=-O-o|0;for(var M=0;M<L;++M){var _=t(a[M],O);if(_!==void 0)return _}g(l,c,A++,O)}else{O=-O-1|0;for(var M=0;M<A;++M){var _=t(O,l[M]);if(_!==void 0)return _}g(a,f,L++,O)}}}function b(e,t,n,r,i,o,u,v,y,b){var w=0,E=2*e,S=e-1,x=E-1;for(var T=n;T<r;++T){var N=o[T]+1<<1,C=E*T;d[w++]=i[C+S],d[w++]=-N,d[w++]=i[C+x],d[w++]=N}for(var T=u;T<v;++T){var N=b[T]+1<<1,k=E*T;d[w++]=y[k+S],d[w++]=-N|1,d[w++]=y[k+x],d[w++]=N|1}var L=w>>>1;s(d,L);var A=0,O=0,M=0;for(var T=0;T<L;++T){var _=d[2*T+1]|0,D=_&1;T<L-1&&_>>1===d[2*T+3]>>1&&(D=2,T+=1);if(_<0){var P=-(_>>1)-1;for(var H=0;H<M;++H){var B=t(h[H],P);if(B!==void 0)return B}if(D!==0)for(var H=0;H<A;++H){var B=t(a[H],P);if(B!==void 0)return B}if(D!==1)for(var H=0;H<O;++H){var B=t(l[H],P);if(B!==void 0)return B}D===0?g(a,f,A++,P):D===1?g(l,c,O++,P):D===2&&g(h,p,M++,P)}else{var P=(_>>1)-1;D===0?m(a,f,A--,P):D===1?m(l,c,O--,P):D===2&&m(h,p,M--,P)}}}function w(e,t,n,r,i,u,l,c,h,p,v,y){var b=0,w=2*e,E=t,S=t+e,x=1,T=1;r?T=o:x=o;for(var N=i;N<u;++N){var C=N+x,k=w*N;d[b++]=l[k+E],d[b++]=-C,d[b++]=l[k+S],d[b++]=C}for(var N=h;N<p;++N){var C=N+T,L=w*N;d[b++]=v[L+E],d[b++]=-C}var A=b>>>1;s(d,A);var O=0;for(var N=0;N<A;++N){var M=d[2*N+1]|0;if(M<0){var C=-M,_=!1;C>=o?(_=!r,C-=o):(_=!!r,C-=1);if(_)g(a,f,O++,C);else{var D=y[C],P=w*C,H=v[P+t+1],B=v[P+t+1+e];e:for(var j=0;j<O;++j){var F=a[j],I=w*F;if(B<l[I+t+1]||l[I+t+1+e]<H)continue;for(var q=t+2;q<e;++q)if(v[P+q+e]<l[I+q]||l[I+q+e]<v[P+q])continue e;var R=c[F],U;r?U=n(D,R):U=n(R,D);if(U!==void 0)return U}}}else m(a,f,O--,M-x)}}function E(e,t,n,r,i,u,f,l,c,h,p){var v=0,m=2*e,g=t,y=t+e;for(var b=r;b<i;++b){var w=b+o,E=m*b;d[v++]=u[E+g],d[v++]=-w,d[v++]=u[E+y],d[v++]=w}for(var b=l;b<c;++b){var w=b+1,S=m*b;d[v++]=h[S+g],d[v++]=-w}var x=v>>>1;s(d,x);var T=0;for(var b=0;b<x;++b){var N=d[2*b+1]|0;if(N<0){var w=-N;if(w>=o)a[T++]=w-o;else{w-=1;var C=p[w],k=m*w,L=h[k+t+1],A=h[k+t+1+e];e:for(var O=0;O<T;++O){var M=a[O],_=f[M];if(_===C)break;var D=m*M;if(A<u[D+t+1]||u[D+t+1+e]<L)continue;for(var P=t+2;P<e;++P)if(h[k+P+e]<u[D+P]||u[D+P+e]<h[k+P])continue e;var H=n(_,C);if(H!==void 0)return H}}}else{var w=N-o;for(var O=T-1;O>=0;--O)if(a[O]===w){for(var P=O+1;P<T;++P)a[P-1]=a[P];break}--T}}}t.exports={init:v,sweepBipartite:y,sweepComplete:b,scanBipartite:w,scanComplete:E};var r=e("typedarray-pool"),i=e("bit-twiddle"),s=e("./sort"),o=1<<28,u=1024,a=r.mallocInt32(u),f=r.mallocInt32(u),l=r.mallocInt32(u),c=r.mallocInt32(u),h=r.mallocInt32(u),p=r.mallocInt32(u),d=r.mallocDouble(u*8)},{"./sort":272,"bit-twiddle":50,"typedarray-pool":237}],274:[function(e,t,n){(function(e){var n=!1;if(typeof Float64Array!="undefined"){var r=new Float64Array(1),i=new Uint32Array(r.buffer);r[0]=1,n=!0;if(i[1]===1072693248){t.exports=function(t){return r[0]=t,[i[0],i[1]]};function s(e,t){return i[0]=e,i[1]=t,r[0]}t.exports.pack=s;function o(e){return r[0]=e,i[0]}t.exports.lo=o;function u(e){return r[0]=e,i[1]}t.exports.hi=u}else if(i[0]===1072693248){t.exports=function(t){return r[0]=t,[i[1],i[0]]};function a(e,t){return i[1]=e,i[0]=t,r[0]}t.exports.pack=a;function f(e){return r[0]=e,i[1]}t.exports.lo=f;function l(e){return r[0]=e,i[0]}t.exports.hi=l}else n=!1}if(!n){var c=new e(8);t.exports=function(t){return c.writeDoubleLE(t,0,!0),[c.readUInt32LE(0,!0),c.readUInt32LE(4,!0)]};function h(e,t){return c.writeUInt32LE(e,0,!0),c.writeUInt32LE(t,4,!0),c.readDoubleLE(0,!0)}t.exports.pack=h;function p(e){return c.writeDoubleLE(e,0,!0),c.readUInt32LE(0,!0)}t.exports.lo=p;function d(e){return c.writeDoubleLE(e,0,!0),c.readUInt32LE(4,!0)}t.exports.hi=d}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){var n=t.exports.hi(e);return(n<<1>>>21)-1023},t.exports.fraction=function(e){var n=t.exports.lo(e),r=t.exports.hi(e),i=r&1048575;return r&2146435072&&(i+=1<<20),[n,i]},t.exports.denormalized=function(e){var n=t.exports.hi(e);return!(n&2146435072)}}).call(this,e("buffer").Buffer)},{buffer:51}],275:[function(e,t,n){"use strict";function o(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(e===0)return t<0?-i:i;var n=r.hi(e),o=r.lo(e);return t>e==e>0?o===s?(n+=1,o=0):o+=1:o===0?(o=s,n-=1):o-=1,r.pack(o,n)}var r=e("double-bits"),i=Math.pow(2,-1074),s=-1>>>0;t.exports=o},{"double-bits":274}],276:[function(e,t,n){"use strict";function i(e,t){var n=e.length,i=new Array(n);for(var s=0;s<n;++s)i[s]=r(e[s],t[s]);return i}var r=e("big-rat/add");t.exports=i},{"big-rat/add":250}]
,277:[function(e,t,n){"use strict";function i(e){var t=new Array(e.length);for(var n=0;n<e.length;++n)t[n]=r(e[n]);return t}t.exports=i;var r=e("big-rat")},{"big-rat":253}],278:[function(e,t,n){"use strict";function s(e,t){var n=r(t),s=e.length,o=new Array(s);for(var u=0;u<s;++u)o[u]=i(e[u],n);return o}var r=e("big-rat"),i=e("big-rat/mul");t.exports=s},{"big-rat":253,"big-rat/mul":262}],279:[function(e,t,n){"use strict";function i(e,t){var n=e.length,i=new Array(n);for(var s=0;s<n;++s)i[s]=r(e[s],t[s]);return i}var r=e("big-rat/sub");t.exports=i},{"big-rat/sub":265}],280:[function(e,t,n){"use strict";function i(e,t,n,r){for(var i=0;i<2;++i){var s=e[i],o=t[i],u=Math.min(s,o),a=Math.max(s,o),f=n[i],l=r[i],c=Math.min(f,l),h=Math.max(f,l);if(h<u||a<c)return!1}return!0}function s(e,t,n,s){var o=r(e,n,s),u=r(t,n,s);if(o>0&&u>0||o<0&&u<0)return!1;var a=r(n,e,t),f=r(s,e,t);return a>0&&f>0||a<0&&f<0?!1:o===0&&u===0&&a===0&&f===0?i(e,t,n,s):!0}t.exports=s;var r=e("robust-orientation")[3]},{"robust-orientation":218}],281:[function(e,t,n){arguments[4][196][0].apply(n,arguments)},{dup:196}],282:[function(e,t,n){"use strict";function i(e,t){var n=r(e,t.length),i=new Array(t.length),s=new Array(t.length),o=[];for(var u=0;u<t.length;++u){var a=n[u].length;s[u]=a,i[u]=!0,a<=1&&o.push(u)}while(o.length>0){var f=o.pop();i[f]=!1;var l=n[f];for(var u=0;u<l.length;++u){var c=l[u];--s[c]===0&&o.push(c)}}var h=new Array(t.length),p=[];for(var u=0;u<t.length;++u)if(i[u]){var f=p.length;h[u]=f,p.push(t[u])}else h[u]=-1;var d=[];for(var u=0;u<e.length;++u){var v=e[u];i[v[0]]&&i[v[1]]&&d.push([h[v[0]],h[v[1]]])}return[d,p]}t.exports=i;var r=e("edges-to-adjacency-list")},{"edges-to-adjacency-list":283}],283:[function(e,t,n){"use strict";function i(e,t){var n=e.length;if(typeof t!="number"){t=0;for(var i=0;i<n;++i){var s=e[i];t=Math.max(t,s[0],s[1])}t=(t|0)+1}t|=0;var o=new Array(t);for(var i=0;i<t;++i)o[i]=[];for(var i=0;i<n;++i){var s=e[i];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var u=0;u<t;++u)r(o[u],function(e,t){return e-t});return o}t.exports=i;var r=e("uniq")},{uniq:238}],284:[function(e,t,n){"use strict";function i(e,t){function f(e,t){var n=s[t][e[t]];n.splice(n.indexOf(e),1)}function l(e,n,i){var o,u,a;for(var l=0;l<2;++l)if(s[l][n].length>0){o=s[l][n][0],a=l;break}u=o[a^1];for(var c=0;c<2;++c){var h=s[c][n];for(var p=0;p<h.length;++p){var d=h[p],v=d[c^1],m=r(t[e],t[n],t[u],t[v]);m>0&&(o=d,u=v,a=c)}}return i?u:(o&&f(o,a),u)}function c(e,n){var i=s[n][e][0],o=[e];f(i,n);var u=i[n^1],a=n;for(;;){while(u!==e)o.push(u),u=l(o[o.length-2],u,!1);if(s[0][e].length+s[1][e].length===0)break;var c=o[o.length-1],h=e,p=o[1],d=l(c,h,!0);if(r(t[c],t[h],t[p],t[d])<0)break;o.push(e),u=l(c,h)}return o}function h(e,t){return t[1]===t[t.length-1]}var n=t.length|0,i=e.length,s=[new Array(n),new Array(n)];for(var o=0;o<n;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<i;++o){var u=e[o];s[0][u[0]].push(u),s[1][u[1]].push(u)}var a=[];for(var o=0;o<n;++o)s[0][o].length+s[1][o].length===0&&a.push([o]);for(var o=0;o<n;++o)for(var p=0;p<2;++p){var d=[];while(s[p][o].length>0){var v=s[0][o].length,m=c(o,p);h(d,m)?d.push.apply(d,m):(d.length>0&&a.push(d),d=m)}d.length>0&&a.push(d)}return a}t.exports=i;var r=e("compare-angle")},{"compare-angle":285}],285:[function(e,t,n){"use strict";function a(e,t,n){var r=s(e[0],-t[0]),i=s(e[1],-t[1]),a=s(n[0],-t[0]),f=s(n[1],-t[1]),l=u(o(r,a),o(i,f));return l[l.length-1]>=0}function f(e,t,n,s){var o=r(t,n,s);if(o===0){var u=i(r(e,t,n)),f=i(r(e,t,s));if(u===f){if(u===0){var l=a(e,t,n),c=a(e,t,s);return l===c?0:l?1:-1}return 0}return f===0?u>0?-1:a(e,t,s)?-1:1:u===0?f>0?1:a(e,t,n)?1:-1:i(f-u)}var h=r(e,t,n);if(h>0)return o>0&&r(e,t,s)>0?1:-1;if(h<0)return o>0||r(e,t,s)>0?1:-1;var p=r(e,t,s);return p>0?1:a(e,t,n)?1:-1}t.exports=f;var r=e("robust-orientation"),i=e("signum"),s=e("two-sum"),o=e("robust-product"),u=e("robust-sum")},{"robust-orientation":218,"robust-product":286,"robust-sum":221,signum:287,"two-sum":236}],286:[function(e,t,n){"use strict";function s(e,t){if(e.length===1)return i(t,e[0]);if(t.length===1)return i(e,t[0]);if(e.length===0||t.length===0)return[0];var n=[0];if(e.length<t.length)for(var s=0;s<e.length;++s)n=r(n,i(t,e[s]));else for(var s=0;s<t.length;++s)n=r(n,i(e,t[s]));return n}var r=e("robust-sum"),i=e("robust-scale");t.exports=s},{"robust-scale":219,"robust-sum":221}],287:[function(e,t,n){"use strict";t.exports=function(t){return t<0?-1:t>0?1:0}},{}],288:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],289:[function(e,t,n){"use strict";function u(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}function f(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function l(e,t){var n=b(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function c(e,t){var n=e.intervals([]);n.push(t),l(e,n)}function h(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?i:(n.splice(r,1),l(e,n),s)}function p(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function d(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function v(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function m(e,t){return e-t}function g(e,t){var n=e[0]-t[0];return n?n:e[1]-t[1]}function y(e,t){var n=e[1]-t[1];return n?n:e[0]-t[0]}function b(e){if(e.length===0)return null;var t=[];for(var n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(m);var r=t[t.length>>1],i=[],s=[],o=[];for(var n=0;n<e.length;++n){var a=e[n];a[1]<r?i.push(a):r<a[0]?s.push(a):o.push(a)}var f=o,l=o.slice();return f.sort(g),l.sort(y),new u(r,b(i),b(s),f,l)}function w(e){this.root=e}function S(e){return!e||e.length===0?new w(null):new w(b(e))}var r=e("binary-search-bounds"),i=0,s=1,o=2;t.exports=S;var a=u.prototype;a.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},a.insert=function(e){var t=this.count-this.leftPoints.length;this.count+=1;if(e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?c(this,e):this.left.insert(e):this.left=b([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?c(this,e):this.right.insert(e):this.right=b([e]);else{var n=r.ge(this.leftPoints,e,g),i=r.ge(this.rightPoints,e,y);this.leftPoints.splice(n,0,e),this.rightPoints.splice(i,0,e)}},a.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return i;var n=this.right?this.right.count:0;if(4*n>3*(t-1))return h(this,e);var u=this.left.remove(e);return u===o?(this.left=null,this.count-=1,s):(u===s&&(this.count-=1),u)}if(e[0]>this.mid){if(!this.right)return i;var a=this.left?this.left.count:0;if(4*a>3*(t-1))return h(this,e);var u=this.right.remove(e);return u===o?(this.right=null,this.count-=1,s):(u===s&&(this.count-=1),u)}if(this.count===1)return this.leftPoints[0]===e?o:i;if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){var l=this,c=this.left;while(c.right)l=c,c=c.right;if(l===this)c.right=this.right;else{var p=this.left,u=this.right;l.count-=c.count,l.right=c.left,c.left=p,c.right=u}f(this,c),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?f(this,this.left):f(this,this.right);return s}for(var p=r.ge(this.leftPoints,e,g);p<this.leftPoints.length;++p){if(this.leftPoints[p][0]!==e[0])break;if(this.leftPoints[p]===e){this.count-=1,this.leftPoints.splice(p,1);for(var u=r.ge(this.rightPoints,e,y);u<this.rightPoints.length;++u){if(this.rightPoints[u][1]!==e[1])break;if(this.rightPoints[u]===e)return this.rightPoints.splice(u,1),s}}}return i},a.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return p(this.leftPoints,e,t)}if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return d(this.rightPoints,e,t)}return v(this.leftPoints,t)},a.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?p(this.leftPoints,t,n):e>this.mid?d(this.rightPoints,e,n):v(this.leftPoints,n)};var E=w.prototype;E.insert=function(e){this.root?this.root.insert(e):this.root=new u(e[0],null,null,[e],[e])},E.remove=function(e){if(this.root){var t=this.root.remove(e);return t===o&&(this.root=null),t!==i}return!1},E.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},E.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(E,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(E,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":288}],290:[function(e,t,n){"use strict";function i(e,t){var n,i;if(t[0][0]<t[1][0])n=t[0],i=t[1];else{if(!(t[0][0]>t[1][0])){var s=Math.min(e[0][1],e[1][1]),o=Math.max(e[0][1],e[1][1]),u=Math.min(t[0][1],t[1][1]),a=Math.max(t[0][1],t[1][1]);return o<u?o-u:s>a?s-a:o-a}n=t[1],i=t[0]}var f,l;e[0][1]<e[1][1]?(f=e[0],l=e[1]):(f=e[1],l=e[0]);var c=r(i,n,f);return c?c:(c=r(i,n,l),c?c:l-i)}function s(e,t){var n,s;if(t[0][0]<t[1][0])n=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return i(t,e);n=t[1],s=t[0]}var o,u;if(e[0][0]<e[1][0])o=e[0],u=e[1];else{if(!(e[0][0]>e[1][0]))return-i(e,t);o=e[1],u=e[0]}var a=r(n,s,u),f=r(n,s,o);if(a<0){if(f<=0)return a}else if(a>0){if(f>=0)return a}else if(f)return f;a=r(u,o,s),f=r(u,o,n);if(a<0){if(f<=0)return a}else if(a>0){if(f>=0)return a}else if(f)return f;return s[0]-u[0]}t.exports=s;var r=e("robust-orientation")},{"robust-orientation":218}],291:[function(e,t,n){"use strict";function s(e,t,n,r,i,s){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=s}function o(e){return new s(e._color,e.key,e.value,e.left,e.right,e._count)}function u(e,t){return new s(e,t.key,t.value,t.left,t.right,t._count)}function a(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function f(e,t){this._compare=e,this.root=t}function c(e,t){if(t.left){var n=c(e,t.left);if(n)return n}var n=e(t.key,t.value);if(n)return n;if(t.right)return c(e,t.right)}function h(e,t,n,r){var i=t(e,r.key);if(i<=0){if(r.left){var s=h(e,t,n,r.left);if(s)return s}var s=n(r.key,r.value);if(s)return s}if(r.right)return h(e,t,n,r.right)}function p(e,t,n,r,i){var s=n(e,i.key),o=n(t,i.key),u;if(s<=0){if(i.left){u=p(e,t,n,r,i.left);if(u)return u}if(o>0){u=r(i.key,i.value);if(u)return u}}if(o>0&&i.right)return p(e,t,n,r,i.right)}function d(e,t){this.tree=e,this._stack=t}function m(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function g(e){var t,n,s,f;for(var l=e.length-1;l>=0;--l){t=e[l];if(l===0){t._color=i;return}n=e[l-1];if(n.left===t){s=n.right;if(s.right&&s.right._color===r){s=n.right=o(s),f=s.right=o(s.right),n.right=s.left,s.left=n,s.right=f,s._color=n._color,t._color=i,n._color=i,f._color=i,a(n),a(s);if(l>1){var c=e[l-2];c.left===n?c.left=s:c.right=s}e[l-1]=s;return}if(s.left&&s.left._color===r){s=n.right=o(s),f=s.left=o(s.left),n.right=f.left,s.left=f.right,f.left=n,f.right=s,f._color=n._color,n._color=i,s._color=i,t._color=i,a(n),a(s),a(f);if(l>1){var c=e[l-2];c.left===n?c.left=f:c.right=f}e[l-1]=f;return}if(s._color===i){if(n._color===r){n._color=i,n.right=u(r,s);return}n.right=u(r,s);continue}s=o(s),n.right=s.left,s.left=n,s._color=n._color,n._color=r,a(n),a(s);if(l>1){var c=e[l-2];c.left===n?c.left=s:c.right=s}e[l-1]=s,e[l]=n,l+1<e.length?e[l+1]=t:e.push(t),l+=2}else{s=n.left;if(s.left&&s.left._color===r){s=n.left=o(s),f=s.left=o(s.left),n.left=s.right,s.right=n,s.left=f,s._color=n._color,t._color=i,n._color=i,f._color=i,a(n),a(s);if(l>1){var c=e[l-2];c.right===n?c.right=s:c.left=s}e[l-1]=s;return}if(s.right&&s.right._color===r){s=n.left=o(s),f=s.right=o(s.right),n.left=f.right,s.right=f.left,f.right=n,f.left=s,f._color=n._color,n._color=i,s._color=i,t._color=i,a(n),a(s),a(f);if(l>1){var c=e[l-2];c.right===n?c.right=f:c.left=f}e[l-1]=f;return}if(s._color===i){if(n._color===r){n._color=i,n.left=u(r,s);return}n.left=u(r,s);continue}s=o(s),n.left=s.right,s.right=n,s._color=n._color,n._color=r,a(n),a(s);if(l>1){var c=e[l-2];c.right===n?c.right=s:c.left=s}e[l-1]=s,e[l]=n,l+1<e.length?e[l+1]=t:e.push(t),l+=2}}}function y(e,t){return e<t?-1:e>t?1:0}function b(e){return new f(e||y,null)}t.exports=b;var r=0,i=1,l=f.prototype;Object.defineProperty(l,"keys",{get:function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e}}),Object.defineProperty(l,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(e,t){var n=this._compare,o=this.root,l=[],c=[];while(o){var h=n(e,o.key);l.push(o),c.push(h),h<=0?o=o.left:o=o.right}l.push(new s(r,e,t,null,null,1));for(var p=l.length-2;p>=0;--p){var o=l[p];c[p]<=0?l[p]=new s(o._color,o.key,o.value,l[p+1],o.right,o._count+1):l[p]=new s(o._color,o.key,o.value,o.left,l[p+1],o._count+1)}for(var p=l.length-1;p>1;--p){var d=l[p-1],o=l[p];if(d._color===i||o._color===i)break;var v=l[p-2];if(v.left===d)if(d.left===o){var m=v.right;if(!m||m._color!==r){v._color=r,v.left=d.right,d._color=i,d.right=v,l[p-2]=d,l[p-1]=o,a(v),a(d);if(p>=3){var g=l[p-3];g.left===v?g.left=d:g.right=d}break}d._color=i,v.right=u(i,m),v._color=r,p-=1}else{var m=v.right;if(!m||m._color!==r){d.right=o.left,v._color=r,v.left=o.right,o._color=i,o.left=d,o.right=v,l[p-2]=o,l[p-1]=d,a(v),a(d),a(o);if(p>=3){var g=l[p-3];g.left===v?g.left=o:g.right=o}break}d._color=i,v.right=u(i,m),v._color=r,p-=1}else if(d.right===o){var m=v.left;if(!m||m._color!==r){v._color=r,v.right=d.left,d._color=i,d.left=v,l[p-2]=d,l[p-1]=o,a(v),a(d);if(p>=3){var g=l[p-3];g.right===v?g.right=d:g.left=d}break}d._color=i,v.left=u(i,m),v._color=r,p-=1}else{var m=v.left;if(!m||m._color!==r){d.left=o.right,v._color=r,v.right=o.left,o._color=i,o.right=d,o.left=v,l[p-2]=o,l[p-1]=d,a(v),a(d),a(o);if(p>=3){var g=l[p-3];g.right===v?g.right=o:g.left=o}break}d._color=i,v.left=u(i,m),v._color=r,p-=1}}return l[0]._color=i,new f(n,l[0])},l.forEach=function(t,n,r){if(!this.root)return;switch(arguments.length){case 1:return c(t,this.root);case 2:return h(n,this._compare,t,this.root);case 3:if(this._compare(n,r)>=0)return;return p(n,r,this._compare,t,this.root)}},Object.defineProperty(l,"begin",{get:function(){var e=[],t=this.root;while(t)e.push(t),t=t.left;return new d(this,e)}}),Object.defineProperty(l,"end",{get:function(){var e=[],t=this.root;while(t)e.push(t),t=t.right;return new d(this,e)}}),l.at=function(e){if(e<0)return new d(this,[]);var t=this.root,n=[];for(;;){n.push(t);if(t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new d(this,n);e-=1;if(!t.right)break;if(e>=t.right._count)break;t=t.right}return new d(this,[])},l.ge=function(e){var t=this._compare,n=this.root,r=[],i=0;while(n){var s=t(e,n.key);r.push(n),s<=0&&(i=r.length),s<=0?n=n.left:n=n.right}return r.length=i,new d(this,r)},l.gt=function(e){var t=this._compare,n=this.root,r=[],i=0;while(n){var s=t(e,n.key);r.push(n),s<0&&(i=r.length),s<0?n=n.left:n=n.right}return r.length=i,new d(this,r)},l.lt=function(e){var t=this._compare,n=this.root,r=[],i=0;while(n){var s=t(e,n.key);r.push(n),s>0&&(i=r.length),s<=0?n=n.left:n=n.right}return r.length=i,new d(this,r)},l.le=function(e){var t=this._compare,n=this.root,r=[],i=0;while(n){var s=t(e,n.key);r.push(n),s>=0&&(i=r.length),s<0?n=n.left:n=n.right}return r.length=i,new d(this,r)},l.find=function(e){var t=this._compare,n=this.root,r=[];while(n){var i=t(e,n.key);r.push(n);if(i===0)return new d(this,r);i<=0?n=n.left:n=n.right}return new d(this,[])},l.remove=function(e){var t=this.find(e);return t?t.remove():this},l.get=function(e){var t=this._compare,n=this.root;while(n){var r=t(e,n.key);if(r===0)return n.value;r<=0?n=n.left:n=n.right}return};var v=d.prototype;Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new d(this.tree,this._stack.slice())},v.remove=function(){var e=this._stack;if(e.length===0)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new s(n._color,n.key,n.value,n.left,n.right,n._count);for(var o=e.length-2;o>=0;--o){var n=e[o];n.left===e[o+1]?t[o]=new s(n._color,n.key,n.value,t[o+1],n.right,n._count):t[o]=new s(n._color,n.key,n.value,n.left,t[o+1],n._count)}n=t[t.length-1];if(n.left&&n.right){var u=t.length;n=n.left;while(n.right)t.push(n),n=n.right;var a=t[u-1];t.push(new s(n._color,a.key,a.value,n.left,n.right,n._count)),t[u-1].key=n.key,t[u-1].value=n.value;for(var o=t.length-2;o>=u;--o)n=t[o],t[o]=new s(n._color,n.key,n.value,n.left,t[o+1],n._count);t[u-1].left=t[u]}n=t[t.length-1];if(n._color===r){var l=t[t.length-2];l.left===n?l.left=null:l.right===n&&(l.right=null),t.pop();for(var o=0;o<t.length;++o)t[o]._count--;return new f(this.tree._compare,t[0])}if(n.left||n.right){n.left?m(n,n.left):n.right&&m(n,n.right),n._color=i;for(var o=0;o<t.length-1;++o)t[o]._count--;return new f(this.tree._compare,t[0])}if(t.length===1)return new f(this.tree._compare,null);for(var o=0;o<t.length;++o)t[o]._count--;var c=t[t.length-2];return g(t),c.left===n?c.left=null:c.right=null,new f(this.tree._compare,t[0])},Object.defineProperty(v,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key;return},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value;return},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var e=0,t=this._stack;if(t.length===0){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),v.next=function(){var e=this._stack;if(e.length===0)return;var t=e[e.length-1];if(t.right){t=t.right;while(t)e.push(t),t=t.left}else{e.pop();while(e.length>0&&e[e.length-1].right===t)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var e=this._stack;if(e.length===0)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),v.update=function(e){var t=this._stack;if(t.length===0)throw new Error("Can't update empty node!");var n=new Array(t.length),r=t[t.length-1];n[n.length-1]=new s(r._color,r.key,e,r.left,r.right,r._count);for(var i=t.length-2;i>=0;--i)r=t[i],r.left===t[i+1]?n[i]=new s(r._color,r.key,r.value,n[i+1],r.right,r._count):n[i]=new s(r._color,r.key,r.value,r.left,n[i+1],r._count);return new f(this.tree._compare,n[0])},v.prev=function(){var e=this._stack;if(e.length===0)return;var t=e[e.length-1];if(t.left){t=t.left;while(t)e.push(t),t=t.right}else{e.pop();while(e.length>0&&e[e.length-1].left===t)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var e=this._stack;if(e.length===0)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],292:[function(e,t,n){"use strict";function u(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function f(e,t){return e.y-t}function l(e,t){var n=null;while(e){var r=e.key,i,o;r[0][0]<r[1][0]?(i=r[0],o=r[1]):(i=r[1],o=r[0]);var u=s(i,o,t);if(u<0)e=e.left;else if(u>0)if(t[0]!==r[1][0])n=e,e=e.right;else{var a=l(e.right,t);if(a)return a;e=e.left}else{if(t[0]!==r[1][0])return e;var a=l(e.right,t);if(a)return a;e=e.left}}return n}function c(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function h(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}function p(e){var t=e.length,n=2*t,r=new Array(n);for(var s=0;s<t;++s){var a=e[s],f=a[0][0]<a[1][0];r[2*s]=new h(a[0][0],a,f,s),r[2*s+1]=new h(a[1][0],a,!f,s)}r.sort(function(e,t){var n=e.x-t.x;return n?n:(n=e.create-t.create,n?n:Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))});var l=i(o),p=[],d=[],v=[],m=-Infinity;for(var s=0;s<n;){var g=r[s].x,y=[];while(s<n){var b=r[s];if(b.x!==g)break;s+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(y.push(new c(b.segment[0][1],b.index,!0,!0)),y.push(new c(b.segment[1][1],b.index,!1,!1))):(y.push(new c(b.segment[1][1],b.index,!0,!1)),y.push(new c(b.segment[0][1],b.index,!1,!0)))):b.create?l=l.insert(b.segment,b.index):l=l.remove(b.segment)}p.push(l.root),d.push(g),v.push(y)}return new u(p,d,v)}t.exports=p;var r=e("binary-search-bounds"),i=e("functional-red-black-tree"),s=e("robust-orientation"),o=e("./lib/order-segments"),a=u.prototype;a.castUp=function(e){var t=r.le(this.coordinates,e[0]);if(t<0)return-1;var n=this.slabs[t],i=l(this.slabs[t],e),u=-1;i&&(u=i.value);if(this.coordinates[t]===e[0]){var a=null;i&&(a=i.key);if(t>0){var c=l(this.slabs[t-1],e);c&&(a?o(c.key,a)>0&&(a=c.key,u=c.value):(u=c.value,a=c.key))}var h=this.horizontal[t];if(h.length>0){var p=r.ge(h,e[1],f);if(p<h.length){var d=h[p];if(e[1]===d.y){if(d.closed)return d.index;while(p<h.length-1&&h[p+1].y===e[1]){p+=1,d=h[p];if(d.closed)return d.index}if(d.y===e[1]&&!d.start){p+=1;if(p>=h.length)return u;d=h[p]}}if(d.start)if(a){var v=s(a[0],a[1],[e[0],d.y]);a[0][0]>a[1][0]&&(v=-v),v>0&&(u=d.index)}else u=d.index;else d.y!==e[1]&&(u=d.index)}}}return u}},{"./lib/order-segments":290,"binary-search-bounds":288,"functional-red-black-tree":291,"robust-orientation":218}],293:[function(e,t,n){function u(){return!0}function a(e){return function(t,n){var r=e[t];return r?!!r.queryPoint(n,u):!1}}function f(e){var t={};for(var n=0;n<e.length;++n){var r=e[n],i=r[0][0],o=r[0][1],u=r[1][1],f=[Math.min(o,u),Math.max(o,u)];i in t?t[i].push(f):t[i]=[f]}var l={},c=Object.keys(t);for(var n=0;n<c.length;++n){var h=t[c[n]];l[c[n]]=s(h)}return a(l)}function l(e,t){return function(n){var i=o.le(t,n[0]);if(i<0)return 1;var s=e[i];if(!s){if(!(i>0&&t[i]===n[0]))return 1;s=e[i-1]}var u=1;while(s){var a=s.key,f=r(n,a[0],a[1]);if(a[0][0]<a[1][0])if(f<0)s=s.left;else{if(!(f>0))return 0;u=-1,s=s.right}else if(f>0)s=s.left;else{if(!(f<0))return 0;u=1,s=s.right}}return u}}function c(e){return 1}function h(e){return function(n){return e(n[0],n[1])?0:1}}function p(e,t){return function(r){return e(r[0],r[1])?0:t(r)}}function d(e){var t=e.length,n=[],r=[],s=0;for(var o=0;o<t;++o){var u=e[o],a=u.length;for(var d=a-1,v=0;v<a;d=v++){var m=u[d],g=u[v];m[0]===g[0]?r.push([m,g]):n.push([m,g])}}if(n.length===0)return r.length===0?c:h(f(r));var y=i(n),b=l(y.slabs,y.coordinates);return r.length===0?b:p(f(r),b)}t.exports=d;var r=e("robust-orientation")[3],i=e("slab-decomposition"),s=e("interval-tree-1d"),o=e("binary-search-bounds")},{"binary-search-bounds":288,"interval-tree-1d":289,"robust-orientation":218,"slab-decomposition":292}],294:[function(e,t,n){"use strict";function l(e,t){var n=new Array(e);for(var r=0;r<e;++r)n[r]=t;return n}function c(e){var t=new Array(e);for(var n=0;n<e;++n)t[n]=[];return t}function h(e,t){function g(e){var n=e.length,r=[0];for(var i=0;i<n;++i){var s=t[e[i]],a=t[e[(i+1)%n]],f=o(-s[0],s[1]),l=o(-s[0],a[1]),c=o(a[0],s[1]),h=o(a[0],a[1]);r=u(r,u(u(f,l),u(c,h)))}return r[r.length-1]>0}function I(e){var t=e.length;for(var n=0;n<t;++n)if(!P[e[n]])return!1;return!0}var n=f(e,t);e=n[0],t=n[1];var h=t.length,p=e.length,d=r(e,t.length);for(var v=0;v<h;++v)if(d[v].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var m=i(e,t);m=m.filter(g);var y=m.length,b=new Array(y),w=new Array(y);for(var v=0;v<y;++v){b[v]=v;var E=new Array(y),S=m[v].map(function(e){return t[e]}),x=s([S]),T=0;e:for(var N=0;N<y;++N){E[N]=0;if(v===N)continue;var C=m[N],k=C.length;for(var L=0;L<k;++L){var A=x(t[C[L]]);if(A!==0){A<0&&(E[N]=1,T+=1);continue e}}E[N]=1,T+=1}w[v]=[T,v,E]}w.sort(function(e,t){return t[0]-e[0]});for(var v=0;v<y;++v){var E=w[v],O=E[1],M=E[2];for(var N=0;N<y;++N)M[N]&&(b[N]=O)}var _=c(y);for(var v=0;v<y;++v)_[v].push(b[v]),_[b[v]].push(v);var D={},P=l(h,!1);for(var v=0;v<y;++v){var C=m[v],k=C.length;for(var N=0;N<k;++N){var H=C[N],B=C[(N+1)%k],j=Math.min(H,B)+":"+Math.max(H,B);if(j in D){var F=D[j];_[F].push(v),_[v].push(F),P[H]=P[B]=!0}else D[j]=v}}var q=[],R=l(y,-1);for(var v=0;v<y;++v)b[v]===v&&!I(m[v])?(q.push(v),R[v]=0):R[v]=-1;var n=[];while(q.length>0){var U=q.pop(),z=_[U];a(z,function(e,t){return e-t});var W=z.length,X=R[U],V;if(X===0){var C=m[U];V=[C]}for(var v=0;v<W;++v){var $=z[v];if(R[$]>=0)continue;R[$]=X^1,q.push($);if(X===0){var C=m[$];I(C)||(C.reverse(),V.push(C))}}X===0&&n.push(V)}return n}t.exports=h;var r=e("edges-to-adjacency-list"),i=e("planar-dual"),s=e("point-in-big-polygon"),o=e("two-product"),u=e("robust-sum"),a=e("uniq"),f=e("./lib/trim-leaves")},{"./lib/trim-leaves":282,"edges-to-adjacency-list":283,"planar-dual":284,"point-in-big-polygon":293,"robust-sum":221,"two-product":235,uniq:238}],295:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{dup:50}],296:[function(e,t,n){"use strict";"use restrict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}t.exports=r,r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.prototype.find=function(e){var t=this.roots;while(t[e]!==e){var n=t[e];t[e]=t[n],e=n}return e},r.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n===r)return;var i=this.ranks,s=this.roots,o=i[n],u=i[r];o<u?s[n]=r:u<o?s[r]=n:(s[r]=n,++i[n])}},{}],297:[function(e,t,n){arguments[4][197][0].apply(n,arguments)},{"bit-twiddle":295,dup:197,"union-find":296}],298:[function(e,t,n){"use strict";function s(e,t,n){var i=Math.abs(r(e,t,n)),s=Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2));return i/s}function o(e,t,n){function v(e){if(l[e])return Infinity;var n=u[e],r=a[e];return n<0||r<0?Infinity:s(t[e],t[n],t[r])}function m(e,t){var n=T[e],r=T[t];T[e]=r,T[t]=n,N[n]=t,N[r]=e}function g(e){return f[T[e]]}function y(e){return e&1?e-1>>1:(e>>1)-1}function b(e){var t=g(e);for(;;){var n=t,r=2*e+1,i=2*(e+1),s=e;if(r<k){var o=g(r);o<n&&(s=r,n=o)}if(i<k){var u=g(i);u<n&&(s=i)}if(s===e)return e;m(e,s),e=s}}function w(e){var t=g(e);while(e>0){var n=y(e);if(n>=0){var r=g(n);if(t<r){m(e,n),e=n;continue}}return e}}function E(){if(k>0){var e=T[0];return m(0,k-1),k-=1,b(0),e}return-1}function S(e,t){var n=T[e];return f[n]===t?e:(f[n]=-Infinity,w(e),E(),f[n]=t,k+=1,w(k-1))}function x(e){if(l[e])return;l[e]=!0;var t=u[e],n=a[e];u[n]>=0&&(u[n]=t),a[t]>=0&&(a[t]=n),N[t]>=0&&S(N[t],v(t)),N[n]>=0&&S(N[n],v(n))}function M(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r];if(!l[r]||i<0||i===r)break;r=i,i=e[r];if(!l[r]||i<0||i===r)break;r=i,n=e[n]}while(n!==r);for(var s=t;s!==r;s=e[s])e[s]=r;return r}var r=t.length,o=e.length,u=new Array(r),a=new Array(r),f=new Array(r),l=new Array(r);for(var c=0;c<r;++c)u[c]=a[c]=-1,f[c]=Infinity,l[c]=!1;for(var c=0;c<o;++c){var h=e[c];if(h.length!==2)throw new Error("Input must be a graph");var p=h[1],d=h[0];a[d]!==-1?a[d]=-2:a[d]=p,u[p]!==-1?u[p]=-2:u[p]=d}var T=[],N=new Array(r);for(var c=0;c<r;++c){var C=f[c]=v(c);C<Infinity?(N[c]=T.length,T.push(c)):N[c]=-1}var k=T.length;for(var c=k>>1;c>=0;--c)b(c);for(;;){var L=E();if(L<0||f[L]>n)break;x(L)}var A=[];for(var c=0;c<r;++c)l[c]||(N[c]=A.length,A.push(t[c].slice()));var O=A.length,_=[];return e.forEach(function(e){var t=M(u,e[0]),n=M(a,e[1]);if(t>=0&&n>=0&&t!==n){var r=N[t],i=N[n];r!==i&&_.push([r,i])}}),i.unique(i.normalize(_)),{positions:A,edges:_}}t.exports=o;var r=e("robust-orientation"),i=e("simplicial-complex")},{"robust-orientation":218,"simplicial-complex":297}],299:[function(e,t,n){"use strict";t.exports=["",{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0},{path:"M2,2V-2H-2V2Z",backoff:0}]},{}],300:[function(e,t,n){"use strict";var r=e("./arrow_paths"),i=e("../../plots/font_attributes"),s=e("../../plots/cartesian/constants"),o=e("../../lib/extend").extendFlat;t.exports={_isLinkedToArray:!0,text:{valType:"string"},textangle:{valType:"angle",dflt:0},font:o({},i,{}),opacity:{valType:"number",min:0,max:1,dflt:1},align:{valType:"enumerated",values:["left","center","right"],dflt:"center"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)"},borderpad:{valType:"number",min:0,dflt:1},borderwidth:{valType:"number",min:0,dflt:1},showarrow:{valType:"boolean",dflt:!0},arrowcolor:{valType:"color"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1},arrowsize:{valType:"number",min:.3,dflt:1},arrowwidth:{valType:"number",min:.1},ax:{valType:"number",dflt:-10},ay:{valType:"number",dflt:-30},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()]},x:{valType:"number"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()]},y:{valType:"number"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"},_deprecated:{ref:{valType:"string"}}}},{"../../lib/extend":376,"../../plots/cartesian/constants":408,"../../plots/font_attributes":421,"./arrow_paths":299}],301:[function(e,t,n){"use strict";function d(e,t){function r(t,r){return o.coerce(e,n,p.layoutAttributes,t,r)}var n={};r("opacity"),r("align"),r("bgcolor");var i=r("bordercolor"),s=a.opacity(i);r("borderpad");var f=r("borderwidth"),l=r("showarrow");l&&(r("arrowcolor",s?n.bordercolor:a.defaultLine),r("arrowhead"),r("arrowsize"),r("arrowwidth",(s&&f||1)*2),r("ax"),r("ay"),o.noneOrAll(e,n,["ax","ay"])),r("text",l?"&nbsp;":"new text"),r("textangle"),o.coerceFont(r,"font",t.font);var c=["x","y"];for(var h=0;h<2;h++){var d=c[h],v={_fullLayout:t},m=u.coerceRef(e,n,v,d),g=.5;if(m!=="paper"){var y=u.getFromId(v,m);g=y.range[0]+g*(y.range[1]-y.range[0]);if(["date","category"].indexOf(y.type)!==-1&&typeof e[d]=="string"){var b;y.type==="date"?(b=o.dateTime2ms(e[d]),b!==!1&&(e[d]=b)):(y._categories||[]).length&&(b=y._categories.indexOf(e[d]),b!==-1&&(e[d]=b))}}r(d,g),l||r(d+"anchor")}return o.noneOrAll(e,n,["x","y"]),n}function v(e){var t=e._fullLayout;t.annotations.forEach(function(t){var n=u.getFromId(e,t.xref),r=u.getFromId(e,t.yref);if(!n&&!r)return;var i=(t._xsize||0)/2,s=t._xshift||0,o=(t._ysize||0)/2,a=t._yshift||0,f=i-s,l=i+s,c=o-a,h=o+a;if(t.showarrow){var p=3*t.arrowsize*t.arrowwidth;f=Math.max(f,p),l=Math.max(l,p),c=Math.max(c,p),h=Math.max(h,p)}n&&n.autorange&&u.expand(n,[n.l2c(t.x)],{ppadplus:l,ppadminus:f}),r&&r.autorange&&u.expand(r,[r.l2c(t.y)],{ppadplus:h,ppadminus:c})})}function m(e,t,n,r,i,s,o,u){var a=n-e,f=i-e,l=o-i,c=r-t,h=s-t,p=u-s,d=a*p-l*c;if(d===0)return null;var v=(f*p-l*h)/d,m=(f*c-a*h)/d;return m<0||m>1||v<0||v>1?null:{x:e+a*v,y:t+c*v}}var r=e("d3"),i=e("fast-isnumeric"),s=e("../../plotly"),o=e("../../lib"),u=e("../../plots/cartesian/axes"),a=e("../color"),f=e("../drawing"),l=e("../../lib/svg_text_utils"),c=e("../../lib/setcursor"),h=e("../dragelement"),p=t.exports={};p.ARROWPATHS=e("./arrow_paths"),p.layoutAttributes=e("./attributes"),p.supplyLayoutDefaults=function(e,t){var n=e.annotations||[],r=t.annotations=[];for(var i=0;i<n.length;i++)r.push(d(n[i]||{},t))},p.drawAll=function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)p.draw(e,n);return s.Plots.previousPromises(e)},p.add=function(e){var t=e._fullLayout.annotations.length;s.relayout(e,"annotations["+t+"]","add")},p.draw=function(e,t,n,v){function Z(e){return e.call(f.font,G).attr({"text-anchor":{left:"start",right:"end"}[I.align]||"middle"}),l.convertToTspans(e,et),e}function et(){function w(e,t){return t==="auto"&&(e<1/3?t="left":e>2/3?t="right":t="center"),{center:0,middle:0,left:.5,bottom:-0.5,right:-0.5,top:.5}[t]}Y.selectAll("tspan.line").attr({y:0,x:0});var n=V.select(".annotation-math-group"),i=!n.empty(),l=f.bBox((i?n:Y).node()),d=l.width,v=l.height,g=Math.round(d+2*K),b=Math.round(v+2*K);I._w=d,I._h=v;var E=!1;["x","y"].forEach(function(t){var n=u.getFromId(e,I[t+"ref"]||t),r=(z+(t==="x"?0:90))*Math.PI/180,i=g*Math.abs(Math.cos(r))+b*Math.abs(Math.sin(r)),s=I[t+"anchor"],o;if(n){if(!n.autorange&&(I[t]-n.range[0])*(I[t]-n.range
[1])>0){E=!0;return}U[t]=n._offset+n.l2p(I[t]),o=.5}else o=I[t],t==="y"&&(o=1-o),U[t]=t==="x"?k.l+k.w*o:k.t+k.h*o;var a=0;I.showarrow?a=I["a"+t]:a=i*w(o,s),U[t]+=a,I["_"+t+"type"]=n&&n.type,I["_"+t+"size"]=i,I["_"+t+"shift"]=a});if(E){V.remove();return}var S,x;I.showarrow&&(S=o.constrain(U.x-I.ax,1,y.width-1),x=o.constrain(U.y-I.ay,1,y.height-1)),U.x=o.constrain(U.x,1,y.width-1),U.y=o.constrain(U.y,1,y.height-1);var T=K-l.top,N=K-l.left;i?n.select("svg").attr({x:K-1,y:K}):(Y.attr({x:N,y:T}),Y.selectAll("tspan.line").attr({y:T,x:N})),Q.call(f.setRect,$/2,$/2,g-$,b-$);var C=Math.round(U.x-g/2),L=Math.round(U.y-b/2);V.call(o.setTranslate,C,L);var A="annotations["+t+"]",O=function(n,i){r.select(e).selectAll('.annotation-arrow-g[data-index="'+t+'"]').remove();var u=U.x+n,f=U.y+i,l=o.rotationXYMatrix(z,u,f),c=o.apply2DTransform(l),d=o.apply2DTransform2(l),v=Q.attr("width")/2,g=Q.attr("height")/2,y=[[u-v,f-g,u-v,f+g],[u-v,f+g,u+v,f+g],[u+v,f+g,u+v,f-g],[u+v,f-g,u-v,f-g]].map(d);if(y.reduce(function(e,t){return e^!!m(S,x,S+1e6,x+1e6,t[0],t[1],t[2],t[3])},!1))return;y.forEach(function(e){var t=m(u,f,S,x,e[0],e[1],e[2],e[3]);t&&(u=t.x,f=t.y)});var b=I.arrowwidth,w=I.arrowcolor,E=W.append("g").style({opacity:a.opacity(w)}).classed("annotation-arrow-g",!0).attr("data-index",String(t)),T=E.append("path").attr("d","M"+u+","+f+"L"+S+","+x).style("stroke-width",b+"px").call(a.stroke,a.rgb(w));p.arrowhead(T,I.arrowhead,"end",I.arrowsize);var N=E.append("path").classed("annotation",!0).classed("anndrag",!0).attr({"data-index":String(t),d:"M3,3H-3V-3H3ZM0,0L"+(u-S)+","+(f-x),transform:"translate("+S+","+x+")"}).style("stroke-width",b+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)");if(e._context.editable){var C,L,O;h.init({element:N.node(),prepFn:function(){var e=o.getTranslate(V);L=e.x,O=e.y,C={},q&&q.autorange&&(C[q._name+".autorange"]=!0),R&&R.autorange&&(C[R._name+".autorange"]=!0)},moveFn:function(e,t){E.attr("transform","translate("+e+","+t+")");var n=c(L,O),r=n[0]+e,i=n[1]+t;V.call(o.setTranslate,r,i),C[A+".x"]=q?I.x+e/q._m:(S+e-k.l)/k.w,C[A+".y"]=R?I.y+t/R._m:1-(x+t-k.t)/k.h,X.attr({transform:"rotate("+z+","+r+","+i+")"})},doneFn:function(t){if(t){s.relayout(e,C);var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}}})}};I.showarrow&&O(0,0);var M=o.rotationXYMatrix(z,U.x,U.y),_=o.apply2DTransform(M);if(e._context.editable){var D,P,H;h.init({element:V.node(),prepFn:function(){var e=o.getTranslate(V);D=e.x,P=e.y,H={}},moveFn:function(e,t){V.call(o.setTranslate,D+e,P+t);var n="pointer";if(I.showarrow)H[A+".ax"]=I.ax+e,H[A+".ay"]=I.ay+t,O(e,t);else{if(q)H[A+".x"]=I.x+e/q._m;else{var r=I._xsize/k.w,i=I.x+I._xshift/k.w-r/2;H[A+".x"]=h.align(i+e/k.w,r,0,1,I.xanchor)}if(R)H[A+".y"]=I.y+t/R._m;else{var s=I._ysize/k.h,u=I.y-I._yshift/k.h-s/2;H[A+".y"]=h.align(u-t/k.h,s,0,1,I.yanchor)}if(!q||!R)n=h.getCursor(q?.5:H[A+".x"],R?.5:H[A+".y"],I.xanchor,I.yanchor)}var a=_(D,P),f=a[0]+e,l=a[1]+t;V.call(o.setTranslate,D+e,P+t),X.attr({transform:"rotate("+z+","+f+","+l+")"}),c(V,n)},doneFn:function(t){c(V);if(t){s.relayout(e,H);var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}}})}}var g=e.layout,y=e._fullLayout,b;if(!i(t)||t===-1){if(!t&&Array.isArray(v)){g.annotations=v,p.supplyLayoutDefaults(g,y),p.drawAll(e);return}if(v==="remove"){delete g.annotations,y.annotations=[],p.drawAll(e);return}if(n&&v!=="add"){for(b=0;b<y.annotations.length;b++)p.draw(e,b,n,v);return}t=y.annotations.length,y.annotations.push({})}if(!n&&v){if(v==="remove"){y._infolayer.selectAll('.annotation[data-index="'+t+'"]').remove(),y.annotations.splice(t,1),g.annotations.splice(t,1);for(b=t;b<y.annotations.length;b++)y._infolayer.selectAll('.annotation[data-index="'+(b+1)+'"]').attr("data-index",String(b)),p.draw(e,b);return}if(v==="add"||o.isPlainObject(v)){y.annotations.splice(t,0,{});var w=o.isPlainObject(v)?o.extendFlat({},v):{text:"New text"};g.annotations?g.annotations.splice(t,0,w):g.annotations=[w];for(b=y.annotations.length-1;b>t;b--)y._infolayer.selectAll('.annotation[data-index="'+(b-1)+'"]').attr("data-index",String(b)),p.draw(e,b)}}y._infolayer.selectAll('.annotation[data-index="'+t+'"]').remove();var E=g.annotations[t],S=y.annotations[t];if(!E)return;var x={xref:E.xref,yref:E.yref},T={};typeof n=="string"&&n?T[n]=v:o.isPlainObject(n)&&(T=n);var N=Object.keys(T);for(b=0;b<N.length;b++){var C=N[b];o.nestedProperty(E,C).set(T[C])}var k=y._size,L=["x","y"];for(b=0;b<2;b++){var A=L[b];if(T[A]!==undefined||E[A]===undefined)continue;var O=u.getFromId(e,u.coerceRef(x,{},e,A)),M=u.getFromId(e,u.coerceRef(E,{},e,A)),_=E[A],D=S["_"+A+"type"];if(T[A+"ref"]!==undefined){var P=E[A+"anchor"]==="auto",H=A==="x"?k.w:k.h,B=(S["_"+A+"size"]||0)/(2*H);if(O&&M)_=(_-O.range[0])/(O.range[1]-O.range[0]),_=M.range[0]+_*(M.range[1]-M.range[0]);else if(O){_=(_-O.range[0])/(O.range[1]-O.range[0]),_=O.domain[0]+_*(O.domain[1]-O.domain[0]);if(P){var j=_+B,F=_-B;_+F<2/3?_=F:_+j>4/3&&(_=j)}}else M&&(P&&(_<1/3?_+=B:_>2/3&&(_-=B)),_=(_-M.domain[0])/(M.domain[1]-M.domain[0]),_=M.range[0]+_*(M.range[1]-M.range[0]))}M&&M===O&&D&&(D==="log"&&M.type!=="log"?_=Math.pow(10,_):D!=="log"&&M.type==="log"&&(_=_>0?Math.log(_)/Math.LN10:undefined)),E[A]=_}var I=d(E,y);y.annotations[t]=I;var q=u.getFromId(e,I.xref),R=u.getFromId(e,I.yref),U={x:0,y:0},z=+I.textangle||0,W=y._infolayer.append("g").classed("annotation",!0).attr("data-index",String(t)).style("opacity",I.opacity).on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",{index:t,annotation:E,fullAnnotation:I})}),X=W.append("g").classed("annotation-text-g",!0).attr("data-index",String(t)),V=X.append("g"),$=I.borderwidth,J=I.borderpad,K=$+J,Q=V.append("rect").attr("class","bg").style("stroke-width",$+"px").call(a.stroke,I.bordercolor).call(a.fill,I.bgcolor),G=I.font,Y=V.append("text").classed("annotation",!0).attr("data-unformatted",I.text).text(I.text);e._context.editable?Y.call(l.makeEditable,V).call(Z).on("edit",function(n){I.text=n,this.attr({"data-unformatted":I.text}),this.call(Z);var r={};r["annotations["+t+"].text"]=I.text,q&&q.autorange&&(r[q._name+".autorange"]=!0),R&&R.autorange&&(r[R._name+".autorange"]=!0),s.relayout(e,r)}):Y.call(Z),X.attr({transform:"rotate("+z+","+U.x+","+U.y+")"}).call(f.setPosition,U.x,U.y)},p.arrowhead=function(e,t,n,s){i(s)||(s=1);var o=e.node(),u=p.ARROWPATHS[t||0];if(!u)return;if(typeof n!="string"||!n)n="end";var l=(f.getPx(e,"stroke-width")||1)*s,c=e.style("stroke")||a.defaultLine,h=e.style("stroke-opacity")||1,d=n.indexOf("start")>=0,v=n.indexOf("end")>=0,m=u.backoff*l,g,y,b,w;if(o.nodeName==="line"){g={x:+e.attr("x1"),y:+e.attr("y1")},y={x:+e.attr("x2"),y:+e.attr("y2")},b=Math.atan2(g.y-y.y,g.x-y.x),w=b+Math.PI;if(m){var E=m*Math.cos(b),S=m*Math.sin(b);d&&(g.x-=E,g.y-=S,e.attr({x1:g.x,y1:g.y})),v&&(y.x+=E,y.y+=S,e.attr({x2:y.x,y2:y.y}))}}else if(o.nodeName==="path"){var x=o.getTotalLength(),T="";if(d){var N=o.getPointAtLength(0),C=o.getPointAtLength(.1);b=Math.atan2(N.y-C.y,N.x-C.x),g=o.getPointAtLength(Math.min(m,x)),m&&(T="0px,"+m+"px,")}if(v){var k=o.getPointAtLength(x),L=o.getPointAtLength(x-.1);w=Math.atan2(k.y-L.y,k.x-L.x),y=o.getPointAtLength(Math.max(0,x-m));if(m){var A=T?2*m:m;T+=x-A+"px,"+x+"px"}}else T&&(T+=x+"px");T&&e.style("stroke-dasharray",T)}var O=function(n,i){t>5&&(i=0),r.select(o.parentElement).append("path").attr({"class":e.attr("class"),d:u.path,transform:"translate("+n.x+","+n.y+")"+"rotate("+i*180/Math.PI+")"+"scale("+l+")"}).style({fill:c,opacity:h,"stroke-width":0})};d&&O(g,b),v&&O(y,w)},p.calcAutorange=function(e){var t=e._fullLayout,n=t.annotations;if(!n.length||!e._fullData.length)return;var r={};n.forEach(function(e){r[e.xref]=!0,r[e.yref]=!0});var i=u.list(e).filter(function(e){return e.autorange&&r[e._id]});if(!i.length)return;return o.syncOrAsync([p.drawAll,v],e)}},{"../../lib":381,"../../lib/setcursor":389,"../../lib/svg_text_utils":393,"../../plotly":400,"../../plots/cartesian/axes":403,"../color":303,"../dragelement":323,"../drawing":325,"./arrow_paths":299,"./attributes":300,d3:72,"fast-isnumeric":76}],302:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.lightFraction=1e3/11},{}],303:[function(e,t,n){"use strict";function u(e){if(i(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),s=t.charAt(3)==="a"&&r.length===4;if(!s&&r.length!==3)return e;for(var o=0;o<r.length;o++){if(!r[o].length)return e;r[o]=Number(r[o]);if(!(r[o]>=0))return e;if(o===3)r[o]>1&&(r[o]=1);else if(r[o]>=1)return e}var u=Math.round(r[0]*255)+", "+Math.round(r[1]*255)+", "+Math.round(r[2]*255);return s?"rgba("+u+", "+r[3]+")":"rgb("+u+")"}var r=e("tinycolor2"),i=e("fast-isnumeric"),s=t.exports={},o=e("./attributes");s.defaults=o.defaults,s.defaultLine=o.defaultLine,s.lightLine=o.lightLine,s.background=o.background,s.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},s.rgb=function(e){return s.tinyRGB(r(e))},s.opacity=function(e){return e?r(e).getAlpha():0},s.addOpacity=function(e,t){var n=r(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},s.combine=function(e,t){var n=r(e).toRgb();if(n.a===1)return r(e).toRgbString();var i=r(t||s.background).toRgb(),o=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},u={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return r(u).toRgbString()},s.stroke=function(e,t){var n=r(t);e.style({stroke:s.tinyRGB(n),"stroke-opacity":n.getAlpha()})},s.fill=function(e,t){var n=r(t);e.style({fill:s.tinyRGB(n),"fill-opacity":n.getAlpha()})},s.clean=function(e){if(!e||typeof e!="object")return;var t=Object.keys(e),n,r,i,o;for(n=0;n<t.length;n++){i=t[n],o=e[i];if(i.substr(i.length-5)==="color")if(Array.isArray(o))for(r=0;r<o.length;r++)o[r]=u(o[r]);else e[i]=u(o);else if(i.substr(i.length-10)==="colorscale"&&Array.isArray(o))for(r=0;r<o.length;r++)Array.isArray(o[r])&&(o[r][1]=u(o[r][1]));else if(Array.isArray(o)){var a=o[0];if(!Array.isArray(a)&&a&&typeof a=="object")for(r=0;r<o.length;r++)s.clean(o[r])}else o&&typeof o=="object"&&s.clean(o)}}},{"./attributes":302,"fast-isnumeric":76,tinycolor2:233}],304:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),i=e("../../plots/font_attributes"),s=e("../../lib/extend").extendFlat;t.exports={thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:s({},r.ticks,{dflt:""}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,exponentformat:r.exponentformat,showexponent:r.showexponent,title:{valType:"string",dflt:"Click to enter colorscale title"},titlefont:s({},i,{}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},{"../../lib/extend":376,"../../plots/cartesian/layout_attributes":412,"../../plots/font_attributes":421}],305:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/tick_value_defaults"),s=e("../../plots/cartesian/tick_mark_defaults"),o=e("../../plots/cartesian/tick_label_defaults"),u=e("./attributes");t.exports=function(t,n,a){function c(e,t){return r.coerce(l,f,u,e,t)}var f=n.colorbar={},l=t.colorbar||{},h=c("thicknessmode");c("thickness",h==="fraction"?30/(a.width-a.margin.l-a.margin.r):30);var p=c("lenmode");c("len",p==="fraction"?1:a.height-a.margin.t-a.margin.b),c("x"),c("xanchor"),c("xpad"),c("y"),c("yanchor"),c("ypad"),r.noneOrAll(l,f,["x","y"]),c("outlinecolor"),c("outlinewidth"),c("bordercolor"),c("borderwidth"),c("bgcolor"),i(l,f,c,"linear"),o(l,f,c,"linear",{outerTicks:!1,font:a.font,noHover:!0}),s(l,f,c,"linear",{outerTicks:!1,font:a.font,noHover:!0}),c("title"),r.coerceFont(c,"titlefont",a.font),c("titleside")}},{"../../lib":381,"../../plots/cartesian/tick_label_defaults":418,"../../plots/cartesian/tick_mark_defaults":419,"../../plots/cartesian/tick_value_defaults":420,"./attributes":304}],306:[function(e,t,n){"use strict";var r=e("d3"),i=e("tinycolor2"),s=e("../../plotly"),o=e("../../plots/plots"),u=e("../../plots/cartesian/axes"),a=e("../dragelement"),f=e("../../lib"),l=e("../../lib/extend").extendFlat,c=e("../../lib/setcursor"),h=e("../drawing"),p=e("../color"),d=e("../titles"),v=e("../../plots/cartesian/axis_defaults"),m=e("../../plots/cartesian/position_defaults"),g=e("../../plots/cartesian/layout_attributes"),y=e("./attributes");t.exports=function(t,n){function w(){function Q(e,t){return f.coerce($,J,g,e,t)}function ut(){if(["top","bottom"].indexOf(b.titleside)!==-1){var n=tt.select(".cbtitle"),s=n.select("text"),o=[-b.outlinewidth/2,b.outlinewidth/2],a=n.select(".h"+J._id+"title-math-group").node(),l=15.6;s.node()&&(l=parseInt(s.style("font-size"),10)*1.3),a?(rt=h.bBox(a).height,rt>l&&(o[1]-=(rt-l)/2)):s.node()&&!s.classed("js-placeholder")&&(rt=h.bBox(n.node()).height);if(rt){rt+=5;if(b.titleside==="top")J.domain[1]-=rt/y.h,o[1]*=-1;else{J.domain[0]+=rt/y.h;var c=Math.max(1,s.selectAll("tspan.line").size());o[1]+=(1-c)*l}n.attr("transform","translate("+o+")"),J.setScale()}}tt.selectAll(".cbfills,.cblines,.cbaxis").attr("transform","translate(0,"+Math.round(y.h*(1-J.domain[1]))+")");var p=tt.select(".cbfills").selectAll("rect.cbfill").data(T);p.enter().append("rect").classed("cbfill",!0).style("stroke","none"),p.exit().remove(),p.each(function(e,t){var n=[t===0?S[0]:(T[t]+T[t-1])/2,t===T.length-1?S[1]:(T[t]+T[t+1])/2].map(J.c2p).map(Math.round);t!==T.length-1&&(n[1]+=n[1]>n[0]?1:-1);var s=k(e).replace("e-",""),o=i(s).toHexString();r.select(this).attr({x:R,width:Math.max(P,2),y:r.min(n),height:Math.max(r.max(n)-r.min(n),2),fill:o})});var d=tt.select(".cblines").selectAll("path.cbline").data(b.line.color&&b.line.width?x:[]);return d.enter().append("path").classed("cbline",!0),d.exit().remove(),d.each(function(e){r.select(this).attr("d","M"+R+","+(Math.round(J.c2p(e))+b.line.width/2%1)+"h"+P).call(h.lineGroupStyle,b.line.width,C(e),b.line.dash)}),J._axislayer.selectAll("g."+J._id+"tick,path").remove(),J._pos=R+P+(b.outlinewidth||0)/2-(b.ticks==="outside"?1:0),J.side="right",f.syncOrAsync([function(){return u.doTicks(t,J,!0)},function(){if(["top","bottom"].indexOf(b.titleside)===-1){var n=J.titlefont.size,i=J._offset+J._length/2,s=y.l+(J.position||0)*y.w+(J.side==="right"?10+n*(J.showticklabels?1:.5):-10-n*(J.showticklabels?.5:0));at("h"+J._id+"title",{avoid:{selection:r.select(t).selectAll("g."+J._id+"tick"),side:b.titleside,offsetLeft:y.l,offsetTop:y.t,maxShift:e.width},attributes:{x:s,y:i,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function at(e,n){var r=E(),i;o.traceIs(r,"markerColorscale")?i="marker.colorbar.title":i="colorbar.title";var s={propContainer:J,propName:i,traceIndex:r.index,dfltName:"colorscale",containerGroup:tt.select(".cbtitle")},u=e.charAt(0)==="h"?e.substr(1):"h"+e;tt.selectAll("."+u+",."+u+"-math-group").remove(),d.draw(t,e,l(s,n||{}))}function ft(){var e=P+b.outlinewidth/2+h.bBox(J._axislayer.node()).width;V=nt.select("text");if(V.node()&&!V.classed("js-placeholder")){var r=nt.select(".h"+J._id+"title-math-group").node(),i;r&&["top","bottom"].indexOf(b.titleside)!==-1?i=h.bBox(r).width:i=h.bBox(nt.node()).right-R-y.l,e=Math.max(e,i)}var s=2*b.xpad+e+b.borderwidth+b.outlinewidth/2,u=W-X;tt.select(".cbbg").attr({x:R-b.xpad-(b.borderwidth+b.outlinewidth)/2,y:X-I,width:Math.max(s,2),height:Math.max(u+2*I,2)}).call(p.fill,b.bgcolor).call(p.stroke,b.bordercolor).style({"stroke-width":b.borderwidth}),tt.selectAll(".cboutline").attr({x:R,y:X+b.ypad+(b.titleside==="top"?rt:0),width:Math.max(P,2),height:Math.max(u-2*b.ypad-rt,2)}).call(p.stroke,b.outlinecolor).style({fill:"None","stroke-width":b.outlinewidth});var a=({center:.5,right:1}[b.xanchor]||0)*s;tt.attr("transform","translate("+(y.l-a)+","+y.t+")"),o.autoMargin(t,n,{x:b.x,y:b.y,l:s*({right:1,center:.5}[b.xanchor]||0),r:s*({left:1,center:.5}[b.xanchor]||0),t:u*({bottom:1,middle:.5}[b.yanchor]||0),b:u*({top:1,middle:.5}[b.yanchor]||0)})}var e=t._fullLayout,y=e._size;if(typeof b.fillcolor!="function"&&typeof b.line.color!="function"){e._infolayer.selectAll("g."+n).remove();return}var S=r.extent((typeof b.fillcolor=="function"?b.fillcolor:b.line.color).domain()),x=[],T=[],N,C=typeof b.line.color=="function"?b.line.color:function(){return b.line.color},k=typeof b.fillcolor=="function"?b.fillcolor:function(){return b.fillcolor},L=b.levels.end+b.levels.size/100,A=b.levels.size,O=1.001*S[0]-.001*S[1],M=1.001*S[1]-.001*S[0];for(N=b.levels.start;(N-L)*A<0;N+=A)N>O&&N<M&&x.push(N);if(typeof b.fillcolor=="function")if(b.filllevels){L=b.filllevels.end+b.filllevels.size/100,A=b.filllevels.size;for(N=b.filllevels.start;(N-L)*A<0;N+=A)N>S[0]&&N<S[1]&&T.push(N)}else T=x.map(function(e){return e-b.levels.size/2}),T.push(T[T.length-1]+b.levels.size);else b.fillcolor&&typeof b.fillcolor=="string"&&(T=[0]);b.levels.size<0&&(x.reverse(),T.reverse());var _=e.height-e.margin.t-e.margin.b,D=e.width-e.margin.l-e.margin.r,P=Math.round(b.thickness*(b.thicknessmode==="fraction"?D:1)),H=P/y.w,B=Math.round(b.len*(b.lenmode==="fraction"?_:1)),j=B/y.h,F=b.xpad/y.w,I=(b.borderwidth+b.outlinewidth)/2,q=b.ypad/y.h,R=Math.round(b.x*y.w+b.xpad),U=b.x-H*({middle:.5,right:1}[b.xanchor]||0),z=b.y+j*(({top:-0.5,bottom:.5}[b.yanchor]||0)-.5),W=Math.round(y.h*(1-z)),X=W-B,V,$={type:"linear",range:S,tickmode:b.tickmode,nticks:b.nticks,tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,showticklabels:b.showticklabels,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,exponentformat:b.exponentformat,showexponent:b.showexponent,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,title:b.title,titlefont:b.titlefont,anchor:"free",position:1},J={},K={letter:"y",font:e.font,noHover:!0};v($,J,Q,K),m($,J,Q,K),J._id="y"+n,J._gd=t,J.position=b.x+F+H,w.axis=J,["top","bottom"].indexOf(b.titleside)!==-1&&(J.titleside=b.titleside,J.titlex=b.x+F,J.titley=z+(b.titleside==="top"?j-q:q));if(b.line.color&&b.tickmode==="auto"){J.tickmode="linear",J.tick0=b.levels.start;var G=b.levels.size,Y=f.constrain((W-X)/50,4,15)+1,Z=(S[1]-S[0])/((b.nticks||Y)*G);if(Z>1){var et=Math.pow(10,Math.floor(Math.log(Z)/Math.LN10));G*=et*f.roundUp(Z/et,[2,5,10]),(Math.abs(b.levels.start)/b.levels.size+1e-6)%1<2e-6&&(J.tick0=0)}J.dtick=G}J.domain=[z+q,z+j-q],J.setScale();var tt=e._infolayer.selectAll("g."+n).data([0]);tt.enter().append("g").classed(n,!0).each(function(){var e=r.select(this);e.append("rect").classed("cbbg",!0),e.append("g").classed("cbfills",!0),e.append("g").classed("cblines",!0),e.append("g").classed("cbaxis",!0).classed("crisp",!0),e.append("g").classed("cbtitleunshift",!0).append("g").classed("cbtitle",!0),e.append("rect").classed("cboutline",!0),e.select(".cbtitle").datum(0)}),tt.attr("transform","translate("+Math.round(y.l)+","+Math.round(y.t)+")");var nt=tt.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(y.l)+",-"+Math.round(y.t)+")");J._axislayer=tt.select(".cbaxis");var rt=0;if(["top","bottom"].indexOf(b.titleside)!==-1){var it=y.l+(b.x+F)*y.w,st=J.titlefont.size,ot;b.titleside==="top"?ot=(1-(z+j-q))*y.h+y.t+3+st*.75:ot=(1-(z+q))*y.h+y.t-3-st*.25,at(J._id+"title",{attributes:{x:it,y:ot,"text-anchor":"start"}})}var lt=f.syncOrAsync([o.previousPromises,ut,o.previousPromises,ft],t);lt&&lt.then&&(t._promises||[]).push(lt);if(t._context.editable){var ct,ht,pt;a.init({element:tt.node(),prepFn:function(){ct=tt.attr("transform"),c(tt)},moveFn:function(e,t){tt.attr("transform",ct+" "+"translate("+e+","+t+")"),ht=a.align(U+e/y.w,H,0,1,b.xanchor),pt=a.align(z-t/y.h,j,0,1,b.yanchor);var n=a.getCursor(ht,pt,b.xanchor,b.yanchor);c(tt,n)},doneFn:function(e){c(tt),e&&ht!==undefined&&pt!==undefined&&s.restyle(t,{"colorbar.x":ht,"colorbar.y":pt},E().index)}})}return lt}function E(){var e=n.substr(2),r,i;for(r=0;r<t._fullData.length;r++){i=t._fullData[r];if(i.uid===e)return i}}var b={};return Object.keys(y).forEach(function(e){b[e]=null}),b.fillcolor=null,b.line={color:null,width:null,dash:null},b.levels={start:null,end:null,size:null},b.filllevels=null,Object.keys(b).forEach(function(e){w[e]=function(t){return arguments.length?(b[e]=f.isPlainObject(b[e])?f.extendFlat(b[e],t):t,w):b[e]}}),w.options=function(e){return Object.keys(e).forEach(function(t){typeof w[t]=="function"&&w[t](e[t])}),w},w._opts=b,w}},{"../../lib":381,"../../lib/extend":376,"../../lib/setcursor":389,"../../plotly":400,"../../plots/cartesian/axes":403,"../../plots/cartesian/axis_defaults":404,"../../plots/cartesian/layout_attributes":412,"../../plots/cartesian/position_defaults":415,"../../plots/plots":452,"../color":303,"../dragelement":323,"../drawing":325,"../titles":365,"./attributes":304,d3:72,tinycolor2:233}],307:[function(e,t,n){"use strict";t.exports=function(t){return typeof t.colorbar=="object"&&t.colorbar!==null}},{}],308:[function(e,t,n){"use strict";n.attributes=e("./attributes"),n.supplyDefaults=e("./defaults"),n.draw=e("./draw"),n.hasColorbar=e("./has_colorbar")},{"./attributes":304,"./defaults":305,"./draw":306,"./has_colorbar":307}],309:[function(e,t,n){"use strict";t.exports={zauto:{valType:"boolean",dflt:!0},zmin:{valType:"number",dflt:null},zmax:{valType:"number",dflt:null},colorscale:{valType:"colorscale"},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!0},_deprecated:{scl:{valType:"colorscale"},reversescl:{valType:"boolean"}}}},{}],310:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./scales"),s=e("./flip_scale");t.exports=function(t,n,o,u){var a,f;o?(a=r.nestedProperty(t,o).get(),f=r.nestedProperty(t._input,o).get()):(a=t,f=t._input);var l=a[u+"auto"],c=a[u+"min"],h=a[u+"max"],p=a.colorscale;if(l!==!1||c===undefined)c=r.aggNums(Math.min,null,n);if(l!==!1||h===undefined)h=r.aggNums(Math.max,null,n);c===h&&(c-=.5,h+=.5),a[u+"min"]=c,a[u+"max"]=h,f[u+"min"]=c,f[u+"max"]=h,a.autocolorscale&&(c*h<0?p=i.RdBu:c>=0?p=i.Reds:p=i.Blues,f.colorscale=p,a.reversescale&&(p=s(p)),a.colorscale=p)}},{"../../lib":381,"./flip_scale":313,"./scales":320}],311:[function(e,t,n){"use strict";var r=e("./scales");t.exports=r.RdBu},{"./scales":320}],312:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../colorbar/has_colorbar"),o=e("../colorbar/defaults"),u=e("./is_valid_scale"),a=e("./flip_scale");t.exports=function(t,n,f,l,c){var h=c.prefix,p=c.cLetter,d=h.slice(0,h.length-1),v=h?i.nestedProperty(t,d).get()||{}:t,m=h?i.nestedProperty(n,d).get()||{}:n,g=v[p+"min"],y=v[p+"max"],b=v.colorscale,w=r(g)&&r(y)&&g<y;l(h+p+"auto",!w),l(h+p+"min"),l(h+p+"max");var E;b!==undefined&&(E=!u(b)),l(h+"autocolorscale",E);var S=l(h+"colorscale"),x=l(h+"reversescale");x&&(m.colorscale=a(S));if(h==="marker.line.")return;var T;h&&(T=s(v));var N=l(h+"showscale",T);N&&o(v,m,f)}},{"../../lib":381,"../colorbar/defaults":305,"../colorbar/has_colorbar":307,"./flip_scale":313,"./is_valid_scale":317,"fast-isnumeric":76}],313:[function(e,t,n){"use strict";t.exports=function(t){var n=t.length,r=new Array(n),i;for(var s=n-1,o=0;s>=0;s--,o++)i=t[s],r[o]=[1-i[0],i[1]];return r}},{}],314:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./default_scale"),s=e("./is_valid_scale_array");t.exports=function(t,n){function o(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}return n||(n=i),t?(typeof t=="string"&&(o(),typeof t=="string"&&o()),s(t)?t:n):n}},{"./default_scale":311,"./is_valid_scale_array":318,"./scales":320}],315:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("./is_valid_scale");t.exports=function(t,n){var o=n?i.nestedProperty(t,n).get()||{}:t,u=o.color,a=!1;if(Array.isArray(u))for(var f=0;f<u.length;f++)if(r(u[f])){a=!0;break}return typeof o=="object"&&o!==null&&(a||o.showscale===!0||r(o.cmin)&&r(o.cmax)||s(o.colorscale)||typeof o.colorbar=="object"&&o.colorbar!==null)}},{"../../lib":381,"./is_valid_scale":317,"fast-isnumeric":76}],316:[function(e,t,n){"use strict";n.scales=e("./scales"),n.defaultScale=e("./default_scale"),n.attributes=e("./attributes"),n.handleDefaults=e("./defaults"),n.calc=e("./calc"),n.hasColorscale=e("./has_colorscale"),n.isValidScale=e("./is_valid_scale"),n.getScale=e("./get_scale"),n.flipScale=e("./flip_scale"),n.makeScaleFunction=e("./make_scale_function")},{"./attributes":309,"./calc":310,"./default_scale":311,"./defaults":312,"./flip_scale":313,"./get_scale":314,"./has_colorscale":315,"./is_valid_scale":317,"./make_scale_function":319,"./scales":320}],317:[function(e,t,n){"use strict";var r=e("./scales"),i=e("./is_valid_scale_array");t.exports=function(t){return r[t]!==undefined?!0:i(t)}},{"./is_valid_scale_array":318,"./scales":320}],318:[function(e,t,n){"use strict";var r=e("tinycolor2");t.exports=function(t){var n=!0,i=0,s;if(!Array.isArray(t))return!1;if(+t[0][0]!==0||+t[t.length-1][0]!==1)return!1;for(var o=0;o<t.length;o++){s=t[o];if(s.length!==2||+s[0]<i||!r(s[1]).isValid()){n=!1;break}i=+s[0]}return n}},{tinycolor2:233}],319:[function(e,t,n){"use strict";var r=e("d3"),i=e("tinycolor2"),s=e("fast-isnumeric"),o=e("../../lib"),u=e("../color");t.exports=function(t,n,a){var f=t.length,l=new Array(f),c=new Array(f),h;for(var p=0;p<f;p++)h=t[p],l[p]=n+h[0]*(a-n),c[p]=i(h[1]).toRgb();var d=r.scale.linear().domain(l).interpolate(r.interpolateObject).range(c);return function(e){if(s(e)){var t=o.constrain(e,n,a),r=d(t);return i(r).toRgbString()}return i(e).isValid()?e:u.defaultLine}}},{"../../lib":381,"../color":303,d3:72,"fast-isnumeric":76,tinycolor2:233}],320:[function(e,t,n){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]]}},{}],321:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s){var o=(t-r)/(i-r),u=o+n/(i-r),a=(o+u)/2;return s==="left"||s==="bottom"?o:s==="center"||s==="middle"?a:s==="right"||s==="top"?u:o<2/3-a?o:u>4/3-a?u:a}},{}],322:[function(e,t,n){"use strict";var r=e("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(t,n,s,o){return s==="left"?t=0:s==="center"?t=1:s==="right"?t=2:t=r.constrain(Math.floor(t*3),0,2),o==="bottom"?n=0:o==="middle"?n=1:o==="top"?n=2:n=r.constrain(Math.floor(n*3),0,2),i[n][t]}},{"../../lib":381}],323:[function(e,t,n){"use strict";function a(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function f(e){e._dragging=!1,e._replotPending&&r.plot(e)}var r=e("../../plotly"),i=e("../../lib"),s=e("../../plots/cartesian/constants"),o=t.exports={};o.align=e("./align"),o.getCursor=e("./cursor");var u=e("./unhover");o.unhover=u.wrapped,o.unhoverRaw=u.raw,o.init=function(t){function v(e){return n._dragged=!1,n._dragging=!0,l=e.clientX,c=e.clientY,d=e.target,h=(new Date).getTime(),h-n._mouseDownTime<u?r+=1:(r=1,n._mouseDownTime=h),t.prepFn&&t.prepFn(e,l,c),p=a(),p.onmousemove=m,p.onmouseup=g,p.onmouseout=g,p.style.cursor=window.getComputedStyle(t.element).cursor,i.pauseEvent(e)}function m(e){var r=e.clientX-l,u=e.clientY-c,a=t.minDrag||s.MINDRAG;Math.abs(r)<a&&(r=0),Math.abs(u)<a&&(u=0);if(r||u)n._dragged=!0,o.unhover(n);return t.moveFn&&t.moveFn(r,u,n._dragged),i.pauseEvent(e)}function g(e){p.onmousemove=null,p.onmouseup=null,p.onmouseout=null,i.removeElement(p);if(!n._dragging){n._dragged=!1;return}n._dragging=!1,(new Date).getTime()-n._mouseDownTime>u&&(r=Math.max(r-1,1)),t.doneFn&&t.doneFn(n._dragged,r);if(!n._dragged){var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),d.dispatchEvent(s)}return f(n),n._dragged=!1,i.pauseEvent(e)}var n=i.getPlotDiv(t.element)||{},r=1,u=s.DBLCLICKDELAY,l,c,h,p,d;n._mouseDownTime||(n._mouseDownTime=0),t.element.onmousedown=v,t.element.style.pointerEvents="all"}},{"../../lib":381,"../../plotly":400,"../../plots/cartesian/constants":408,"./align":321,"./cursor":322,"./unhover":324}],324:[function(e,t,n){"use strict";var r=e("../../lib/events"),i=t.exports={};i.wrapped=function(e,t,n){typeof e=="string"&&(e=document.getElementById(e)),e._hoverTimer&&(clearTimeout(e._hoverTimer),e._hoverTimer=undefined),i.raw(e,t,n)},i.raw=function(t,n){var i=t._fullLayout;n||(n={});if(n.target&&r.triggerHandler(t,"plotly_beforehover",n)===!1)return;i._hoverlayer.selectAll("g").remove(),n.target&&t._hoverdata&&t.emit("plotly_unhover",{points:t._hoverdata}),t._hoverdata=undefined}},{"../../lib/events":375}],325:[function(e,t,n){"use strict";function w(e,t,n,i){var s=e[0]-t[0],o=e[1]-t[1],u=n[0]-t[0],a=n[1]-t[1],f=Math.pow(s*s+o*o,b/2),l=Math.pow(u*u+a*a,b/2),c=(l*l*s-f*f*u)*i,h=(l*l*o-f*f*a)*i,p=3*l*(f+l),d=3*f*(f+l);return[[r.round(t[0]+(p&&c/p),2),r.round(t[1]+(p&&h/p),2)],[r.round(t[0]-(d&&
c/d),2),r.round(t[1]-(d&&h/d),2)]]}var r=e("d3"),i=e("fast-isnumeric"),s=e("../../plots/plots"),o=e("../color"),u=e("../colorscale"),a=e("../../lib"),f=e("../../lib/svg_text_utils"),l=e("../../constants/xmlns_namespaces"),c=e("../../traces/scatter/subtypes"),h=e("../../traces/scatter/make_bubble_size_func"),p=t.exports={};p.font=function(e,t,n,r){t&&t.family&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(o.fill,r)},p.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},p.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},p.setRect=function(e,t,n,r,i){e.call(p.setPosition,t,n).call(p.setSize,r,i)},p.translatePoints=function(e,t,n){e.each(function(e){var s=e.xp||t.c2p(e.x),o=e.yp||n.c2p(e.y),u=r.select(this);i(s)&&i(o)?this.nodeName==="text"?u.attr("x",s).attr("y",o):u.attr("transform","translate("+s+","+o+")"):u.remove()})},p.getPx=function(e,t){return Number(e.style(t).replace(/px$/,""))},p.crispRound=function(e,t,n){return!t||!i(t)?n||0:e._context.staticPlot?t:t<1?1:Math.round(t)},p.lineGroupStyle=function(e,t,n,i){e.style("fill","none").each(function(e){var s=(((e||[])[0]||{}).trace||{}).line||{},u=t||s.width||0,a=i||s.dash||"";r.select(this).call(o.stroke,n||s.color).call(p.dashLine,a,u)})},p.dashLine=function(e,t,n){var r=Math.max(n,3);t==="solid"?t="":t==="dot"?t=r+"px,"+r+"px":t==="dash"?t=3*r+"px,"+3*r+"px":t==="longdash"?t=5*r+"px,"+5*r+"px":t==="dashdot"?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":t==="longdashdot"&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},p.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var n=r.select(this);try{n.call(o.fill,t[0].trace.fillcolor)}catch(i){console.log(i,e),n.remove()}})};var d=e("./symbol_defs");p.symbolNames=[],p.symbolFuncs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolList=[],Object.keys(d).forEach(function(e){var t=d[e];p.symbolList=p.symbolList.concat([t.n,e,t.n+100,e+"-open"]),p.symbolNames[t.n]=e,p.symbolFuncs[t.n]=t.f,t.needLine&&(p.symbolNeedLines[t.n]=!0),t.noDot?p.symbolNoDot[t.n]=!0:p.symbolList=p.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"])});var v=p.symbolNames.length,m="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";p.symbolNumber=function(e){if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=p.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=v||e>=400?0:Math.floor(Math.max(e,0))},p.pointStyle=function(e,t){if(!e.size())return;var n=t.marker,i=n.line;if(s.traceIs(t,"symbols")){var u=h(t);e.attr("d",function(e){var r;e.ms==="various"||n.size==="various"?r=3:r=c.isBubble(t)?u(e.ms):(n.size||6)/2,e.mrc=r;var i=p.symbolNumber(e.mx||n.symbol)||0,s=i%100;return e.om=i%200>=100,p.symbolFuncs[s](r)+(i>=200?m:"")}).style("opacity",function(e){return(e.mo+1||n.opacity+1)-1})}var a=(t._input||{}).marker||{},f=p.tryColorscale(n,a,""),l=p.tryColorscale(n,a,"line.");e.each(function(e){var t,s,u;e.so?(u=i.outlierwidth,s=i.outliercolor,t=n.outliercolor):(u=(e.mlw+1||i.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,"mlc"in e?s=e.mlcc=l(e.mlc):Array.isArray(i.color)?s=o.defaultLine:s=i.color,"mc"in e?t=e.mcc=f(e.mc):Array.isArray(n.color)?t=o.defaultLine:t=n.color||"rgba(0,0,0,0)");var a=r.select(this);e.om?a.call(o.stroke,t).style({"stroke-width":(u||1)+"px",fill:"none"}):(a.style("stroke-width",u+"px").call(o.fill,t),u&&a.call(o.stroke,s))})},p.tryColorscale=function(e,t,n){var r=a.nestedProperty(e,n+"color").get(),s=a.nestedProperty(e,n+"colorscale").get(),o=a.nestedProperty(e,n+"cauto").get(),f=a.nestedProperty(e,n+"cmin"),l=a.nestedProperty(e,n+"cmax"),c=f.get(),h=l.get();if(s&&Array.isArray(r)){if(o||!i(c)||!i(h))c=Infinity,h=-Infinity,r.forEach(function(e){i(e)&&(c>e&&(c=+e),h<e&&(h=+e))}),c>h&&(c=0,h=1),f.set(c),l.set(h),a.nestedProperty(t,n+"cmin").set(c),a.nestedProperty(t,n+"cmax").set(h);return u.makeScaleFunction(s,c,h)}return a.identity};var g={start:1,end:-1,middle:0,bottom:1,top:-1},y=1.3;p.textPointStyle=function(e,t){e.each(function(e){var n=r.select(this),s=e.tx||t.text;if(!s||Array.isArray(s)){n.remove();return}var o=e.tp||t.textposition,u=o.indexOf("top")!==-1?"top":o.indexOf("bottom")!==-1?"bottom":"middle",a=o.indexOf("left")!==-1?"end":o.indexOf("right")!==-1?"start":"middle",l=e.ts||t.textfont.size,c=e.mrc?e.mrc/.8+1:0;l=i(l)&&l>0?l:0,n.call(p.font,e.tf||t.textfont.family,l,e.tc||t.textfont.color).attr("text-anchor",a).text(s).call(f.convertToTspans);var h=r.select(this.parentNode),d=n.selectAll("tspan.line"),v=((d[0].length||1)-1)*y+1,m=g[a]*c,b=l*.75+g[u]*c+(g[u]-1)*v*l/2;h.attr("transform","translate("+m+","+b+")"),v>1&&d.attr({x:n.attr("x"),y:n.attr("y")})})};var b=.5;p.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n="M"+e[0],r=[],i;for(i=1;i<e.length-1;i++)r.push(w(e[i-1],e[i],e[i+1],t));n+="Q"+r[0][0]+" "+e[1];for(i=2;i<e.length-1;i++)n+="C"+r[i-2][1]+" "+r[i-1][0]+" "+e[i];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1],n},p.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n="M"+e[0],r=e.length-1,i=[w(e[r],e[0],e[1],t)],s;for(s=1;s<r;s++)i.push(w(e[s-1],e[s],e[s+1],t));i.push(w(e[r-1],e[r],e[0],t));for(s=1;s<=r;s++)n+="C"+i[s-1][1]+" "+i[s][0]+" "+e[s];return n+="C"+i[r][1]+" "+i[0][0]+" "+e[0]+"Z",n};var E={hv:function(e,t){return"H"+r.round(t[0],2)+"V"+r.round(t[1],2)},vh:function(e,t){return"V"+r.round(t[1],2)+"H"+r.round(t[0],2)},hvh:function(e,t){return"H"+r.round((e[0]+t[0])/2,2)+"V"+r.round(t[1],2)+"H"+r.round(t[0],2)},vhv:function(e,t){return"V"+r.round((e[1]+t[1])/2,2)+"H"+r.round(t[0],2)+"V"+r.round(t[1],2)}},S=function(e,t){return"L"+r.round(t[0],2)+","+r.round(t[1],2)};p.steps=function(e){var t=E[e]||S;return function(e){var n="M"+r.round(e[0][0],2)+","+r.round(e[0][1],2);for(var i=1;i<e.length;i++)n+=t(e[i-1],e[i]);return n}},p.makeTester=function(e){var t=r.select("body").selectAll("#js-plotly-tester").data([0]);t.enter().append("svg").attr("id","js-plotly-tester").attr(l.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px"});var n=t.selectAll(".js-reference-point").data([0]);n.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),t.node()._cache||(t.node()._cache={}),e._tester=t,e._testref=n};var x=[],T=1e4;p.bBox=function(e){var t=e.attributes["data-bb"];if(t&&t.value)return a.extendFlat({},x[t.value]);var n=r.select("#js-plotly-tester"),i=n.node(),s=e.cloneNode(!0);i.appendChild(s),r.select(s).attr({x:0,y:0,transform:""});var o=s.getBoundingClientRect(),u=n.select(".js-reference-point").node().getBoundingClientRect();i.removeChild(s);var f={height:o.height,width:o.width,left:o.left-u.left,top:o.top-u.top,right:o.right-u.left,bottom:o.bottom-u.top};return x.length>=T&&(r.selectAll("[data-bb]").attr("data-bb",null),x=[]),e.setAttribute("data-bb",x.length),x.push(f),a.extendFlat({},f)},p.setClipUrl=function(e,t){if(!t){e.attr("clip-path",null);return}var n="#"+t,i=r.select("base");i.size()&&i.attr("href")&&(n=window.location.href+n),e.attr("clip-path","url("+n+")")}},{"../../constants/xmlns_namespaces":369,"../../lib":381,"../../lib/svg_text_utils":393,"../../plots/plots":452,"../../traces/scatter/make_bubble_size_func":567,"../../traces/scatter/subtypes":573,"../color":303,"../colorscale":316,"./symbol_defs":326,d3:72,"fast-isnumeric":76}],326:[function(e,t,n){"use strict";var r=e("d3");t.exports={circle:{n:0,f:function(e){var t=r.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=r.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=r.round(e*.4,2),n=r.round(e*1.2,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=r.round(e*.8/Math.sqrt(2),2),n="l"+t+","+t,i="l"+t+",-"+t,s="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+n+i+s+i+s+o+s+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=r.round(e*2/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+t+","+n+"H"+t+"L0,-"+i+"Z"}},"triangle-down":{n:6,f:function(e){var t=r.round(e*2/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+t+",-"+n+"H"+t+"L0,"+i+"Z"}},"triangle-left":{n:7,f:function(e){var t=r.round(e*2/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M"+n+",-"+t+"V"+t+"L-"+i+",0Z"}},"triangle-right":{n:8,f:function(e){var t=r.round(e*2/Math.sqrt(3),2),n=r.round(e/2,2),i=r.round(e,2);return"M-"+n+",-"+t+"V"+t+"L"+i+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=r.round(e*.6,2),n=r.round(e*1.2,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=r.round(e*.6,2),n=r.round(e*1.2,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=r.round(e*.6,2),n=r.round(e*1.2,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=r.round(e*.6,2),n=r.round(e*1.2,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=r.round(e*.951,2),n=r.round(e*.588,2),i=r.round(-e,2),s=r.round(e*-0.309,2),o=r.round(e*.809,2);return"M"+t+","+s+"L"+n+","+o+"H-"+n+"L-"+t+","+s+"L0,"+i+"Z"}},hexagon:{n:14,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+t+"L-"+i+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=r.round(e,2),n=r.round(e/2,2),i=r.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+t+",0L"+n+",-"+i+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=r.round(e*.924,2),n=r.round(e*.383,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=e*1.4,n=r.round(t*.225,2),i=r.round(t*.951,2),s=r.round(t*.363,2),o=r.round(t*.588,2),u=r.round(-t,2),a=r.round(t*-0.309,2),f=r.round(t*.118,2),l=r.round(t*.809,2),c=r.round(t*.382,2);return"M"+n+","+a+"H"+i+"L"+s+","+f+"L"+o+","+l+"L0,"+c+"L-"+o+","+l+"L-"+s+","+f+"L-"+i+","+a+"H-"+n+"L0,"+u+"Z"}},hexagram:{n:18,f:function(e){var t=r.round(e*.66,2),n=r.round(e*.38,2),i=r.round(e*.76,2);return"M-"+i+",0l-"+n+",-"+t+"h"+i+"l"+n+",-"+t+"l"+n+","+t+"h"+i+"l-"+n+","+t+"l"+n+","+t+"h-"+i+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(e*.8,2),i=r.round(e*1.6,2),s=r.round(e*4,2),o="A "+s+","+s+" 0 0 1 ";return"M-"+t+","+n+o+t+","+n+o+"0,-"+i+o+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=r.round(e*Math.sqrt(3)*.8,2),n=r.round(e*.8,2),i=r.round(e*1.6,2),s=r.round(e*4,2),o="A "+s+","+s+" 0 0 1 ";return"M"+t+",-"+n+o+"-"+t+",-"+n+o+"0,"+i+o+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=r.round(e*1.1,2),n=r.round(e*2,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+i+"-"+t+","+t+i+t+","+t+i+t+",-"+t+i+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=r.round(e*1.4,2),n=r.round(e*1.9,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+i+"0,"+t+i+t+",0"+i+"0,-"+t+i+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=r.round(e*.7,2),n=r.round(e*1.4,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=r.round(e*1.4,2),n=r.round(e*.7,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=r.round(e,2),n=r.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=r.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=r.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=r.round(e*1.3,2),n=r.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=r.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0},asterisk:{n:35,f:function(e){var t=r.round(e*1.2,2),n=r.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0},hash:{n:36,f:function(e){var t=r.round(e/2,2),n=r.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0},"y-up":{n:37,f:function(e){var t=r.round(e*1.2,2),n=r.round(e*1.6,2),i=r.round(e*.8,2);return"M-"+t+","+i+"L0,0M"+t+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(e){var t=r.round(e*1.2,2),n=r.round(e*1.6,2),i=r.round(e*.8,2);return"M-"+t+",-"+i+"L0,0M"+t+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(e){var t=r.round(e*1.2,2),n=r.round(e*1.6,2),i=r.round(e*.8,2);return"M"+i+","+t+"L0,0M"+i+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(e){var t=r.round(e*1.2,2),n=r.round(e*1.6,2),i=r.round(e*.8,2);return"M-"+i+","+t+"L0,0M-"+i+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(e){var t=r.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(e){var t=r.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(e){var t=r.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(e){var t=r.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0}}},{d3:72}],327:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"]},symmetric:{valType:"boolean"},array:{valType:"data_array"},arrayminus:{valType:"data_array"},value:{valType:"number",min:0,dflt:10},valueminus:{valType:"number",min:0,dflt:10},traceref:{valType:"integer",min:0,dflt:0},tracerefminus:{valType:"integer",min:0,dflt:0},copy_ystyle:{valType:"boolean"},copy_zstyle:{valType:"boolean"},color:{valType:"color"},thickness:{valType:"number",min:0,dflt:2},width:{valType:"number",min:0},_deprecated:{opacity:{valType:"number"}}}},{}],328:[function(e,t,n){"use strict";function u(e,t,n,i){var u=t["error_"+i]||{},a=u.visible&&["linear","log"].indexOf(n.type)!==-1,f=[];if(!a)return;var l=o(u);for(var c=0;c<e.length;c++){var h=e[c],p=h[i];if(!r(n.c2l(p)))continue;var d=l(p,c);if(r(d[0])&&r(d[1])){var v=h[i+"s"]=p-d[0],m=h[i+"h"]=p+d[1];f.push(v,m)}}s.expand(n,f,{padded:!0})}var r=e("fast-isnumeric"),i=e("../../plots/plots"),s=e("../../plots/cartesian/axes"),o=e("./compute_error");t.exports=function(t){var n=t.calcdata;for(var r=0;r<n.length;r++){var o=n[r],a=o[0].trace;if(!i.traceIs(a,"errorBarsOK"))continue;var f=s.getFromId(t,a.xaxis),l=s.getFromId(t,a.yaxis);u(o,a,f,"x"),u(o,a,l,"y")}}},{"../../plots/cartesian/axes":403,"../../plots/plots":452,"./compute_error":329,"fast-isnumeric":76}],329:[function(e,t,n){"use strict";function r(e,t){if(e==="percent")return function(e){return Math.abs(e*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(e){return Math.sqrt(Math.abs(e))}}t.exports=function(t){var n=t.type,i=t.symmetric;if(n==="data"){var s=t.array,o=t.arrayminus;return i||o===undefined?function(t,n){var r=+s[n];return[r,r]}:function(t,n){return[+o[n],+s[n]]}}var u=r(n,t.value),a=r(n,t.valueminus);return i||t.valueminus===undefined?function(t){var n=u(t);return[n,n]}:function(t){return[a(t),u(t)]}}},{}],330:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/plots"),s=e("../../lib"),o=e("./attributes");t.exports=function(e,t,n,u){function c(e,t){return s.coerce(l,f,o,e,t)}var a="error_"+u.axis,f=t[a]={},l=e[a]||{},h=l.array!==undefined||l.value!==undefined||l.type==="sqrt",p=c("visible",h);if(p===!1)return;var d=c("type","array"in l?"data":"percent"),v=!0;d!=="sqrt"&&(v=c("symmetric",!((d==="data"?"arrayminus":"valueminus")in l)));if(d==="data"){var m=c("array");m||(f.array=[]),c("traceref");if(!v){var g=c("arrayminus");g||(f.arrayminus=[]),c("tracerefminus")}}else if(d==="percent"||d==="constant")c("value"),v||c("valueminus");var y="copy_"+u.inherit+"style";if(u.inherit){var b=t["error_"+u.inherit];(b||{}).visible&&c(y,!(l.color||r(l.thickness)||r(l.width)))}if(!u.inherit||!f[y])c("color",n),c("thickness"),c("width",i.traceIs(t,"gl3d")?0:4)}},{"../../lib":381,"../../plots/plots":452,"./attributes":327,"fast-isnumeric":76}],331:[function(e,t,n){"use strict";var r=t.exports={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.calcFromTrace=function(e,t){var n=e.x||[],i=e.y,s=n.length||i.length,o=new Array(s);for(var u=0;u<s;u++)o[u]={x:n[u],y:i[u]};return o[0].trace=e,r.calc({calcdata:[o],_fullLayout:t}),o},r.plot=e("./plot"),r.style=e("./style"),r.hoverInfo=function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}},{"./attributes":327,"./calc":328,"./defaults":330,"./plot":332,"./style":333}],332:[function(e,t,n){"use strict";function u(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};return e.yh!==undefined&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0))),e.xh!==undefined&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),i(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0))),r}var r=e("d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("../../traces/scatter/subtypes");t.exports=function(t,n){var a=n.x(),f=n.y();t.each(function(e){var t=e[0].trace,n=t.error_x||{},l=t.error_y||{},c=o.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!l.visible&&!n.visible)return;var h=r.select(this).selectAll("g.errorbar").data(s.identity);h.enter().append("g").classed("errorbar",!0),h.each(function(e){var t=r.select(this),s=u(e,a,f);if(c&&!e.vis)return;var o;if(l.visible&&i(s.x)&&i(s.yh)&&i(s.ys)){var h=l.width;o="M"+(s.x-h)+","+s.yh+"h"+2*h+"m-"+h+",0V"+s.ys,s.noYS||(o+="m-"+h+",0h"+2*h),t.append("path").classed("yerror",!0).attr("d",o)}if(n.visible&&i(s.y)&&i(s.xh)&&i(s.xs)){var p=(n.copy_ystyle?l:n).width;o="M"+s.xh+","+(s.y-p)+"v"+2*p+"m0,-"+p+"H"+s.xs,s.noXS||(o+="m0,-"+p+"v"+2*p),t.append("path").classed("xerror",!0).attr("d",o)}})})}},{"../../lib":381,"../../traces/scatter/subtypes":573,d3:72,"fast-isnumeric":76}],333:[function(e,t,n){"use strict";var r=e("d3"),i=e("../color");t.exports=function(t){t.each(function(e){var t=e[0].trace,n=t.error_y||{},s=t.error_x||{},o=r.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),s.copy_ystyle&&(s=n),o.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(i.stroke,s.color)})}},{"../color":303,d3:72}],334:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants");t.exports={_isLinkedToArray:!0,source:{valType:"string"},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},sizex:{valType:"number",dflt:0},sizey:{valType:"number",dflt:0},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain"},opacity:{valType:"number",min:0,max:1,dflt:1},x:{valType:"number",dflt:0},y:{valType:"number",dflt:0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper"}}},{"../../plots/cartesian/constants":408}],335:[function(e,t,n){"use strict";function o(e,t,n){function o(n,r){return i.coerce(e,t,s,n,r)}t=t||{},o("source"),o("layer"),o("x"),o("y"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var u=0;u<2;u++){var a={_fullLayout:n},f=["x","y"][u];r.coerceRef(e,t,a,f,"paper")}return t}var r=e("../../plots/cartesian/axes"),i=e("../../lib"),s=e("./attributes");t.exports=function(t,n){if(!t.images||!Array.isArray(t.images))return;var r=t.images,i=n.images=[];for(var s=0;s<r.length;s++){var u=r[s];if(!u.source)continue;var a=o(r[s]||{},i[s]||{},n);i.push(a)}}},{"../../lib":381,"../../plots/cartesian/axes":403,"./attributes":334}],336:[function(e,t,n){"use strict";var r=e("d3"),i=e("../drawing"),s=e("../../plots/cartesian/axes");t.exports=function(t){function h(e){var n=r.select(this),i=new Promise(function(t){function i(){n.remove(),t()}var r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;var t=e.getContext("2d");t.drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r)},n.on("error",i),n.on("load",t),r.src=e.source});t._promises.push(i)}function p(e){var o=r.select(this),u=s.getFromId(t,e.xref),a=s.getFromId(t,e.yref),f=n._size,l=u?Math.abs(u.l2p(e.sizex)-u.l2p(0)):e.sizex*f.w,h=a?Math.abs(a.l2p(e.sizey)-a.l2p(0)):e.sizey*f.h,p=l*c.x[e.xanchor].offset+f.l,d=h*c.y[e.yanchor].offset+f.t,v=c.x[e.xanchor].sizing+c.y[e.yanchor].sizing,m=(u?u.l2p(e.x):e.x*f.w)+p,g=(a?a.l2p(e.y):f.h-e.y*f.h)+d;switch(e.sizing){case"fill":v+=" slice";break;case"stretch":v="none"}o.attr({x:m,y:g,width:l,height:h,preserveAspectRatio:v,opacity:e.opacity});var y=u?u._id:"",b=a?a._id:"",w=y+b;o.call(i.setClipUrl,"clip"+n._uid+w)}function d(e){return e.source}var n=t._fullLayout,o=[],u=[],a=[];if(!n.images)return;for(var f=0;f<n.images.length;f++){var l=n.images[f];l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"?u.push(l):l.layer==="above"?o.push(l):a.push(l)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-0.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-0.5},bottom:{sizing:"YMax",offset:-1}}},v=n._imageLowerLayer.selectAll("image").data(a,d),m=n._imageSubplotLayer.selectAll("image").data(u,d),g=n._imageUpperLayer.selectAll("image").data(o,d);v.enter().append("image").each(h),m.enter().append("image").each(h),g.enter().append("image").each(h),v.exit().remove(),m.exit().remove(),g.exit().remove(),v.each(p),m.each(p),g.each(p)}},{"../../plots/cartesian/axes":403,"../drawing":325,d3:72}],337:[function(e,t,n){"use strict";var r=e("./draw"),i=e("./defaults"),s=e("./attributes");t.exports={draw:r,layoutAttributes:s,supplyLayoutDefaults:i}},{"./attributes":334,"./defaults":335,"./draw":336}],338:[function(e,t,n){"use strict";n.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3},n.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3},n.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3},n.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3}},{}],339:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),s=e("../../lib/extend").extendFlat;t.exports={bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.defaultLine},borderwidth:{valType:"number",min:0,dflt:0},font:s({},r,{}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"]},tracegroupgap:{valType:"number",min:0,dflt:10},x:{valType:"number",min:-2,max:3,dflt:1.02},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"}}},{"../../lib/extend":376,"../../plots/font_attributes":421,"../color/attributes":302}],340:[function(e,t,n){"use strict";t.exports={scrollBarWidth:4,scrollBarHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],341:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/plots"),s=e("./attributes"),o=e("./helpers");t.exports=function(t,n,u){function y(e,t){return r.coerce(a,f,s,e,t)}var a=t.legend||{},f=n.legend={},l=0,c="normal",h,p,d,v;for(var m=0;m<u.length;m++){var g=u[m];o.legendGetsTrace(g)&&(l++,i.traceIs(g,"pie")&&l++);if(i.traceIs(g,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(g.fill)!==-1)c=o.isGrouped({traceorder:c})?"grouped+reversed":"reversed";g.legendgroup!==undefined&&g.legendgroup!==""&&(c=o.isReversed({traceorder:c})?"reversed+grouped":"grouped")}var b=r.coerce(t,n,i.layoutAttributes,"showlegend",l>1);if(b===!1)return;y("bgcolor",n.paper_bgcolor),y("bordercolor"),y("borderwidth"),r.coerceFont(y,"font",n.font),y("orientation");if(f.orientation==="h"){var w=t.xaxis;w&&w.rangeslider&&w.rangeslider.visible?(h=0,d="left",p=1.1,v="bottom"):(h=0,d="left",p=-0.1,v="top")}y("traceorder",c),o.isGrouped(n.legend)&&y("tracegroupgap"),y("x",h),y("xanchor",d),y("y",p),y("yanchor",v),r.noneOrAll(a,f,["x","y"])}},{"../../lib":381,"../../plots/plots":452,"./attributes":339,"./helpers":344}],342:[function(e,t,n){"use strict";function v(e,t){function h(n){i.util.convertToTspans(n,function(){n.selectAll("tspan.line").attr({x:n.attr("x")}),e.call(g,t)})}var n=e.data()[0][0],r=t._fullLayout,s=n.trace,u=o.traceIs(s,"pie"),f=s.index,l=u?n.label:s.name,c=e.selectAll("text.legendtext").data([0]);c.enter().append("text").classed("legendtext",!0),c.attr({x:40,y:0,"data-unformatted":l}).style("text-anchor","start").classed("user-select-none",!0).call(a.font,r.legend.font).text(l),t._context.editable&&!u?c.call(i.util.makeEditable).call(h).on("edit",function(e){this.attr({"data-unformatted":e}),this.text(e).call(h),this.text()||(e="    "),i.restyle(t,"name",e,f)}):c.call(h)}function m(e,t){var n=t._fullLayout.hiddenlabels?t._fullLayout.hiddenlabels.slice():[],r=e.selectAll("rect").data([0]);r.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(f.fill,"rgba(0,0,0,0)"),r.on("click",function(){if(t._dragged)return;var r=e.data()[0][0],s=t._fullData,u=r.trace,a=u.legendgroup,f=[],l,c;if(o.traceIs(u,"pie")){var h=r.label,p=n.indexOf(h);p===-1?n.push(h):n.splice(p,1),i.relayout(t,"hiddenlabels",n)}else{if(a==="")f=[u.index];else for(var d=0;d<s.length;d++)l=s[d],l.legendgroup===a&&f.push(l.index);c=u.visible===!0?"legendonly":!0,i.restyle(t,"visible",c,f)}})}function g(e,t){var n=e.data()[0][0],r=e.selectAll(".legendtoggle"),i=e.select("g[class*=math-group]"),o=t._fullLayout.legend,u=o.font.size*1.3,f,l;if(!n.trace.showlegend){e.remove();return}if(i.node()){var c=a.bBox(i.node());f=c.height,l=c.width,s.setTranslate(i,0,f/4)}else{var h=e.selectAll(".legendtext"),p=e.selectAll(".legendtext>tspan"),d=p[0].length||1;f=u*d,l=h.node()&&a.bBox(h.node()).width;var v=u*(.3+(1-d)/2);h.attr("y",v),p.attr("y",v)}f=Math.max(f,16)+3,r.attr({x:0,y:-f/2,height:f}),n.height=f,n.width=l}function y(e,t,n){var i=e._fullLayout,o=i.legend,u=o.borderwidth,a=p.isGrouped(o);if(p.isVertical(o))a&&t.each(function(e,t){s.setTranslate(this,0,t*o.tracegroupgap)}),o.width=0,o.height=0,n.each(function(e){var t=e[0],n=t.height,r=t.width;s.setTranslate(this,u,5+u+o.height+n/2),o.height+=n,o.width=Math.max(o.width,r)}),o.width+=45+u*2,o.height+=10+u*2,a&&(o.height+=(o._lgroupsLength-1)*o.tracegroupgap),n.selectAll(".legendtoggle").attr("width",(e._context.editable?0:o.width)+40),o.width=Math.ceil(o.width),o.height=Math.ceil(o.height);else if(a){o.width=0,o.height=0;var f=[o.width],l=t.data();for(var c=0,h=l.length;c<h;c++){var d=l[c].map(function(e){return e[0].width}),v=40+Math.max.apply(null,d);o.width+=o.tracegroupgap+v,f.push(o.width)}t.each(function(e,t){s.setTranslate(this,f[t],0)}),t.each(function(){var e=r.select(this),t=e.selectAll("g.traces"),n=0;t.each(function(e){var t=e[0],r=t.height;s.setTranslate(this,0,5+u+n+r/2),n+=r}),o.height=Math.max(o.height,n)}),o.height+=10+u*2,o.width+=u*2,o.width=Math.ceil(o.width),o.height=Math.ceil(o.height),n.selectAll(".legendtoggle").attr("width",e._context.editable?0:o.width)}else o.width=0,o.height=0,n.each(function(e){var t=e[0],n=40+t.width,r=o.tracegroupgap||5;s.setTranslate(this,u+o.width,5+u+t.height/2),o.width+=r+n,o.height=Math.max(o.height,t.height)}),o.width+=u*2,o.height+=10+u*2,o.width=Math.ceil(o.width),o.height=Math.ceil(o.height),n.selectAll(".legendtoggle").attr("width",e._context.editable?0:o.width)}function b(e){var t=e._fullLayout,n=t.legend,r="left";d.isRightAnchor(n)?r="right":d.isCenterAnchor(n)&&(r="center");var i="top";d.isBottomAnchor(n)?i="bottom":d.isMiddleAnchor(n)&&(i="middle"),o.autoMargin(e,"legend",{x:n.x,y:n.y,l:n.width*({right:1,center:.5}[r]||0),r:n.width*({left:1,center:.5}[r]||0),b:n.height*({top:1,middle:.5}[i]||0),t:n.height*({bottom:1,middle:.5}[i]||0)})}function w(e){var t=e._fullLayout,n=t.legend,r="left";d.isRightAnchor(n)?r="right":d.isCenterAnchor(n)&&(r="center"),o.autoMargin(e,"legend",{x:n.x,y:.5,l:n.width*({right:1,center:.5}[r]||0),r:n.width*({left:1,center:.5}[r]||0),b:0,t:0})}var r=e("d3"),i=e("../../plotly"),s=e("../../lib"),o=e("../../plots/plots"),u=e("../dragelement"),a=e("../drawing"),f=e("../color"),l=e("./constants"),c=e("./get_legend_data"),h=e("./style"),p=e("./helpers"),d=e("./anchor_utils");t.exports=function(t){function $(e,t){C.attr("data-scroll",t).call(s.setTranslate,0,t),k.call(a.setRect,j,e,l.scrollBarWidth,l.scrollBarHeight),T.select("rect").attr({y:g.borderwidth-t})}var n=t._fullLayout,p="legend"+n._uid;if(!n._infolayer||!t.calcdata)return;var g=n.legend,E=n.showlegend&&c(t.calcdata,g),S=n.hiddenlabels||[];if(!n.showlegend||!E.length){n._infolayer.selectAll(".legend").remove(),n._topdefs.select("#"+p).remove(),o.autoMargin(t,"legend");return}typeof t.firstRender=="undefined"?t.firstRender=!0:t.firstRender&&(t.firstRender=!1);var x=n._infolayer.selectAll("g.legend").data([0]);x.enter().append("g").attr({"class":"legend","pointer-events":"all"});var T=n._topdefs.selectAll("#"+p).data([0]);T.enter().append("clipPath").attr("id",p).append("rect");var N=x.selectAll("rect.bg").data([0]);N.enter().append("rect").attr({"class":"bg","shape-rendering":"crispEdges"}).call(f.stroke,g.bordercolor).call(f.fill,g.bgcolor).style("stroke-width",g.borderwidth+"px");var C=x.selectAll("g.scrollbox").data([0]);C.enter().append("g").attr("class","scrollbox");var k=x.selectAll("rect.scrollbar").data([0]);k.enter().append("rect").attr({"class":"scrollbar",rx:20,ry:2,width:0,height:0}).call(f.fill,"#808BA4");var L=C.selectAll("g.groups").data(E);L.enter().append("g").attr("class","groups"),L.exit().remove();var A=L.selectAll("g.traces").data(s.identity);A.enter().append("g").attr("class","traces"),A.exit().remove(),A.call(h).style("opacity",function(e){var t=e[0].trace;return o.traceIs(t,"pie")?S.indexOf(e[0].label)!==-1?.5:1:t.visible==="legendonly"?.5:1}).each(function(){r.select(this).call(v,t).call(m,t)}),t.firstRender&&(y(t,L,A),b(t));var O=0,M=n.width,_=0,D=n.height;y(t,L,A),g.height>D?w(t):b(t);var P=n._size,H=P.l+P.w*g.x,B=P.t+P.h*(1-g.y);d.isRightAnchor(g)?H-=g.width:d.isCenterAnchor(g)&&(H-=g.width/2),d.isBottomAnchor(g)?B-=g.height:d.isMiddleAnchor(g)&&(B-=g.height/2);var j=g.width,F=P.w;j>F?(H=P.l,j=F):(H+j>M&&(H=M-j),H<O&&(H=O),j=Math.min(M-H,g.width));var I=g.height,q=P.h;I>q?(B=P.t,I=q):(B+I>D&&(B=D-I),B<_&&(B=_),I=Math.min(D-B,g.height)),s.setTranslate(x,H,B),N.attr({width:j-g.borderwidth,height:I-g.borderwidth,x:g.borderwidth/2,y:g.borderwidth/2});var R=C.attr("data-scroll")||0;s.setTranslate(C,0,R),T.select("rect").attr({width:j-2*g.borderwidth,height:I-2*g.borderwidth,x:g.borderwidth-R,y:g.borderwidth}),C.call(a.setClipUrl,p);if(g.height-I>0&&!t._context.staticPlot){N.attr({width:j-2*g.borderwidth+l.scrollBarWidth+l.scrollBarMargin}),T.select("rect").attr({width:j-2*g.borderwidth+l.scrollBarWidth+l.scrollBarMargin}),t.firstRender&&$(l.scrollBarMargin,0);var U=I-l.scrollBarHeight-2*l.scrollBarMargin,z=g.height-I,W=l.scrollBarMargin,X=0;$(W,X),x.on("wheel",null),x.on("wheel",function(){X=s.constrain(C.attr("data-scroll")-r.event.deltaY/U*z,-z,0),W=l.scrollBarMargin-X/z*U,$(W,X),r.event.preventDefault()}),k.on(".drag",null),C.on(".drag",null);var V=r.behavior.drag().on("drag",function(){W=s.constrain
(r.event.y-l.scrollBarHeight/2,l.scrollBarMargin,l.scrollBarMargin+U),X=-(W-l.scrollBarMargin)/U*z,$(W,X)});k.call(V),C.call(V)}if(t._context.editable){var J,K,Q,G;x.classed("cursor-move",!0),u.init({element:x.node(),prepFn:function(){var e=s.getTranslate(x);Q=e.x,G=e.y},moveFn:function(e,t){var n=Q+e,r=G+t;s.setTranslate(x,n,r),J=u.align(n,0,P.l,P.l+P.w,g.xanchor),K=u.align(r,0,P.t+P.h,P.t,g.yanchor)},doneFn:function(e){e&&J!==undefined&&K!==undefined&&i.relayout(t,{"legend.x":J,"legend.y":K})}})}}},{"../../lib":381,"../../plotly":400,"../../plots/plots":452,"../color":303,"../dragelement":323,"../drawing":325,"./anchor_utils":338,"./constants":340,"./get_legend_data":343,"./helpers":344,"./style":346,d3:72}],343:[function(e,t,n){"use strict";var r=e("../../plots/plots"),i=e("./helpers");t.exports=function(t,n){function h(e,t){if(e===""||!i.isGrouped(n)){var r="~~i"+f;o.push(r),s[r]=[[t]],f++}else o.indexOf(e)===-1?(o.push(e),u=!0,s[e]=[[t]]):s[e].push([t])}var s={},o=[],u=!1,a={},f=0,l,c;for(l=0;l<t.length;l++){var p=t[l],d=p[0],v=d.trace,m=v.legendgroup;if(!i.legendGetsTrace(v)||!v.showlegend)continue;if(r.traceIs(v,"pie")){a[m]||(a[m]={});for(c=0;c<p.length;c++){var g=p[c].label;a[m][g]||(h(m,{label:g,color:p[c].color,i:p[c].i,trace:v}),a[m][g]=!0)}}else h(m,d)}if(!o.length)return[];var y=o.length,b,w;if(u&&i.isGrouped(n)){w=new Array(y);for(l=0;l<y;l++)b=s[o[l]],w[l]=i.isReversed(n)?b.reverse():b}else{w=[new Array(y)];for(l=0;l<y;l++)b=s[o[l]][0],w[0][i.isReversed(n)?y-l-1:l]=b;y=1}return n._lgroupsLength=y,w}},{"../../plots/plots":452,"./helpers":344}],344:[function(e,t,n){"use strict";var r=e("../../plots/plots");n.legendGetsTrace=function(t){return t.visible&&r.traceIs(t,"showLegend")},n.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1},n.isVertical=function(t){return t.orientation!=="h"},n.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{"../../plots/plots":452}],345:[function(e,t,n){"use strict";var r=t.exports={};r.layoutAttributes=e("./attributes"),r.supplyLayoutDefaults=e("./defaults"),r.draw=e("./draw"),r.style=e("./style")},{"./attributes":339,"./defaults":341,"./draw":342,"./style":346}],346:[function(e,t,n){"use strict";function l(e){var t=e[0].trace,n=t.visible&&t.fill&&t.fill!=="none",i=a.hasLines(t),s=r.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);s.enter().append("path").classed("js-fill",!0),s.exit().remove(),s.attr("d","M5,0h30v6h-30z").call(o.fillGroupStyle);var u=r.select(this).select(".legendlines").selectAll("path").data(i?[e]:[]);u.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),u.exit().remove(),u.call(o.lineGroupStyle)}function c(e){function h(e,t,r){var s=i.nestedProperty(n,e).get(),o=Array.isArray(s)&&t?t(s):s;if(r){if(o<r[0])return r[0];if(o>r[1])return r[1]}return o}function p(e){return e[0]}var t=e[0],n=t.trace,s=a.hasMarkers(n),u=a.hasText(n),f=a.hasLines(n),l,c;if(s||u||f){var d={},v={};s&&(d.mc=h("marker.color",p),d.mo=h("marker.opacity",i.mean,[.2,1]),d.ms=h("marker.size",i.mean,[2,16]),d.mlc=h("marker.line.color",p),d.mlw=h("marker.line.width",i.mean,[0,5]),v.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),f&&(v.line={width:h("line.width",p,[0,10])}),u&&(d.tx="Aa",d.tp=h("textposition",p),d.ts=10,d.tc=h("textfont.color",p),d.tf=h("textfont.family",p)),l=[i.minExtend(t,d)],c=i.minExtend(n,v)}var m=r.select(this).select("g.legendpoints"),g=m.selectAll("path.scatterpts").data(s?l:[]);g.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),g.exit().remove(),g.call(o.pointStyle,c),s&&(l[0].mrc=3);var y=m.selectAll("g.pointtext").data(u?l:[]);y.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),y.exit().remove(),y.selectAll("text").call(o.textPointStyle,c)}function h(e){var t=e[0].trace,n=t.marker||{},i=n.line||{},o=r.select(this).select("g.legendpoints").selectAll("path.legendbar").data(s.traceIs(t,"bar")?[e]:[]);o.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),o.exit().remove(),o.each(function(e){var t=(e.mlw+1||i.width+1)-1,s=r.select(this);s.style("stroke-width",t+"px").call(u.fill,e.mc||n.color),t&&s.call(u.stroke,e.mlc||i.color)})}function p(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(s.traceIs(t,"box")&&t.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(e){var n=(e.lw+1||t.line.width+1)-1,i=r.select(this);i.style("stroke-width",n+"px").call(u.fill,e.fc||t.fillcolor),n&&i.call(u.stroke,e.lc||t.line.color)})}function d(e){var t=e[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendpie").data(s.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(f,e[0],t)}var r=e("d3"),i=e("../../lib"),s=e("../../plots/plots"),o=e("../drawing"),u=e("../color"),a=e("../../traces/scatter/subtypes"),f=e("../../traces/pie/style_one");t.exports=function(t){t.each(function(e){var t=r.select(this),n=t.selectAll("g.legendfill").data([e]);n.enter().append("g").classed("legendfill",!0);var i=t.selectAll("g.legendlines").data([e]);i.enter().append("g").classed("legendlines",!0);var s=t.selectAll("g.legendsymbols").data([e]);s.enter().append("g").classed("legendsymbols",!0),s.style("opacity",e[0].trace.opacity),s.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(h).each(p).each(d).each(l).each(c)}},{"../../lib":381,"../../plots/plots":452,"../../traces/pie/style_one":552,"../../traces/scatter/subtypes":573,"../color":303,"../drawing":325,d3:72}],347:[function(e,t,n){"use strict";function l(e,t){var n=t.currentTarget,i=n.getAttribute("data-attr"),o=n.getAttribute("data-val")||!0,u=e._fullLayout,a={};if(i==="zoom"){var l=o==="in"?.5:2,c=(1+l)/2,h=(1-l)/2,p=r.Axes.list(e,null,!0),d,v;for(var m=0;m<p.length;m++){d=p[m];if(!d.fixedrange){v=d._name;if(o==="auto")a[v+".autorange"]=!0;else if(o==="reset")if(d._rangeInitial===undefined)a[v+".autorange"]=!0;else{var g=d._rangeInitial.slice();a[v+".range[0]"]=g[0],a[v+".range[1]"]=g[1]}else{var y=d.range;a[v+".range[0]"]=c*y[0]+h*y[1],a[v+".range[1]"]=c*y[1]+h*y[0]}}}}else i==="hovermode"&&(o==="x"||o==="y")&&(o=u._isHoriz?"y":"x",n.setAttribute("data-val",o)),a[i]=o;r.relayout(e,a).then(function(){i==="dragmode"&&(u._has("cartesian")&&s(u._paper.select(".nsewdrag"),f[o]),r.Fx.supplyLayoutDefaults(e.layout,u,e._fullData),r.Fx.init(e))})}function c(e,t){var n=t.currentTarget,i=n.getAttribute("data-attr"),s=n.getAttribute("data-val")||!0,o=e._fullLayout,u=r.Plots.getSubplotIds(o,"gl3d"),a={},f=i.split(".");for(var l=0;l<u.length;l++)a[u[l]+"."+f[1]]=s;r.relayout(e,a)}function h(e,t){var n=t.currentTarget,i=n.getAttribute("data-attr"),s=e._fullLayout,o=r.Plots.getSubplotIds(s,"gl3d");for(var u=0;u<o.length;u++){var a=o[u],f=s[a],l=f._scene;i==="resetDefault"?l.setCameraToDefault():i==="resetLastSave"&&l.setCamera(f.camera)}}function p(e,t){var n=t.currentTarget,s=n._previousVal||!1,o=e.layout,u=e._fullLayout,a=r.Plots.getSubplotIds(u,"gl3d"),f=["xaxis","yaxis","zaxis"],l=["showspikes","spikesides","spikethickness","spikecolor"],c={},h={},p={};if(s)p=i.extendDeep(o,s),n._previousVal=null;else{p={"allaxes.showspikes":!1};for(var d=0;d<a.length;d++){var v=a[d],m=u[v],g=c[v]={};g.hovermode=m.hovermode,p[v+".hovermode"]=!1;for(var y=0;y<3;y++){var b=f[y];h=g[b]={};for(var w=0;w<l.length;w++){var E=l[w];h[E]=m[b][E]}}}n._previousVal=i.extendDeep({},c)}r.relayout(e,p)}function d(e,t){var n=t.currentTarget,i=n.getAttribute("data-attr"),s=n.getAttribute("data-val")||!0,o=e._fullLayout,u=r.Plots.getSubplotIds(o,"geo");for(var a=0;a<u.length;a++){var f=o[u[a]]._geo;if(i==="zoom"){var l=f.projection.scale(),c=s==="in"?2*l:.5*l;f.projection.scale(c),f.zoom.scale(c),f.render()}else i==="reset"&&f.zoomReset()}}function v(e){var t=e._fullLayout,n;t._has("cartesian")?n=t._isHoriz?"y":"x":n="closest";var i=e._fullLayout.hovermode?!1:n;r.relayout(e,"hovermode",i)}var r=e("../../plotly"),i=e("../../lib"),s=e("../../lib/setcursor"),o=e("../../snapshot/download"),u=e("../../../build/ploticon"),a=t.exports={};a.toImage={name:"toImage",title:"Download plot as a png",icon:u.camera,click:function(e){var t="png";i.notifier("Taking snapshot - this may take a few seconds","long"),i.isIE()&&(i.notifier("IE only supports svg.  Changing format to svg.","long"),t="svg"),o(e,{format:t}).then(function(e){i.notifier("Snapshot succeeded - "+e,"long")}).catch(function(){i.notifier("Sorry there was a problem downloading your snapshot!","long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:"Save and edit plot in cloud",icon:u.disk,click:function(e){r.Plots.sendDataToCloud(e)}},a.zoom2d={name:"zoom2d",title:"Zoom",attr:"dragmode",val:"zoom",icon:u.zoombox,click:l},a.pan2d={name:"pan2d",title:"Pan",attr:"dragmode",val:"pan",icon:u.pan,click:l},a.select2d={name:"select2d",title:"Box Select",attr:"dragmode",val:"select",icon:u.selectbox,click:l},a.lasso2d={name:"lasso2d",title:"Lasso Select",attr:"dragmode",val:"lasso",icon:u.lasso,click:l},a.zoomIn2d={name:"zoomIn2d",title:"Zoom in",attr:"zoom",val:"in",icon:u.zoom_plus,click:l},a.zoomOut2d={name:"zoomOut2d",title:"Zoom out",attr:"zoom",val:"out",icon:u.zoom_minus,click:l},a.autoScale2d={name:"autoScale2d",title:"Autoscale",attr:"zoom",val:"auto",icon:u.autoscale,click:l},a.resetScale2d={name:"resetScale2d",title:"Reset axes",attr:"zoom",val:"reset",icon:u.home,click:l},a.hoverClosestCartesian={name:"hoverClosestCartesian",title:"Show closest data on hover",attr:"hovermode",val:"closest",icon:u.tooltip_basic,gravity:"ne",click:l},a.hoverCompareCartesian={name:"hoverCompareCartesian",title:"Compare data on hover",attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:u.tooltip_compare,gravity:"ne",click:l};var f={pan:"move",zoom:"crosshair",select:"crosshair",lasso:"crosshair"};a.zoom3d={name:"zoom3d",title:"Zoom",attr:"scene.dragmode",val:"zoom",icon:u.zoombox,click:c},a.pan3d={name:"pan3d",title:"Pan",attr:"scene.dragmode",val:"pan",icon:u.pan,click:c},a.orbitRotation={name:"orbitRotation",title:"orbital rotation",attr:"scene.dragmode",val:"orbit",icon:u["3d_rotate"],click:c},a.tableRotation={name:"tableRotation",title:"turntable rotation",attr:"scene.dragmode",val:"turntable",icon:u["z-axis"],click:c},a.resetCameraDefault3d={name:"resetCameraDefault3d",title:"Reset camera to default",attr:"resetDefault",icon:u.home,click:h},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:"Reset camera to last save",attr:"resetLastSave",icon:u.movie,click:h},a.hoverClosest3d={name:"hoverClosest3d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:u.tooltip_basic,gravity:"ne",click:p},a.zoomInGeo={name:"zoomInGeo",title:"Zoom in",attr:"zoom",val:"in",icon:u.zoom_plus,click:d},a.zoomOutGeo={name:"zoomOutGeo",title:"Zoom out",attr:"zoom",val:"out",icon:u.zoom_minus,click:d},a.resetGeo={name:"resetGeo",title:"Reset",attr:"reset",val:null,icon:u.autoscale,click:d},a.hoverClosestGeo={name:"hoverClosestGeo",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:u.tooltip_basic,gravity:"ne",click:v},a.hoverClosestGl2d={name:"hoverClosestGl2d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:u.tooltip_basic,gravity:"ne",click:v},a.hoverClosestPie={name:"hoverClosestPie",title:"Toggle show closest data on hover",attr:"hovermode",val:"closest",icon:u.tooltip_basic,gravity:"ne",click:v},a.toggleHover={name:"toggleHover",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:u.tooltip_basic,gravity:"ne",click:function(e,t){v(e),p(e,t)}},a.resetViews={name:"resetViews",title:"Reset views",icon:u.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),h(e,t)}}},{"../../../build/ploticon":2,"../../lib":381,"../../lib/setcursor":389,"../../plotly":400,"../../snapshot/download":467}],348:[function(e,t,n){"use strict";function o(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}function a(e,t){var n=e._fullLayout,i=new o({graphInfo:e,container:n._paperdiv.node(),buttons:t});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}var r=e("d3"),i=e("../../lib"),s=e("../../../build/ploticon"),u=o.prototype;u.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context;n.displayModeBar==="hover"?this.element.className="modebar modebar--hover":this.element.className="modebar";var r=!this.hasButtons(t),i=this.hasLogo!==n.displaylogo;if(r||i)this.removeAllButtons(),this.updateButtons(t),n.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0);this.updateActiveButton()},u.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(r)!==-1)throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var i=t.createButton(e);t.buttonElements.push(i),n.appendChild(i)}),t.element.appendChild(n)})},u.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},u.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var r=e.title;r===undefined&&(r=e.name),(r||r===0)&&n.setAttribute("data-title",r),e.attr!==undefined&&n.setAttribute("data-attr",e.attr);var i=e.val;i!==undefined&&(typeof i=="function"&&(i=i(this.graphInfo)),n.setAttribute("data-val",i));var o=e.click;if(typeof o!="function")throw new Error("must provide button 'click' function in button config");return n.addEventListener("click",function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&n.classList.add("active"),n.appendChild(this.createIcon(e.icon||s.question)),n.setAttribute("data-gravity",e.gravity||"n"),n},u.createIcon=function(e){var t=e.ascent-e.descent,n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"path");return r.setAttribute("height","1em"),r.setAttribute("width",e.width/t+"em"),r.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("d",e.path),i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),r.appendChild(i),r},u.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var s=e.getAttribute("data-val")||!0,o=e.getAttribute("data-attr"),u=e.getAttribute("data-toggle")==="true",a=r.select(e);if(u)o===n&&a.classed("active",!a.classed("active"));else{var f=o===null?o:i.nestedProperty(t,o).get();a.classed("active",f===s)}})},u.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},u.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title","Produced with Plotly"),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(s.plotlylogo)),e.appendChild(t),e},u.removeAllButtons=function(){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},u.destroy=function(){i.removeElement(this.container.querySelector(".modebar"))},t.exports=a},{"../../../build/ploticon":2,"../../lib":381,d3:72}],349:[function(e,t,n){"use strict";function u(e,t,n){function m(e){var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(t.indexOf(i)!==-1)continue;n.push(o[i])}v.push(n)}var r=e._fullLayout,i=e._fullData,s=r._has("cartesian"),u=r._has("gl3d"),c=r._has("geo"),h=r._has("pie"),p=r._has("gl2d"),d=r._has("ternary"),v=[];m(["toImage","sendDataToCloud"]);if((s||p||h||d)+c+u>1)return m(["resetViews","toggleHover"]),l(v,n);u&&(m(["zoom3d","pan3d","orbitRotation","tableRotation"]),m(["resetCameraDefault3d","resetCameraLastSave3d"]),m(["hoverClosest3d"])),c&&(m(["zoomInGeo","zoomOutGeo","resetGeo"]),m(["hoverClosestGeo"]));var g=a(r),y=[];if((s||p)&&!g||d)y=["zoom2d","pan2d"];return(s||d)&&f(i)&&(y.push("select2d"),y.push("lasso2d")),y.length&&m(y),(s||p)&&!g&&!d&&m(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"]),s&&h?m(["toggleHover"]):p?m(["hoverClosestGl2d"]):s?m(["hoverClosestCartesian","hoverCompareCartesian"]):h&&m(["hoverClosestPie"]),l(v,n)}function a(e){var t=r.Axes.list({_fullLayout:e},null,!0),n=!0;for(var i=0;i<t.length;i++)if(!t[i].fixedrange){n=!1;break}return n}function f(e){var t=!1;for(var n=0;n<e.length;n++){if(t)break;var r=e[n];if(!r._module||!r._module.selectPoints)continue;if(r.type==="scatter"||r.type==="scatterternary"){if(i.hasMarkers(r)||i.hasText(r))t=!0}else t=!0}return t}function l(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}function c(e){for(var t=0;t<e.length;t++){var n=e[t];for(var r=0;r<n.length;r++){var i=n[r];if(typeof i=="string"){if(o[i]===undefined)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=o[i]}}}return e}var r=e("../../plotly"),i=e("../../traces/scatter/subtypes"),s=e("./"),o=e("./buttons");t.exports=function(t){var n=t._fullLayout,r=t._context,i=n._modeBar;if(!r.displayModeBar){i&&(i.destroy(),delete n._modeBar);return}if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var o=r.modeBarButtons,a;Array.isArray(o)&&o.length?a=c(o):a=u(t,r.modeBarButtonsToRemove,r.modeBarButtonsToAdd),i?i.update(t,a):n._modeBar=s(t,a)}},{"../../plotly":400,"../../traces/scatter/subtypes":573,"./":348,"./buttons":347}],350:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),i=e("../color/attributes"),s=e("../../lib/extend").extendFlat,o=e("./button_attributes");o=s(o,{_isLinkedToArray:!0}),t.exports={visible:{valType:"boolean"},buttons:o,x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom"},font:s({},r,{}),bgcolor:{valType:"color",dflt:i.lightLine},bordercolor:{valType:"color",dflt:i.defaultLine},borderwidth:{valType:"number",min:0,dflt:0}}},{"../../lib/extend":376,"../../plots/font_attributes":421,"../color/attributes":302,"./button_attributes":351}],351:[function(e,t,n){"use strict";t.exports={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward"},count:{valType:"number",min:0,dflt:1},label:{valType:"string"}}},{}],352:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,activeColor:"#d3d3d3"}},{}],353:[function(e,t,n){"use strict";function u(e,t){function a(e,t){return r.coerce(o,u,s,e,t)}var n=e.buttons||[],i=t.buttons=[],o,u;for(var f=0;f<n.length;f++){o=n[f],u={};var l=a("step");l!=="all"&&(a("stepmode"),a("count")),a("label"),i.push(u)}return i}function a(e,t,n){var r=n.filter(function(n){return t[n].anchor===e._id}),i=0;for(var s=0;s<r.length;s++)i=Math.max(t[r[s]].domain[1],i);return[e.domain[0],i+o.yPad]}var r=e("../../lib"),i=e("./attributes"),s=e("./button_attributes"),o=e("./constants");t.exports=function(t,n,s,o){function c(e,t){return r.coerce(f,l,i,e,t)}var f=t.rangeselector||{},l=n.rangeselector={},h=u(f,l),p=c("visible",h.length>0);if(!p)return;var d=a(n,s,o);c("x",d[0]),c("y",d[1]),r.noneOrAll(t,n,["x","y"]),c("xanchor"),c("yanchor"),r.coerceFont(c,"font",s.font),c("bgcolor"),c("bordercolor"),c("borderwidth")}},{"../../lib":381,"./attributes":350,"./button_attributes":351,"./constants":352}],354:[function(e,t,n){"use strict";function p(e){var t=f.list(e,"x",!0),n=[];for(var r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}function d(e){return e._id}function v(e,t,n){if(t.step==="all")return e.autorange===!0;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}function m(e,t,n){var r=e.selectAll("rect").data([0]);r.enter().append("rect").classed("selector-rect",!0),r.attr("shape-rendering","crispEdges"),r.attr({rx:c.rx,ry:c.ry}),r.call(o.stroke,t.bordercolor).call(o.fill,g(t,n)).style("stroke-width",t.borderwidth+"px")}function g(e,t){return t.isActive||t.isHovered?c.activeColor:e.bgcolor}function y(e,t,n){function r(e){a.convertToTspans(e)}var i=e.selectAll("text").data([0]);i.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),i.attr("text-anchor","middle"),i.call(u.font,t.font).text(b(n)).call(r)}function b(e){return e.label?e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function w(e,t,n,i){n.width=0,n.height=0;var o=n.borderwidth;t.each(function(){var e=r.select(this),t=e.select(".selector-text"),i=t.selectAll("tspan"),s=n.font.size*1.3,o=i[0].length||1,u=Math.max(s*o,16)+3;n.height=Math.max(n.height,u)}),t.each(function(){var e=r.select(this),t=e.select(".selector-rect"),i=e.select(".selector-text"),s=i.selectAll("tspan"),a=i.node()&&u.bBox(i.node()).width,f=n.font.size*1.3,l=s[0].length||1,h=Math.max(a+10,c.minButtonWidth);e.attr("transform","translate("+(o+n.width)+","+o+")"),t.attr({x:0,y:0,width:h,height:n.height});var p={x:h/2,y:n.height/2-(l-1)*f/2+3};i.attr(p),s.attr(p),n.width+=h+5}),t.selectAll("rect").attr("height",n.height);var a=e._fullLayout._size;n.lx=a.l+a.w*n.x,n.ly=a.t+a.h*(1-n.y);var f="left";l.isRightAnchor(n)&&(n.lx-=n.width,f="right"),l.isCenterAnchor(n)&&(n.lx-=n.width/2,f="center");var h="top";l.isBottomAnchor(n)&&(n.ly-=n.height,h="bottom"),l.isMiddleAnchor(n)&&(n.ly-=n.height/2,h="middle"),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),s.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:n.width*({right:1,center:.5}[f]||0),r:n.width*({left:1,center:.5}[f]||0),b:n.height*({top:1,middle:.5}[h]||0),t:n.height*({bottom:1,middle:.5}[h]||0)})}var r=e("d3"),i=e("../../plotly"),s=e("../../plots/plots"),o=e("../color"),u=e("../drawing"),a=e("../../lib/svg_text_utils"),f=e("../../plots/cartesian/axis_ids"),l=e("../legend/anchor_utils"),c=e("./constants"),h=e("./get_update_object");t.exports=function(t){var n=t._fullLayout,s=n._infolayer.selectAll(".rangeselector").data(p(t),d);s.enter().append("g").classed("rangeselector",!0),s.exit().remove(),s.style({cursor:"pointer","pointer-events":"all"}),s.each(function(e){var n=r.select(this),s=e,o=s.rangeselector,u=n.selectAll("g.button").data(o.buttons);u.enter().append("g").classed("button",!0),u.exit().remove(),u.each(function(e){var n=r.select(this),u=h(s,e);e.isActive=v(s,e,u),n.call(m,o,e),n.call(y,o,e),n.on("click",function(){if(t._dragged)return;i.relayout(t,u)}),n.on("mouseover",function(){e.isHovered=!0,n.call(m,o,e)}),n.on("mouseout",function(){e.isHovered=!1,n.call(m,o,e)})}),w(t,u,o,s._name),n.attr("transform","translate("+o.lx+","+o.ly+")")})}},{"../../lib/svg_text_utils":393,"../../plotly":400,"../../plots/cartesian/axis_ids":405,"../../plots/plots":452,"../color":303,"../drawing":325,"../legend/anchor_utils":338,"./constants":352,"./get_update_object":355,d3:72}],355:[function(e,t,n){"use strict";function i(e,t){var n=e.range,i=new Date(n[1]),s=t.step,o=t.count,u;switch(t.stepmode){case"backward":u=r.time[s].offset(i,-o).getTime();break;case"todate":var a=r.time[s].offset(i,-(o-1));u=r.time[s].floor(a).getTime()}var f=n[1];return[u,f]}var r=e("d3");t.exports=function(t,n){var r=t._name,s={};if(n.step==="all")s[r+".autorange"]=!0;else{var o=i(t,n);s[r+".range[0]"]=o[0],s[r+".range[1]"]=o[1]}return s}},{d3:72}],356:[function(e,t,n){"use strict";n.attributes=e("./attributes"),n.supplyLayoutDefaults=e("./defaults"),n.draw=e("./draw")},{"./attributes":350,"./defaults":353,"./draw":354}],357:[function(e,t,n){"use strict";var r=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:r.background},bordercolor:{valType:"color",dflt:r.defaultLine},borderwidth:{valType:"integer",dflt:0,min:0},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},thickness:{valType:"number",dflt:.15,min:0,max:1},visible:{valType:"boolean",dflt:!0}}},{"../color/attributes":302}],358:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("../../plots/cartesian/axes"),s=e("../../lib"),o=e("../../constants/xmlns_namespaces").svg,u=e("./helpers"),a=e("./range_plot");t.exports=function(t){function M(e,t){e=e||-Infinity,t=t||Infinity;var n=l.range[0],r=l.range[1],i=r-n,s=(e-n)/i*c,o=(t-n)/i*c;_(s,o)}function _(e,n){e=s.constrain(e,0,c),n=s.constrain(n,0,c);if(n<e){var i=n;n=e,e=i}u.setAttributes(b,{"data-min":e,"data-max":n}),u.setAttributes(O,{x:e,width:n-e}),u.setAttributes(S,{width:e}),u.setAttributes(x,{x:n,width:c-n}),u.setAttributes(T,{transform:"translate("+(e-p-1)+")"}),u.setAttributes(k,{transform:"translate("+n+")"});var o=l.range[0],a=l.range[1],f=a-o,h=e/c*f+o,d=n/c*f+o;window.requestAnimationFrame?window.requestAnimationFrame(function(){r.relayout(t,"xaxis.range",[h,d])}):setTimeout(function(){r.relayout(t,"xaxis.range",[h,d])},16)}var n=t._fullLayout,f=n._infolayer.selectAll("g.range-slider"),l=n.xaxis.rangeslider,c=n._size.w,h=(n.height-n.margin.b-n.margin.t)*l.thickness,p=2,d=Math.floor(l.borderwidth/2),v=n.margin.l,m=n.height-h-n.margin.b,g=0,y=c,b=document.createElementNS(o,"g");u.setAttributes(b,{"class":"range-slider","data-min":g,"data-max":y,"pointer-events":"all",transform:"translate("+v+","+m+")"});var w=document.createElementNS(o,"rect"),E=l.borderwidth%2===0?l.borderwidth:l.borderwidth-1;u.setAttributes(w,{fill:l.bgcolor,stroke:l.bordercolor,"stroke-width":l.borderwidth,height:h+E,width:c+E,transform:"translate(-"+d+", -"+d+")","shape-rendering":"crispEdges"});var S=document.createElementNS(o,"rect");u.setAttributes(S,{x:0,width:g,height:h,fill:"rgba(0,0,0,0.4)"});var x=document.createElementNS(o,"rect");u.setAttributes(x,{x:y,width:c-y,height:h,fill:"rgba(0,0,0,0.4)"});var T=document.createElementNS(o,"g"),N=document.createElementNS(o,"rect"),C=document.createElementNS(o,"rect");u.setAttributes(T,{transform:"translate("+(g-p-1)+")"}),u.setAttributes(N,{width:10,height:h,x:-6,fill:"transparent",cursor:"col-resize"}),u.setAttributes(C,{width:p,height:h/2,y:h/4,rx:1,fill:"white",stroke:"#666","shape-rendering":"crispEdges"}),u.appendChildren(T,[C,N]);var k=document.createElementNS(o,"g"),L=document.createElementNS(o,"rect"),A=document.createElementNS(o,"rect");u.setAttributes(k,{transform:"translate("+y+")"}),u.setAttributes(L,{width:10,height:h,x:-2,fill:"transparent",cursor:"col-resize"}),u.setAttributes(A,{width:p,height:h/2,y:h/4,rx:1,fill:"white",stroke:"#666","shape-rendering":"crispEdges"}),u.appendChildren(k,[A,L]);var O=document.createElementNS(o,"rect");u.setAttributes(O,{x:g,width:y-g,height:h,cursor:"ew-resize",fill:"transparent"}),b.addEventListener("mousedown",function(e){function o(e){var o=+e.clientX-n;switch(t){case O:b.style.cursor="ew-resize",_(+s+o,+i+o);break;case N:b.style.cursor="col-resize",_(+i+o,+s);break;case L:b.style.cursor="col-resize",_(+i,+s+o);break;default:b.style.cursor="ew-resize",_(r,r+o)}}function u(){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",u),b.style.cursor="auto"}var t=e.target,n=e.clientX,r=n-b.getBoundingClientRect().left,i=b.getAttribute("data-min"),s=b.getAttribute("data-max");window.addEventListener("mousemove",o),window.addEventListener("mouseup",u)}),l.range||(l.range=i.getAutoRange(n.xaxis));var D=a(t,c,h);u.appendChildren(b,[w,D,S,x,O,T,k]),M(n.xaxis.range[0],n.xaxis.range[1]),f.data([0]).enter().append(function(){return l.setRange=M,b})}},{"../../constants/xmlns_namespaces":369,"../../lib":381,"../../plotly":400,"../../plots/cartesian/axes":403,"./helpers":360,"./range_plot":362}],359:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes");t.exports=function(t,n,s,o){function f(e,t){return r.coerce(u,a,i,e,t)}if(!t[s].rangeslider)return;var u=typeof t[s].rangeslider=="object"?t[s].rangeslider:{},a=n[s].rangeslider={};f("bgcolor"),f("bordercolor"),f("borderwidth"),f("thickness"),f("visible"),f("range");if(a.range&&!n[s].autorange){var l=a.range,c=n[s].range;l[0]=Math.min(l[0],c[0]),l[1]=Math.max(l[1],c[1])}else n[s]._needsExpand=!0;a.visible&&o.forEach(function(e){var t=n[e]||{};t.fixedrange=!0,n[e]=t})}},{"../../lib":381,"./attributes":357}],360:[function(e,t,n){"use strict";n.setAttributes=function(t,n){for(var r in n)t.setAttribute(r,n[r])},n.appendChildren=function(t,n){for(var r=0;r<n.length;r++)n[r]&&t.appendChild(n[r])}},{}],361:[function(e,t,n){"use strict";function o(e){if(!e._fullLayout.xaxis)return;var t=e._fullLayout,n=t._infolayer.selectAll("g.range-slider"),s=t.xaxis.rangeslider;if(!s||!s.visible){n.data([]).exit().remove(),r.autoMargin(e,"range-slider");return}var o=(t.height-t.margin.b-t.margin.t)*s.thickness,u=Math.floor(s.borderwidth/2);n[0].length===0&&!t._has("gl2d")&&i(e);var a=t.xaxis._boundingBox?t.xaxis._boundingBox.height:0;r.autoMargin(e,"range-slider",{x:0,y:0,l:0,r:0,t:0,b:o+t.margin.b+a,pad:15+u*2})}var r=e("../../plots/plots"),i=e("./create_slider"),s=e("./defaults");t.exports={draw:o,supplyLayoutDefaults:s}},{"../../plots/plots":452,"./create_slider":358,"./defaults":359}],362:[function(e,t,n){"use strict";function a(e,t){var n=t.makeCalcdata(e||[],t._id[0]);for(var r=0;r<n.length;r++)n[r]=t.c2l(n[r]);return n}function f(e,t,n,r){var a,f,l;if(e.line){a=document.createElementNS(u,"path");var c=s.smoothopen(t,e.line.smoothing||0);o.setAttributes(a,{d:c,fill:"none",stroke:e.line?e.line.color:"transparent","stroke-width":e.line.width/2||1,opacity:1})}if(e.marker){f=document.createElementNS(u,"g");var h=t.map(function(t,n){var r=document.createElementNS(u,"g"),s=document.createElementNS(u,"path"),a;return Array.isArray(e.marker.size)?a=typeof e.marker.size[n]=="number"?Math.max(e.marker.size[n]/(e.marker.sizeref||1)/15,0):0:a=Math.max(e.marker.size/15,2),o.setAttributes(s,{d:i[e.marker.symbol].f(a),fill:e.marker.color,stroke:e.marker.line.color,"stroke-width":e.marker.line.width,opacity:e.marker.opacity}),o.setAttributes(r,{transform:"translate("+t[0]+","+t[1]+")"}),r.appendChild(s),r});o.appendChildren(f,h)}if(e.fill!=="none"){l=document.createElementNS(u,"path");switch(e.fill){case"tozeroy":t.unshift([t[0][0],r]),t.push([t[t.length-1][0],r]);break;case"tozerox":t.unshift([0,t[t.length-1][1]]);break;default:console.log("Fill type "+e.fill+" not supported for range slider! (yet...)")}var p=s.smoothopen(t,e.line.smoothing||0);o.setAttributes(l,{d:p,fill:e.fillcolor||"transparent"})}return[a,f,l]}var r=e("d3"),i=e("../drawing/symbol_defs"),s=e("../drawing"),o=e("./helpers"),u=e("../../constants/xmlns_namespaces").svg;t.exports=function l(e,t,n){var i=e._fullLayout,c=e._fullData,h=i.xaxis,p=i.yaxis,d=h.rangeslider.range[0],v=h.rangeslider.range[1],m=p.range[0],g=p.range[1],y=document.createElementNS(u,"path");y.setAttribute("d",["M0,0",t+",0",t+","+n,"0,"+n,"Z"].join(" "));var b=document.createElementNS(u,"clipPath");b.setAttribute("id","range-clip-path"),b.appendChild(y);var w=document.createElementNS(u,"defs");w.appendChild(b);var l=document.createElementNS(u,"g");r.select(l).call(s.setClipUrl,"range-clip-path"),l.appendChild(w);var E=["scatter"];for(var S=0;S<c.length;S++){var x=c[S],T=[];if(E.indexOf(x.type)<0){console.log("Trace type "+x.type+" not supported for range slider!");continue}var N=a(x,h),C=a(x,p);for(var k=0;k<N.length;k++){var L=t*(N[k]-d)/(v-d),A=n*(1-(C[k]-m)/(g-m));!isNaN(L)&&!isNaN(A)&&T.push([L,A])}o.appendChildren(l,f(x,T,t,n))}return l}},{"../../constants/xmlns_namespaces":369,"../drawing":325,"../drawing/symbol_defs":326,"./helpers":360,d3:72}],363:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),i=e("../../traces/scatter/attributes"),s=e("../../lib/extend").extendFlat,o=i.line;t.exports={_isLinkedToArray:!0,type:{valType:"enumerated",values
:["circle","rect","path","line"]},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},xref:s({},r.xref,{}),x0:{valType:"any"},x1:{valType:"any"},yref:s({},r.yref,{}),y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string"},opacity:{valType:"number",min:0,max:1,dflt:1},line:{color:o.color,width:o.width,dash:o.dash},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"}}},{"../../lib/extend":376,"../../traces/scatter/attributes":554,"../annotations/attributes":300}],364:[function(e,t,n){"use strict";function l(e,t){function r(t,r){return s.coerce(e,n,f.layoutAttributes,t,r)}var n={};r("layer"),r("opacity"),r("fillcolor"),r("line.color"),r("line.width"),r("line.dash");var i=e.path?"path":"rect",u=r("type",i),a=["x","y"];for(var l=0;l<2;l++){var c=a[l],p={_fullLayout:t},d=o.coerceRef(e,n,p,c);if(u!=="path"){var v=.25,m=.75;if(d!=="paper"){var g=o.getFromId(p,d),y=h(g);v=y(g.range[0]+v*(g.range[1]-g.range[0])),m=y(g.range[0]+m*(g.range[1]-g.range[0]))}r(c+"0",v),r(c+"1",m)}}return u==="path"?r("path"):s.noneOrAll(e,n,["x0","x1","y0","y1"]),n}function c(e){return e.type==="category"?e.c2l:e.d2l}function h(e){return e.type==="category"?e.l2c:e.l2d}function p(e,t){e.layout.shapes=t,f.supplyLayoutDefaults(e.layout,e._fullLayout),f.drawAll(e)}function d(e){delete e.layout.shapes,e._fullLayout.shapes=[],f.drawAll(e)}function v(e,t,n){for(var r=0;r<e._fullLayout.shapes.length;r++)f.draw(e,r,t,n)}function m(e,t){b(e,t).selectAll('[data-index="'+t+'"]').remove(),e._fullLayout.shapes.splice(t,1),e.layout.shapes.splice(t,1);for(var n=t;n<e._fullLayout.shapes.length;n++)b(e,n).selectAll('[data-index="'+(n+1)+'"]').attr("data-index",n),f.draw(e,n)}function g(e,t,n){e._fullLayout.shapes.splice(t,0,{});var r=s.isPlainObject(n)?s.extendFlat({},n):{text:"New text"};e.layout.shapes?e.layout.shapes.splice(t,0,r):e.layout.shapes=[r];for(var i=e._fullLayout.shapes.length-1;i>t;i--)b(e,i).selectAll('[data-index="'+(i-1)+'"]').attr("data-index",i),f.draw(e,i)}function y(e,t,n,r){function H(t){var n=t.append("path").attr(A).style("opacity",L.opacity).call(u.stroke,M).call(u.fill,L.fillcolor).call(a.dashLine,L.line.dash,L.line.width);O&&n.call(a.setClipUrl,"clip"+e._fullLayout._uid+O)}var i,f;b(e,t).selectAll('[data-index="'+t+'"]').remove();var p=e.layout.shapes[t];if(!p)return;var d={xref:p.xref,yref:p.yref},v={};typeof n=="string"&&n?v[n]=r:s.isPlainObject(n)&&(v=n);var m=Object.keys(v);for(i=0;i<m.length;i++){var g=m[i];s.nestedProperty(p,g).set(v[g])}var y=["x0","x1","y0","y1"];for(i=0;i<4;i++){var E=y[i];if(v[E]!==undefined||p[E]===undefined)continue;var x=E.charAt(0),T=o.getFromId(e,o.coerceRef(d,{},e,x)),N=o.getFromId(e,o.coerceRef(p,{},e,x)),C=p[E],k;v[x+"ref"]!==undefined&&(T?(k=c(T)(C),C=(k-T.range[0])/(T.range[1]-T.range[0])):C=(C-N.domain[0])/(N.domain[1]-N.domain[0]),N?(k=N.range[0]+C*(N.range[1]-N.range[0]),C=h(N)(k)):C=T.domain[0]+C*(T.domain[1]-T.domain[0])),p[E]=C}var L=l(p,e._fullLayout);e._fullLayout.shapes[t]=L;var A={"data-index":t,"fill-rule":"evenodd",d:S(e,L)},O,M=L.line.width?L.line.color:"rgba(0,0,0,0)";if(L.layer!=="below")O=(L.xref+L.yref).replace(/paper/g,""),H(e._fullLayout._shapeUpperLayer);else if(L.xref==="paper"&&L.yref==="paper")O="",H(e._fullLayout._shapeLowerLayer);else{var _=e._fullLayout._plots||{},D=Object.keys(_),P;for(i=0,f=D.length;i<f;i++)P=_[D[i]],O=D[i],w(e,L,P.id)&&H(P.shapelayer)}}function b(e,t){var n=e._fullLayout.shapes[t],r=e._fullLayout._shapeUpperLayer;return n?n.layer==="below"&&(r=n.xref==="paper"&&n.yref==="paper"?e._fullLayout._shapeLowerLayer:e._fullLayout._shapeSubplotLayer):console.log("getShapeLayer: undefined shape: index",t),r}function w(e,t,n){var r=i.Axes.getFromId(e,n,"x")._id,s=i.Axes.getFromId(e,n,"y")._id;return t.layer==="below"&&(r===t.xref||s===t.yref)}function E(e){return function(t){return e(t.replace("_"," "))}}function S(e,t){var n=t.type,r=o.getFromId(e,t.xref),i=o.getFromId(e,t.yref),s=e._fullLayout._size,u,a,l,h;r?(u=c(r),a=function(e){return r._offset+r.l2p(u(e,!0))}):a=function(e){return s.l+s.w*e},i?(l=c(i),h=function(e){return i._offset+i.l2p(l(e,!0))}):h=function(e){return s.t+s.h*(1-e)};if(n==="path")return r&&r.type==="date"&&(a=E(a)),i&&i.type==="date"&&(h=E(h)),f.convertPath(t.path,a,h);var p=a(t.x0),d=a(t.x1),v=h(t.y0),m=h(t.y1);if(n==="line")return"M"+p+","+v+"L"+d+","+m;if(n==="rect")return"M"+p+","+v+"H"+d+"V"+m+"H"+p+"Z";var g=(p+d)/2,y=(v+m)/2,b=Math.abs(g-p),w=Math.abs(y-v),S="A"+b+","+w,x=g+b+","+y,T=g+","+(y-w);return"M"+x+S+" 0 1,1 "+T+S+" 0 0,1 "+x+"Z"}function L(e,t,n,r,i){var s=e.type==="category"?Number:e.d2c;if(t!==undefined)return[s(t),s(n)];if(!r)return;var o=Infinity,u=-Infinity,a=r.match(x),f,l,c,h,p;e.type==="date"&&(s=E(s));for(f=0;f<a.length;f++){l=a[f],c=i[l.charAt(0)].drawn;if(c===undefined)continue;h=a[f].substr(1).match(T);if(!h||h.length<c)continue;p=s(h[c]),p<o&&(o=p),p>u&&(u=p)}if(u>=o)return[o,u]}var r=e("fast-isnumeric"),i=e("../../plotly"),s=e("../../lib"),o=e("../../plots/cartesian/axes"),u=e("../color"),a=e("../drawing"),f=t.exports={};f.layoutAttributes=e("./attributes"),f.supplyLayoutDefaults=function(e,t){var n=e.shapes||[],r=t.shapes=[];for(var i=0;i<n.length;i++)r.push(l(n[i]||{},t))},f.drawAll=function(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeSubplotLayer.selectAll("path").remove();for(var n=0;n<t.shapes.length;n++)f.draw(e,n)},f.add=function(e){var t=e._fullLayout.shapes.length;i.relayout(e,"shapes["+t+"]","add")},f.draw=function(e,t,n,i){if(!r(t)||t===-1){if(!t&&Array.isArray(i)){p(e,i);return}if(i==="remove"){d(e);return}if(n&&i!=="add"){v(e,n,i);return}t=e._fullLayout.shapes.length,e._fullLayout.shapes.push({})}if(!n&&i){if(i==="remove"){m(e,t);return}(i==="add"||s.isPlainObject(i))&&g(e,t,i)}y(e,t,n,i)};var x=/[MLHVQCTSZ][^MLHVQCTSZ]*/g,T=/[^\s,]+/g,N={M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},C={M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},k={M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0};f.convertPath=function(e,t,n){return e.replace(x,function(e){var r=0,i=e.charAt(0),s=N[i],o=C[i],u=k[i],a=e.substr(1).replace(T,function(e){return s[r]?e=t(e):o[r]&&(e=n(e)),r++,r>u&&(e="X"),e});return r>u&&(a=a.replace(/[\s,]*X.*/,""),console.log("ignoring extra params in segment "+e)),i+a})},f.calcAutorange=function(e){var t=e._fullLayout,n=t.shapes,r,i,s,u,a;if(!n.length||!e._fullData.length)return;for(r=0;r<n.length;r++)i=n[r],s=i.line.width/2,i.xref!=="paper"&&(u=o.getFromId(e,i.xref),a=L(u,i.x0,i.x1,i.path,N),a&&o.expand(u,a,{ppad:s})),i.yref!=="paper"&&(u=o.getFromId(e,i.yref),a=L(u,i.y0,i.y1,i.path,C),a&&o.expand(u,a,{ppad:s}))}},{"../../lib":381,"../../plotly":400,"../../plots/cartesian/axes":403,"../color":303,"../drawing":325,"./attributes":363,"fast-isnumeric":76}],365:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../plotly"),o=e("../../plots/plots"),u=e("../../lib"),a=e("../drawing"),f=e("../color"),l=e("../../lib/svg_text_utils"),c=t.exports={};c.draw=function(e,t,n){function k(e){u.syncOrAsync([L,A],e)}function L(t){return t.attr("transform",g?"rotate("+[g.rotate,m.x,m.y]+") translate(0, "+g.offset+")":null),t.style({"font-family":w,"font-size":r.round(E,2)+"px",fill:f.rgb(S),opacity:x*f.opacity(S),"font-weight":o.fontWeight}).attr(m).call(l.convertToTspans).attr(m),t.selectAll("tspan.line").attr(m),o.previousPromises(e)}function A(e){var t=r.select(e.node().parentNode);if(v&&v.selection&&v.side&&N){t.attr("transform",null);var n=0,s={left:"right",right:"left",top:"bottom",bottom:"top"}[v.side],o=["left","top"].indexOf(v.side)!==-1?-1:1,f=i(v.pad)?v.pad:2,l=a.bBox(t.node()),c={left:0,top:0,right:b.width,bottom:b.height},h=v.maxShift||(c[v.side]-l[v.side])*(v.side==="left"||v.side==="top"?-1:1);h<0?n=h:(l.left-=v.offsetLeft,l.right-=v.offsetLeft,l.top-=v.offsetTop,l.bottom-=v.offsetTop,v.selection.each(function(){var e=a.bBox(this);u.bBoxIntersect(l,e,f)&&(n=Math.max(n,o*(e[v.side]-l[s])+f))}),n=Math.min(h,n));if(n>0||h<0){var p={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[v.side];t.attr("transform","translate("+p+")")}}}function M(){x=0,T=!0,N=O,b._infolayer.select("."+t).attr({"data-unformatted":N}).text(N).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)})}var c=n.propContainer,h=n.propName,p=n.traceIndex,d=n.dfltName,v=n.avoid||{},m=n.attributes,g=n.transform,y=n.containerGroup,b=e._fullLayout,w=c.titlefont.family,E=c.titlefont.size,S=c.titlefont.color,x=1,T=!1,N=c.title.trim();N===""&&(x=0),N.match(/Click to enter .+ title/)&&(x=.2,T=!0),y||(y=b._infolayer.selectAll(".g-"+t).data([0]),y.enter().append("g").classed("g-"+t,!0));var C=y.selectAll("text").data([0]);C.enter().append("text"),C.text(N).attr("class",t),C.attr({"data-unformatted":N}).call(k);var O="Click to enter "+d+" title";e._context.editable?(N||M(),C.call(l.makeEditable).on("edit",function(t){p!==undefined?s.restyle(e,h,t,p):s.relayout(e,h,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(e){this.text(e||" ").attr(m).selectAll("tspan.line").attr(m)})):(!N||N.match(/Click to enter .+ title/))&&C.remove(),C.classed("js-placeholder",T)}},{"../../lib":381,"../../lib/svg_text_utils":393,"../../plotly":400,"../../plots/plots":452,"../color":303,"../drawing":325,d3:72,"fast-isnumeric":76}],366:[function(e,t,n){"use strict";t.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],367:[function(e,t,n){"use strict";t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],368:[function(e,t,n){"use strict";t.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],369:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],370:[function(e,t,n){"use strict";var r=e("./plotly");n.version="1.11.0",n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.setPlotConfig=e("./plot_api/set_plot_config"),n.register=r.register,n.toImage=e("./plot_api/to_image"),n.downloadImage=e("./snapshot/download"),n.Icons=e("../build/ploticon"),n.Plots=r.Plots,n.Fx=r.Fx,n.Snapshot=r.Snapshot,n.PlotSchema=r.PlotSchema,n.Queue=r.Queue,n.d3=e("d3")},{"../build/ploticon":2,"./plot_api/set_plot_config":398,"./plot_api/to_image":399,"./plotly":400,"./snapshot/download":467,d3:72}],371:[function(e,t,n){"use strict";typeof MathJax!="undefined"?(n.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):n.MathJax=!1},{}],372:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){Array.isArray(t)&&(n[r]=t[i])}},{}],373:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("tinycolor2"),s=e("./nested_property"),o=e("../components/colorscale/get_scale"),u=Object.keys(e("../components/colorscale/scales")),a=/^([2-9]|[1-9][0-9]+)$/;n.valObjects={data_array:{coerceFunction:function(e,t,n){Array.isArray(e)?t.set(e):n!==undefined&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),r.values.indexOf(e)===-1?t.set(n):t.set(e)}},"boolean":{coerceFunction:function(e,t,n){e===!0||e===!1?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,i){!r(e)||i.min!==undefined&&e<i.min||i.max!==undefined&&e>i.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,i){e%1||!r(e)||i.min!==undefined&&e<i.min||i.max!==undefined&&e>i.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if(r.strict===!0&&typeof e!="string"){t.set(n);return}var i=String(e);e===undefined||r.noBlank===!0&&!i?t.set(n):t.set(i)}},color:{coerceFunction:function(e,t,n){i(e).isValid()?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(o(e,n))}},angle:{coerceFunction:function(e,t,n){e==="auto"?t.set("auto"):r(e)?(Math.abs(e)>180&&(e-=Math.round(e/360)*360),t.set(+e)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n){var r=n.length;if(typeof e=="string"&&e.substr(0,r)===n&&a.test(e.substr(r))){t.set(e);return}t.set(n)}},flaglist:{coerceFunction:function(e,t,n,r){if(typeof e!="string"){t.set(n);return}if(r.extras.indexOf(e)!==-1){t.set(e);return}var i=e.split("+"),s=0;while(s<i.length){var o=i[s];r.flags.indexOf(o)===-1||i.indexOf(o)<s?i.splice(s,1):s++}i.length?t.set(i.join("+")):t.set(n)}},any:{coerceFunction:function(e,t,n){e===undefined?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,r,i){if(!Array.isArray(e)){t.set(r);return}var s=i.items,o=[];r=Array.isArray(r)?r:[];for(var u=0;u<s.length;u++)n.coerce(e,o,s,"["+u+"]",r[u]);t.set(o)}}},n.coerce=function(e,t,r,i,o){var u=s(r,i).get(),a=s(e,i),f=s(t,i),l=a.get();return o===undefined&&(o=u.dflt),u.arrayOk&&Array.isArray(l)?(f.set(l),l):(n.valObjects[u.valType].coerceFunction(l,f,o,u),f.get())},n.coerce2=function(e,t,r,i,o){var u=s(e,i),a=n.coerce(e,t,r,i,o);return u.get()?a:!1},n.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r}},{"../components/colorscale/get_scale":314,"../components/colorscale/scales":320,"./nested_property":384,"fast-isnumeric":76,tinycolor2:233}],374:[function(e,t,n){"use strict";function s(e,t){return String(e+Math.pow(10,t)).substr(1)}function T(e){var t;return t=m.test(e)?"Y":"y",t+=g.test(e)?"b":"",t}function N(e){var t;return t=b.test(e)?y.test(e)?"I":"H":"D",t}var r=e("d3"),i=e("fast-isnumeric");n.dateTime2ms=function(e){try{if(e.getTime)return+e}catch(t){return!1}var n,r,s,o,u=String(e).split(" ");if(u.length>2)return!1;var a=u[0].split("-");if(a.length>3||a.length!==3&&u[1])return!1;if(a[0].length===4)n=Number(a[0]);else{if(a[0].length!==2)return!1;var f=(new Date).getFullYear();n=((Number(a[0])-f+70)%100+200)%100+f-70}return i(n)?a.length===1?(new Date(n,0,1)).getTime():(r=Number(a[1])-1,a[1].length>2||!(r>=0&&r<=11)?!1:a.length===2?(new Date(n,r,1)).getTime():(s=Number(a[2]),a[2].length>2||!(s>=1&&s<=31)?!1:(s=(new Date(n,r,s)).getTime(),u[1]?(a=u[1].split(":"),a.length>3?!1:(o=Number(a[0]),a[0].length>2||!(o>=0&&o<=23)?!1:(s+=36e5*o,a.length===1?s:(r=Number(a[1]),a[1].length>2||!(r>=0&&r<=59)?!1:(s+=6e4*r,a.length===2?s:(e=Number(a[2]),e>=0&&e<60?s+e*1e3:!1)))))):s))):!1},n.isDateTime=function(e){return n.dateTime2ms(e)!==!1},n.ms2DateTime=function(e,t){if(typeof r=="undefined"){console.log("d3 is not defined");return}t||(t=0);var n=new Date(e),i=r.time.format("%Y-%m-%d")(n);return t<7776e6?(i+=" "+s(n.getHours(),2),t<432e6&&(i+=":"+s(n.getMinutes(),2),t<108e5&&(i+=":"+s(n.getSeconds(),2),t<3e5&&(i+="."+s(n.getMilliseconds(),3)))),i.replace(/([:\s]00)*\.?[0]*$/,"")):i};var o={H:["%H:%M:%S~%L","%H:%M:%S","%H:%M"],I:["%I:%M:%S~%L%p","%I:%M:%S%p","%I:%M%p"],D:["%H","%I%p","%Hh"]},u={Y:["%Y~%m~%d","%Y%m%d","%y%m%d","%m~%d~%Y","%d~%m~%Y"],Yb:["%b~%d~%Y","%d~%b~%Y","%Y~%d~%b","%Y~%b~%d"],y:["%m~%d~%y","%d~%m~%y","%y~%m~%d"],yb:["%b~%d~%y","%d~%b~%y","%y~%d~%b","%y~%b~%d"]},a=r.time.format.utc,f={Y:{H:["%Y~%m~%dT%H:%M:%S","%Y~%m~%dT%H:%M:%S~%L"].map(a),I:[],D:["%Y%m%d%H%M%S","%Y~%m","%m~%Y"].map(a)},Yb:{H:[],I:[],D:["%Y~%b","%b~%Y"].map(a)},y:{H:[],I:[],D:[]},yb:{H:[],I:[],D:[]}};["Y","Yb","y","yb"].forEach(function(e){u[e].forEach(function(t){f[e].D.push(a(t)),["H","I","D"].forEach(function(n){o[n].forEach(function(r){var i=f[e][n];i.push(a(t+"~"+r)),i.push(a(r+"~"+t))})})})});var l=/[a-z]*/g,c=function(e){return e.substr(0,3)},h=/(mon|tue|wed|thu|fri|sat|sun|the|of|st|nd|rd|th)/g,p=/[\s,\/\-\.\(\)]+/g,d=/~?([ap])~?m(~|$)/,v=function(e,t){return t+"m "},m=/\d\d\d\d/,g=/(^|~)[a-z]{3}/,y=/[ap]m/,b=/:/,w=/q([1-4])/,E=["31~mar","30~jun","30~sep","31~dec"],S=function(e,t){return E[t-1]},x=/ ?([+\-]\d\d:?\d\d|Z)$/;n.parseDate=function(e){if(e.getTime)return e;if(typeof e!="string")return!1;e=e.toLowerCase().replace(l,c).replace(h,"").replace(p,"~").replace(d,v).replace(w,S).trim().replace(x,"");var t=null,n=T(e),r=N(e),i,s;i=f[n][r],s=i.length;for(var o=0;o<s;o++){t=i[o].parse(e);if(t)break}if(t instanceof Date){var u=t.getTimezoneOffset();return t.setTime(t.getTime()+u*60*1e3),t}return!1}},{d3:72,"fast-isnumeric":76}],375:[function(e,t,n){"use strict";var r=e("events").EventEmitter,i={init:function(e){if(e._ev instanceof r)return e;var t=new r;return e._ev=t,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e.emit=function(n,r){typeof jQuery!="undefined"&&jQuery(e).trigger(n,r),t.emit(n,r)},e},triggerHandler:function(e,t,n){var r,i;typeof jQuery!="undefined"&&(r=jQuery(e).triggerHandler(t,n));var s=e._ev;if(!s)return r;var o=s._events[t];if(!o)return r;typeof o=="function"&&(o=[o]);var u=o.pop();for(var a=0;a<o.length;a++)o[a](n);return i=u(n),r!==undefined?r:i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,e}};t.exports=i},{events:55}],376:[function(e,t,n){"use strict";function s(e,t,n){var o=e[0],u=e.length,a,f,l,c,h,p;for(var d=1;d<u;d++){a=e[d];for(f in a){l=o[f],c=a[f];if(t&&c&&(r(c)||(h=i(c))))h?(h=!1,p=l&&i(l)?l:[]):p=l&&r(l)?l:{},o[f]=s([p,c],t,n);else if(typeof c!="undefined"||n)o[f]=c}}return o}var r=e("./is_plain_object.js"),i=Array.isArray;n.extendFlat=function(){return s(arguments,!1,!1)},n.extendDeep=function(){return s(arguments,!0,!1)},n.extendDeepAll=function(){return s(arguments,!0,!0)}},{"./is_plain_object.js":382}],377:[function(e,t,n){"use strict";t.exports=function(t){var n=[];for(var r=0;r<t.length;r++){var i=t[r];i.visible===!0&&n.push(i)}return n}},{}],378:[function(e,t,n){"use strict";function u(e,t){var n=o[e];return n(t)}function a(e){var t,n;for(var i=0;i<s.length;i++){t=s[i],n=new RegExp(r[t]);if(n.test(e.toLowerCase()))return t}console.warn("unrecognized country name: "+e+".")}var r=e("country-regex"),i=e("./"),s=Object.keys(r),o={"ISO-3":i.identity,"USA-states":i.identity,"country names":a};n.locationToFeature=function(e,t,n){var r=u(e,t),i;for(var s=0;s<n.length;s++){i=n[s];if(i.id===r)return i}console.warn(["location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}},{"./":381,"country-regex":67}],379:[function(e,t,n){"use strict";function f(e,t){var n=u(e);return n[3]*=t,n}function l(e){return r(e).isValid()?e:o}function c(e){return i(e)?e:a}function h(e,t,n){var r=e.color,i=Array.isArray(r),u=Array.isArray(t),h=[],p,d,v,m,g;e.colorscale!==undefined?p=s(e.colorscale,e.cmin,e.cmax):p=l,i?d=function(e,t){return e[t]===undefined?o:p(e[t])}:d=l,u?v=function(e,t){return e[t]===undefined?a:c(e[t])}:v=c;if(i||u)for(var y=0;y<n;y++)m=d(r,y),g=v(t,y),h[y]=f(m,g);else h=f(r,t);return h}var r=e("tinycolor2"),i=e("fast-isnumeric"),s=e("../components/colorscale/make_scale_function"),o=e("../components/color/attributes").defaultLine,u=e("./str2rgbarray"),a=1;t.exports=h},{"../components/color/attributes":302,"../components/colorscale/make_scale_function":319,"./str2rgbarray":392,"fast-isnumeric":76,tinycolor2:233}],380:[function(e,t,n){"use strict";function s(e){var t=0;while((t=e.indexOf("<sup>",t))>=0){var n=e.indexOf("</sup>",t);if(n<t)break;e=e.slice(0,t)+r(e.slice(t+5,n))+e.slice(n+6)}return e}function o(e){return e.replace(/\<br\>/g,"\n")}function u(e){return e.replace(/\<.*\>/g,"")}function a(e){var t=0;while((t=e.indexOf("&",t))>=0){var n=e.indexOf(";",t);if(n<t){t+=1;continue}var r=i[e.slice(t+1,n)];r?e=e.slice(0,t)+r+e.slice(n+1):e=e.slice(0,t)+e.slice(n+1)}return e}function f(e){return""+a(u(s(o(e))))}var r=e("superscript-text"),i={mu:"",amp:"&",lt:"<",gt:">"};t.exports=f},{"superscript-text":222}],381:[function(e,t,n){"use strict";var r=e("d3"),i=t.exports={};i.nestedProperty=e("./nested_property"),i.isPlainObject=e("./is_plain_object");var s=e("./coerce");i.valObjects=s.valObjects,i.coerce=s.coerce,i.coerce2=s.coerce2,i.coerceFont=s.coerceFont;var o=e("./dates");i.dateTime2ms=o.dateTime2ms,i.isDateTime=o.isDateTime,i.ms2DateTime=o.ms2DateTime,i.parseDate=o.parseDate;var u=e("./search");i.findBin=u.findBin,i.sorterAsc=u.sorterAsc,i.sorterDes=u.sorterDes,i.distinctVals=u.distinctVals,i.roundUp=u.roundUp;var a=e("./stats");i.aggNums=a.aggNums,i.len=a.len,i.mean=a.mean,i.variance=a.variance,i.stdev=a.stdev,i.interp=a.interp;var f=e("./matrix");i.init2dArray=f.init2dArray,i.transposeRagged=f.transposeRagged,i.dot=f.dot,i.translationMatrix=f.translationMatrix,i.rotationMatrix=f.rotationMatrix,i.rotationXYMatrix=f.rotationXYMatrix,i.apply2DTransform=f.apply2DTransform,i.apply2DTransform2=f.apply2DTransform2;var l=e("./extend");i.extendFlat=l.extendFlat,i.extendDeep=l.extendDeep,i.extendDeepAll=l.extendDeepAll,i.notifier=e("./notifier"),i.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var s=0;s<t.length;s++){var o=t[s],u=i.nestedProperty(e,o.replace("?",n)),a=i.nestedProperty(e,o.replace("?",r)),f=u.get();u.set(a.get()),a.set(f)}},i.pauseEvent=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1},i.VERBOSE=!1,i.TIMER=(new Date).getTime(),i.log=function(){i.VERBOSE&&console.log.apply(console,arguments)},i.markTime=function(e){if(!i.VERBOSE)return;var t=(new Date).getTime();console.log(e,t-i.TIMER,"(msec)"),i.VERBOSE==="trace"&&console.trace(),i.TIMER=t},i.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},i.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},i.identity=function(e){return e},i.randstr=function c(e,t,n){n||(n=16),t===undefined&&(t=24);if(t<=0)return"0";var r=Math.log(Math.pow(2,t))/Math.log(n),i="",s,o,u;for(s=2;r===Infinity;s*=2)r=Math.log(Math.pow(2,t/s))/Math.log(n)*s;var a=r-Math.floor(r);for(s=0;s<Math.floor(r);s++)u=Math.floor(Math.random()*n).toString(n),i=u+i;a&&(o=Math.pow(n,a),u=Math.floor(Math.random()*o).toString(n),i=u+i);var f=parseInt(i,n);return e&&e.indexOf(i)>-1||f!==Infinity&&f>=Math.pow(2,t)?c(e,t,n):i},i.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={};return n.optionList=[],n._newoption=function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)},n["_"+t]=e,n},i.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var n=e.length,r=2*n,i=2*t-1,s=new Array(i),o=new Array(n),u,a,f,l;for(u=0;u<i;u++)s[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<n;u++){l=0;for(a=0;a<i;a++)f=u+a+1-t,f<-n?f-=r*Math.round(f/r):f>=r&&(f-=r*Math.floor(f/r)),f<0?f=-1-f:f>=n&&(f=r-1-f),l+=e[f]*s[a];o[u]=l}return o},i.promiseError=function(e){console.log(e,e.stack)},i.syncOrAsync=function(e,t,n){function o(){return i.markTime("async done "+s.name),i.syncOrAsync(e,t,n)}var r,s;while(e.length){s=e.splice(0,1)[0],r=s(t);if(r&&r.then)return r.then(o).then(undefined,i.promiseError);i.markTime("sync done "+s.name)}return n&&n(t)},i.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e},i.noneOrAll=function(e,t,n){if(!e)return;var r=!1,i=!0,s,o;for(s=0;s<n.length;s++)o=e[n[s]],o!==undefined&&o!==null?r=!0:i=!1;if(r&&!i)for(s=0;s<n.length;s++)e[n[s]]=t[n[s]]},i.pushUnique=function(e,t){return t&&e.indexOf(t)===-1&&e.push(t),e},i.mergeArray=function(e,t,n){if(Array.isArray(e)){var r=Math.min(e.length,t.length);for(var i=0;i<r;i++)t[i][n]=e[i]}},i.minExtend=function(e,t){var n={};typeof t!="object"&&(t={});var r=3,s=Object.keys(e),o,u,a;for(o=0;o<s.length;o++){u=s[o],a=e[u];if(u.charAt(0)==="_"||typeof a=="function")continue;u==="module"?n[u]=a:Array.isArray(a)?n[u]=a.slice(0,r):a&&typeof a=="object"?n[u]=i.minExtend(e[u],t[u]):n[u]=a}s=Object.keys(t);for(o=0;o<s.length;o++){u=s[o],a=t[u];if(typeof a!="object"||!(u in n)||typeof n[u]!="object")n[u]=a}return n},i.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},i.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])!==-1)return!0;return!1},i.getPlotDiv=function(e){for(;e&&e.removeAttribute;e=e.parentNode)if(i.isPlotDiv(e))return e},i.isPlotDiv=function(e){var t=r.select(e);return t.size()&&t.classed("js-plotly-plot")},i.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},i.addStyleRule=function(e,t){if(!i.styleSheet){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n),i.styleSheet=n.sheet}var r=i.styleSheet;r.insertRule?r.insertRule(e+"{"+t+"}",0):r.addRule?r.addRule(e,t,0):console.warn("addStyleRule failed")},i.getTranslate=function(e){var t=/(\btranslate\()(\d*\.?\d*)([^\d]*)(\d*\.?\d*)([^\d]*)(.*)/,n=e.attr?"attr":"getAttribute",r=e[n]("transform")||"",i=r.replace(t,function(e,t,n,r,i){return[n,i].join(" ")}).split(" ");return{x:+i[0]||0,y:+i[1]||0}},i.setTranslate=function(e,t,n){var r=/(\btranslate\(.*?\);?)/,i=e.attr?"attr":"getAttribute",s=e.attr?"attr":"setAttribute",o=e[i]("transform")||"";return t=t||0,n=n||0,o=o.replace(r,"").trim(),o+=" translate("+t+", "+n+")",o=o.trim(),e[s]("transform",o),o},i.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"},i.objectFromPath=function(e,t){var n=e.split("."),r,i=r={};for(var s=0;s<n.length;s++){var o=n[s],u=null,a=n[s].match(/(.*)\[([0-9]+)\]/);a?(o=a[1],u=a[2],r=r[o]=[],s===n.length-1?r[u]=t:r[u]={},r=r[u]):(s===n.length-1?r[o]=t:r[o]={},r=r[o])}return i}},{"./coerce":373,"./dates":374,"./extend":376,"./is_plain_object":382,"./matrix":383,"./nested_property":384,"./notifier":385,"./search":388,"./stats":391,d3:72}],382:[function(e,t,n){"use strict";t.exports=function(t){return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t)===Object.prototype}},{}],383:[function(e,t,n){"use strict";n.init2dArray=function(e,t){var n=new Array(e);for(var r=0;r<e;r++)n[r]=new Array(t);return n},n.transposeRagged=function(e){var t=0,n=e.length,r,i;for(r=0;r<n;r++)t=Math.max(t,e[r].length);var s=new Array(t);for(r=0;r<t;r++){s[r]=new Array(n);for(i=0;i<n;i++)s[r][i]=e[i][r]}return s},n.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var r=e.length,i,s;if(e[0].length){i=new Array(r);for(s=0;s<r;s++)i[s]=n.dot(e[s],t)}else if(t[0].length){var o=n.transposeRagged(t);i=new Array(o.length);for(s=0;s<o.length;s++)i[s]=n.dot(e,o[s])}else{i=0;for(s=0;s<r;s++)i+=e[s]*t[s]}return i},n.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},n.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},n.rotationXYMatrix=function(e,t,r){return n.dot(n.dot(n.translationMatrix(t,r),n.rotationMatrix(e)),n.translationMatrix(-t,-r))},n.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return n.dot(e,[r[0],r[1],1]).slice(0,2)}},n.apply2DTransform2=function(e){var t=n.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],384:[function(e,t,n){"use strict";function i(e,t){return function(){var n=e,r,s,o,u,a;for(u=0;u<t.length-1;u++){r=t[u];if(r===-1){s=!0,o=[];for(a=0;a<n.length;a++)o[a]=i(n[a],t.slice(u+1))(),o[a]!==o[0]&&(s=!1);return s?o[0]:o}if(typeof r=="number"&&!Array.isArray(n))return undefined;n=n[r];if(typeof n!="object"||n===null)return undefined}return typeof n!="object"||n===null?undefined:(o=n[t[u]],o===null?undefined:o)}}function s(e,t){var n=["annotations","shapes","range","domain","buttons"],r=n.indexOf(t)===-1;return Array.isArray(e)&&r}function o(e,t){return function(n){var r=e,i=[e],o=l(n)&&!s(n,t[t.length-1]),c,h;for(h=0;h<t.length-1;h++){c=t[h];if(typeof c=="number"&&!Array.isArray(r))throw"array index but container is not an array";if(c===-1){o=!u(r,t.slice(h+1),n);if(o)break;return}if(!a(r,c,t[h+1],o))break;r=r[c];if(typeof r!="object"||r===null)throw"container is not an object";i.push(r)}o?(h===t.length-1&&delete r[t[h]],f(i)):r[t[h]]=n}}function u(e,t,n){var r=Array.isArray(n),i=!0,s=n,u=r?!1:l(n),f=t[0],c;for(c=0;c<e.length;c++){r&&(s=n[c%n.length],u=l(s)),u&&(i=!1);if(!a(e,c,f,u))continue;o(e[c],t)(s)}return i}function a(e,t,n,r){if(e[t]===undefined){if(r)return!1;typeof n=="number"?e[t]=[]:e[t]={}}return!0}function f(e){var t,n,r,i,o;for(t=e.length-1;t>=0;t--){r=e[t],o=!1;if(Array.isArray(r))for(n=r.length-1;n>=0;n--)l(r[n])?o?r[n]=undefined:r.pop():o=!0;else if(typeof r=="object"&&r!==null){i=Object.keys(r),o=!1;for(n=i.length-1;n>=0;n--)l(r[i[n]])&&!s(r[i[n]],i[n])?delete r[i[n]]:o=!0}if(o)return}}function l(e){return e===undefined||e===null?!0:typeof e!="object"?!1:Array.isArray(e)?!e.length:!Object.keys(e).length}function c(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}var r=e("fast-isnumeric");t.exports=function(t,n){if(r(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";var s=0,u=n.split("."),a,f,l;while(s<u.length){a=String(u[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(a){if(a[1])u[s]=a[1];else{if(s!==0)throw"bad property string";u.splice(0,1)}f=a[2].substr(1,a[2].length-2).split("][");for(l=0;l<f.length;l++)s++,u.splice(s,0,Number(f[l]))}s++}return typeof t!="object"?c(t,n,u):{set:o(t,u),get:i(t,u),astr:n,parts:u,obj:t}}},{"fast-isnumeric":76}],385:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=[];t.exports=function(e,t){function a(e){e.duration(700).style("opacity",0).each("end",function(e){var t=s.indexOf(e);t!==-1&&s.splice(t,1),r.select(this).remove()})}if(s.indexOf(e)!==-1)return;s.push(e);var n=1e3;i(t)?n=t:t==="long"&&(n=3e3);var o=r.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0);var u=o.selectAll(".notifier-note").data(s);u.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=r.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(a)}),t.append("p").html(e),t.transition().duration(700).style("opacity",1).transition().delay(n).call(a)})}},{d3:72,"fast-isnumeric":76}],386:[function(e,t,n){"use strict";var r=e("./matrix").dot,i=t.exports={};i.tester=function(t){function l(e,t){var n=e[0],u=e[1];return n<r||n>i||u<s||u>o?!1:t&&f(e)?!1:!0}function c(e,t){var u=e[0],a=e[1];if(u<r||u>i||a<s||a>o)return!1;var f=n.length,l=n[0][0],c=n[0][1],h=0,p,d,v,m,g;for(p=1;p<f;p++){d=l,v=c,l=n[p][0],c=n[p][1],m=Math.min(d,l);if(u<m||u>Math.max(d,l)||a>Math.max(v,c))continue;if(a<Math.min(v,c))u!==m&&h++;else{l===d?g=a:g=v+(u-d)*(c-v)/(l-d);if(a===g)return p===1&&t?!1:!0;a<=g&&u!==m&&h++}}return h%2===1}var n=t.slice(),r=n[0][0],i=r,s=n[0][1],o=s;n.push(n[0]);for(var u=1;u<n.length;u++)r=Math.min(r,n[u][0]),i=Math.max(i,n[u][0]),s=Math.min(s,n[u][1]),o=Math.max(o,n[u][1]);var a=!1,f;return n.length===5&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(a=!0,f=function(e){return e[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(a=!0,f=function(e){return e[1]===n[0][1]})),{xmin:r,xmax:i,ymin:s,ymax:o,pts:n,contains:a?l:c,isRect:a}};var s=i.isSegmentBent=function(t,n,i,s){var o=t[n],u=[t[i][0]-o[0],t[i][1]-o[1]],a=r(u,u),f=Math.sqrt(a),l=[-u[1]/f,u[0]/f],c,h,p;for(c=n+1;c<i;c++){h=[t[c][0]-o[0],t[c][1]-o[1]],p=r(h,u);if(p<0||p>a||Math.abs(r(h,l))>s)return!0}return!1};i.filter=function(t,n){function u(e){t.push(e);var u=r.length,a=i;r.splice(o+1);for(var f=a+1;f<t.length;f++)if(f===t.length-1||s(t,a,f+1,n))r.push(t[f]),r.length<u-2&&(i=f,o=r.length-1),a=f}var r=[t[0]],i=0,o=0;if(t.length>1){var a=t.pop();u(a)}return{addPt:u,raw:t,filtered:r}}},{"./matrix":383}],387:[function(e,t,n){"use strict";function i(e,t){var n=[],i;for(var s=0;s<t.length;s++)i=t[s],i===e?n[s]=i:typeof i=="object"?n[s]=Array.isArray(i)?r.Lib.extendDeep([],i):r.Lib.extendDeepAll({},i):n[s]=i;return n}var r=e("../plotly"),s={};s.add=function(e,t,n,r,i){var s,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index;if(e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,s),e.undoQueue
.index+=1):s=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,s.undo.calls.unshift(t),s.undo.args.unshift(n),s.redo.calls.push(r),s.redo.args.push(i)},s.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},s.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},s.undo=function(t){var n,r;if(t.framework&&t.framework.isPolar){t.framework.undo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)return;t.undoQueue.index--,n=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0;for(r=0;r<n.undo.calls.length;r++)s.plotDo(t,n.undo.calls[r],n.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1},s.redo=function(t){var n,r;if(t.framework&&t.framework.isPolar){t.framework.redo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)return;n=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0;for(r=0;r<n.redo.calls.length;r++)s.plotDo(t,n.redo.calls[r],n.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++},s.plotDo=function(e,t,n){e.autoplay=!0,n=i(e,n),t.apply(null,n)},t.exports=s},{"../plotly":400}],388:[function(e,t,n){"use strict";function i(e,t){return e<t}function s(e,t){return e<=t}function o(e,t){return e>t}function u(e,t){return e>=t}var r=e("fast-isnumeric");n.findBin=function(e,t,n){if(r(t.start))return n?Math.ceil((e-t.start)/t.size)-1:Math.floor((e-t.start)/t.size);var a=0,f=t.length,l=0,c,h;t[t.length-1]>=t[0]?h=n?i:s:h=n?u:o;while(a<f&&l++<100)c=Math.floor((a+f)/2),h(t[c],e)?a=c+1:f=c;return l>90&&console.log("Long binary search..."),a-1},n.sorterAsc=function(e,t){return e-t},n.sorterDes=function(e,t){return t-e},n.distinctVals=function(e){var t=e.slice();t.sort(n.sorterAsc);var r=t.length-1,i=t[r]-t[0]||1,s=i/(r||1)/1e4,o=[t[0]];for(var u=0;u<r;u++)t[u+1]>t[u]+s&&(i=Math.min(i,t[u+1]-t[u]),o.push(t[u+1]));return{vals:o,minDiff:i}},n.roundUp=function(e,t,n){var r=0,i=t.length-1,s,o=0,u=n?0:1,a=n?1:0,f=n?Math.ceil:Math.floor;while(r<i&&o++<100)s=f((r+i)/2),t[s]<=e?r=s+u:i=s-a;return t[r]}},{"fast-isnumeric":76}],389:[function(e,t,n){"use strict";t.exports=function(t,n){(t.attr("class")||"").split(" ").forEach(function(e){e.indexOf("cursor-")===0&&t.classed(e,!1)}),n&&t.classed("cursor-"+n,!0)}},{}],390:[function(e,t,n){"use strict";var r=e("../components/color"),i=function(){};t.exports=function(t){for(var n in t)typeof t[n]=="function"&&(t[n]=i);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var s=document.createElement("div");return s.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",s.style.cursor="pointer",s.style.fontSize="24px",s.style.color=r.defaults[0],t.container.appendChild(s),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../components/color":303}],391:[function(e,t,n){"use strict";var r=e("fast-isnumeric");n.aggNums=function(e,t,i,s){var o,u;s||(s=i.length),r(t)||(t=!1);if(Array.isArray(i[0])){u=new Array(s);for(o=0;o<s;o++)u[o]=n.aggNums(e,t,i[o]);i=u}for(o=0;o<s;o++)r(t)?r(i[o])&&(t=e(+t,+i[o])):t=i[o];return t},n.len=function(e){return n.aggNums(function(e){return e+1},0,e)},n.mean=function(e,t){return t||(t=n.len(e)),n.aggNums(function(e,t){return e+t},0,e)/t},n.variance=function(e,t,i){return t||(t=n.len(e)),r(i)||(i=n.mean(e,t)),n.aggNums(function(e,t){return e+Math.pow(t-i,2)},0,e)/t},n.stdev=function(e,t,r){return Math.sqrt(n.variance(e,t,r))},n.interp=function(e,t){if(!r(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"fast-isnumeric":76}],392:[function(e,t,n){"use strict";function s(e){return e=r(e),i.str2RgbaArray(e.toRgbString())}var r=e("tinycolor2"),i=e("arraytools");t.exports=s},{arraytools:49,tinycolor2:233}],393:[function(e,t,n){"use strict";function u(e,t){return e.node().getBoundingClientRect()[t]}function a(e){return e.replace(/(<|&lt;|&#60;)/g,"\\lt ").replace(/(>|&gt;|&#62;)/g,"\\gt ")}function f(e,t,n){var s="math-output-"+r.Lib.randstr([],64),o=i.select("body").append("div").attr({id:s}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(a(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,o.node()],function(){var t=i.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node())console.log("There was an error in the tex syntax.",e),n();else{var r=o.select("svg").node().getBoundingClientRect();n(o.select(".MathJax_SVG"),t,r)}o.remove()})}function p(e){var t=r.util.html_entity_decode(e),n=t.split(/(<[^<>]*>)/).map(function(e){var t=e.match(/<(\/?)([^ >]*)\s*(.*)>/i),n=t&&t[2].toLowerCase(),i=l[n];if(i!==undefined){var s=t[1],o=t[3],u=o.match(/^style\s*=\s*"([^"]+)"\s*/i);if(n==="a"){if(s)return"</a>";if(o.substr(0,4).toLowerCase()!=="href")return"<a>";var a=document.createElement("a");return a.href=o.substr(4).replace(/["'=]/g,""),c.indexOf(a.protocol)===-1?"<a>":'<a xlink:show="new" xlink:href'+o.substr(4)+">"}if(n==="br")return"<br>";if(s)return n==="sup"?'</tspan><tspan dy="0.42em">&#x200b;</tspan>':n==="sub"?'</tspan><tspan dy="-0.21em">&#x200b;</tspan>':"</tspan>";var f="<tspan";if(n==="sup"||n==="sub")f="&#x200b;"+f;return u&&(u=u[1].replace(/(^|;)\s*color:/,"$1 fill:"),i=(i?i+";":"")+u),f+(i?' style="'+i+'"':"")+">"}return r.util.xml_entity_encode(e).replace(/</g,"&lt;")}),i=[];for(var s=n.indexOf("<br>");s>0;s=n.indexOf("<br>",s+1))i.push(s);var o=0;i.forEach(function(e){var t=e+o,r=n.slice(0,t),i="";for(var s=r.length-1;s>=0;s--){var u=r[s].match(/<(\/?).*>/i);if(u&&r[s]!=="<br>"){u[1]||(i=r[s]);break}}i&&(n.splice(t+1,0,i),n.splice(t,0,"</tspan>"),o+=2)});var u=n.join(""),a=u.split(/<br>/gi);return a.length>1&&(n=a.map(function(e,t){return'<tspan class="line" dy="'+t*1.3+'em">'+e+"</tspan>"})),n.join("")}function d(e,t,n){var r=n.horizontalAlign,i=n.verticalAlign||"top",s=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),u,a,f;return i==="bottom"?a=function(){return s.bottom-u.height}:i==="middle"?a=function(){return s.top+(s.height-u.height)/2}:a=function(){return s.top},r==="right"?f=function(){return s.right-u.width}:r==="center"?f=function(){return s.left+(s.width-u.width)/2}:f=function(){return s.left},function(){return u=this.node().getBoundingClientRect(),this.style({top:a()-o.top+"px",left:f()-o.left+"px","z-index":1e3}),this}}var r=e("../plotly"),i=e("d3"),s=e("../constants/xmlns_namespaces"),o=t.exports={};i.selection.prototype.appendSVG=function(e){var t=['<svg xmlns="',s.svg,'" ','xmlns:xlink="',s.xlink,'">',e,"</svg>"].join(""),n=(new DOMParser).parseFromString(t,"application/xml"),r=n.documentElement.firstChild;while(r)this.node().appendChild(this.node().ownerDocument.importNode(r,!0)),r=r.nextSibling;return n.querySelector("parsererror")?(console.log(n.querySelector("parsererror div").textContent),null):i.select(this.node().lastChild)},o.html_entity_decode=function(e){var t=i.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return e==="&lt;"?"&#60;":e==="&rt;"?"&#62;":t.html(e).text()});return t.remove(),n},o.xml_entity_encode=function(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")},o.convertToTspans=function(e,t){function v(){c.empty()||(h=o.attr("class")+"-math",c.select("svg."+h).remove()),e.text("").style({visibility:"visible","white-space":"pre"}),l=e.appendSVG(s),l||e.text(n),e.select("a").size()&&e.style("pointer-events","all"),t&&t.call(o)}var n=e.text(),s=p(n),o=e,a=!o.attr("data-notex")&&s.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/),l=n,c=i.select(o.node().parentNode);if(c.empty())return;var h=o.attr("class")?o.attr("class").split(" ")[0]:"text";h+="-math",c.selectAll("svg."+h).remove(),c.selectAll("g."+h+"-group").remove(),e.style({visibility:null});for(var d=e.node();d&&d.removeAttribute;d=d.parentNode)d.removeAttribute("data-bb");if(a){var m=r.Lib.getPlotDiv(o.node());(m&&m._promises||[]).push(new Promise(function(e){o.style({visibility:"hidden"});var n={fontSize:parseInt(o.style("font-size"),10)};f(a[2],n,function(n,r,i){c.selectAll("svg."+h).remove(),c.selectAll("g."+h+"-group").remove();var s=n&&n.select("svg");if(!s||!s.node()){v(),e();return}var a=c.append("g").classed(h+"-group",!0).attr({"pointer-events":"none"});a.node().appendChild(s.node()),r&&r.node()&&s.node().insertBefore(r.node().cloneNode(!0),s.node().firstChild),s.attr({"class":h,height:i.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var f=o.style("fill")||"black";s.select("g").attr({fill:f,stroke:f});var l=u(s,"width"),p=u(s,"height"),d=+o.attr("x")-l*{start:0,middle:.5,end:1}[o.attr("text-anchor")||"start"],m=parseInt(o.style("font-size"),10)||u(o,"height"),g=-m/4;h[0]==="y"?(a.attr({transform:"rotate("+[-90,+o.attr("x"),+o.attr("y")]+") translate("+[-l/2,g-p/2]+")"}),s.attr({x:+o.attr("x"),y:+o.attr("y")})):h[0]==="l"?s.attr({x:o.attr("x"),y:g-p/2}):h[0]==="a"?s.attr({x:0,y:g}):s.attr({x:d,y:+o.attr("y")+g-p/2}),t&&t.call(o,a),e(a)})}))}else v();return e};var l={sup:'font-size:70%" dy="-0.6em',sub:'font-size:70%" dy="0.3em',b:"font-weight:bold",i:"font-style:italic",a:"",span:"",br:"",em:"font-style:italic;font-weight:bold"},c=["http:","https:","mailto:"],h=new RegExp("</?("+Object.keys(l).join("|")+")( [^>]*)?/?>","g");o.plainText=function(e){return(e||"").replace(h," ")},o.makeEditable=function(e,t,n){function f(){c(),s.style({opacity:0});var e=a.attr("class"),t;e?t="."+e.split(" ")[0]+"-math-group":t="[class*=-math-group]",t&&i.select(s.node().parentNode).select(t).style({opacity:0})}function l(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}function c(){var e=i.select(r.Lib.getPlotDiv(s.node())),t=e.select(".svg-container"),u=t.append("div");u.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.style("font-family")||"Arial","font-size":s.style("font-size")||12,color:n.fill||s.style("fill")||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(s.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(n.text||s.attr("data-unformatted")).call(d(s,t,n)).on("blur",function(){s.text(this.textContent).style({opacity:1});var e=i.select(this).attr("class"),t;e?t="."+e.split(" ")[0]+"-math-group":t="[class*=-math-group]",t&&i.select(s.node().parentNode).select(t).style({opacity:0});var n=this.textContent;i.select(this).transition().duration(0).remove(),i.select(document).on("mouseup",null),o.edit.call(s,n)}).on("focus",function(){var e=this;i.select(document).on("mouseup",function(){if(i.event.target===e)return!1;document.activeElement===u.node()&&u.node().blur()})}).on("keyup",function(){i.event.which===27?(s.style({opacity:1}),i.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),o.cancel.call(s,this.textContent)):(o.input.call(s,this.textContent),i.select(this).call(d(s,t,n)))}).on("keydown",function(){i.event.which===13&&this.blur()}).call(l)}n||(n={});var s=this,o=i.dispatch("edit","input","cancel"),u=i.select(this.node()).style({"pointer-events":"all"}),a=t||u;return t&&u.style({"pointer-events":"none"}),n.immediate?f():a.on("click",f),i.rebind(this,o,"on")}},{"../constants/xmlns_namespaces":369,"../plotly":400,d3:72}],394:[function(e,t,n){"use strict";var r=t.exports={},i=e("../plots/geo/constants").locationmodeToLayer,s=e("topojson").feature;r.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(e,t){return e+t+".json"},r.getTopojsonFeatures=function(e,t){var n=i[e.locationmode],r=t.objects[n];return s(t,r).features}},{"../plots/geo/constants":422,topojson:234}],395:[function(e,t,n){"use strict";function x(e){var t;if(typeof e=="string"){t=document.getElementById(e);if(t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(e===null||e===undefined)throw new Error("DOM element provided is null or undefined");return e}function T(e,t){e._fullLayout._paperdiv.style("background","white"),o.defaultConfig.setBackground(e,t)}function N(e,t){e._context||(e._context=u.extendFlat({},o.defaultConfig));var n=e._context;t&&(Object.keys(t).forEach(function(e){e in n&&(e==="setBackground"&&t[e]==="opaque"?n[e]=T:n[e]=t[e])}),t.plot3dPixelRatio&&!n.plotGlPixelRatio&&(n.plotGlPixelRatio=n.plot3dPixelRatio)),n.staticPlot&&(n.editable=!1,n.autosizable=!1,n.scrollZoom=!1,n.doubleClick=!1,n.showTips=!1,n.showLink=!1,n.displayModeBar=!1)}function C(e,t,n){var i=r.select(e).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var s=i.selectAll(".svg-container").data([0]);s.enter().append("div").classed("svg-container",!0).style("position","relative"),s.html(""),t&&(e.data=t),n&&(e.layout=n),o.micropolar.manager.fillLayout(e),e._fullLayout.autosize==="initial"&&e._context.autosizable&&(U(e,{}),e._fullLayout.autosize=n.autosize=!0),s.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=o.micropolar.manager.framework(e),e.framework({data:e.data,layout:e.layout},s.node()),e.framework.setUndoPoint();var u=e.framework.svg(),a=1,f=e._fullLayout.title;if(f===""||!f)a=0;var c="Click to enter title",h=function(){this.call(o.util.convertToTspans)},p=u.select(".title-group text").call(h);if(e._context.editable){p.attr({"data-unformatted":f});if(!f||f===c)a=.2,p.attr({"data-unformatted":c}).text(c).style({opacity:a}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)});var d=function(){this.call(o.util.makeEditable).on("edit",function(t){e.framework({layout:{title:t}}),this.attr({"data-unformatted":t}).text(t).call(h),this.call(d)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(h)})};p.call(d)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),l.addLinks(e),Promise.resolve()}function k(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1);var r=o.Axes.list({_fullLayout:e});for(t=0;t<r.length;t++){var s=r[t];s.anchor&&s.anchor!=="free"&&(s.anchor=o.Axes.cleanId(s.anchor)),s.overlaying&&(s.overlaying=o.Axes.cleanId(s.overlaying)),s.type||(s.isdate?s.type="date":s.islog?s.type="log":s.isdate===!1&&s.islog===!1&&(s.type="linear"));if(s.autorange==="withzero"||s.autorange==="tozero")s.autorange=!0,s.rangemode="tozero";delete s.islog,delete s.isdate,delete s.categories,M(s,"domain")&&delete s.domain,s.autotick!==undefined&&(s.tickmode===undefined&&(s.tickmode=s.autotick?"auto":"linear"),delete s.autotick)}e.annotations!==undefined&&!Array.isArray(e.annotations)&&(console.log("annotations must be an array"),delete e.annotations);var a=(e.annotations||[]).length;for(t=0;t<a;t++){var f=e.annotations[t];f.ref&&(f.ref==="paper"?(f.xref="paper",f.yref="paper"):f.ref==="data"&&(f.xref="x",f.yref="y"),delete f.ref),L(f,"xref"),L(f,"yref")}e.shapes!==undefined&&!Array.isArray(e.shapes)&&(console.log("shapes must be an array"),delete e.shapes);var c=(e.shapes||[]).length;for(t=0;t<c;t++){var p=e.shapes[t];L(p,"xref"),L(p,"yref")}var d=e.legend;d&&(d.x>3?(d.x=1.02,d.xanchor="left"):d.x<-2&&(d.x=-0.02,d.xanchor="right"),d.y>3?(d.y=1.02,d.yanchor="bottom"):d.y<-2&&(d.y=-0.02,d.yanchor="top")),e.dragmode==="rotate"&&(e.dragmode="orbit"),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var v=l.getSubplotIds(e,"gl3d");for(t=0;t<v.length;t++){var m=e[v[t]],g=m.cameraposition;if(Array.isArray(g)&&g[0].length===4){var y=g[0],b=g[1],w=g[2],E=i([],y),S=[];for(n=0;n<3;++n)S[n]=b[t]+w*E[2+4*n];m.camera={eye:{x:S[0],y:S[1],z:S[2]},center:{x:b[0],y:b[1],z:b[2]},up:{x:E[1],y:E[5],z:E[9]}},delete m.cameraposition}}return u.markTime("finished rest of cleanLayout, starting color"),h.clean(e),u.markTime("finished cleanLayout color.clean"),e}function L(e,t){var n=e[t],r=t.charAt(0);n&&n!=="paper"&&(e[t]=o.Axes.cleanId(n,r))}function A(e,t){var n=[],r=e.concat(Array.isArray(t)?t:[]).filter(function(e){return"uid"in e}).map(function(e){return e.uid});for(var i=0;i<e.length;i++){var s=e[i],a;if(!("uid"in s)||n.indexOf(s.uid)!==-1){var f;for(a=0;a<100;a++){f=u.randstr(r);if(n.indexOf(f)===-1)break}s.uid=u.randstr(r),r.push(s.uid)}n.push(s.uid),s.type==="histogramy"&&"xbins"in s&&!("ybins"in s)&&(s.ybins=s.xbins,delete s.xbins);if(s.error_y&&"opacity"in s.error_y){var c=h.defaults,p=s.error_y.color||(l.traceIs(s,"bar")?h.defaultLine:c[i%c.length]);s.error_y.color=h.addOpacity(h.rgb(p),h.opacity(p)*s.error_y.opacity),delete s.error_y.opacity}"bardir"in s&&(s.bardir==="h"&&(l.traceIs(s,"bar")||s.type.substr(0,9)==="histogram")&&(s.orientation="h",q(s)),delete s.bardir),s.type==="histogramy"&&q(s);if(s.type==="histogramx"||s.type==="histogramy")s.type="histogram";"scl"in s&&(s.colorscale=s.scl,delete s.scl),"reversescl"in s&&(s.reversescale=s.reversescl,delete s.reversescl),s.xaxis&&(s.xaxis=o.Axes.cleanId(s.xaxis,"x")),s.yaxis&&(s.yaxis=o.Axes.cleanId(s.yaxis,"y")),l.traceIs(s,"gl3d")&&s.scene&&(s.scene=l.subplotsRegistry.gl3d.cleanId(s.scene)),l.traceIs(s,"pie")||(Array.isArray(s.textposition)?s.textposition=s.textposition.map(O):s.textposition&&(s.textposition=O(s.textposition))),l.traceIs(s,"2dMap")&&(s.colorscale==="YIGnBu"&&(s.colorscale="YlGnBu"),s.colorscale==="YIOrRd"&&(s.colorscale="YlOrRd"));if(l.traceIs(s,"markerColorscale")&&s.marker){var d=s.marker;d.colorscale==="YIGnBu"&&(d.colorscale="YlGnBu"),d.colorscale==="YIOrRd"&&(d.colorscale="YlOrRd")}if(s.type==="surface"&&u.isPlainObject(s.contours)){var v=["x","y","z"];for(a=0;a<v.length;a++){var m=s.contours[v[a]];if(!u.isPlainObject(m))continue;m.highlightColor&&(m.highlightcolor=m.highlightColor,delete m.highlightColor),m.highlightWidth&&(m.highlightwidth=m.highlightWidth,delete m.highlightWidth)}}M(s,"line")&&delete s.line,"marker"in s&&(M(s.marker,"line")&&delete s.marker.line,M(s,"marker")&&delete s.marker),u.markTime("finished rest of cleanData, starting color"),h.clean(s),u.markTime("finished cleanData color.clean")}}function O(e){var t="middle",n="center";return e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?n="left":e.indexOf("right")!==-1&&(n="right"),t+" "+n}function M(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}function _(e){var t=o.Axes.list(e),n=e._fullData,r=e._fullLayout,i,s,a,f,l=e.calcdata=new Array(n.length);e.firstscatter=!0,e.numboxes=0,e._hmpixcount=0,e._hmlumcount=0,r._piecolormap={},r._piedefaultcolorcount=0;for(i=0;i<t.length;i++)t[i]._categories=t[i]._initialCategories.slice();for(i=0;i<n.length;i++){s=n[i],a=s._module,f=[],a&&s.visible===!0&&a.calc&&(f=a.calc(e,s));if(!Array.isArray(f)||!f[0])f=[{x:!1,y:!1}];f[0].t||(f[0].t={}),f[0].trace=s,u.markTime("done with calcdata for "+i),l[i]=f}}function D(e,t){var n=t+1,r=[],i,s;for(i=0;i<e.length;i++)s=e[i],s<0?r.push(n+s):r.push(s);return r}function P(e,t,n){var r,i;for(r=0;r<t.length;r++){i=t[r];if(i!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function H(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");Array.isArray(t)||(t=[t]),P(e,t,"currentIndices"),typeof n!="undefined"&&!Array.isArray(n)&&(n=[n]),typeof n!="undefined"&&P(e,n,"newIndices");if(typeof n!="undefined"&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function B(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");Array.isArray(t)||(t=[t]);for(r=0;r<t.length;r++){i=t[r];if(typeof i!="object"||Array.isArray(i)||i===null)throw new Error("all values in traces array must be non-array objects")}typeof n!="undefined"&&!Array.isArray(n)&&(n=[n]);if(typeof n!="undefined"&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function j(e,t,n,r){var i=u.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!u.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof n=="undefined")throw new Error("indices must be an integer or array of integers");P(e,n,"indices");for(var s in t){if(!Array.isArray(t[s])||t[s].length!==n.length)throw new Error("attribute "+s+" must be an array of length equal to indices array length");if(i&&(!(s in r)||!Array.isArray(r[s])||r[s].length!==t[s].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function F(e,t,n,r){var i=u.isPlainObject(r),o=[],a,f,l,c,h;Array.isArray(n)||(n=[n]),n=D(n,e.data.length-1);for(var p in t)for(var d=0;d<n.length;d++){a=e.data[n[d]],l=u.nestedProperty(a,p),f=l.get(),c=t[p][d];if(!Array.isArray(c))throw new Error("attribute: "+p+" index: "+d+" must be an array");if(!Array.isArray(f))throw new Error("cannot extend missing or non-array attribute: "+p);h=i?r[p][d]:r,s(h)||(h=-1),o.push({prop:l,target:f,insert:c,maxp:Math.floor(h)})}return o}function I(e,t,n,r,i,s){j(e,t,n,r);var o=F(e,t,n,r),u=[],a={},f={},l,c,h;for(var p=0;p<o.length;p++)c=o[p].prop,h=o[p].maxp,l=i(o[p].target,o[p].insert),h>=0&&h<l.length&&(u=s(l,h)),h=o[p].target.length,c.set(l),Array.isArray(a[c.astr])||(a[c.astr]=[]),Array.isArray(f[c.astr])||(f[c.astr]=[]),a[c.astr].push(u),f[c.astr].push(h);return{update:a,maxPoints:f}}function q(e){var t;u.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0);if(e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);u.swapAttrs(e,["error_?.copy_ystyle"]),r&&u.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)i[t]==="x"?i[t]="y":i[t]==="y"&&(i[t]="x");e.hoverinfo=i.join("+")}}function R(e){var t={left:0,right:0,bottom:0,top:0},n;if(e)for(n in e)e.hasOwnProperty(n)&&(t.left+=e[n].left||0,t.right+=e[n].right||0,t.bottom+=e[n].bottom||0,t.top+=e[n].top||0);return t}function U(e,t){var n=e._fullLayout,r=e._context,i,o,u;e.emit("plotly_autosize");if(e._context.fillFrame)u=window.innerWidth,o=window.innerHeight,document.body.style.overflow="hidden";else if(s(r.frameMargins)&&r.frameMargins>0){var a=R(e._boundingBoxMargins),f=a.left+a.right,c=a.bottom+a.top,h=n._container.node().getBoundingClientRect(),p=1-2*r.frameMargins;u=Math.round(p*(h.width-f)),o=Math.round(p*(h.height-c))}else i=window.getComputedStyle(e),o=parseFloat(i.height)||n.height,u=parseFloat(i.width)||n.width;return Math.abs(n.width-u)>1||Math.abs(n.height-o)>1?(n.height=e.layout.height=o,n.width=e.layout.width=u):n.autosize!=="initial"&&(delete t.autosize,n.autosize=e.layout.autosize=!0),l.sanitizeMargins(n),t}function z(e){var t=r.select(e),n=e._fullLayout;n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n.autosize==="initial"&&(U(e,{}),n.autosize=!0,e.layout.autosize=!0),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([0]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._geocontainer=n._paperdiv.selectAll(".geo-container").data([0]),n._geocontainer.enter().append("div").classed("geo-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0);if(!n._uid){var i=[];r.selectAll("defs").each(function(){this.id&&i.push(this.id.split("-")[1])}),n._uid=u.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(S.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._draggers=n._paper.append("g").classed("draglayer",!0);var s=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=s.append("g").classed("imagelayer",!0),n._shapeLowerLayer=s.append("g").classed("shapelayer",!0);var a=o.Axes.getSubplots(e);a.join("")!==Object.keys(e._fullLayout._plots||{}).join("")&&W(e,a),n._has("cartesian")&&X(e,a),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0);var f=n._paper.selectAll(".layer-subplot");n._imageSubplotLayer=f.selectAll(".imagelayer"),n._shapeSubplotLayer=f.selectAll(".shapelayer");var l=n._paper.append("g").classed("layer-above",!0);n._imageUpperLayer=l.append("g").classed("imagelayer",!0),n._shapeUpperLayer=l.append("g").classed("shapelayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0),n._geoimages=n._paper.append("g").classed("geoimages",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework");var h=u.syncOrAsync([V,function(){return o.Axes.doTicks(e,"redraw")},c.init],e);return h&&h.then&&e._promises.push(h),h}function W(e,t){function s(t,n){return function(){return o.Axes.getFromId(e,t,n)}}var n=e._fullLayout._plots={},r,i;for(var u=0;u<t.length;u++)r=t[u],i=n[r]={},i.id=r,i.x=s(r,"x"),i.y=s(r,"y"),i.xaxis=i.x(),i.yaxis=i.y()}function X(e,t){function i(e){e.append("g").classed("imagelayer",!0),e.append("g").classed("maplayer",!0),e.append("g").classed("barlayer",!0),e.append("g").classed("boxlayer",!0),e.append("g").classed("scatterlayer",!0)}var n=e._fullLayout,s=[];n._paper.selectAll("g.subplot").data(t).enter().append("g").classed("subplot",!0).each(function(u){var a=n._plots[u],f=a.plotgroup=r.select(this).classed(u,!0),l=a.xaxis,c=a.yaxis;a.overlays=[];var h=o.Axes.getFromId(e,l.overlaying)||l;h!==l&&h.overlaying&&(h=l,l.overlaying=!1);var p=o.Axes.getFromId(e,c.overlaying)||c;p!==c&&p.overlaying&&(p=c,c.overlaying=!1);var d=h._id+p._id;if(d!==u&&t.indexOf(d)!==-1)a.mainplot=d,s.push(a),l.domain=h.domain.slice(),c.domain=p.domain.slice();else{a.bg=f.append("rect").style("stroke-width",0);var v=f.append("g").classed("layer-subplot",!0);a.shapelayer=v.append("g").classed("shapelayer",!0),a.imagelayer=v.append("g").classed("imagelayer",!0),a.gridlayer=f.append("g"),a.overgrid=f.append("g"),a.zerolinelayer=f.append("g"),a.overzero=f.append("g"),a.plot=f.append("g").call(i),a.overplot=f.append("g"),a.xlines=f.append("path"),a.ylines=f.append("path"),a.overlines=f.append("g"),a.xaxislayer=f.append("g"),a.yaxislayer=f.append("g"),a.overaxes=f.append("g")}a.draglayer=n._draggers.append("g")}),s.forEach(function(e){var t=n._plots[e.mainplot];t.overlays.push(e),e.gridlayer=t.overgrid.append("g"),e.zerolinelayer=t.overzero.append("g"),e.plot=t.overplot.append("g").call(i),e.xlines=t.overlines.append("path"),e.ylines=t.overlines.append("path"),e.xaxislayer=t.overaxes.append("g"),e.yaxislayer=t.overaxes.append("g")}),t.forEach(function(e){var t=n._plots[e];t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)})}function V(e){return u.syncOrAsync([l.doAutoMargin,$],e)}function $(e){var t=e._fullLayout,n=t._size,r=o.Axes.list(e),i;for(i=0;i<r.length;i++)r[i]._linepositions={};t._paperdiv.style({width:t.width+"px",height:t.height+"px"}).selectAll(".main-svg").call(p.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor);var s=[];return t._paper.selectAll("g.subplot").each(function(r){var i=t._plots[r],a=o.Axes.getFromId(e,r,"x"),f=o.Axes.getFromId(e,r,"y");a.setScale(),f.setScale(),i.bg&&i.bg.call(p.setRect,a._offset-n.p,f._offset-n.p,a._length+2*n.p,f._length+2*n.p).call(h.fill,t.plot_bgcolor);var l=t._defs.selectAll("g.clips"),c="clip"+t._uid+r+"plot",d=l.selectAll("#"+c).data([0]);d.enter().append("clipPath").attr({"class":"plotclip",id:c}).append("rect"),d.selectAll("rect").attr({width:a._length,height:f._length}),i.plot.call(u.setTranslate,a._offset,f._offset),i.plot.call(p.setClipUrl,c);var v=p.crispRound(e,a.linewidth,1),m=p.crispRound(e,f.linewidth,1),g=n.p+m,y="M"+ -g+",",b="h"+(a._length+2*g),w=a.anchor==="free"&&s.indexOf(a._id)===-1,E=n.h*(1-(a.position||0))+v/2%1,S=a.anchor===f._id&&(a.mirror||a.side!=="top")||a.mirror==="all"||a.mirror==="allticks"||a.mirrors&&a.mirrors[f._id+"bottom"],x=f._length+n.p+v/2,T=a.anchor===f._id&&(a.mirror||a.side==="top")||a.mirror==="all"||a.mirror==="allticks"||a.mirrors&&a.mirrors[f._id+"top"],N=-n.p-v/2,C=n.p,k=S?0:v,L=T?0:v,A=","+(-C-L)+"v"+(f._length+2*C+L+k),O=f.anchor==="free"&&s.indexOf(f._id)===-1,M=n.w*(f.position||0)+m/2%1,_=f.anchor===a._id&&(f.mirror||f.side!=="right")||f.mirror==="all"||f.mirror==="allticks"||f.mirrors&&f.mirrors[a._id+"left"],D=-n.p-m/2,P=f.anchor===a._id&&(f.mirror||f.side==="right")||f.mirror==="all"||f.mirror==="allticks"||f.mirrors&&f.mirrors[a._id+"right"],H=a._length+n.p+m/2;a._linepositions[r]=[S?x:undefined,T?N:undefined,w?E:undefined],a.anchor===f._id?a._linepositions[r][3]=a.side==="top"?N:x:w&&(a._linepositions[r][3]=E),f._linepositions[r]=[_?D:undefined,P?H:undefined,O?M:undefined],f.anchor===a._id?f._linepositions[r][3]=f.side==="right"?H:D:O&&(f._linepositions[r][3]=M);var B="translate("+a._offset+","+f._offset+")",j=B,F=B;w&&(j="translate("+a._offset+","+n.t+")",N+=f._offset-n.t,x+=f._offset-n.t),O&&(F="translate("+n.l+","+f._offset+")",D+=a._offset-n.l,H+=a._offset-n.l),i.xlines.attr("transform",j).attr("d",(S?y+x+b:"")+(T?y+N+b:"")+(w?y+E+b:"")||"M0,0").style("stroke-width",v+"px").call(h.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)"),i.ylines.attr("transform",F).attr("d",(_?"M"+D+A:"")+(P?"M"+H+A:"")+(O?"M"+M+A:"")||"M0,0").attr("stroke-width",m+"px").call(h.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)"),i.xaxislayer.attr("transform",j),i.yaxislayer.attr("transform",F),i.gridlayer.attr("transform",B),i.zerolinelayer.attr("transform",B),i.draglayer.attr("transform",B),w&&s.push(a._id),O&&s.push(f._id)}),o.Axes.makeClipPaths(e),J(e),E(e),e._promises.length&&Promise.all(e._promises)}function J(e){var t=e._fullLayout;w.draw(e,"gtitle",{propContainer:t,propName:"title",dfltName:"Plot",attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})}var r=e("d3"),i=e("gl-mat4/fromQuat"),s=e("fast-isnumeric"),o=e("../plotly"),u=e("../lib"),a=e("../lib/events"),f=e("../lib/queue"),l=e("../plots/plots"),c=e("../plots/cartesian/graph_interact"),h=e("../components/color"),p=e("../components/drawing"),d=e("../components/errorbars"),v=e("../components/images"),m=e("../components/legend"),g=e("../components/rangeslider"),y=e("../components/rangeselector"),b=e("../components/shapes"),w=e("../components/titles"),E=e("../components/modebar/manage"),S=e("../constants/xmlns_namespaces");o.plot=function(e,t,n,i){function D(){var t=e.calcdata,n,r,i;m.draw(e),y.draw(e);for(n=0;n<t.length;n++)r=t[n],i=r[0].trace,i.visible!==!0||!i._module.colorbar?l.autoMargin(e,"cb"+i.uid):i._module.colorbar(e,r);return l.doAutoMargin(e),l.previousPromises(e)}function P(){var t=JSON.stringify(T._size)===M?[]:[D,V];return u.syncOrAsync(t.concat(c.init),e)}function H(){if(!L)return;var t=l.getSubplotIds(T,"cartesian"),n=T._modules,r,i;for(var s=0;s<t.length;s++){r=T._plots[t[s]];for(var a=0;a<n.length;a++)i=n[a],i.setPositions&&i.setPositions(e,r)}return u.markTime("done with bar/box adjustments"),d.calc(e),u.markTime("done ErrorBars.calc"),u.syncOrAsync([b.calcAutorange,o.Annotations.calcAutorange,B],e)}function B(){var t=o.Axes.list(e,"",!0);for(var n=0;n<t.length;n++)o.Axes.doAutoRange(t[n])}function j(){return o.Axes.doTicks(e,"redraw")}function F(){var t=e.calcdata,n;for(n=0;n<t.length;n++){var r=t[n][0].trace,i=r.visible===!0,s=r.uid;(!i||!l.traceIs(r,"2dMap"))&&T._paper.selectAll
(".hm"+s+",.contour"+s+",#clip"+s).remove(),(!i||!r._module.colorbar)&&T._infolayer.selectAll(".cb"+s).remove()}var a=T._basePlotModules;for(n=0;n<a.length;n++)a[n].plot(e);return l.style(e),u.markTime("done Plots.style"),b.drawAll(e),o.Annotations.drawAll(e),l.addLinks(e),e._replotting=!1,l.previousPromises(e)}function I(){b.drawAll(e),v.draw(e),o.Annotations.drawAll(e),m.draw(e),g.draw(e),y.draw(e)}function q(){u.markTime("done plot"),e.emit("plotly_afterplot")}u.markTime("in plot"),e=x(e),a.init(e);var s=a.triggerHandler(e,"plotly_beforeplot",[t,n,i]);if(s===!1)return Promise.reject();!t&&!n&&!u.isPlotDiv(e)&&console.log("Warning: calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),N(e,i),n||(n={}),r.select(e).classed("js-plotly-plot",!0),p.makeTester(e),e._promises=[];var f=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(A(t,e.data),f?e.data=t:e.data.push.apply(e.data,t),e.empty=!1);if(!e.layout||f)e.layout=k(n);if(e._dragging)return e._replotPending=!0,Promise.reject();e._replotPending=!1,l.supplyDefaults(e);if(t&&t[0]&&t[0].r)return C(e,t,n);e._replotting=!0;var h=e._fullData.length>0,w=o.Axes.getSubplots(e).join(""),E=Object.keys(e._fullLayout._plots||{}).join(""),S=E===w;if(h){if(e.framework!==z||f||!S)e.framework=z,z(e)}else S?f&&z(e):(e.framework=z,z(e));f&&o.Axes.saveRangeInitial(e);var T=e._fullLayout,L=!e.calcdata||e.calcdata.length!==(e.data||[]).length;L&&_(e);for(var O=0;O<e.calcdata.length;O++)e.calcdata[O][0].trace=e._fullData[O];var M=JSON.stringify(T._size);return u.syncOrAsync([l.previousPromises,D,P,H,V,j,F,I],e,q),Promise.all(e._promises).then(function(){return e})},o.redraw=function(e){e=x(e);if(!u.isPlotDiv(e)){console.log("This element is not a Plotly Plot",e);return}return e.calcdata=undefined,o.plot(e).then(function(){return e.emit("plotly_redraw"),e})},o.newPlot=function(e,t,n,r){return e=x(e),l.purge(e),o.plot(e,t,n,r)},o.extendTraces=function K(e,t,n,r){e=x(e);var i=I(e,t,n,r,function(e,t){return e.concat(t)},function(e,t){return e.splice(0,e.length-t)}),s=o.redraw(e),u=[e,i.update,n,i.maxPoints];return f&&f.add(e,o.prependTraces,u,K,arguments),s},o.prependTraces=function Q(e,t,n,r){e=x(e);var i=I(e,t,n,r,function(e,t){return t.concat(e)},function(e,t){return e.splice(t,e.length)}),s=o.redraw(e),u=[e,i.update,n,i.maxPoints];return f&&f.add(e,o.extendTraces,u,Q,arguments),s},o.addTraces=function G(e,t,n){e=x(e);var r=[],i=o.deleteTraces,s=G,u=[e,r],a=[e,t],l,c;B(e,t,n),Array.isArray(t)||(t=[t]),A(t,e.data);for(l=0;l<t.length;l+=1)e.data.push(t[l]);for(l=0;l<t.length;l++)r.push(-t.length+l);if(typeof n=="undefined")return c=o.redraw(e),f&&f.add(e,i,u,s,a),c;Array.isArray(n)||(n=[n]);try{H(e,r,n)}catch(h){throw e.data.splice(e.data.length-t.length,t.length),h}return f&&f.startSequence(e),f&&f.add(e,i,u,s,a),c=o.moveTraces(e,r,n),f&&f.stopSequence(e),c},o.deleteTraces=function Y(e,t){e=x(e);var n=[],r=o.addTraces,i=Y,s=[e,n,t],a=[e,t],l,c;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");Array.isArray(t)||(t=[t]),P(e,t,"indices"),t=D(t,e.data.length-1),t.sort(u.sorterDes);for(l=0;l<t.length;l+=1)c=e.data.splice(t[l],1)[0],n.push(c);var h=o.redraw(e);return f&&f.add(e,r,s,i,a),h},o.moveTraces=function Z(e,t,n){e=x(e);var r=[],i=[],s=Z,u=Z,a=[e,n,t],l=[e,t,n],c;H(e,t,n),t=Array.isArray(t)?t:[t];if(typeof n=="undefined"){n=[];for(c=0;c<t.length;c++)n.push(-t.length+c)}n=Array.isArray(n)?n:[n],t=D(t,e.data.length-1),n=D(n,e.data.length-1);for(c=0;c<e.data.length;c++)t.indexOf(c)===-1&&r.push(e.data[c]);for(c=0;c<t.length;c++)i.push({newIndex:n[c],trace:e.data[t[c]]});i.sort(function(e,t){return e.newIndex-t.newIndex});for(c=0;c<i.length;c+=1)r.splice(i[c].newIndex,0,i[c].trace);e.data=r;var h=o.redraw(e);return f&&f.add(e,s,a,u,l),h},o.restyle=function et(e,t,n,r){function A(){return r.map(function(){return undefined})}function O(e){var t=o.Axes.id2name(e);C.indexOf(t)===-1&&C.push(t)}function M(e){return"LAYOUT"+e+".autorange"}function _(e){return"LAYOUT"+e+".range"}function D(t,n,i){if(Array.isArray(t)){t.forEach(function(e){D(e,n,i)});return}if(t in c)return;var s;t.substr(0,6)==="LAYOUT"?s=u.nestedProperty(e.layout,t.replace("LAYOUT","")):s=u.nestedProperty(e.data[r[i]],t),t in N||(N[t]=A()),N[t][i]===undefined&&(N[t][i]=s.get()),n!==undefined&&s.set(n)}e=x(e);var i,a=e._fullLayout,c={};if(typeof t=="string")c[t]=n;else{if(!u.isPlainObject(t))return console.log("restyle fail",t,n,r),Promise.reject();c=t,r===undefined&&(r=n)}Object.keys(c).length&&(e.changed=!0);if(s(r))r=[r];else if(!Array.isArray(r)||!r.length)r=e._fullData.map(function(e,t){return t});var h=["mode","visible","type","orientation","fill","histfunc","histnorm","text","x","y","z","a","b","c","xtype","x0","dx","ytype","y0","dy","xaxis","yaxis","line.width","connectgaps","transpose","zsmooth","showscale","marker.showscale","zauto","marker.cauto","autocolorscale","marker.autocolorscale","colorscale","marker.colorscale","reversescale","marker.reversescale","autobinx","nbinsx","xbins","xbins.start","xbins.end","xbins.size","autobiny","nbinsy","ybins","ybins.start","ybins.end","ybins.size","autocontour","ncontours","contours","contours.coloring","error_y","error_y.visible","error_y.value","error_y.type","error_y.traceref","error_y.array","error_y.symmetric","error_y.arrayminus","error_y.valueminus","error_y.tracerefminus","error_x","error_x.visible","error_x.value","error_x.type","error_x.traceref","error_x.array","error_x.symmetric","error_x.arrayminus","error_x.valueminus","error_x.tracerefminus","swapxy","swapxyaxes","orientationaxes","marker.colors","values","labels","label0","dlabel","sort","textinfo","textposition","textfont.size","textfont.family","textfont.color","insidetextfont.size","insidetextfont.family","insidetextfont.color","outsidetextfont.size","outsidetextfont.family","outsidetextfont.color","hole","scalegroup","domain","domain.x","domain.y","domain.x[0]","domain.x[1]","domain.y[0]","domain.y[1]","tilt","tiltaxis","depth","direction","rotation","pull"];for(i=0;i<r.length;i++)if(l.traceIs(e._fullData[r[i]],"box")){h.push("name");break}var p=["marker","marker.size","textfont","boxpoints","jitter","pointpos","whiskerwidth","boxmean"],d=["zmin","zmax","zauto","marker.cmin","marker.cmax","marker.cauto","contours.start","contours.end","contours.size","contours.showlines","line","line.smoothing","line.shape","error_y.width","error_x.width","error_x.copy_ystyle","marker.maxdisplayed"],v=["type","x","y","x0","y0","orientation","xaxis","yaxis"],g=!1,y=!1,b=!1,w=!1,E=!1,S=!1,T={},N={},C,k={},L=["cartesian","pie","ternary"];a._basePlotModules.forEach(function(e){L.indexOf(e.name)===-1&&(b=!0)});var P=["zmin","zmax"],H=["xbins.start","xbins.end","xbins.size"],B=["ybins.start","ybins.end","ybins.size"],j=["contours.start","contours.end","contours.size"];for(var F in c){var I=c[F],R,U,z,W,X;T[F]=I;if(F.substr(0,6)==="LAYOUT"){z=u.nestedProperty(e.layout,F.replace("LAYOUT","")),N[F]=[z.get()],z.set(Array.isArray(I)?I[0]:I),g=!0;continue}N[F]=A();for(i=0;i<r.length;i++){R=e.data[r[i]],U=e._fullData[r[i]],z=u.nestedProperty(R,F),W=z.get(),X=Array.isArray(I)?I[i%I.length]:I;if(P.indexOf(F)!==-1)D("zauto",!1,i);else if(F==="colorscale")D("autocolorscale",!1,i);else if(F==="autocolorscale")D("colorscale",undefined,i);else if(F==="marker.colorscale")D("marker.autocolorscale",!1,i);else if(F==="marker.autocolorscale")D("marker.colorscale",undefined,i);else if(F==="zauto")D(P,undefined,i);else if(H.indexOf(F)!==-1)D("autobinx",!1,i);else if(F==="autobinx")D(H,undefined,i);else if(B.indexOf(F)!==-1)D("autobiny",!1,i);else if(F==="autobiny")D(B,undefined,i);else if(j.indexOf(F)!==-1)D("autocontour",!1,i);else if(F==="autocontour")D(j,undefined,i);else if(["x0","dx"].indexOf(F)!==-1&&U.x&&U.xtype!=="scaled")D("xtype","scaled",i);else if(["y0","dy"].indexOf(F)!==-1&&U.y&&U.ytype!=="scaled")D("ytype","scaled",i);else if(F==="colorbar.thicknessmode"&&z.get()!==X&&["fraction","pixels"].indexOf(X)!==-1&&U.colorbar){var V=["top","bottom"].indexOf(U.colorbar.orient)!==-1?a.height-a.margin.t-a.margin.b:a.width-a.margin.l-a.margin.r;D("colorbar.thickness",U.colorbar.thickness*(X==="fraction"?1/V:V),i)}else if(F==="colorbar.lenmode"&&z.get()!==X&&["fraction","pixels"].indexOf(X)!==-1&&U.colorbar){var $=["top","bottom"].indexOf(U.colorbar.orient)!==-1?a.width-a.margin.l-a.margin.r:a.height-a.margin.t-a.margin.b;D("colorbar.len",U.colorbar.len*(X==="fraction"?1/$:$),i)}else F==="colorbar.tick0"||F==="colorbar.dtick"?D("colorbar.tickmode","linear",i):F==="colorbar.tickmode"&&D(["colorbar.tick0","colorbar.dtick"],undefined,i);if(F==="type"&&X==="pie"!=(W==="pie")){var J="x",K="y";(X==="bar"||W==="bar")&&R.orientation==="h"&&(J="y",K="x"),u.swapAttrs(R,["?","?src"],"labels",J),u.swapAttrs(R,["d?","?0"],"label",J),u.swapAttrs(R,["?","?src"],"values",K),W==="pie"?(u.nestedProperty(R,"marker.color").set(u.nestedProperty(R,"marker.colors").get()),a._pielayer.selectAll("g.trace").remove()):l.traceIs(R,"cartesian")&&(u.nestedProperty(R,"marker.colors").set(u.nestedProperty(R,"marker.color").get()),k[R.xaxis||"x"]=!0,k[R.yaxis||"y"]=!0)}N[F][i]=W;var Q=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Q.indexOf(F)!==-1){if(F==="orientation"){z.set(X);if(z.get()===N[F][i])continue}else F==="orientationaxes"&&(R.orientation={v:"h",h:"v"}[U.orientation]);q(R)}else z.set(X)}["swapxyaxes","orientationaxes"].indexOf(F)!==-1&&o.Axes.swap(e,r);if(F==="orientationaxes"){var G=u.nestedProperty(e.layout,"hovermode");G.get()==="x"?G.set("y"):G.get()==="y"&&G.set("x")}r.indexOf(0)!==-1&&v.indexOf(F)!==-1&&(o.Axes.clearTypes(e,r),g=!0);if(["autobinx","autobiny","zauto"].indexOf(F)===-1||X!==!1)E=!0;if(["colorbar","line"].indexOf(z.parts[0])!==-1||z.parts[0]==="marker"&&z.parts[1]==="colorbar")S=!0;if(h.indexOf(F)!==-1){if(["orientation","type"].indexOf(F)!==-1){C=[];for(i=0;i<r.length;i++){var Y=e.data[r[i]];l.traceIs(Y,"cartesian")&&(O(Y.xaxis||"x"),O(Y.yaxis||"y"),t==="type"&&D(["autobinx","autobiny"],!0,i))}D(C.map(M),!0,0),D(C.map(_),[0,1],0)}g=!0}else d.indexOf(F)!==-1?b=!0:p.indexOf(F)!==-1&&(y=!0)}var Z=Object.keys(k);e:for(i=0;i<Z.length;i++){var tt=Z[i],nt=tt.charAt(0),rt=nt+"axis";for(var it=0;it<e.data.length;it++)if(l.traceIs(e.data[it],"cartesian")&&(e.data[it][rt]||nt)===tt)continue e;D("LAYOUT"+o.Axes.id2name(tt),null,0)}f&&f.add(e,et,[e,N,r],et,[e,T,r]);var st=!1;o.Axes.list(e).forEach(function(e){e.autorange&&(st=!0)});if(g||w||y&&st)e.calcdata=undefined;var ot;w?ot=[function(){var n=e.layout;return e.layout=undefined,o.plot(e,"",n)}]:g||b||y?ot=[o.plot]:(l.supplyDefaults(e),ot=[l.previousPromises],E&&ot.push(function(){var n,r,i;for(n=0;n<e.calcdata.length;n++)r=e.calcdata[n],i=(((r[0]||{}).trace||{})._module||{}).arraysToCalcdata,i&&i(r);return l.style(e),m.draw(e),l.previousPromises(e)}),S&&ot.push(function(){return e.calcdata.forEach(function(e){if((e[0].t||{}).cb){var t=e[0].trace,n=e[0].t.cb;l.traceIs(t,"contour")&&n.line({width:t.contours.showlines!==!1?t.line.width:0,dash:t.line.dash,color:t.contours.coloring==="line"?n._opts.line.color:t.line.color}),l.traceIs(t,"markerColorscale")?n.options(t.marker.colorbar)():n.options(t.colorbar)()}}),l.previousPromises(e)}));var ut=u.syncOrAsync(ot,e);if(!ut||!ut.then)ut=Promise.resolve();return ut.then(function(){return e.emit("plotly_restyle",u.extendDeep([],[T,r])),e})},o.relayout=function tt(e,t,n){function O(e,t){if(Array.isArray(e)){e.forEach(function(e){O(e,t)});return}if(e in s)return;var n=u.nestedProperty(r,e);e in A||(A[e]=n.get()),t!==undefined&&n.set(t)}function M(e,t){var n=o.Axes.id2name(e[t+"ref"]||t);return(i[n]||{}).autorange}function ot(e){var t=e["xaxis.range[0]"],n=e["xaxis.range[1]"],r=i.xaxis&&i.xaxis.rangeslider?i.xaxis.rangeslider:{};r.visible&&(t||n?i.xaxis.rangeslider.setRange(t,n):e["xaxis.autorange"]&&i.xaxis.rangeslider.setRange())}e=x(e);if(e.framework&&e.framework.isPolar)return Promise.resolve(e);var r=e.layout,i=e._fullLayout,s={},a=!1,c=!1,h=!1,p=!1,d=!1,g=!1,y,b,w,S,T,N,C;if(typeof t=="string")s[t]=n;else{if(!u.isPlainObject(t))return console.log("relayout fail",t,n),Promise.reject();s=t}Object.keys(s).length&&(e.changed=!0),w=Object.keys(s),b=o.Axes.list(e);for(C=0;C<w.length;C++){if(w[C].indexOf("allaxes")===0){for(var k=0;k<b.length;k++)T=b[k]._id.substr(1),N=T.indexOf("scene")!==-1?T+".":"",y=w[C].replace("allaxes",N+b[k]._name),s[y]||(s[y]=s[w[C]]);delete s[w[C]]}w[C].match(/^annotations\[[0-9-]+\].ref$/)&&(S=s[w[C]].split("y"),s[w[C].replace("ref","xref")]=S[0],s[w[C].replace("ref","yref")]=S.length===2?"y"+S[1]:"paper",delete s[w[C]])}var L={},A={},_=["height","width"];for(var D in s){var P=u.nestedProperty(r,D),H=s[D],B=P.parts.length,j=typeof P.parts[B-1]=="string"?B-1:B-2,F=P.parts[j],I=P.parts[j-1]+"."+F,q=P.parts.slice(0,j).join("."),R=u.nestedProperty(e.layout,q).get(),z=u.nestedProperty(i,q).get();L[D]=H,A[D]=F==="reverse"?H:P.get(),_.indexOf(D)!==-1?O("autosize",!1):D==="autosize"?O(_,undefined):I.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?O(q+".autorange",!1):I.match(/^[xyz]axis[0-9]*\.autorange$/)?O([q+".range[0]",q+".range[1]"],undefined):I.match(/^aspectratio\.[xyz]$/)?O(P.parts[0]+".aspectmode","manual"):I.match(/^aspectmode$/)?O([q+".x",q+".y",q+".z"],undefined):F==="tick0"||F==="dtick"?O(q+".tickmode","linear"):F==="tickmode"?O([q+".tick0",q+".dtick"],undefined):/[xy]axis[0-9]*?$/.test(F)&&!Object.keys(H||{}).length?d=!0:/[xy]axis[0-9]*\.categoryorder$/.test(I)?d=!0:/[xy]axis[0-9]*\.categoryarray/.test(I)&&(d=!0),I.indexOf("rangeslider")!==-1&&(d=!0);if(F==="type"&&z.type==="log"!=(H==="log")){var W=R;if(!W||!W.range)O(q+".autorange",!0);else if(!z.autorange){var X=W.range[0],$=W.range[1];H==="log"?(X<=0&&$<=0&&O(q+".autorange",!0),X<=0?X=$/1e6:$<=0&&($=X/1e6),O(q+".range[0]",Math.log(X)/Math.LN10),O(q+".range[1]",Math.log($)/Math.LN10)):(O(q+".range[0]",Math.pow(10,X)),O(q+".range[1]",Math.pow(10,$)))}else H==="log"&&(W.range=W.range[1]>W.range[0]?[1,2]:[2,1])}if(F==="reverse")R.range?R.range.reverse():(O(q+".autorange",!0),R.range=[1,0]),z.autorange?d=!0:p=!0;else if(P.parts[0]==="annotations"||P.parts[0]==="shapes"){var K=P.parts[1],Q=P.parts[0],G=r[Q]||[],Y=o[u.titleCase(Q)],Z=G[K]||{};P.parts.length===2&&(s[D]==="add"||u.isPlainObject(s[D])?A[D]="remove":s[D]==="remove"?K===-1?(A[Q]=G,delete A[D]):A[D]=Z:console.log("???",s)),(M(Z,"x")||M(Z,"y"))&&!u.containsAny(D,["color","opacity","align","dash"])&&(d=!0),Y.draw(e,K,P.parts.slice(2).join("."),s[D]),delete s[D]}else if(P.parts[0]==="images"){var et=u.objectFromPath(t,H);u.extendDeepAll(e.layout,et),v.supplyLayoutDefaults(e.layout,e._fullLayout),v.draw(e)}else P.parts[0].indexOf("scene")===0?p=!0:P.parts[0].indexOf("geo")===0?p=!0:P.parts[0].indexOf("ternary")===0?p=!0:!i._has("gl2d")||D.indexOf("axis")===-1&&P.parts[0]!=="plot_bgcolor"?D==="hiddenlabels"?d=!0:P.parts[0].indexOf("legend")!==-1?a=!0:D.indexOf("title")!==-1?c=!0:P.parts[0].indexOf("bgcolor")!==-1?h=!0:P.parts.length>1&&u.containsAny(P.parts[1],["tick","exponent","grid","zeroline"])?c=!0:D.indexOf(".linewidth")!==-1&&D.indexOf("axis")!==-1?c=h=!0:P.parts.length>1&&P.parts[1].indexOf("line")!==-1?h=!0:P.parts.length>1&&P.parts[1]==="mirror"?c=h=!0:D==="margin.pad"?c=h=!0:P.parts[0]==="margin"||P.parts[1]==="autorange"||P.parts[1]==="rangemode"||P.parts[1]==="type"||P.parts[1]==="domain"||D.match(/^(bar|box|font)/)?d=!0:["hovermode","dragmode"].indexOf(D)!==-1?g=!0:["hovermode","dragmode","height","width","autosize"].indexOf(D)===-1&&(p=!0):p=!0,P.set(H)}f&&f.add(e,tt,[e,A],tt,[e,L]),s.autosize&&(s=U(e,s));if(s.height||s.width||s.autosize)d=!0;var nt=Object.keys(s),rt=[l.previousPromises];if(p||d)rt.push(function(){return e.layout=undefined,d&&(e.calcdata=undefined),o.plot(e,"",r)});else if(nt.length){l.supplyDefaults(e),i=e._fullLayout,a&&rt.push(function(){return m.draw(e),l.previousPromises(e)}),h&&rt.push(V),c&&rt.push(function(){return o.Axes.doTicks(e,"redraw"),J(e),l.previousPromises(e)});if(g){var it;E(e),it=l.getSubplotIds(i,"gl3d");for(C=0;C<it.length;C++)T=i[it[C]]._scene,T.updateFx(i.dragmode,i.hovermode);it=l.getSubplotIds(i,"gl2d");for(C=0;C<it.length;C++)T=i._plots[it[C]]._scene2d,T.updateFx(i);it=l.getSubplotIds(i,"geo");for(C=0;C<it.length;C++){var st=i[it[C]]._geo;st.updateFx(i.hovermode)}}}var ut=u.syncOrAsync(rt,e);if(!ut||!ut.then)ut=Promise.resolve(e);return ut.then(function(){var t=u.extendDeep({},L);return ot(t),e.emit("plotly_relayout",t),e})},o.purge=function(t){t=x(t);var n=t._fullLayout||{},r=t._fullData||[];return l.cleanPlot([],{},r,n),l.purge(t),a.purge(t),n._container&&n._container.remove(),delete t._context,delete t._replotPending,delete t._mouseDownTime,delete t._hmpixcount,delete t._hmlumcount,t}},{"../components/color":303,"../components/drawing":325,"../components/errorbars":331,"../components/images":337,"../components/legend":345,"../components/modebar/manage":349,"../components/rangeselector":356,"../components/rangeslider":361,"../components/shapes":364,"../components/titles":365,"../constants/xmlns_namespaces":369,"../lib":381,"../lib/events":375,"../lib/queue":387,"../plotly":400,"../plots/cartesian/graph_interact":410,"../plots/plots":452,d3:72,"fast-isnumeric":76,"gl-mat4/fromQuat":93}],396:[function(e,t,n){"use strict";function r(e,t){try{e._fullLayout._paper.style("background",t)}catch(n){console.log(n)}}t.exports={staticPlot:!1,editable:!1,autosizable:!1,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:r,topojsonURL:"https://cdn.plot.ly/"}},{}],397:[function(e,t,n){"use strict";function b(e){var t=i.attributes,n=T({type:e}),r=C(e),s=L(e),a={},f={};a.type=null,u(a,t),a=S(n.attributes,a,"attributes",e),s.attributes!==undefined&&u(a,s.attributes),a.type=e,a=N(a),x(a),v.traces[e]=o({},r,{attributes:a}),n.layoutAttributes!==undefined&&(f=S(n.layoutAttributes,f,"layoutAttributes",e),x(f),v.traces[e].layoutAttributes=f)}function w(){var e=i.layoutAttributes,t={};t=S(e,t,"layoutAttributes","*"),t=k(t),t=A(t),t=N(t),x(t),O(t),v.layout={layoutAttributes:t}}function E(){v.defs={valObjects:s.valObjects,metaKeys:d.concat(["description","role"])}}function S(e,t,n,r){var i,o,c,h,p;return Object.keys(e).forEach(function(d){if(d===f){Object.keys(e[d]).forEach(function(a){i=T({module:e[d][a]});if(i===undefined)return;o=i[n],c=S(o,{},n,r),s.nestedProperty(t,a).set(u({},c))});return}if(d===l){Object.keys(e[d]).forEach(function(i){if(i!==r)return;h=T({module:e[d][i]});if(h===undefined)return;p=h[n],p=S(p,{},n,r),a(t,p)});return}t[d]=s.isPlainObject(e[d])?a({},e[d]):e[d]}),t}function x(e){function t(e){return{valType:"string"}}function n(e,n,r){y.isValObject(e)?e.valType==="data_array"?(e.role="data",r[n+"src"]=t(n)):e.arrayOk===!0&&(r[n+"src"]=t(n)):s.isPlainObject(e)&&(e.role="object")}y.crawl(e,n)}function T(e){if("type"in e)return e.type==="area"?{attributes:m}:i.getModule({type:e.type});var t=i.subplotsRegistry,n=e.module;if(t[n])return t[n];if("module"in e)return r[n]}function N(e){return Object.keys(e).forEach(function(t){t.charAt(0)==="_"&&d.indexOf(t)===-1&&delete e[t]}),e}function C(e){return e==="area"?{}:i.modules[e].meta||{}}function k(e){return o(e,{radialaxis:g.radialaxis,angularaxis:g.angularaxis}),o(e,g.layout),e}function L(e){if(e==="area")return{};var t=i.subplotsRegistry,n=Object.keys(t).filter(function(t){return i.traceIs({type:e},t)})[0];return n===undefined?{}:t[n]}function A(e){var t=i.subplotsRegistry;return Object.keys(e).forEach(function(n){Object.keys(t).forEach(function(r){var i=t[r],s;if(!i.attrRegex)return;r==="cartesian"||r==="gl2d"?s=i.attrRegex.x.test(n)||i.attrRegex.y.test(n):s=i.attrRegex.test(n),s&&(e[n][c]=!0)})}),e}function O(e){function t(e,t,n){if(e[h]!==!0)return;var r=t.substr(0,t.length-1);delete e[h],n[t]={items:{}},n[t].items[r]=e,n[t].role="object"}y.crawl(e,t)}var r=e("../plotly"),i=e("../plots/plots"),s=e("../lib"),o=s.extendFlat,u=s.extendDeep,a=s.extendDeepAll,f="_nestedModules",l="_composedModules",c="_isSubplotObj",h="_isLinkedToArray",p="_deprecated",d=[c,h,p],v={traces:{},layout:{},defs:{}},m=e("../plots/polar/area_attributes"),g=e("../plots/polar/axis_attributes"),y=t.exports={};y.get=function(){return i.allTypes.concat("area").forEach(b),w(),E(),v},y.crawl=function(e,t){Object.keys(e).forEach(function(n){var r=e[n];if(d.indexOf(n)!==-1)return;t(r,n,e);if(y.isValObject(r))return;s.isPlainObject(r)&&y.crawl(r,t)})},y.isValObject=function(e){return e&&e.valType!==undefined}},{"../lib":381,"../plotly":400,"../plots/plots":452,"../plots/polar/area_attributes":453,"../plots/polar/axis_attributes":454}],398:[function(e,t,n){"use strict";var r=e("../plotly"),i=e("../lib");t.exports=function(t){return i.extendFlat(r.defaultConfig,t)}},{"../lib":381,"../plotly":400}],399:[function(e,t,n){"use strict";function s(t,n){var s=e("../snapshot"),o=new Promise(function(e,o){function l(){var e=s.getDelay(f._fullLayout);return new Promise(function(t,i){setTimeout(function(){var e=s.toSVG(f),o=window.document.createElement("div"),u=window.document.createElement("canvas");o.appendChild(u),o.id=r.Lib.randstr(),u.id=r.Lib.randstr(),s.svgToImg({format:n.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:u,svg:e,promise:!0}).then(function(e){f&&document.body.removeChild(f),t(e)}).catch(function(e){i(e)})},e)})}n=n||{},n.format=n.format||"png";var u=function(e){return e===undefined||e===null?!0:i(e)&&e>1?!0:!1};(!u(n.width)||!u(n.height))&&o(new Error("Height and width should be pixel values."));var a=s.clone(t,{format:"png",height:n.height,width:n.width}),f=a.td;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var c=s.getRedrawFunc(f);r.plot(f,a.data,a.layout,a.config).then(c).then(l).then(function(t){e(t)}).catch(function(e){o(e)})});return o}var r=e("../plotly"),i=e("fast-isnumeric");t.exports=s},{"../plotly":400,"../snapshot":469,"fast-isnumeric":76}],400:[function(e,t,n){"use strict";e("es6-promise").polyfill(),n.Lib=e("./lib"),n.util=e("./lib/svg_text_utils"),n.Queue=e("./lib/queue"),e("../build/plotcss"),n.MathJaxConfig=e("./fonts/mathjax_config"),n.defaultConfig=e("./plot_api/plot_config");var r=n.Plots=e("./plots/plots");n.Axes=e("./plots/cartesian/axes"),n.Fx=e("./plots/cartesian/graph_interact"),n.micropolar=e("./plots/polar/micropolar"),n.Color=e("./components/color"),n.Drawing=e("./components/drawing"),n.Colorscale=e("./components/colorscale"),n.Colorbar=e("./components/colorbar"),n.ErrorBars=e("./components/errorbars"),n.Annotations=e("./components/annotations"),n.Shapes=e("./components/shapes"),n.Legend=e("./components/legend"),n.Images=e("./components/images"),n.ModeBar=e("./components/modebar"),n.register=function(t){if(!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(i&&i.moduleType!=="trace")throw new Error("Invalid module was attempted to be registered!");r.register(i,i.name,i.categories,i.meta),r.subplotsRegistry[i.basePlotModule.name]||r.registerSubplot(i.basePlotModule)}},n.register(e("./traces/scatter")),e("./plot_api/plot_api"),n.PlotSchema=e("./plot_api/plot_schema"),n.Snapshot=e("./snapshot")},{"../build/plotcss":1,"./components/annotations":301,"./components/color":303,"./components/colorbar":308,"./components/colorscale":316,"./components/drawing":325,"./components/errorbars":331,"./components/images":337,"./components/legend":345,"./components/modebar":348,"./components/shapes":364,"./fonts/mathjax_config":371,"./lib":381,"./lib/queue":387,"./lib/svg_text_utils":393,"./plot_api/plot_api":395,"./plot_api/plot_config":396,"./plot_api/plot_schema":397,"./plots/cartesian/axes":403,"./plots/cartesian/graph_interact":410,"./plots/plots":452,"./plots/polar/micropolar":455,"./snapshot":469,"./traces/scatter":563,"es6-promise":75}],401:[function(e,t,n){"use strict";t.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0}}}},{}],402:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x"},yaxis:{valType:"subplotid",dflt:"y"}}},{}],403:[function(e,t,n){"use strict";function d(e){var t=e.tickvals,n=e.ticktext,r=new Array(t.length),i=e.range[0]*1.0001-e.range[1]*1e-4,s=e.range[1]*1.0001-e.range[0]*1e-4,o=Math.min(i,s),u=Math.max(i,s),a,f,l=0;Array.isArray(n)||(n=[]);for(f=0;f<t.length;f++)a=e.d2l(t[f]),a>o&&a<u&&(n[f]===undefined?r[l]=c.tickText(e,a):r[l]=M(e,a,String(n[f])),l++);return l<t.length&&r.splice(l,t.length-l),r}function E(e,t,n){return t*o.roundUp(e/t,n)}function S(e){var t=e.dtick,n;e._tickexponent=0,!i(t)&&typeof t!="string"&&(t=1);if(e.type==="category")e._tickround=null;else if(i(t)||t.charAt(0)==="L")if(e.type==="date")t>=864e5?e._tickround="d":t>=36e5?e._tickround="H":t>=6e4?e._tickround="M":t>=1e3?e._tickround="S":e._tickround=3-Math.round(Math.log(t/2)/Math.LN10);else{i(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01),e.type==="log"?n=Math.pow(10,Math.max(e.range[0],e.range[1])):n=Math.max(Math.abs(e.range[0]),Math.abs(e.range[1]));var r=Math.floor(Math.log(n)/Math.LN10+.01);Math.abs(r)>3&&(e.exponentformat==="SI"||e.exponentformat==="B"?e._tickexponent=3*Math.round((r-1)/3):e._tickexponent=r)}else t.charAt(0)==="M"?e._tickround=t.length===2?"m":"y":e._tickround=null}function O(e,t){var n=e.match(A),i=new Date(t);if(n){var s=Math.min(+n[1]||6,6),o=String(t/1e3%1+2.0000005).substr(2,s).replace(/0+$/,"")||"0";return r.time.format(e.replace(A,o))(i)}return r.time.format(e)(i)}function M(e,t,n){var r=e.tickfont||e._gd._fullLayout.font;return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}function _(e,t,n,r){var s=t.x,o=e._tickround,u=new Date(s),a="",f;n&&e.hoverformat?f=O(e.hoverformat,s):e.tickformat?f=O(e.tickformat,s):(r&&(i(o)?o+=2:o={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[o]),o==="y"?f=x(u):o==="m"?f=T(u):(s===e._tmin&&!n&&(a="<br>"+x(u)),o==="d"?f=N(u):o==="H"?f=C(u):(s===e._tmin&&!n&&(a="<br>"+N(u)+", "+x(u)),f=k(u),o!=="M"&&(f+=L(u),o!=="S"&&(f+=j(W(s/1e3,1),e,"none",n).substr(1)))))),t.text=f+a}function D(e,t,n,r,s){var o=e.dtick,u=t.x;r&&(typeof o!="string"||o.charAt(0)!=="L")&&(o="L3");if(e.tickformat||typeof o=="string"&&o.charAt(0)==="L")t.text=j(Math.pow(10,u),e,s,r);else if(i(o)||o.charAt(0)==="D"&&W(u+.01,1)<.1)if(["e","E","power"].indexOf(e.exponentformat)!==-1){var a=Math.round(u);a===0?t.text=1:a===1?t.text="10":a>1?t.text="10<sup>"+a+"</sup>":t.text="10<sup>"+ -a+"</sup>",t.fontSize*=1.25}else t.text=j(Math.pow(10,u),e,"","fakehover"),o==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6);else{if(o.charAt(0)!=="D")throw"unrecognized dtick "+String(o);t.text=String(Math.round(Math.pow(10,W(u,1)))),t.fontSize*=.75}if(e.dtick==="D1"){var f=String(t.text).charAt(0);if(f==="0"||f==="1")e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(u<0?.5:.25))}}function P(e,t){var n=e._categories[Math.round(t.x)];n===undefined&&(n=""),t.text=String(n)}function H(e,t,n,r,i){e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide"),t.text=j(t.x,e,i,r)}function j(e,t,n,s){var o=e<0,u=t._tickround,a=n||t.exponentformat||"B",f=t._tickexponent,l=t.tickformat;if(s){var c={exponentformat:t.exponentformat,dtick:t.showexponent==="none"?t.dtick:i(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range:[0,e||1]};S(c),u=(Number(c._tickround)||0)+4,f=c._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return r.format(l)(e).replace(/-/g,"");var h=Math.pow(10,-u)/2;a==="none"&&(f=0),e=Math.abs(e);if(e<h)e="0",o=!1;else{e+=h,f&&(e*=Math.pow(10,-f),u+=f);if(u===0)e=String(Math.floor(e));else if(u<0){e=String(Math.round(e)),e=e.substr(0,e.length+u);for(var p=u;p<0;p++)e+="0"}else{e=String(e);var d=e.indexOf(".")+1;d&&(e=e.substr(0,d+u).replace(/\.?0+$/,""))}e=I(e,t._gd._fullLayout.separators)}if(f&&a!=="hide"){var v;f<0?v=""+ -f:a!=="power"?v="+"+f:v=String(f);if(a==="e"||(a==="SI"||a==="B")&&(f>12||f<-15))e+="e"+v;else if(a==="E")e+="E"+v;else if(a==="power")e+="&times;10<sup>"+v+"</sup>";else if(a==="B"&&f===9)e+="B";else if(a==="SI"||a==="B")e+=B[f/3+5]}return o?""+e:e}function I(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.split("."),s=i[0],o=i.length>1?n+i[1]:"";if(r&&(i.length>1||s.length>4))while(F.test(s))s=s.replace(F,"$1"+r+"$2");return s+o}function q(e,t){var n=[],r,i;for(r=0;r<t.length;r++){var s=[],o=e._fullData[t[r]].xaxis,u=e._fullData[t[r]].yaxis;if(!o||!u)continue;for(i=0;i<n.length;i++)(n[i].x.indexOf(o)!==-1||n[i].y.indexOf(u)!==-1)&&s.push(i);if(!s.length){n.push({x:[o],y:[u]});continue}var a=n[s[0]],f;if(s.length>1)for(i=1;i<s.length;i++)f=n[s[i]],R(a.x,f.x),R(a.y,f.y);R(a.x,[o]),R(a.y,[u])}return n}function R(e,t){for(var n=0;n<t.length;n++)e.indexOf(t[n])===-1&&e.push(t[n])}function U(e,t,n){var r,i,s=[],u=[],a=e.layout;for(r=0;r<t.length;r++)s.push(c.getFromId(e,t[r]));for(r=0;r<n.length;r++)u.push(c.getFromId(e,n[r]));var f=Object.keys(s[0]),l=["anchor","domain","overlaying","position","side","tickangle"],h=["linear","log"];for(r=0;r<f.length;r++){var p=f[r],d=s[0][p],v=u[0][p],m=!0,g=!1,y=!1;if(p.charAt(0)==="_"||typeof d=="function"||l.indexOf(p)!==-1)continue;for(i=1;i<s.length&&m;i++){var b=s[i][p];p==="type"&&h.indexOf(d)!==-1&&h.indexOf(b)!==-1&&d!==b?g=!0:b!==d&&(m=!1)}for(i=1;i<u.length&&m;i++){var w=u[i][p];p==="type"&&h.indexOf(v)!==-1&&h.indexOf(w)!==-1&&v!==w?y=!0:u[i][p]!==v&&(m=!1)}m&&(g&&(a[s[0]._name].type="linear"),y&&(a[u[0]._name].type="linear"),z(a,p,s,u))}for(r=0;r<e._fullLayout.annotations.length;r++){var E=e._fullLayout.annotations[r];t.indexOf(E.xref)!==-1&&n.indexOf(E.yref)!==-1&&o.swapAttrs(a.annotations[r],["?"])}}function z(e,t,n,r){var i=o.nestedProperty,s=i(e[n[0]._name],t).get(),u=i(e[r[0]._name],t).get(),a;t==="title"&&(s==="Click to enter X axis title"&&(s="Click to enter Y axis title"),u==="Click to enter Y axis title"&&(u="Click to enter X axis title"));for(a=0;a<n.length;a++)i(e,n[a]._name+"."+t).set(u);for(a=0;a<r.length;a++)i(e,r[a]._name+"."+t).set(s)}function W(e,t){return(e%t+t)%t}var r=e("d3"),i=e("fast-isnumeric"),s=e("../../plotly"),o=e("../../lib"),u=e("../../lib/svg_text_utils"),a=e("../../components/titles"),f=e("../../components/color"),l=e("../../components/drawing"),c=t.exports={};c.layoutAttributes=e("./layout_attributes"),c.supplyLayoutDefaults=e("./layout_defaults"),c.setConvert=e("./set_convert");var h=e("./axis_ids");c.id2name=h.id2name,c.cleanId=h.cleanId,c.list=h.list,c.listIds=h.listIds,c.getFromId=h.getFromId,c.getFromTrace=h.getFromTrace,c.coerceRef=function(e,t,n,r,i){var s=n._fullLayout._has("gl2d")?[]:c.listIds(n,r),u=r+"ref",a={};return a[u]={valType:"enumerated",values:s.concat(["paper"]),dflt:i||s[0]||"paper"},o.coerce(e,t,a,u)},c.clearTypes=function(e,t){if(!Array.isArray(t)||!t.length)t=e._fullData.map(function(e,t){return t});t.forEach(function(t){var n=e.data[t];delete (c.getFromId(e,n.xaxis)||{}).type,delete (c.getFromId(e,n.yaxis)||{}).type})},c.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"},c.minDtick=function(e,t,n,r){if(["log","category"].indexOf(e.type)!==-1||!r)e._minDtick=0;else if(e._minDtick===null)e._minDtick=t,e._forceTick0=n;else if(e._minDtick)if((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6)e._minDtick=t,e._forceTick0=n;else if((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)e._minDtick=0},c.getAutoRange=function(e){var t=[],n=e._min[0].val,r=e._max[0].val,i;for(i=1;i<e._min.length;i++){if(n!==r)break;n=Math.min(n,e._min[i].val)}for(i=1;i<e._max.length;i++){if(n!==r)break;r=Math.max(r,e._max[i].val)}var s,o,u,a,f,l,c,h=0,p=e.range&&e.range[1]<e.range[0];e.autorange==="reversed"&&(p=!0,e.autorange=!0);for(i=0;i<e._min.length;i++){o=e._min[i];for(s=0;s<e._max.length;s++)u=e._max[s],c=u.val-o.val,l=e._length-o.pad-u.pad,c>0&&l>0&&c/l>h&&(a=o,f=u,h=c/l)}if(n===r)t=p?[n+1,e.rangemode!=="normal"?0:n-1]:[e.rangemode!=="normal"?0:n-1,n+1];else if(h){if(e.type==="linear"||e.type==="-")e.rangemode==="tozero"&&a.val>=0?a={val:0,pad:0}:e.rangemode==="nonnegative"&&(a.val-h*a.pad<0&&(a={val:0,pad:0}),f.val<0&&(f={val:1,pad:0})),h=(f.val-a.val)/(e._length-a.pad-f.pad);
t=[a.val-h*a.pad,f.val+h*f.pad],t[0]===t[1]&&(t=[t[0]-1,t[0]+1]),p&&t.reverse()}return t},c.doAutoRange=function(e){e._length||e.setScale();var t=e._min&&e._max&&e._min.length&&e._max.length;if(e.autorange&&t){e.range=c.getAutoRange(e);var n=e._gd.layout[e._name];n||(e._gd.layout[e._name]=n={}),n!==e&&(n.range=e.range.slice(),n.autorange=e.autorange)}},c.saveRangeInitial=function(e,t){var n=c.list(e,"",!0),r=!1;for(var i=0;i<n.length;i++){var s=n[i],o=s._rangeInitial===undefined,u=o||s.range[0]!==s._rangeInitial[0]||s.range[1]!==s._rangeInitial[1];if(o&&s.autorange===!1||t&&u)s._rangeInitial=s.range.slice(),r=!0}return r};var p=Number.MAX_VALUE/2;c.expand=function(e,t,n){function b(e){if(Array.isArray(e))return function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}function T(n){function r(e){return i(e)&&Math.abs(e)<p}l=t[n];if(!i(l))return;d=w(n)+s,v=E(n)+s,g=l-x(n),y=l+S(n),e.type==="log"&&g<y/10&&(g=y/10),c=e.c2l(g),h=e.c2l(y),o&&(c=Math.min(0,c),h=Math.max(0,h));if(r(c)){m=!0;for(a=0;a<e._min.length&&m;a++)f=e._min[a],f.val<=c&&f.pad>=v?m=!1:f.val>=c&&f.pad<=v&&(e._min.splice(a,1),a--);m&&e._min.push({val:c,pad:o&&c===0?0:v})}if(r(h)){m=!0;for(a=0;a<e._max.length&&m;a++)f=e._max[a],f.val>=h&&f.pad>=d?m=!1:f.val<=h&&f.pad<=d&&(e._max.splice(a,1),a--);m&&e._max.push({val:h,pad:o&&h===0?0:d})}}if(!e.autorange&&!e._needsExpand||!t)return;e._min||(e._min=[]),e._max||(e._max=[]),n||(n={}),e._m||e.setScale();var r=t.length,s=n.padded?e._length*.05:0,o=n.tozero&&(e.type==="linear"||e.type==="-"),u,a,f,l,c,h,d,v,m,g,y,w=b((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),E=b((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),S=b(n.vpadplus||n.vpad),x=b(n.vpadminus||n.vpad);for(u=0;u<6;u++)T(u);for(u=r-1;u>5;u--)T(u)},c.autoBin=function(e,t,n,r){function m(e){return(1+(e-d)*100/p.dtick)%100<2}var s=o.aggNums(Math.min,null,e),u=o.aggNums(Math.max,null,e);if(t.type==="category")return{start:s-.5,end:u+.5,size:1};var a;if(n)a=(u-s)/n;else{var f=o.distinctVals(e),l=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),h=l*o.roundUp(f.minDiff/l,[.9,1.9,4.9,9.9],!0);a=Math.max(h,2*o.stdev(e)/Math.pow(e.length,r?.25:.4))}var p={type:t.type==="log"?"linear":t.type,range:[s,u]};c.autoTicks(p,a);var d=c.tickIncrement(c.tickFirst(p),p.dtick,"reverse"),v;if(typeof p.dtick=="number"){var g=0,y=0,b=0,w=0;for(var E=0;E<e.length;E++)e[E]%1===0?b++:i(e[E])||w++,m(e[E])&&g++,m(e[E]+p.dtick/2)&&y++;var S=e.length-w;if(b===S&&t.type!=="date")p.dtick<1?d=s-.5*p.dtick:d-=.5;else if(y<S*.1)if(g>S*.3||m(s)||m(u)){var x=p.dtick/2;d+=d+x<s?x:-x}var T=1+Math.floor((u-d)/p.dtick);v=d+T*p.dtick}else{v=d;while(v<=u)v=c.tickIncrement(v,p.dtick)}return{start:d,end:v,size:p.dtick}},c.calcTicks=function(t){if(t.tickmode==="array")return d(t);if(t.tickmode==="auto"||!t.dtick){var n=t.nticks,r;n||(t.type==="category"?(r=t.tickfont?(t.tickfont.size||12)*1.2:15,n=t._length/r):(r=t._id.charAt(0)==="y"?40:80,n=o.constrain(t._length/r,4,9)+1)),c.autoTicks(t,Math.abs(t.range[1]-t.range[0])/n),t._minDtick>0&&t.dtick<t._minDtick*2&&(t.dtick=t._minDtick,t.tick0=t._forceTick0)}t.tick0||(t.tick0=t.type==="date"?(new Date(2e3,0,1)).getTime():0),S(t),t._tmin=c.tickFirst(t);var i=t.range[1]<t.range[0],s=[],u=t.range[1]*1.0001-t.range[0]*1e-4;t.type==="category"&&(u=i?Math.max(-0.5,u):Math.min(t._categories.length-.5,u));for(var a=t._tmin;i?a>=u:a<=u;a=c.tickIncrement(a,t.dtick,i)){s.push(a);if(s.length>1e3)break}t._tmax=s[s.length-1];var f=new Array(s.length);for(var l=0;l<s.length;l++)f[l]=c.tickText(t,s[l]);return f};var v=[2,5,10],m=[1,2,3,6,12],g=[1,2,5,10,15,30],y=[1,2,3,7,14],b=[-0.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],w=[-0.301,0,.301,.699,1];c.autoTicks=function(e,t){var n;if(e.type==="date")e.tick0=(new Date(2e3,0,1)).getTime(),t>157788e5?(t/=315576e5,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick="M"+12*E(t,n,v)):t>12096e5?(t/=26298e5,e.dtick="M"+E(t,1,m)):t>432e5?(e.dtick=E(t,864e5,y),e.tick0=(new Date(2e3,0,2)).getTime()):t>18e5?e.dtick=E(t,36e5,m):t>3e4?e.dtick=E(t,6e4,g):t>500?e.dtick=E(t,1e3,g):(n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick=E(t,n,v));else if(e.type==="log"){e.tick0=0;if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(e.range[1]-e.range[0])<1){var r=1.5*Math.abs((e.range[1]-e.range[0])/t);t=Math.abs(Math.pow(10,e.range[1])-Math.pow(10,e.range[0]))/r,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick="L"+E(t,n,v)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):(e.tick0=0,n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),e.dtick=E(t,n,v));e.dtick===0&&(e.dtick=1);if(!i(e.dtick)&&typeof e.dtick!="string"){var s=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(s)}},c.tickIncrement=function(e,t,n){var s=n?-1:1;if(i(t))return e+s*t;var u=t.charAt(0),a=s*Number(t.substr(1));if(u==="M"){var f=new Date(e);return f.setMonth(f.getMonth()+a)}if(u==="L")return Math.log(Math.pow(10,e)+a)/Math.LN10;if(u==="D"){var l=t==="D2"?w:b,c=e+s*.01,h=o.roundUp(W(c,1),l,n);return Math.floor(c)+Math.log(r.round(Math.pow(10,h),1))/Math.LN10}throw"unrecognized dtick "+String(t)},c.tickFirst=function(e){var t=e.range[1]<e.range[0],n=t?Math.floor:Math.ceil,s=e.range[0]*1.0001-e.range[1]*1e-4,u=e.dtick,a=e.tick0;if(i(u)){var f=n((s-a)/u)*u+a;return e.type==="category"&&(f=o.constrain(f,0,e._categories.length-1)),f}var l=u.charAt(0),h=Number(u.substr(1)),p,d,v;if(l==="M"){p=new Date(a),s=new Date(s),d=(s.getFullYear()-p.getFullYear())*12+s.getMonth()-p.getMonth(),v=p.setMonth(p.getMonth()+(Math.round(d/h)+(t?1:-1))*h);while(t?v>s:v<s)v=c.tickIncrement(v,u,t);return v}if(l==="L")return Math.log(n((Math.pow(10,s)-a)/h)*h+a)/Math.LN10;if(l==="D"){var m=u==="D2"?w:b,g=o.roundUp(W(s,1),m,t);return Math.floor(s)+Math.log(r.round(Math.pow(10,g),1))/Math.LN10}throw"unrecognized dtick "+String(u)};var x=r.time.format("%Y"),T=r.time.format("%b %Y"),N=r.time.format("%b %-d"),C=r.time.format("%b %-d %Hh"),k=r.time.format("%H:%M"),L=r.time.format(":%S"),A=/%(\d?)f/g;c.tickText=function(e,t,n){function f(r){var i;return r===undefined?!0:n?r==="none":(i={first:e._tmin,last:e._tmax}[r],r!=="all"&&t!==i)}var r=M(e,t),i,s=e.tickmode==="array",o=n||s,u;if(s&&Array.isArray(e.ticktext)){var a=Math.abs(e.range[1]-e.range[0])/1e4;for(u=0;u<e.ticktext.length;u++)if(Math.abs(t-e.d2l(e.tickvals[u]))<a)break;if(u<e.ticktext.length)return r.text=String(e.ticktext[u]),r}return i=e.exponentformat!=="none"&&f(e.showexponent)?"hide":"",e.type==="date"?_(e,r,n,o):e.type==="log"?D(e,r,n,o,i):e.type==="category"?P(e,r):H(e,r,n,o,i),e.tickprefix&&!f(e.showtickprefix)&&(r.text=e.tickprefix+r.text),e.ticksuffix&&!f(e.showticksuffix)&&(r.text+=e.ticksuffix),r};var B=["f","p","n","&mu;","m","","k","M","G","T"],F=/(\d+)(\d{3})/;c.subplotMatch=/^x([0-9]*)y([0-9]*)$/,c.getSubplots=function(e,t){function p(e,t){return e.indexOf(t._id)!==-1}var n=[],r,i,o,u=e.data||[];for(r=0;r<u.length;r++){var a=u[r];if(a.visible===!1||a.visible==="legendonly"||!s.Plots.traceIs(a,"cartesian")&&!s.Plots.traceIs(a,"gl2d"))continue;var f=a.xaxis||"x",l=a.yaxis||"y";o=f+l,n.indexOf(o)===-1&&n.push(o)}var h=c.list(e,"",!0);for(r=0;r<h.length;r++){var d=h[r],v=d._id.charAt(0),m=d.anchor==="free"?v==="x"?"y":"x":d.anchor,g=c.getFromId(e,m),y=!1;for(i=0;i<n.length;i++)if(p(n[i],d)){y=!0;break}if(d.anchor==="free"&&y)continue;if(!g)continue;o=v==="x"?d._id+g._id:g._id+d._id,n.indexOf(o)===-1&&n.push(o)}var b=c.subplotMatch,w=[];for(r=0;r<n.length;r++)o=n[r],b.test(o)&&w.push(o);return w.sort(function(e,t){var n=e.match(b),r=t.match(b);return n[1]===r[1]?+(n[2]||1)-(r[2]||1):+(n[1]||0)-(r[1]||0)}),t?c.findSubplotsWithAxis(w,t):w},c.findSubplotsWithAxis=function(e,t){var n=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),r=[];for(var i=0;i<e.length;i++){var s=e[i];n.test(s)&&r.push(s)}return r},c.makeClipPaths=function(e){var t=e._fullLayout,n=t._defs,i={_offset:0,_length:t.width,_id:""},s={_offset:0,_length:t.height,_id:""},o=c.list(e,"x",!0),u=c.list(e,"y",!0),a=[],f,l;for(f=0;f<o.length;f++){a.push({x:o[f],y:s});for(l=0;l<u.length;l++)f===0&&a.push({x:i,y:u[l]}),a.push({x:o[f],y:u[l]})}var h=n.selectAll("g.clips").data([0]);h.enter().append("g").classed("clips",!0);var p=h.selectAll(".axesclip").data(a,function(e){return e.x._id+e.y._id});p.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),p.exit().remove(),p.each(function(e){r.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},c.doTicks=function(e,t,n){function B(e){var t=d.l2p(e.x);return t>1&&t<d._length-1}function F(e,t){var n=e.selectAll("path."+w).data(d.ticks==="inside"?j:y,b);t&&d.ticks?(n.enter().append("path").classed(w,1).classed("ticks",1).classed("crisp",1).call(f.stroke,d.tickcolor).style("stroke-width",L+"px").attr("d",t),n.attr("transform",O),n.exit().remove()):n.remove()}function I(n,s){function C(e,t){e.each(function(e){var n=h(t),s=r.select(this),o=s.select(".text-math-group"),u=O(e)+(i(t)&&+t!==0?" rotate("+t+","+f(e)+","+(c(e)-e.fontSize/2)+")":"");if(o.empty()){var a=s.select("text").attr({transform:u,"text-anchor":n});a.empty()||a.selectAll("tspan.line").attr({x:a.attr("x"),y:a.attr("y")})}else{var p=l.bBox(o.node()).width*{end:-0.5,start:.5}[n];o.attr("transform",u+(p?"translate("+p+",0)":""))}})}function k(){return S.length&&Promise.all(S)}function L(){C(a,d.tickangle);if(m==="x"&&!i(d.tickangle)&&(d.type!=="log"||String(d.dtick).charAt(0)!=="D")){var e=[];a.each(function(t){var n=r.select(this),i=n.select(".text-math-group"),s=d.l2p(t.x);i.empty()&&(i=n.select("text"));var o=l.bBox(i.node());e.push({top:0,bottom:10,height:10,left:s-o.width/2,right:s+o.width/2+2,width:o.width+2})});for(_=0;_<e.length-1;_++)if(o.bBoxIntersect(e[_],e[_+1])){E=30;break}if(E){var n=Math.abs((y[y.length-1].x-y[0].x)*d._m)/(y.length-1);n<g*2.5&&(E=90),C(a,E)}d._lastangle=E}return q(t),t+" done"}function A(){d._boundingBox=n.node().getBoundingClientRect()}var a=n.selectAll("g."+w).data(y,b);if(!d.showticklabels||!i(s)){a.remove(),q(t);return}var f,c,h,p,v;m==="x"?(v=P==="bottom"?1:-1,f=function(e){return e.dx+N*v},p=s+(T+x)*v,c=function(e){return e.dy+p+e.fontSize*(P==="bottom"?1:-0.5)},h=function(e){return!i(e)||e===0||e===180?"middle":e*v<0?"end":"start"}):(v=P==="right"?1:-1,c=function(e){return e.dy+e.fontSize/2-N*v},f=function(e){return e.dx+s+(T+x+(Math.abs(d.tickangle)===90?e.fontSize/2:0))*v},h=function(e){return i(e)&&Math.abs(e)===90?"middle":P==="right"?"start":"end"});var g=0,E=0,S=[];a.enter().append("g").classed(w,1).append("text").attr("text-anchor","middle").each(function(t){var n=r.select(this),i=e._promises.length;n.call(l.setPosition,f(t),c(t)).call(l.font,t.font,t.fontSize,t.fontColor).text(t.text).call(u.convertToTspans),i=e._promises[i],i?S.push(e._promises.pop().then(function(){C(n,d.tickangle)})):C(n,d.tickangle)}),a.exit().remove(),a.each(function(e){g=Math.max(g,e.fontSize)}),C(a,d._lastangle||d.tickangle);var M=o.syncOrAsync([k,L,A]);return M&&M.then&&e._promises.push(M),M}function q(t){if(n)return;var i=h.getFromId(e,t),s=r.select(e).selectAll("g."+t+"tick"),o={selection:s,side:i.side},u=t.charAt(0),f=e._fullLayout._size,l=1.5,c=i.titlefont.size,d,v,m,g;if(s.size()){var y=r.select(s.node().parentNode).attr("transform").match(/translate\(([-\.\d]+),([-\.\d]+)\)/);y&&(o.offsetLeft=+y[1],o.offsetTop=+y[2])}u==="x"?(v=i.anchor==="free"?{_offset:f.t+(1-(i.position||0))*f.h,_length:0}:h.getFromId(e,i.anchor),m=i._offset+i._length/2,g=v._offset+(i.side==="top"?-10-c*(l+(i.showticklabels?1:0)):v._length+10+c*(l+(i.showticklabels?1.5:.5))),i.rangeslider&&i.rangeslider.visible&&i._boundingBox&&(g+=(p.height-p.margin.b-p.margin.t)*i.rangeslider.thickness+i._boundingBox.height),o.side||(o.side="bottom")):(v=i.anchor==="free"?{_offset:f.l+(i.position||0)*f.w,_length:0}:h.getFromId(e,i.anchor),g=i._offset+i._length/2,m=v._offset+(i.side==="right"?v._length+10+c*(l+(i.showticklabels?1:.5)):-10-c*(l+(i.showticklabels?.5:0))),d={rotate:"-90",offset:0},o.side||(o.side="left")),a.draw(e,t+"title",{propContainer:i,propName:i._name+".title",dfltName:u.toUpperCase()+" axis",avoid:o,transform:d,attributes:{x:m,y:g,"text-anchor":"middle"}})}function R(e,t){return e.visible!==!0||e.xaxis+e.yaxis!==t?!1:s.Plots.traceIs(e,"bar")&&e.orientation==={x:"h",y:"v"}[m]?!0:e.fill&&e.fill.charAt(e.fill.length-1)===m}function U(t,n,i){var s=t.gridlayer,o=t.zerolinelayer,u=t["hidegrid"+m]?[]:j,a=d._gridpath||"M0,0"+(m==="x"?"v":"h")+n._length,l=s.selectAll("path."+E).data(d.showgrid===!1?[]:u,b);l.enter().append("path").classed(E,1).classed("crisp",1).attr("d",a).each(function(e){d.zeroline&&(d.type==="linear"||d.type==="-")&&Math.abs(e.x)<d.dtick/100&&r.select(this).remove()}),l.attr("transform",O).call(f.stroke,d.gridcolor||"#ddd").style("stroke-width",C+"px"),l.exit().remove();if(o){var c=!1;for(var h=0;h<e._fullData.length;h++)if(R(e._fullData[h],i)){c=!0;break}var p=d.range[0]*d.range[1]<=0&&d.zeroline&&(d.type==="linear"||d.type==="-")&&u.length&&(c||B({x:0})||!d.showline),v=o.selectAll("path."+S).data(p?[{x:0}]:[]);v.enter().append("path").classed(S,1).classed("zl",1).classed("crisp",1).attr("d",a),v.attr("transform",O).call(f.stroke,d.zerolinecolor||f.defaultLine).style("stroke-width",k+"px"),v.exit().remove()}}var p=e._fullLayout,d,v=!1;if(typeof t=="object")d=t,t=d._id,v=!0;else{d=c.getFromId(e,t),t==="redraw"&&p._paper.selectAll("g.subplot").each(function(e){var t=p._plots[e],n=t.x(),r=t.y();t.xaxislayer.selectAll("."+n._id+"tick").remove(),t.yaxislayer.selectAll("."+r._id+"tick").remove(),t.gridlayer.selectAll("path").remove(),t.zerolinelayer.selectAll("path").remove()});if(!t||t==="redraw")return o.syncOrAsync(c.list(e,"",!0).map(function(n){return function(){if(!n._id)return;var r=c.doTicks(e,n._id);return t==="redraw"&&(n._r=n.range.slice()),r}}))}d.tickformat||(["none","e","E","power","SI","B"].indexOf(d.exponentformat)===-1&&(d.exponentformat="e"),["all","first","last","none"].indexOf(d.showexponent)===-1&&(d.showexponent="all")),d.range=[+d.range[0],+d.range[1]],d.setScale();var m=t.charAt(0),g=c.counterLetter(t),y=c.calcTicks(d),b=function(e){return e.text+e.x+d.mirror},w=t+"tick",E=t+"grid",S=t+"zl",x=(d.linewidth||1)/2,T=(d.ticks==="outside"?d.ticklen:1)+(d.linewidth||0),N=0,C=l.crispRound(e,d.gridwidth,1),k=l.crispRound(e,d.zerolinewidth,C),L=l.crispRound(e,d.tickwidth,1),A,O,M,_;if(d._counterangle&&d.ticks==="outside"){var D=d._counterangle*Math.PI/180;T=d.ticklen*Math.cos(D)+(d.linewidth||0),N=d.ticklen*Math.sin(D)}if(m==="x")A=["bottom","top"],O=function(e){return"translate("+d.l2p(e.x)+",0)"},M=function(e,t){if(d._counterangle){var n=d._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(n)*t+","+Math.cos(n)*t}return"M0,"+e+"v"+t};else{if(m!=="y"){console.log("unrecognized doTicks axis",t);return}A=["left","right"],O=function(e){return"translate(0,"+d.l2p(e.x)+")"},M=function(e,t){if(d._counterangle){var n=d._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(n)*t+","+ -Math.sin(n)*t}return"M"+e+",0h"+t}}var P=d.side||A[0],H=[-1,1,P===A[1]?1:-1];d.ticks!=="inside"==(m==="x")&&(H=H.map(function(e){return-e}));var j=y.filter(B);if(v){F(d._axislayer,M(d._pos+x*H[2],H[2]*d.ticklen));if(d._counteraxis){var z={gridlayer:d._gridlayer,zerolinelayer:d._zerolinelayer};U(z,d._counteraxis)}return I(d._axislayer,d._pos)}var W=c.getSubplots(e,d).map(function(e){var t=p._plots[e];if(!p._has("cartesian"))return;var n=t[m+"axislayer"],r=d._linepositions[e]||[],s=t[g](),o=s._id===d.anchor,u=[!1,!1,!1],a="";d.mirror==="allticks"?u=[!0,!0,!1]:o&&(d.mirror==="ticks"?u=[!0,!0,!1]:u[A.indexOf(P)]=!0);if(d.mirrors)for(_=0;_<2;_++){var f=d.mirrors[s._id+A[_]];if(f==="ticks"||f==="labels")u[_]=!0}return r[2]!==undefined&&(u[2]=!0),u.forEach(function(e,t){var n=r[t],s=H[t];e&&i(n)&&(a+=M(n+x*s,s*d.ticklen))}),F(n,a),U(t,s,e),I(n,r[3])}).filter(function(e){return e&&e.then});return W.length?Promise.all(W):0},c.swap=function(e,t){var n=q(e,t);for(var r=0;r<n.length;r++)U(e,n[r].x,n[r].y)}},{"../../components/color":303,"../../components/drawing":325,"../../components/titles":365,"../../lib":381,"../../lib/svg_text_utils":393,"../../plotly":400,"./axis_ids":405,"./layout_attributes":412,"./layout_defaults":413,"./set_convert":417,d3:72,"fast-isnumeric":76}],404:[function(e,t,n){"use strict";function g(e,t){if(e.type!=="-")return;var n=e._id,r=n.charAt(0);n.indexOf("scene")!==-1&&(n=r);var i=E(t,n,r);if(!i)return;if(i.type==="histogram"&&r==={v:"y",h:"x"}[i.orientation||"v"]){e.type="linear";return}if(b(i,r)){var s=y(i),u=[],a;for(var f=0;f<t.length;f++){a=t[f];if(!o.traceIs(a,"box")||(a[r+"axis"]||r)!==n)continue;a[s]!==undefined?u.push(a[s][0]):a.name!==undefined?u.push(a.name):u.push("text")}e.type=w(u)}else e.type=w(i[r]||[i[r+"0"]])}function y(e){return{v:"x",h:"y"}[e.orientation||"v"]}function b(e,t){var n=y(e);return o.traceIs(e,"box")&&t===n&&e[n]===undefined&&e[n+"0"]===undefined}function w(e){return x(e)?"date":T(e)?"category":S(e)?"linear":"-"}function E(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if((i[n+"axis"]||n)===t){if(b(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}function S(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}function x(e){var t=0,n=0,i=Math.max(1,(e.length-1)/1e3),o;for(var u=0;u<e.length;u+=i)o=e[Math.round(u)],s.isDateTime(o)&&(t+=1),r(o)&&(n+=1);return t>n*2}function T(e){var t=Math.max(1,(e.length-1)/1e3),n=0,i=0,s;for(var o=0;o<e.length;o+=t)s=v(e[Math.round(o)]),r(s)?n++:typeof s=="string"&&s!==""&&s!=="None"&&i++;return i>n*2}var r=e("fast-isnumeric"),i=e("tinycolor2").mix,s=e("../../lib"),o=e("../plots"),u=e("../../components/color/attributes").lightFraction,a=e("./layout_attributes"),f=e("./tick_value_defaults"),l=e("./tick_mark_defaults"),c=e("./tick_label_defaults"),h=e("./category_order_defaults"),p=e("./set_convert"),d=e("./ordered_categories"),v=e("./clean_datum"),m=e("./axis_ids");t.exports=function(t,n,o,v){function E(e,r){return s.coerce2(t,n,a,e,r)}var y=v.letter,b=v.font||{},w="Click to enter "+(v.title||y.toUpperCase()+" axis")+" title";v.name&&(n._name=v.name,n._id=m.name2id(v.name));var S=o("type");S==="-"&&(g(n,v.data),n.type==="-"?n.type="linear":S=t.type=n.type),p(n);var x=o("color"),T=x===t.color?x:b.color;o("title",w),s.coerceFont(o,"titlefont",{family:b.family,size:Math.round(b.size*1.2),color:T});var N=(t.range||[]).length===2&&r(t.range[0])&&r(t.range[1]),C=o("autorange",!N);C&&o("rangemode");var k=o("range",[-1,y==="x"?6:4]);k[0]===k[1]&&(n.range=[k[0]-1,k[0]+1]),s.noneOrAll(t.range,n.range,[0,1]),o("fixedrange"),f(t,n,o,S),c(t,n,o,S,v),l(t,n,o,v),h(t,n,o);var L=E("linecolor",x),A=E("linewidth"),O=o("showline",!!L||!!A);O||(delete n.linecolor,delete n.linewidth),(O||n.ticks)&&o("mirror");var M=E("gridcolor",i(x,v.bgColor,u).toRgbString()),_=E("gridwidth"),D=o("showgrid",v.showGrid||!!M||!!_);D||(delete n.gridcolor,delete n.gridwidth);var P=E("zerolinecolor",x),H=E("zerolinewidth"),B=o("zeroline",v.showGrid||!!P||!!H);return B||(delete n.zerolinecolor,delete n.zerolinewidth),n._initialCategories=S==="category"?d(y,n.categoryorder,n.categoryarray,v.data):[],n}},{"../../components/color/attributes":302,"../../lib":381,"../plots":452,"./axis_ids":405,"./category_order_defaults":406,"./clean_datum":407,"./layout_attributes":412,"./ordered_categories":414,"./set_convert":417,"./tick_label_defaults":418,"./tick_mark_defaults":419,"./tick_value_defaults":420,"fast-isnumeric":76,tinycolor2:233}],405:[function(e,t,n){"use strict";function o(e,t,n){function s(e,n){var r=Object.keys(e),i=/^[xyz]axis[0-9]*/,s=[];for(var o=0;o<r.length;o++){var u=r[o];if(t&&u.charAt(0)!==t)continue;i.test(u)&&s.push(n+u)}return s.sort()}var i=e._fullLayout;if(!i)return[];var o=s(i,"");if(n)return o;var u=r.getSubplotIds(i,"gl3d")||[];for(var a=0;a<u.length;a++){var f=u[a];o=o.concat(s(i[f],f+"."))}return o}var r=e("../plots"),i=e("../../lib"),s=e("./constants");n.id2name=function(t){if(typeof t!="string"||!t.match(s.AX_ID_PATTERN))return;var n=t.substr(1);return n==="1"&&(n=""),t.charAt(0)+"axis"+n},n.name2id=function(t){if(!t.match(s.AX_NAME_PATTERN))return;var n=t.substr(5);return n==="1"&&(n=""),t.charAt(0)+n},n.cleanId=function(t,n){if(!t.match(s.AX_ID_PATTERN))return;if(n&&t.charAt(0)!==n)return;var r=t.substr(1).replace(/^0+/,"");return r==="1"&&(r=""),t.charAt(0)+r},n.list=function(e,t,n){return o(e,t,n).map(function(t){return i.nestedProperty(e._fullLayout,t).get()})},n.listIds=function(e,t){return o(e,t,!0).map(n.name2id)},n.getFromId=function(e,t,r){var i=e._fullLayout;return r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[n.id2name(t)]},n.getFromTrace=function(e,t,i){var s=e._fullLayout,o=null;if(r.traceIs(t,"gl3d")){var u=t.scene;u.substr(0,5)==="scene"&&(o=s[u][i+"axis"])}else o=n.getFromId(e,t[i+"axis"]||i);return o}},{"../../lib":381,"../plots":452,"./constants":408}],406:[function(e,t,n){"use strict";t.exports=function(t,n,r){if(n.type!=="category")return;var i=t.categoryarray,s,o=Array.isArray(i)&&i.length>0;o&&(s="array");var u=r("categoryorder",s);u==="array"&&r("categoryarray"),!o&&u==="array"&&(n.categoryorder="trace")}},{}],407:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib");t.exports=function(t){try{if(typeof t=="object"&&t!==null&&t.getTime)return i.ms2DateTime(t);if(typeof t!="string"&&!r(t))return"";t=t.toString().replace(/['"%,$# ]/g,"")}catch(n){console.log(n,t)}return t}},{"../../lib":381,"fast-isnumeric":76}],408:[function(e,t,n){"use strict";t.exports={idRegex:{x:/^x([2-9]|[1-9][0-9]+)?$/,y:/^y([2-9]|[1-9][0-9]+)?$/},attrRegex:{x:/^xaxis([2-9]|[1-9][0-9]+)?$/,y:/^yaxis([2-9]|[1-9][0-9]+)?$/},BADNUM:undefined,xAxisMatch:/^xaxis[0-9]*$/,yAxisMatch:/^yaxis[0-9]*$/,AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,DBLCLICKDELAY:300,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,BENDPX:1.5}},{}],409:[function(e,t,n){"use strict";function m(e,t){var n=e.range[t],i=Math.abs(n-e.range[1-t]),s;return e.type==="date"?o.ms2DateTime(n,i):e.type==="log"?(s=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,r.format("."+s+"g")(Math.pow(10,n))):(s=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,r.format("."+String(s)+"g")(n))}function g(e,t){return e?e==="nsew"?t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function y(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var r=e("d3"),i=e("tinycolor2"),s=e("../../plotly"),o=e("../../lib"),u=e("../../lib/svg_text_utils"),a=e("../../components/color"),f=e("../../components/drawing"),l=e("../../lib/setcursor"),c=e("../../components/dragelement"),h=e("./axes"),p=e("./select"),d=e("./constants"),v=!0;t.exports=function(t,n,r,b,w,E,S,x){function H(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function z(e){e[0]=Number(e[0]),e[1]=Number(e[1])}function rt(e,n,r){var s=U.getBoundingClientRect();J=n-s.left,K=r-s.top,Q={l:J,r:J,w:0,t:K,b:K,h:0},G=t._hmpixcount?t._hmlumcount/t._hmpixcount:i(t._fullLayout.plot_bgcolor).getLuminance(),Y="M0,0H"+L+"V"+A+"H0V0",Z=!1,et="xy",tt=X.append("path").attr("class","zoombox").style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+V+", "+$+")").attr("d",Y+"Z"),nt=X.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+V+", "+$+")").attr("d","M0,0Z"),it();for(var o=0;o<B.length;o++)z(B[o].range)}function it(){X.selectAll(".select-outline").remove()}function st(e,t){var n=Math.max(0,Math.min(L,e+J)),r=Math.max(0,Math.min(A,t+K)),i=Math.abs(n-J),s=Math.abs(r-K),o=Math.floor(Math.min(s,i,M)/2);Q.l=Math.min(J,n),Q.r=Math.max(J,n),Q.t=Math.min(K,r),Q.b=Math.max(K,r),!F||s<Math.min(Math.max(i*.6,O),M)?i<O?(et="",Q.r=Q.l,Q.t=Q.b,nt.attr("d","M0,0Z")):(Q.t=0,Q.b=A,et="x",nt.attr("d","M"+(Q.l-.5)+","+(K-M-.5)+"h-3v"+(2*M+1)+"h3ZM"+(Q.r+.5)+","+(K-M-.5)+"h3v"+(2*M+1)+"h-3Z")):!j||i<Math.min(s*.6,M)?(Q.l=0,Q.r=L,et="y",nt.attr("d","M"+(J-M-.5)+","+(Q.t-.5)+"v-3h"+(2*M+1)+"v3ZM"+(J-M-.5)+","+(Q.b+.5)+"v3h"+(2*M+1)+"v-3Z")):(et="xy",nt.attr("d","M"+(Q.l-3.5)+","+(Q.t-.5+o)+"h3v"+ -o+"h"+o+"v-3h-"+(o+3)+"ZM"+(Q.r+3.5)+","+(Q.t-.5+o)+"h-3v"+ -o+"h"+ -o+"v-3h"+(o+3)+"ZM"+(Q.r+3.5)+","+(Q.b+.5-o)+"h-3v"+o+"h"+ -o+"v3h"+(o+3)+"ZM"+(Q.l-3.5)+","+(Q.b+.5-o)+"h3v"+o+"h"+o+"v3h-"+(o+3)+"Z")),Q.w=Q.r-Q.l,Q.h=Q.b-Q.t,tt.attr("d",Y+"M"+Q.l+","+Q.t+"v"+Q.h+"h"+Q.w+"v-"+Q.h+"h-"+Q.w+"Z"),Z||(tt.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),nt.transition().style("opacity",1).duration(200),Z=!0)}function ot(e,t,n){var r,i,s;for(r=0;r<e.length;r++){i=e[r];if(i.fixedrange)continue;s=i.range,i.range=[s[0]+(s[1]-s[0])*t,s[0]+(s[1]-s[0])*n]}}function ut(e,n){if(Math.min(Q.h,Q.w)<O*2)return n===2&&mt(),y(t);(et==="xy"||et==="x")&&ot(C,Q.l/L,Q.r/L),(et==="xy"||et==="y")&&ot(k,(A-Q.b)/A,(A-Q.t)/A),y(t),gt(et),v&&t.data&&t._context.showTips&&(o.notifier("Double-click to<br>zoom back out","long"),v=!1)}function at(e,n){var r=(S+x).length===1;if(e)gt();else if(n===2&&!r)mt();else if(n===1&&r){var i=S?k[0]:C[0],o=S==="s"||x==="w"?0:1,a=i._name+".range["+o+"]",f=m(i,o),l="left",c="middle";if(i.fixedrange)return;S?(c=S==="n"?"top":"bottom",i.side==="right"&&(l="right")):x==="e"&&(l="right"),R.call(u.makeEditable,null,{immediate:!0,background:T.paper_bgcolor,text:String(f),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:l,verticalAlign:c}).on("edit",function(e){var n=i.type==="category"?i.c2l(e):i.d2l(e);n!==undefined&&s.relayout(t,a,n)})}}function pt(e){function h(e,t,n){if(e.fixedrange)return;z(e.range);var r=e.range,i=r[0]+(r[1]-r[0])*t;e.range=[i+(r[0]-i)*n,i+(r[1]-i)*n]}if(!t._context.scrollZoom&&!T._enablescrollzoom)return;var n=t.querySelector(".plotly");if(n.scrollHeight-n.clientHeight>10||n.scrollWidth-n.clientWidth>10)return;clearTimeout(lt);var r=-e.deltaY;isFinite(r)||(r=e.wheelDelta/10);if(!isFinite(r)){console.log("did not find wheel motion attributes",e);return}var i=Math.exp(-Math.min(Math.max(r,-20),20)/100),s=ht.draglayer.select(".nsewdrag").node().getBoundingClientRect(),u=(e.clientX-s.left)/s.width,a=ft[0]+ft[2]*u,f=(s.bottom-e.clientY)/s.height,l=ft[1]+ft[3]*(1-f),c;if(x){for(c=0;c<C.length;c++)h(C[c],u,i);ft[2]*=i,ft[0]=a-ft[2]*u}if(S){for(c=0;c<k.length;c++)h(k[c],f,i);ft[3]*=i,ft[1]=l-ft[3]*(1-f)}return yt(ft),vt(S,x),lt=setTimeout(function(){ft=[0,0,L,A],gt()},ct),o.pauseEvent(e)}function dt(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r._r[0]-t/r._m,r._r[1]-t/r._m])}}function r(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-0.3)+3.222))}function i(e,t,n){var i=1-t,s=0;for(var o=0;o<e.length;o++){var u=e[o];if(u.fixedrange)continue;s=o,u.range[t]=u._r[i]+(u._r[t]-u._r[i])/r(n/u._length)}return e[s]._length*(e[s]._r[t]-e[s].range[t])/(e[s]._r[t]-e[s]._r[i])}if(j==="ew"||F==="ns"){j&&n(C,e),F&&n(k,t),yt([j?-e:0,F?-t:0,L,A]),vt(F,j);return}j==="w"?e=i(C,0,e):j==="e"?e=i(C,1,-e):j||(e=0),F==="n"?t=i(k,1,t):F==="s"?t=i(k,0,-t):F||(t=0),yt([j==="w"?e:0,F==="n"?t:0,L-e,A-t]),vt(F,j)}function vt(e,n){function o(e){for(i=0;i<e.length;i++)e[i].fixedrange||r.push(e[i]._id)}function u(s,o){var u;for(i=0;i<s.length;i++)u=s[i],(n&&r.indexOf(u.xref)!==-1||e&&r.indexOf(u.yref)!==-1)&&o.draw(t,i)}var r=[],i;n&&o(C),e&&o(k);for(i=0;i<r.length;i++)h.doTicks(t,r[i],!0);u(T.annotations||[],s.Annotations),u(T.shapes||[],s.Shapes),u(T.images||[],s.Images)}function mt(){var e=t._context.doubleClick,n=(j?C:[]).concat(F?k:[]),r={},i,o,u;if(e==="autosize")for(o=0;o<n.length;o++)i=n[o],i.fixedrange||(r[i._name+".autorange"]=!0);else if(e==="reset")for(o=0;o<n.length;o++)i=n[o],i._rangeInitial?(u=i._rangeInitial.slice(),r[i._name+".range[0]"]=u[0],r[i._name+".range[1]"]=u[1]):r[i._name+".autorange"]=!0;else if(e==="reset+autosize")for(o=0;o<n.length;o++){i=n[o];if(i.fixedrange)continue;i._rangeInitial===undefined||i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]?r[i._name+".autorange"]=!0:(u=i._rangeInitial.slice(),r[i._name+".range[0]"]=u[0],r[i._name+".range[1]"]=u[1])}t.emit("plotly_doubleclick",null),s.relayout(t,r)}function gt(e){var n={};for(var r=0;r<B.length;r++){var i=B[r];if(e&&e.indexOf(i._id.charAt(0))===-1)continue;i._r[0]!==i.range[0]&&(n[i._name+".range[0]"]=i.range[0]),i._r[1]!==i.range[1]&&(n[i._name+".range[1]"]=i.range[1]),i.range=i._r.slice()}yt([0,0,L,A]),s.relayout(t,n)}function yt(e){var t=T._plots,n=Object.keys(t);for(var r=0;r<n.length;r++){var i=t[n[r]],s=i.x(),o=i.y(),u=x&&C.indexOf(s)!==-1&&!s.fixedrange,a=S&&k.indexOf(o)!==-1&&!o.fixedrange;if(u||a){var f=u?e[0]:0,l=a?e[1]:0,c=s._offset-f,h=o._offset-l,p="clip"+T._uid+n[r]+"plot";T._defs.selectAll("#"+p).attr("transform","translate("+f+", "+l+")"),i.plot.attr("transform","translate("+c+", "+h+")")}}}var T=t._fullLayout,N=[n].concat(S&&x?n.overlays:[]),C=[n.x()],k=[n.y()],L=C[0]._length,A=k[0]._length,O=d.MINDRAG,M=d.MINZOOM;for(var _=1;_<N.length;_++){var D=N[_].x(),P=N[_].y();C.indexOf(D)===-1&&C.push(D),k.indexOf(P)===-1&&k.push(P)}var B=C.concat(k),j=H(C,x),F=H(k,S),I=g(F+j,T.dragmode),q=S+x+"drag",R=n.draglayer.selectAll("."+q).data([0]);R.enter().append("rect").classed("drag",!0).classed(q,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",n.id),R.call(f.setRect,r,b,w,E).call(l,I);var U=R.node();if(!F&&!j)return U.onmousedown=null,U.style.pointerEvents=S+x==="nsew"?"all":"none",U;var W={element:U,gd:t,plotinfo:n,xaxes:C,yaxes:k,doubleclick:mt,prepFn:function(e,n,r){var i=t._fullLayout.dragmode;S+x==="nsew"?e.shiftKey&&(i==="pan"?i="zoom":i="pan"):i="pan",i==="lasso"?W.minDrag=1:W.minDrag=undefined,i==="zoom"?(W.moveFn=st,W.doneFn=ut,rt(e,n,r)):i==="pan"?(W.moveFn=dt,W.doneFn=at,it()):(i==="select"||i==="lasso")&&p(e,n,r,W,i)}};c.init(W);var X=t._fullLayout._zoomlayer,V=n.x()._offset,$=n.y()._offset,J,K,Q,G,Y,Z,et,tt,nt,ft=[0,0,L,A],lt=null,ct=300,ht=n.mainplot?T._plots[n.mainplot]:n;return S.length*x.length!==1&&(U.onwheel!==undefined?U.onwheel=pt:U.onmousewheel!==undefined&&(U.onmousewheel=pt)),U}},{"../../components/color":303,"../../components/dragelement":323,"../../components/drawing":325,"../../lib":381,"../../lib/setcursor":389,"../../lib/svg_text_utils":393,"../../plotly":400,"./axes":403,"./constants":408,"./select":416,d3:72,tinycolor2:233}],410:[function(e,t,n){"use strict";function E(e,t){var n=[];for(var r=e.length;r>0;r--)n.push(t);return n}function S(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(e[r].p2c(t));return n}function x(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}}function L(e,t,n){if(n==="pie"){e.emit("plotly_hover",{points:[t]});return}n||(n="xy");var r=e._fullLayout,i=r._plots[n],o=Array.isArray(n)?n:[n].concat(i.overlays.map(function(e){return e.id})),a=o.map(function(t){var n=(e._fullLayout[t]||{})._ternary;return n?n.xaxis:h.getFromId(e,t,"x")}),l=o.map(function(t){var n=(e._fullLayout[t]||{})._ternary;return n?n.yaxis:h.getFromId(e,t,"y")}),d=t.hovermode||r.hovermode;if(["x","y","closest"].indexOf(d)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return c.unhoverRaw(e,t);var v=[],m=[],g,y,b,w,x,T,N,C,k,L,H,B;if(Array.isArray(t)){d="array";for(b=0;b<t.length;b++)x=e.calcdata[t[b].curveNumber||0],m.push(x)}else{for(w=0;w<e.calcdata.length;w++)x=e.calcdata[w],T=x[0].trace,o.indexOf(A(T))!==-1&&m.push(x);var j,F;if(t.target&&"clientX"in t&&"clientY"in t){if(u.triggerHandler(e,"plotly_beforehover",t)===!1)return;var I=t.target.getBoundingClientRect();j=t.clientX-I.left,F=t.clientY-I.top;if(j<0||j>I.width||F<0||F>I.height)return c.unhoverRaw(e,t)}else"xpx"in t?j=t.xpx:j=a[0]._length/2,"ypx"in t?F=t.ypx:F=l[0]._length/2;"xval"in t?g=E(o,t.xval):g=S(a,j),"yval"in t?y=E(o,t.yval):y=S(l,F);if(!s(g[0])||!s(y[0]))return console.log("Plotly.Fx.hover failed",t,e),c.unhoverRaw(e,t)}var q=Infinity;for(w=0;w<m.length;w++){x=m[w];if(!x||!x[0]||!x[0].trace||x[0].trace.visible!==!0)continue;T=x[0].trace,N=o.indexOf(A(T)),C=d,H={cd:x,trace:T,xa:a[N],ya:l[N],name:e.data.length>1||T.hoverinfo.indexOf("name")!==-1?T.name:undefined,index:!1,distance:Math.min(q,p.MAXDIST),color:f.defaultLine,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined},B=v.length;if(C==="array"){var R=t[w];"pointNumber"in R?(H.index=R.pointNumber,C="closest"):(C="","xval"in R&&(k=R.xval,C="x"),"yval"in R&&(L=R.yval,C=C?"closest":"y"))}else k=g[N],L=y[N];if(T._module&&T._module.hoverPoints){var U=T._module
.hoverPoints(H,k,L,C);if(U){var z;for(var W=0;W<U.length;W++)z=U[W],s(z.x0)&&s(z.y0)&&v.push(O(z,d))}}else console.log("unrecognized trace type in hover",T);d==="closest"&&v.length>B&&(v.splice(0,B),q=v[0].distance)}if(v.length===0)return c.unhoverRaw(e,t);var X=d==="y"&&m.length>1;v.sort(function(e,t){return e.distance-t.distance});var V=f.combine(r.plot_bgcolor||f.background,r.paper_bgcolor),$={hovermode:d,rotateLabels:X,bgColor:V,container:r._hoverlayer,outerContainer:r._paperdiv},J=M(v,$);_(v,X?"xa":"ya"),D(J,X);var K=e._hoverdata,Q=[];for(b=0;b<v.length;b++){var G=v[b],Y={data:G.trace._input,fullData:G.trace,curveNumber:G.trace.index,pointNumber:G.index,x:G.xVal,y:G.yVal,xaxis:G.xa,yaxis:G.ya};G.zLabelVal!==undefined&&(Y.z=G.zLabelVal),Q.push(Y)}e._hoverdata=Q;if(!P(e,t,K))return;K&&e.emit("plotly_unhover",{points:K}),e.emit("plotly_hover",{points:e._hoverdata,xaxes:a,yaxes:l,xvals:g,yvals:y})}function A(e){return e.subplot||e.xaxis+e.yaxis}function O(e,t){e.posref=t==="y"?(e.x0+e.x1)/2:(e.y0+e.y1)/2,e.x0=o.constrain(e.x0,0,e.xa._length),e.x1=o.constrain(e.x1,0,e.xa._length),e.y0=o.constrain(e.y0,0,e.ya._length),e.y1=o.constrain(e.y1,0,e.ya._length);var n;if(e.xLabelVal!==undefined){n=e.xa.type==="log"&&e.xLabelVal<=0;var r=h.tickText(e.xa,e.xa.c2l(n?-e.xLabelVal:e.xLabelVal),"hover");n?e.xLabelVal===0?e.xLabel="0":e.xLabel="-"+r.text:e.xLabel=r.text,e.xVal=e.xa.c2d(e.xLabelVal)}if(e.yLabelVal!==undefined){n=e.ya.type==="log"&&e.yLabelVal<=0;var i=h.tickText(e.ya,e.ya.c2l(n?-e.yLabelVal:e.yLabelVal),"hover");n?e.yLabelVal===0?e.yLabel="0":e.yLabel="-"+i.text:e.yLabel=i.text,e.yVal=e.ya.c2d(e.yLabelVal)}e.zLabelVal!==undefined&&(e.zLabel=String(e.zLabelVal));if(!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var s=h.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==undefined?e.xLabel+=" +"+s+" / -"+h.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" &plusmn; "+s,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var u=h.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==undefined?e.yLabel+=" +"+u+" / -"+h.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" &plusmn; "+u,t==="y"&&(e.distance+=1)}var a=e.trace.hoverinfo;return a!=="all"&&(a=a.split("+"),a.indexOf("x")===-1&&(e.xLabel=undefined),a.indexOf("y")===-1&&(e.yLabel=undefined),a.indexOf("z")===-1&&(e.zLabel=undefined),a.indexOf("text")===-1&&(e.text=undefined),a.indexOf("name")===-1&&(e.name=undefined)),e}function M(e,t){var n=t.hovermode,s=t.rotateLabels,o=t.bgColor,u=t.container,c=t.outerContainer,h=e[0],d=h.xa,v=h.ya,g=n==="y"?"yLabel":"xLabel",y=h[g],b=(String(y)||"").split(" ")[0],w=c.node().getBoundingClientRect(),E=w.top,S=w.width,x=w.height,L=h.distance<=p.MAXDIST&&(n==="x"||n==="y"),A,O;for(A=0;A<e.length;A++){O=e[A].trace.hoverinfo;var M=O.split("+");if(M.indexOf("all")===-1&&M.indexOf(n)===-1){L=!1;break}}var _=u.selectAll("g.axistext").data(L?[0]:[]);_.enter().append("g").classed("axistext",!0),_.exit().remove(),_.each(function(){var t=r.select(this),i=t.selectAll("path").data([0]),s=t.selectAll("text").data([0]);i.enter().append("path").style({fill:f.defaultLine,"stroke-width":"1px",stroke:f.background}),s.enter().append("text").call(l.font,k,C,f.background).attr("data-notex",1),s.text(y).call(a.convertToTspans).call(l.setPosition,0,0).selectAll("tspan.line").call(l.setPosition,0,0),t.attr("transform","");var o=s.node().getBoundingClientRect();if(n==="x"){s.attr("text-anchor","middle").call(l.setPosition,0,d.side==="top"?E-o.bottom-T-N:E-o.top+T+N).selectAll("tspan.line").attr({x:s.attr("x"),y:s.attr("y")});var u=d.side==="top"?"-":"";i.attr("d","M0,0L"+T+","+u+T+"H"+(N+o.width/2)+"v"+u+(N*2+o.height)+"H-"+(N+o.width/2)+"V"+u+T+"H-"+T+"Z"),t.attr("transform","translate("+(d._offset+(h.x0+h.x1)/2)+","+(v._offset+(d.side==="top"?0:v._length))+")")}else{s.attr("text-anchor",v.side==="right"?"start":"end").call(l.setPosition,(v.side==="right"?1:-1)*(N+T),E-o.top-o.height/2).selectAll("tspan.line").attr({x:s.attr("x"),y:s.attr("y")});var c=v.side==="right"?"":"-";i.attr("d","M0,0L"+c+T+","+T+"V"+(N+o.height/2)+"h"+c+(N*2+o.width)+"V-"+(N+o.height/2)+"H"+c+T+"V-"+T+"Z"),t.attr("transform","translate("+(d._offset+(v.side==="right"?d._length:0))+","+(v._offset+(h.y0+h.y1)/2)+")")}e=e.filter(function(e){return e.zLabelVal!==undefined||(e[g]||"").split(" ")[0]===b})});var D=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});return D.enter().append("g").classed("hovertext",!0).each(function(){var e=r.select(this);e.append("rect").call(f.fill,f.addOpacity(o,.8)),e.append("text").classed("name",!0).call(l.font,k,C),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(l.font,k,C)}),D.exit().remove(),D.each(function(e){var t=r.select(this).attr("transform",""),u="",c="",h=f.opacity(e.color)?e.color:f.defaultLine,p=f.combine(h,o),d=i(p).getBrightness()>128?"#000":f.background;if(e.name&&e.zLabelVal===undefined){var v=document.createElement("p");v.innerHTML=e.name,u=v.textContent||"",u.length>15&&(u=u.substr(0,12)+"...")}e.extraText!==undefined&&(c+=e.extraText),e.zLabel!==undefined?(e.xLabel!==undefined&&(c+="x: "+e.xLabel+"<br>"),e.yLabel!==undefined&&(c+="y: "+e.yLabel+"<br>"),c+=(c?"z: ":"")+e.zLabel):L&&e[n+"Label"]===y?c=e[(n==="x"?"y":"x")+"Label"]||"":e.xLabel===undefined?e.yLabel!==undefined&&(c=e.yLabel):e.yLabel===undefined?c=e.xLabel:c="("+e.xLabel+", "+e.yLabel+")",e.text&&!Array.isArray(e.text)&&(c+=(c?"<br>":"")+e.text),c===""&&(u===""&&t.remove(),c=u);var g=t.select("text.nums").style("fill",d).call(l.setPosition,0,0).text(c).attr("data-notex",1).call(a.convertToTspans);g.selectAll("tspan.line").call(l.setPosition,0,0);var b=t.select("text.name"),w=0;u&&u!==c?(b.style("fill",p).text(u).call(l.setPosition,0,0).attr("data-notex",1).call(a.convertToTspans),b.selectAll("tspan.line").call(l.setPosition,0,0),w=b.node().getBoundingClientRect().width+2*N):(b.remove(),t.select("rect").remove()),t.select("path").style({fill:p,stroke:d});var C=g.node().getBoundingClientRect(),k=e.xa._offset+(e.x0+e.x1)/2,A=e.ya._offset+(e.y0+e.y1)/2,O=Math.abs(e.x1-e.x0),M=Math.abs(e.y1-e.y0),_=C.width+T+N+w,D,P;e.ty0=E-C.top,e.bx=C.width+2*N,e.by=C.height+2*N,e.anchor="start",e.txwidth=C.width,e.tx2width=w,e.offset=0,s?(e.pos=k,D=A+M/2+_<=x,P=A-M/2-_>=0,(e.idealAlign==="top"||!D)&&P?(A-=M/2,e.anchor="end"):D?(A+=M/2,e.anchor="start"):e.anchor="middle"):(e.pos=A,D=k+O/2+_<=S,P=k-O/2-_>=0,(e.idealAlign==="left"||!D)&&P?(k-=O/2,e.anchor="end"):D?(k+=O/2,e.anchor="start"):e.anchor="middle"),g.attr("text-anchor",e.anchor),w&&b.attr("text-anchor",e.anchor),t.attr("transform","translate("+k+","+A+")"+(s?"rotate("+m+")":""))}),D}function _(e,t){function c(e){var t=e[0],n=e[e.length-1];s=t.pmin-t.pos-t.dp+t.size,o=n.pos+n.dp+n.size-t.pmax;if(s>.01){for(a=e.length-1;a>=0;a--)e[a].dp+=s;i=!1}if(o<.01)return;if(s<-0.01){for(a=e.length-1;a>=0;a--)e[a].dp-=o;i=!1}if(!i)return;var r=0;for(u=0;u<e.length;u++)f=e[u],f.pos+f.dp+f.size>t.pmax&&r++;for(u=e.length-1;u>=0;u--){if(r<=0)break;f=e[u],f.pos>t.pmax-1&&(f.del=!0,r--)}for(u=0;u<e.length;u++){if(r<=0)break;f=e[u];if(f.pos<t.pmin+1){f.del=!0,r--,o=f.size*2;for(a=e.length-1;a>=0;a--)e[a].dp-=o}}for(u=e.length-1;u>=0;u--){if(r<=0)break;f=e[u],f.pos+f.dp+f.size>t.pmax&&(f.del=!0,r--)}}var n=0,r=e.map(function(e,n){var r=e[t];return[{i:n,dp:0,pos:e.pos,posref:e.posref,size:e.by*(r._id.charAt(0)==="x"?y:1)/2,pmin:r._offset,pmax:r._offset+r._length}]}).sort(function(e,t){return e[0].posref-t[0].posref}),i,s,o,u,a,f,l;while(!i&&n<=e.length){n++,i=!0,u=0;while(u<r.length-1){var h=r[u],p=r[u+1],d=h[h.length-1],v=p[0];s=d.pos+d.dp+d.size-v.pos-v.dp+v.size;if(s>.01&&d.pmin===v.pmin&&d.pmax===v.pmax){for(a=p.length-1;a>=0;a--)p[a].dp+=s;h.push.apply(h,p),r.splice(u+1,1),l=0;for(a=h.length-1;a>=0;a--)l+=h[a].dp;o=l/h.length;for(a=h.length-1;a>=0;a--)h[a].dp-=o;i=!1}else u++}r.forEach(c)}for(u=r.length-1;u>=0;u--){var m=r[u];for(a=m.length-1;a>=0;a--){var g=m[a],b=e[g.i];b.offset=g.dp,b.del=g.del}}}function D(e,t){e.each(function(e){var n=r.select(this);if(e.del){n.remove();return}var i=e.anchor==="end"?-1:1,s=n.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],u=o*(T+N),a=u+o*(e.txwidth+N),f=0,c=e.offset;e.anchor==="middle"&&(u-=e.tx2width/2,a-=e.tx2width/2),t&&(c*=-w,f=e.offset*b),n.select("path").attr("d",e.anchor==="middle"?"M-"+e.bx/2+",-"+e.by/2+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(i*T+f)+","+(T+c)+"v"+(e.by/2-T)+"h"+i*e.bx+"v-"+e.by+"H"+(i*T+f)+"V"+(c-T)+"Z"),s.call(l.setPosition,u+f,c+e.ty0-e.by/2+N).selectAll("tspan.line").attr({x:s.attr("x"),y:s.attr("y")}),e.tx2width&&(n.select("text.name, text.name tspan.line").call(l.setPosition,a+o*N+f,c+e.ty0-e.by/2+N),n.select("rect").call(l.setRect,a+(o-1)*e.tx2width/2+f,c-e.by/2-1,e.tx2width,e.by+2))})}function P(e,t,n){if(!t.target)return!1;if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],s=e._hoverdata[r];if(i.curveNumber!==s.curveNumber||String(i.pointNumber)!==String(s.pointNumber))return!0}return!1}var r=e("d3"),i=e("tinycolor2"),s=e("fast-isnumeric"),o=e("../../lib"),u=e("../../lib/events"),a=e("../../lib/svg_text_utils"),f=e("../../components/color"),l=e("../../components/drawing"),c=e("../../components/dragelement"),h=e("./axes"),p=e("./constants"),d=e("./dragbox"),v=t.exports={};v.unhover=c.unhover,v.layoutAttributes={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom"},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}},v.supplyLayoutDefaults=function(e,t,n){function r(n,r){return o.coerce(e,t,v.layoutAttributes,n,r)}r("dragmode");var i;if(t._has("cartesian")){var s=t._isHoriz=v.isHoriz(n);i=s?"y":"x"}else i="closest";r("hovermode",i)},v.isHoriz=function(e){var t=!0;for(var n=0;n<e.length;n++){var r=e[n];if(r.orientation!=="h"){t=!1;break}}return t},v.init=function(e){var t=e._fullLayout;if(!t._has("cartesian")||e._context.staticPlot)return;var n=Object.keys(t._plots||{}).sort(function(e,n){if((t._plots[e].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var r=e.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return t._plots[e].mainplot?1:-1});n.forEach(function(n){var r=t._plots[n];if(!t._has("cartesian"))return;var i=r.x(),o=r.y(),u=(i._linepositions[n]||[])[3],a=(o._linepositions[n]||[])[3],f=p.DRAGGERSIZE;s(u)&&i.side==="top"&&(u-=f),s(a)&&o.side!=="right"&&(a-=f);if(!r.mainplot){var l=d(e,r,0,0,i._length,o._length,"ns","ew");l.onmousemove=function(r){v.hover(e,r,n),t._lasthover=l,t._hoversubplot=n},l.onmouseout=function(t){if(e._dragging)return;c.unhover(e,t)},l.onclick=function(t){v.click(e,t)},d(e,r,-f,-f,f,f,"n","w"),d(e,r,i._length,-f,f,f,"n","e"),d(e,r,-f,o._length,f,f,"s","w"),d(e,r,i._length,o._length,f,f,"s","e")}s(u)&&(i.anchor==="free"&&(u-=t._size.h*(1-o.domain[1])),d(e,r,i._length*.1,u,i._length*.8,f,"","ew"),d(e,r,0,u,i._length*.1,f,"","w"),d(e,r,i._length*.9,u,i._length*.1,f,"","e")),s(a)&&(o.anchor==="free"&&(a-=t._size.w*i.domain[0]),d(e,r,a,o._length*.1,f,o._length*.8,"ns",""),d(e,r,a,o._length*.9,f,o._length*.1,"s",""),d(e,r,a,0,f,o._length*.1,"n",""))});var r=t._hoverlayer.node();r.onmousemove=function(n){n.target=t._lasthover,v.hover(e,n,t._hoversubplot)},r.onclick=function(n){n.target=t._lasthover,v.click(e,n)},r.onmousedown=function(e){t._lasthover.onmousedown(e)}};var m=p.YANGLE,g=Math.PI*m/180,y=1/Math.sin(g),b=Math.cos(g),w=Math.sin(g),T=p.HOVERARROWSIZE,N=p.HOVERTEXTPAD,C=p.HOVERFONTSIZE,k=p.HOVERFONT;v.hover=function(e,t,n){typeof e=="string"&&(e=document.getElementById(e)),e._lastHoverTime===undefined&&(e._lastHoverTime=0),e._hoverTimer!==undefined&&(clearTimeout(e._hoverTimer),e._hoverTimer=undefined);if(Date.now()>e._lastHoverTime+p.HOVERMINTIME){L(e,t,n),e._lastHoverTime=Date.now();return}e._hoverTimer=setTimeout(function(){L(e,t,n),e._lastHoverTime=Date.now(),e._hoverTimer=undefined},p.HOVERMINTIME)},v.getDistanceFunction=function(e,t,n,r){return e==="closest"?r||x(t,n):e==="x"?t:n},v.getClosest=function(e,t,n){if(n.index!==!1)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},v.loneHover=function(e,t){var n={color:e.color||f.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},i=r.select(t.container),s=t.outerContainer?r.select(t.outerContainer):i,o={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||f.background,container:i,outerContainer:s},u=M([n],o);return D(u,o.rotateLabels),u.node()},v.loneUnhover=function(e){var t=e instanceof r.selection?e:r.select(e);t.selectAll("g.hovertext").remove()},v.click=function(e,t){e._hoverdata&&t&&t.target&&(e.emit("plotly_click",{points:e._hoverdata}),t.stopImmediatePropagation&&t.stopImmediatePropagation())},v.inbox=function(e,t){return e*t<0||e===0?p.MAXDIST*(.6-.3/Math.max(3,Math.abs(e-t))):Infinity}},{"../../components/color":303,"../../components/dragelement":323,"../../components/drawing":325,"../../lib":381,"../../lib/events":375,"../../lib/svg_text_utils":393,"./axes":403,"./constants":408,"./dragbox":409,d3:72,"fast-isnumeric":76,tinycolor2:233}],411:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../plots"),s=e("./constants");n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=s.idRegex,n.attrRegex=s.attrRegex,n.attributes=e("./attributes"),n.plot=function(e){function u(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s.xaxis+s.yaxis===t&&n.push(i)}return n}function a(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s._module===t&&s.visible===!0&&n.push(i)}return n}var t=e._fullLayout,n=i.getSubplotIds(t,"cartesian"),s=e.calcdata,o=t._modules;for(var f=0;f<n.length;f++){var l=n[f],c=t._plots[l],h=u(s,l);c.plot&&c.plot.selectAll("g.trace").remove();for(var p=0;p<o.length;p++){var d=o[p];if(d.basePlotModule.name!=="cartesian")continue;var v=a(h,d);d.plot(e,c,v),r.markTime("done "+(v[0]&&v[0][0].trace.type))}}}},{"../../lib":381,"../plots":452,"./attributes":402,"./constants":408}],412:[function(e,t,n){"use strict";var r=e("../font_attributes"),i=e("../../components/color/attributes"),s=e("../../lib/extend").extendFlat,o=e("../../components/rangeslider/attributes"),u=e("../../components/rangeselector/attributes"),a=e("./constants");t.exports={color:{valType:"color",dflt:i.defaultLine},title:{valType:"string"},titlefont:s({},r,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},rangeslider:o,rangeselector:u,fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"number",dflt:0},dtick:{valType:"any",dflt:1},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",min:0,dflt:1},tickcolor:{valType:"color",dflt:i.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:s({},r,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B"},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:i.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:i.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:i.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,max:1,dflt:0},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace"},categoryarray:{valType:"data_array"},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":302,"../../components/rangeselector/attributes":350,"../../components/rangeslider/attributes":357,"../../lib/extend":376,"../font_attributes":421,"./constants":408}],413:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../plots"),s=e("../../components/color"),o=e("../../components/rangeslider"),u=e("../../components/rangeselector"),a=e("./constants"),f=e("./layout_attributes"),l=e("./axis_defaults"),c=e("./position_defaults"),h=e("./axis_ids");t.exports=function(t,n,p){function O(e,t){var n=Number(e.substr(5)||1),r=Number(t.substr(5)||1);return n-r}var d=Object.keys(t),v=[],m=[],g=[],y=[],b={},w={},E;for(E=0;E<p.length;E++){var S=p[E],x,T;if(i.traceIs(S,"cartesian"))x=v,T=m;else{if(!i.traceIs(S,"gl2d"))continue;x=g,T=y}var N=h.id2name(S.xaxis),C=h.id2name(S.yaxis);N&&x.indexOf(N)===-1&&x.push(N),C&&T.indexOf(C)===-1&&T.push(C),i.traceIs(S,"2dMap")&&(b[N]=!0,b[C]=!0);if(i.traceIs(S,"oriented")){var k=S.orientation==="h"?C:N;w[k]=!0}}var L=n._has("gl3d")||n._has("geo");if(!L)for(E=0;E<d.length;E++){var A=d[E];g.indexOf(A)===-1&&v.indexOf(A)===-1&&a.xAxisMatch.test(A)?v.push(A):y.indexOf(A)===-1&&m.indexOf(A)===-1&&a.yAxisMatch.test(A)&&m.push(A)}v.length&&m.length&&r.pushUnique(n._basePlotModules,i.subplotsRegistry.cartesian);var M=v.concat(g).sort(O),_=m.concat(y).sort(O),D=M.concat(_),P=s.background;M.length&&_.length&&(P=r.coerce(t,n,i.layoutAttributes,"plot_bgcolor"));var H=s.combine(P,n.paper_bgcolor);D.forEach(function(e){function d(e,t){return r.coerce(s,o,f,e,t)}var i=e.charAt(0),s=t[e]||{},o={},u={letter:i,font:n.font,outerTicks:b[e],showGrid:!w[e],name:e,data:p,bgColor:H},a={letter:i,counterAxes:{x:_,y:M}[i].map(h.name2id),overlayableAxes:{x:M,y:_}[i].filter(function(n){return n!==e&&!(t[n]||{}).overlaying}).map(h.name2id)};l(s,o,d,u),c(s,o,d,a),n[e]=o,!t[e]&&s.type!=="-"&&(t[e]={type:s.type})}),D.forEach(function(e){var r=e.charAt(0),i=t[e],s=n[e],a={x:_,y:M}[r];o.supplyLayoutDefaults(t,n,e,a),r==="x"&&s.type==="date"&&u.supplyLayoutDefaults(i,s,n,a)})}},{"../../components/color":303,"../../components/rangeselector":356,"../../components/rangeslider":361,"../../lib":381,"../plots":452,"./axis_defaults":404,"./axis_ids":405,"./constants":408,"./layout_attributes":412,"./position_defaults":415}],414:[function(e,t,n){"use strict";function i(e,t,n){var i=[],s=n.map(function(t){return t[e]}),o,u,a,f,l,c=r.bisector(t).left;for(o=0;o<s.length;o++){a=s[o];for(u=0;u<a.length;u++){f=a[u];if(f===null||f===undefined)continue;l=c(i,f);if(l<i.length-1&&i[l]===f)continue;i.splice(l,0,f)}}return i}var r=e("d3");t.exports=function(t,n,s,o){switch(n){case"array":return Array.isArray(s)?s.slice():[];case"category ascending":return i(t,r.ascending,o);case"category descending":return i(t,r.descending,o);case"trace":return[];default:return[]}}},{d3:72}],415:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib");t.exports=function(t,n,s,o){var u=o.counterAxes||[],a=o.overlayableAxes||[],f=o.letter,l=i.coerce(t,n,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:r(t.position)?"free":u[0]||"free"}},"anchor");l==="free"&&s("position"),i.coerce(t,n,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:f==="x"?"bottom":"left"}},"side");var c=!1;a.length&&(c=i.coerce(t,n,{overlaying:{valType:"enumerated",values:[!1].concat(a),dflt:!1}},"overlaying"));if(!c){var h=s("domain");h[0]>h[1]-.01&&(n.domain=[0,1]),i.noneOrAll(t.domain,n.domain,[0,1])}return n}},{"../../lib":381,"fast-isnumeric":76}],416:[function(e,t,n){"use strict";function l(e){return e._id}var r=e("../../lib/polygon"),i=e("../../components/color"),s=e("./axes"),o=e("./constants"),u=r.filter,a=r.tester,f=o.MINSELECT;t.exports=function(t,n,r,c,h){function F(e){var t=e._id.charAt(0)==="y"?1:0;return function(n){return e.p2d(n[t])}}function I(e,t){return e-t}var p=c.gd._fullLayout._zoomlayer,d=c.element.getBoundingClientRect(),v=c.plotinfo.x()._offset,m=c.plotinfo.y()._offset,g=n-d.left,y=r-d.top,b=g,w=y,E="M"+g+","+y,S=c.xaxes[0]._length,x=c.yaxes[0]._length,T=c.xaxes.map(l),N=c.yaxes.map(l),C=c.xaxes.concat(c.yaxes),k;h==="lasso"&&(k=u([[g,y]],o.BENDPX));var L=p.selectAll("path.select-outline").data([1,2]);L.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e}).attr("transform","translate("+v+", "+m+")").attr("d",E+"Z");var A=p.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1}).attr("transform","translate("+v+", "+m+")").attr("d","M0,0Z"),O=[],M=c.gd,_,D,P,H,B=[],j;for(_=0;_<M.calcdata.length;_++){D=M.calcdata[_],P=D[0].trace;if(!P._module||!P._module.selectPoints)continue;if(c.subplot){if(P.subplot!==c.subplot)continue;O.push({selectPoints:P._module.selectPoints,cd:D,xaxis:c.xaxes[0],yaxis:c.yaxes[0]})}else{if(T.indexOf(P.xaxis)===-1)continue;if(N.indexOf(P.yaxis)===-1)continue;O.push({selectPoints:P._module.selectPoints,cd:D,xaxis:s.getFromId(M,P.xaxis),yaxis:s.getFromId(M,P.yaxis)})}}c.moveFn=function(e,t){var n,r;b=Math.max(0,Math.min(S,e+g)),w=Math.max(0,Math.min(x,t+y));var i=Math.abs(b-g),s=Math.abs(w-y);h==="select"?(s<Math.min(i*.6,f)?(n=a([[g,0],[g,x],[b,x],[b,0]]),A.attr("d","M"+n.xmin+","+(y-f)+"h-4v"+2*f+"h4Z"+"M"+(n.xmax-1)+","+(y-f)+"h4v"+2*f+"h-4Z")):i<Math.min(s*.6,f)?(n=a([[0,y],[0,w],[S,w],[S,y]]),A.attr("d","M"+(g-f)+","+n.ymin+"v-4h"+2*f+"v4Z"+"M"+(g-f)+","+(n.ymax-1)+"v4h"+2*f+"v-4Z")):(n=a([[g,y],[g,w],[b,w],[b,y]]),A.attr("d","M0,0Z")),L.attr("d","M"+n.xmin+","+n.ymin+"H"+(n.xmax-1)+"V"+(n.ymax-1)+"H"+n.xmin+"Z")):h==="lasso"&&(k.addPt([b,w]),n=a(k.filtered),L.attr("d","M"+k.filtered.join("L")+"Z")),B=[];for(_=0;_<O.length;_++)H=O[_],[].push.apply(B,H.selectPoints(H,n));j={points:B};if(h==="select"){var o=j.range={},u;for(_=0;_<C.length;_++)r=C[_],u=r._id.charAt(0),o[r._id]=[r.p2d(n[u+"min"]),r.p2d(n[u+"max"])].sort(I)}else{var l=j.lassoPoints={};for(_=0;_<C.length;_++)r=C[_],l[r._id]=k.filtered.map(F(r))}c.gd.emit("plotly_selecting",j)},c.doneFn=function(e,t){A.remove();if(!e&&t===2){L.remove();for(_=0;_<O.length;_++)H=O[_],H.selectPoints(H,!1);M.emit("plotly_deselect",null)}else c.gd.emit("plotly_selected",j)}}},{"../../components/color":303,"../../lib/polygon":386,"./axes":403,"./constants":408}],417:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("./constants"),u=e("./clean_datum"),a=e("./axis_ids");t.exports=function(t){function f(e,r){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&r&&t.range&&t.range.length===2){var i=t.range[0],s=t.range[1];return.5*(i+s-3*n*Math.abs(i-s))}return o.BADNUM}function l(e){return Math.pow(10,e)}function c(e){return i(e)?Number(e):o.BADNUM}var n=10;t.c2l=t.type==="log"?f:c,t.l2c=t.type==="log"?l:c,t.l2d=function(e){return t.c2d(t.l2c(e))},t.p2d=function(e){return t.l2d(t.p2l(e))},t.setScale=function(){var e=t._gd._fullLayout._size,n;t._categories||(t._categories=[]);if(t.overlaying){var r=a.getFromId(t._gd,t.overlaying);t.domain=r.domain}if(!t.range||t.range.length!==2||t.range[0]===t.range[1])t.range=[-1,1];for(n=0;n<2;n++)i(t.range[n])||(t.range[n]=i(t.range[1-n])?t.range[1-n]*(n?10:.1):n?1:-1),t.range[n]<-(Number.MAX_VALUE/2)?t.range[n]=-(Number.MAX_VALUE/2):t.range[n]>Number.MAX_VALUE/2&&(t.range[n]=Number.MAX_VALUE/2);t._id.charAt(0)==="y"?(t._offset=e.t+(1-t.domain[1])*e.h,t._length=e.h*(t.domain[1]-t.domain[0]),t._m=t._length/(t.range[0]-t.range[1]),t._b=-t._m*t.range[1]):(t._offset=e.l+t.domain[0]*e.w,t._length=e.w*(t.domain[1]-t.domain[0]),t._m=t._length/(t.range[1]-t.range[0]),t._b=-t._m*t.range[0]);if(!isFinite(t._m)||!isFinite(t._b))throw s.notifier("Something went wrong with axis scaling","long"),t._gd._replotting=!1,new Error("axis scaling")},t.l2p=function(e){return i(e)?r.round(t._b+t._m*e,2):o.BADNUM},t.p2l=function(e){return(e-t._b)/t._m},t.c2p=function(e,n){return t.l2p(t.c2l(e,n))},t.p2c=function(e){return t.l2c(t.p2l(e))};if(["linear","log","-"].indexOf(t.type)!==-1)t.c2d=c,t.d2c=function(e){return e=u(e),i(e)?Number(e):o.BADNUM},t.d2l=function(e,n){return t.type==="log"?t.c2l(t.d2c(e),n):t.d2c(e)};else if(t.type==="date"){t.c2d=function(e){return i(e)?s.ms2DateTime(e):o.BADNUM},t.d2c=function(e){return i(e)?Number(e):s.dateTime2ms(e)},t.d2l=t.d2c;if(t.range&&t.range.length>1)try{var h=t.range.map(s.dateTime2ms);!i(t.range[0])&&i(h[0])&&(t.range[0]=h[0]),!i(t.range[1])&&i(h[1])&&(t.range[1]=h[1])}catch(p){console.log(p,t.range)}}else t.type==="category"&&(t.c2d=function(e){return t._categories[Math.round(e)]},t.d2c=function(e){e!==null&&e!==undefined&&t._categories.indexOf(e)===-1&&t._categories.push(e);var n=t._categories.indexOf(e);return n===-1?o.BADNUM:n},t.d2l=t.d2c);t.makeCalcdata=function(e,n){var r,i,s;if(n in e){r=e[n],i=new Array(r.length);for(s=0;s<r.length;s++)i[s]=t.d2c(r[s])}else{var o=n+"0"in e?t.d2c(e[n+"0"]):0,u=e["d"+n]?Number(e["d"+n]):1;r=e[{x:"y",y:"x"}[n]],i=new Array(r.length);for(s=0;s<r.length;s++)i[s]=o+s*u}return i},t._min=[],t._max=[],t._minDtick=null,t._forceTick0=null}},{"../../lib":381,"./axis_ids":405,"./clean_datum":407,"./constants":408,d3:72,"fast-isnumeric":76}],418:[function(e,t,n){"use strict";function i(e){var t=["showexponent","showtickprefix","showticksuffix"],n=t.filter(function(t){return e[t]!==undefined}),r=function(t){return e[t]===e[n[0]]};if(n.every(r)||n.length===1)return e[n[0]]}var r=e("../../lib");t.exports=function(t,n,s,o,u){var a=i(t),f=s("tickprefix");f&&s("showtickprefix",a);var l=s("ticksuffix");l&&s("showticksuffix",a);var c=s("showticklabels");if(c){var h=u.font||{},p=n.color===t.color?n.color:h.color;r.coerceFont(s,"tickfont",{family:h.family,size:h.size,color:p}),s("tickangle");if(o!=="category"){var d=s("tickformat");!d&&o!=="date"&&(s("showexponent",a),s("exponentformat"))}}o!=="category"&&!u.noHover&&s("hoverformat")}},{"../../lib":381}],419:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(t,n,s,o){var u=r.coerce2(t,n,i,"ticklen"),a=r.coerce2(t,n,i,"tickwidth"),f=r.coerce2(t,n,i,"tickcolor",n.color),l=s("ticks",o.outerTicks||u||a||f?"outside":"");l||(delete n.ticklen,delete n.tickwidth,delete n.tickcolor)}},{"../../lib":381,"./layout_attributes":412}],420:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(t,n,i,s){var o="auto";t.tickmode==="array"&&(s==="log"||s==="date")&&(t.tickmode="auto"),Array.isArray(t.tickvals)?o="array":t.dtick&&r(t.dtick)&&(o="linear");var u=i("tickmode",o);if(u==="auto")i("nticks");else if(u==="linear")i("tick0"),i("dtick");else{var a=i("tickvals");a===undefined?n.tickmode="auto":i("ticktext")}}},{"fast-isnumeric":76}],421:[function(e,t,n){"use strict";t.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],422:[function(e,t,n){"use strict";var r=t.exports={};r.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3"},r.axesNames=["lonaxis","lataxis"],r.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},r.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},r.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,80],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},r.clipPad=.001,r.precision=.1,r.landColor="#F0DC82",r.waterColor="#3399FF",r.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},r.sphereSVG={type:"Sphere"},r.fillLayers=["ocean","land","lakes"],r.lineLayers=["subunits","countries","coastlines","rivers","frame"],r.baseLayers=["ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame"],r.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"},r.baseLayersOverChoropleth=["rivers","lakes"]},{}],423:[function(e,t,n){"use strict";function m(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,a(r),this.hoverContainer=null,this.topojsonName=null,this.topojson=null,this.projectionType=null,this.projection=null,this.clipAngle=null,this.setScale=null,this.path=null,this.zoom=null,this.zoomReset=null,this.makeFramework(),this.updateFx(t.hovermode),this.traceHash={}}function y(e,t,n){return r.geo.graticule().extent([[e[0],t[0]],[e[1],t[1]]]).step(n)}function b(e,t,n){var r=h.layerNameToAdjective[t];e.select("."+t).selectAll("path").attr("stroke","none").call(i.fill,n[r+"color"])}function w(e,t,n){var r=h.layerNameToAdjective[t];e.select("."+t).selectAll("path").attr("fill","none").call(i.stroke,n[r+"color"]).call(s.dashLine,"",n[r+"width"])}function E(e,t,n){e.select("."+t+"graticule").selectAll("path").attr("fill","none").call(i.stroke,n[t].gridcolor).call(s.dashLine,"",n[t].gridwidth)}function S(e){var t={type:"linear",showexponent:"all",exponentformat:o.layoutAttributes.exponentformat.dflt,_gd:{_fullLayout:e}};return o.setConvert(t),t}var r=e("d3"),i=e("../../components/color"),s=e("../../components/drawing"),o=e("../../plots/cartesian/axes"),u=e("../../lib/filter_visible"),a=e("./projections"),f=e("./set_scale"),l=e("./zoom"),c=e("./zoom_reset"),h=e("./constants"),p=e("../../constants/xmlns_namespaces"),d=e("../../lib/topojson_utils"),v=e("topojson").feature;t.exports=m;var g=m.prototype;g.plot=function(e,t,n){var i=this,s=t[i.id],o=t._size,u,a;i.projection=null,i.setScale=f(s,o),i.makeProjection(s),i.makePath(),i.adjustLayout(s,o),i.zoom=l(i,s),i.zoomReset=c(i,s),i.mockAxis=S(t),i.framework.call(i.zoom).on("dblclick.zoom",i.zoomReset),u=d.getTopojsonName(s),i.topojson===null||u!==i.topojsonName?(i.topojsonName=u,PlotlyGeoAssets.topojson[i.topojsonName]!==undefined?(i.topojson=PlotlyGeoAssets.topojson[i.topojsonName],i.onceTopojsonIsLoaded(e,s)):(a=d.getTopojsonPath(i.topojsonURL,i.topojsonName),n.push(new Promise(function(t,n){r.json(a,function(r,o){if(r){r.status===404?n(new Error(["plotly.js could not find topojson file at",a,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):n(new Error(["unexpected error while fetching topojson file at",a].join(" ")));return}i.topojson=o,PlotlyGeoAssets.topojson[i.topojsonName]=o,i.onceTopojsonIsLoaded(e,s),t()})})))):i.onceTopojsonIsLoaded(e,s)},g.onceTopojsonIsLoaded=function(e,t){var n;this.drawLayout(t);var r=this.traceHash,i={};for(n=0;n<e.length;n++){var s=e[n];i[s.type]=i[s.type]||
[],i[s.type].push(s)}var o=Object.keys(r),a=Object.keys(i);for(n=0;n<o.length;n++){var f=o[n];if(a.indexOf(f)===-1){var l=r[f][0];l.visible=!1,i[f]=[l]}}a=Object.keys(i);for(n=0;n<a.length;n++){var c=i[a[n]],h=c[0]._module;h.plot(this,u(c),t)}this.traceHash=i,this.render()},g.updateFx=function(e){this.showHover=e!==!1},g.makeProjection=function(e){var t=e.projection,n=t.type,i=this.projection===null||n!==this.projectionType,s;i?(this.projectionType=n,s=this.projection=r.geo[h.projNames[n]]()):s=this.projection,s.translate(t._translate0).precision(h.precision),e._isAlbersUsa||s.rotate(t._rotate).center(t._center),e._clipAngle?(this.clipAngle=e._clipAngle,s.clipAngle(e._clipAngle-h.clipPad)):this.clipAngle=null,t.parallels&&s.parallels(t.parallels),i&&this.setScale(s),s.translate(t._translate).scale(t._scale)},g.makePath=function(){this.path=r.geo.path().projection(this.projection)},g.makeFramework=function(){var e=this.geoDiv=r.select(this.container).append("div");e.attr("id",this.id).style("position","absolute");var t=this.hoverContainer=e.append("svg");t.attr(p.svgAttrs).style({position:"absolute","z-index":20,"pointer-events":"none"});var n=this.framework=e.append("svg");n.attr(p.svgAttrs).attr({position:"absolute",preserveAspectRatio:"none"}),n.append("g").attr("class","bglayer").append("rect"),n.append("g").attr("class","baselayer"),n.append("g").attr("class","choroplethlayer"),n.append("g").attr("class","baselayeroverchoropleth"),n.append("g").attr("class","scattergeolayer"),n.on("dblclick.zoom",null)},g.adjustLayout=function(e,t){var n=e.domain;this.geoDiv.style({left:t.l+t.w*n.x[0]+e._marginX+"px",top:t.t+t.h*(1-n.y[1])+e._marginY+"px",width:e._width+"px",height:e._height+"px"}),this.hoverContainer.attr({width:e._width,height:e._height}),this.framework.attr({width:e._width,height:e._height}),this.framework.select(".bglayer").select("rect").attr({width:e._width,height:e._height}).call(i.fill,e.bgcolor)},g.drawTopo=function(e,t,n){if(n["show"+t]!==!0)return;var r=this.topojson,i=t==="frame"?h.sphereSVG:v(r,r.objects[t]);e.append("g").datum(i).attr("class",t).append("path").attr("class","basepath")},g.drawGraticule=function(e,t,n){var r=n[t];if(r.showgrid!==!0)return;var i=h.scopeDefaults[n.scope],s=i.lonaxisRange,o=i.lataxisRange,u=t==="lonaxis"?[r.dtick]:[0,r.dtick],a=y(s,o,u);e.append("g").datum(a).attr("class",t+"graticule").append("path").attr("class","graticulepath")},g.drawLayout=function(e){var t=this.framework.select("g.baselayer"),n=h.baseLayers,r=h.axesNames,i;t.selectAll("*").remove();for(var s=0;s<n.length;s++)i=n[s],r.indexOf(i)!==-1?this.drawGraticule(t,i,e):this.drawTopo(t,i,e);this.styleLayout(e)},g.styleLayer=function(e,t,n){var r=h.fillLayers,i=h.lineLayers;r.indexOf(t)!==-1?b(e,t,n):i.indexOf(t)!==-1&&w(e,t,n)},g.styleLayout=function(e){var t=this.framework.select("g.baselayer"),n=h.baseLayers,r=h.axesNames,i;for(var s=0;s<n.length;s++)i=n[s],r.indexOf(i)!==-1?E(t,i,e):this.styleLayer(t,i,e)},g.render=function(){function u(e){var t=i([e.lon,e.lat]);return t?"translate("+t[0]+","+t[1]+")":null}function a(e){var t=i.rotate(),n=r.geo.distance([e.lon,e.lat],[-t[0],-t[1]]),s=o*Math.PI/180;return n>s?"0":"1.0"}var e=this.framework,t=e.select("g.choroplethlayer"),n=e.select("g.scattergeolayer"),i=this.projection,s=this.path,o=this.clipAngle;e.selectAll("path.basepath").attr("d",s),e.selectAll("path.graticulepath").attr("d",s),t.selectAll("path.choroplethlocation").attr("d",s),t.selectAll("path.basepath").attr("d",s),n.selectAll("path.js-line").attr("d",s),o!==null?(n.selectAll("path.point").style("opacity",a).attr("transform",u),n.selectAll("text").style("opacity",a).attr("transform",u)):(n.selectAll("path.point").attr("transform",u),n.selectAll("text").attr("transform",u))}},{"../../components/color":303,"../../components/drawing":325,"../../constants/xmlns_namespaces":369,"../../lib/filter_visible":377,"../../lib/topojson_utils":394,"../../plots/cartesian/axes":403,"./constants":422,"./projections":430,"./set_scale":431,"./zoom":432,"./zoom_reset":433,d3:72,topojson:234}],424:[function(e,t,n){"use strict";var r=e("./geo"),i=e("../../plots/plots");n.name="geo",n.attr="geo",n.idRoot="geo",n.idRegex=/^geo([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^geo([2-9]|[1-9][0-9]+)?$/,n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(t){var n=t._fullLayout,s=t._fullData,o=i.getSubplotIds(n,"geo");window.PlotlyGeoAssets===undefined&&(window.PlotlyGeoAssets={topojson:{}});for(var u=0;u<o.length;u++){var a=o[u],f=i.getSubplotData(s,"geo",a),l=n[a]._geo;l===undefined&&(l=new r({id:a,graphDiv:t,container:n._geocontainer.node(),topojsonURL:t._context.topojsonURL},n),n[a]._geo=l),l.plot(f,n,t._promises)}},n.clean=function(e,t,n,r){var s=i.getSubplotIds(r,"geo");for(var o=0;o<s.length;o++){var u=s[o],a=r[u]._geo;!t[u]&&!!a&&a.geoDiv.remove()}}},{"../../plots/plots":452,"./geo":423,"./layout/attributes":425,"./layout/defaults":428,"./layout/layout_attributes":429}],425:[function(e,t,n){"use strict";t.exports={geo:{valType:"subplotid",dflt:"geo"}}},{}],426:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes");t.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":302}],427:[function(e,t,n){"use strict";var r=e("../../../lib"),i=e("../constants"),s=e("./axis_attributes");t.exports=function(t,n){function f(e,t){return r.coerce(u,a,s,e,t)}function l(e){var t=n.scope,r,s,o,u,a,f;return t==="world"?(r=n.projection,s=r.type,o=r.rotation,a=i[e+"Span"],f=a[s]!==undefined?a[s]/2:a["*"]/2,u=e==="lonaxis"?o.lon:o.lat,[u-f,u+f]):i.scopeDefaults[t][e+"Range"]}var o=i.axesNames,u,a;for(var c=0;c<o.length;c++){var h=o[c];u=t[h]||{},a={};var p=l(h),d=f("range",p);r.noneOrAll(u.range,a.range,[0,1]),f("tick0",d[0]),f("dtick",h==="lonaxis"?30:10);var v=f("showgrid");v&&(f("gridcolor"),f("gridwidth")),n[h]=a,n[h]._fullRange=p}}},{"../../../lib":381,"../constants":422,"./axis_attributes":426}],428:[function(e,t,n){"use strict";function u(e,t,n){var r,s=n("scope"),u=s!=="world",a=i.scopeDefaults[s],f=n("resolution"),l=n("projection.type",a.projType),c=l==="albers usa",h=l.indexOf("conic")!==-1;if(h){var p=a.projParallels||[0,60];n("projection.parallels",p)}if(!c){var d=a.projRotate||[0,0,0];n("projection.rotation.lon",d[0]),n("projection.rotation.lat",d[1]),n("projection.rotation.roll",d[2]),r=n("showcoastlines",!u),r&&(n("coastlinecolor"),n("coastlinewidth")),r=n("showocean"),r&&n("oceancolor")}else t.scope="usa";n("projection.scale"),r=n("showland"),r&&n("landcolor"),r=n("showlakes"),r&&n("lakecolor"),r=n("showrivers"),r&&(n("rivercolor"),n("riverwidth")),r=n("showcountries",u),r&&(n("countrycolor"),n("countrywidth"));if(s==="usa"||s==="north america"&&f===50)n("showsubunits",!0),n("subunitcolor"),n("subunitwidth");u||(r=n("showframe",!0),r&&(n("framecolor"),n("framewidth"))),n("bgcolor"),o(e,t),t._isHighRes=f===50,t._clipAngle=i.lonaxisSpan[l]/2,t._isAlbersUsa=c,t._isConic=h,t._isScoped=u;var v=t.projection.rotation||{};t.projection._rotate=[-v.lon||0,-v.lat||0,v.roll||0]}var r=e("../../subplot_defaults"),i=e("../constants"),s=e("./layout_attributes"),o=e("./axis_defaults");t.exports=function(t,n,i){r(t,n,i,{type:"geo",attributes:s,handleDefaults:u,partition:"y"})}},{"../../subplot_defaults":458,"../constants":422,"./axis_defaults":427,"./layout_attributes":429}],429:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes"),i=e("../constants"),s=e("./axis_attributes");t.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(i.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(i.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:i.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:i.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:i.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:i.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:s,lataxis:s}},{"../../../components/color/attributes":302,"../constants":422,"./axis_attributes":426}],430:[function(e,t,n){"use strict";function r(e){function t(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:n(e.geometry,t)}}function n(t,r){if(!t)return null;if(t.type==="GeometryCollection")return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return n(e,r)})};if(!f.hasOwnProperty(t.type))return null;var i=f[t.type];return e.geo.stream(t,r(i)),i.result()}function l(){}function c(e){if((n=e.length)<4)return!1;var t=0,n,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];while(++t<n)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r<=0}function h(e,t){var n=t[0],r=t[1],i=!1;for(var s=0,o=e.length,u=o-1;s<o;u=s++){var a=e[s],f=a[0],l=a[1],c=e[u],h=c[0],p=c[1];l>r^p>r&&n<(h-f)*(r-l)/(p-l)+f&&(i=!i)}return i}function w(e){return e?e/Math.sin(e):1}function E(e){return e>0?1:e<0?-1:0}function S(e){return e>1?m:e<-1?-m:Math.asin(e)}function x(e){return e>1?0:e<-1?v:Math.acos(e)}function T(e){return e>0?Math.sqrt(e):0}function k(e,t){var n=(2+m)*Math.sin(t);t/=2;for(var r=0,i=Infinity;r<10&&Math.abs(i)>p;r++){var s=Math.cos(t);t-=i=(t+Math.sin(t)*(s+2)-n)/(2*s*(1+s))}return[2/Math.sqrt(v*(4+v))*e*(1+Math.cos(t)),2*Math.sqrt(v/(4+v))*Math.sin(t)]}function A(e,t){function n(n,r){var i=L(n/t,r);return i[0]*=e,i}return arguments.length<2&&(t=e),t===1?L:t===Infinity?M:(n.invert=function(n,r){var i=L.invert(n/e,r);return i[0]*=t,i},n)}function O(){var e=2,t=C(A),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n}function M(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function _(e,t){return[3*e/(2*v)*Math.sqrt(v*v/3-t*t),t]}function D(e,t){return[e,1.25*Math.log(Math.tan(v/4+.4*t))]}function P(e){return function(t){var n=e*Math.sin(t),r=30,i;do t-=i=(t+Math.sin(t)-n)/(1+Math.cos(t));while(Math.abs(i)>p&&--r>0);return t/2}}function H(e,t,n){function i(n,i){return[e*n*Math.cos(i=r(i)),t*Math.sin(i)]}var r=P(n);return i.invert=function(r,i){var s=S(i/t);return[r/(e*Math.cos(s)),S((2*s+Math.sin(2*s))/n)]},i}function F(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-0.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-0.044475+.028874*n-.005916*r)))]}function q(e,t){var n=Math.min(18,Math.abs(t)*36/v),r=Math.floor(n),i=n-r,s=(c=I[r])[0],o=c[1],u=(c=I[++r])[0],a=c[1],f=(c=I[Math.min(19,++r)])[0],l=c[1],c;return[e*(u+i*(f-s)/2+i*i*(f-2*u+s)/2),(t>0?m:-m)*(a+i*(l-o)/2+i*i*(l-2*a+o)/2)]}function R(e,t){return[e*Math.cos(t),t]}function U(e,t){var n=Math.cos(t),r=w(x(n*Math.cos(e/=2)));return[2*n*Math.sin(e)*r,Math.sin(t)*r]}function z(e,t){var n=U(e,t);return[(n[0]+e/m)/2,(n[1]+t)/2]}e.geo.project=function(e,t){var i=t.stream;if(!i)throw new Error("not yet supported");return(e&&r.hasOwnProperty(e.type)?r[e.type]:n)(e,i)};var r={Feature:t,FeatureCollection:function(e,n){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,n)})}}},i=[],s=[],o={point:function(e,t){i.push([e,t])},result:function(){var e=i.length?i.length<2?{type:"Point",coordinates:i[0]}:{type:"MultiPoint",coordinates:i}:null;return i=[],e}},u={lineStart:l,point:function(e,t){i.push([e,t])},lineEnd:function(){i.length&&(s.push(i),i=[])},result:function(){var e=s.length?s.length<2?{type:"LineString",coordinates:s[0]}:{type:"MultiLineString",coordinates:s}:null;return s=[],e}},a={polygonStart:l,lineStart:l,point:function(e,t){i.push([e,t])},lineEnd:function(){var e=i.length;if(e){do i.push(i[0].slice());while(++e<4);s.push(i),i=[]}},polygonEnd:l,result:function(){if(!s.length)return null;var e=[],t=[];return s.forEach(function(n){c(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){if(h(e[0],n))return e.push(t),!0})||e.push([t])}),s=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},f={Point:o,MultiPoint:o,LineString:u,MultiLineString:u,Polygon:a,MultiPolygon:a,Sphere:a},p=1e-6,d=p*p,v=Math.PI,m=v/2,g=Math.sqrt(v),y=v/180,b=180/v,N=e.geo.projection,C=e.geo.projectionMutator;e.geo.interrupt=function(t){function i(e,r){var i=r<0?-1:1,s=n[+(r<0)];for(var o=0,u=s.length-1;o<u&&e>s[o][2][0];++o);var a=t(e-s[o][1][0],r);return a[0]+=t(s[o][1][0],i*r>i*s[o][0][1]?s[o][0][1]:r)[0],a}function s(){r=n.map(function(e){return e.map(function(e){var n=t(e[0][0],e[0][1])[0],r=t(e[2][0],e[2][1])[0],i=t(e[1][0],e[0][1])[1],s=t(e[1][0],e[1][1])[1],o;return i>s&&(o=i,i=s,s=o),[[n,i],[r,s]]})})}function a(){var t=1e-6,r=[];for(var i=0,s=n[0].length;i<s;++i){var o=n[0][i],u=o[0][0]*180/v,a=o[0][1]*180/v,l=o[1][1]*180/v,c=o[2][0]*180/v,h=o[2][1]*180/v;r.push(f([[u+t,a+t],[u+t,l-t],[c-t,l-t],[c-t,h+t]],30))}for(var i=n[1].length-1;i>=0;--i){var o=n[1][i],u=o[0][0]*180/v,a=o[0][1]*180/v,l=o[1][1]*180/v,c=o[2][0]*180/v,h=o[2][1]*180/v;r.push(f([[c-t,h-t],[c-t,l+t],[u+t,l+t],[u+t,a-t]],30))}return{type:"Polygon",coordinates:[e.merge(r)]}}function f(e,t){var n=-1,r=e.length,i=e[0],s,o,u,a=[];while(++n<r){s=e[n],o=(s[0]-i[0])/t,u=(s[1]-i[1])/t;for(var f=0;f<t;++f)a.push([i[0]+f*o,i[1]+f*u]);i=s}return a.push(s),a}function l(e,t){return Math.abs(e[0]-t[0])<p&&Math.abs(e[1]-t[1])<p}var n=[[[[-v,0],[0,m],[v,0]]],[[[-v,0],[0,-m],[v,0]]]],r;t.invert&&(i.invert=function(e,s){var o=r[+(s<0)],u=n[+(s<0)];for(var a=0,f=o.length;a<f;++a){var c=o[a];if(c[0][0]<=e&&e<c[1][0]&&c[0][1]<=s&&s<c[1][1]){var h=t.invert(e-t(u[a][1][0],0)[0],s);return h[0]+=u[a][1][0],l(i(h[0],h[1]),[e,s])?h:null}}});var o=e.geo.projection(i),u=o.stream;return o.stream=function(t){var n=o.rotate(),r=u(t),i=(o.rotate([0,0]),u(t));return o.rotate(n),r.sphere=function(){e.geo.stream(a(),i)},r},o.lobes=function(e){return arguments.length?(n=e.map(function(e){return e.map(function(e){return[[e[0][0]*v/180,e[0][1]*v/180],[e[1][0]*v/180,e[1][1]*v/180],[e[2][0]*v/180,e[2][1]*v/180]]})}),s(),o):n.map(function(e){return e.map(function(e){return[[e[0][0]*180/v,e[0][1]*180/v],[e[1][0]*180/v,e[1][1]*180/v],[e[2][0]*180/v,e[2][1]*180/v]]})})},o},k.invert=function(e,t){var n=.5*t*Math.sqrt((4+v)/v),r=S(n),i=Math.cos(r);return[e/(2/Math.sqrt(v*(4+v))*(1+i)),S((r+n*(i+2))/(2+m))]},(e.geo.eckert4=function(){return N(k)}).raw=k;var L=e.geo.azimuthalEqualArea.raw;M.invert=function(e,t){var n=2*S(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(e.geo.hammer=O).raw=A,_.invert=function(e,t){return[2/3*v*e/Math.sqrt(v*v/3-t*t),t]},(e.geo.kavrayskiy7=function(){return N(_)}).raw=_,D.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*v]},(e.geo.miller=function(){return N(D)}).raw=D;var B=P(v),j=H(Math.SQRT2/m,Math.SQRT2,v);(e.geo.mollweide=function(){return N(j)}).raw=j,F.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-0.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.045255+o*(-0.311325+.259866*s-.005916*11*o)))}while(Math.abs(i)>p&&--r>0);return[e/(.8707+(s=n*n)*(-0.131979+s*(-0.013791+s*s*s*(.003971-.001529*s)))),n]},(e.geo.naturalEarth=function(){return N(F)}).raw=F;var I=[[.9986,-0.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];I.forEach(function(e){e[1]*=1.0144}),q.invert=function(e,t){var n=t/m,r=n*90,i=Math.min(18,Math.abs(r/5)),s=Math.max(0,Math.floor(i));do{var o=I[s][1],u=I[s+1][1],a=I[Math.min(19,s+2)][1],f=a-o,l=a-2*u+o,c=2*(Math.abs(n)-u)/f,h=l/f,p=c*(1-h*c*(1-2*h*c));if(p>=0||s===1){r=(t>=0?5:-5)*(p+i);var v=50,g;do i=Math.min(18,Math.abs(r)/5),s=Math.floor(i),p=i-s,o=I[s][1],u=I[s+1][1],a=I[Math.min(19,s+2)][1],r-=(g=(t>=0?m:-m)*(u+p*(a-o)/2+p*p*(a-2*u+o)/2)-t)*b;while(Math.abs(g)>d&&--v>0);break}}while(--s>=0);var w=I[s][0],E=I[s+1][0],S=I[Math.min(19,s+2)][0];return[e/(E+p*(S-w)/2+p*p*(S-2*E+w)/2),r*y]},(e.geo.robinson=function(){return N(q)}).raw=q,R.invert=function(e,t){return[e/Math.cos(t),t]},(e.geo.sinusoidal=function(){return N(R)}).raw=R,U.invert=function(e,t){if(e*e+4*t*t>v*v+p)return;var n=e,r=t,i=25;do{var s=Math.sin(n),o=Math.sin(n/2),u=Math.cos(n/2),a=Math.sin(r),f=Math.cos(r),l=Math.sin(2*r),c=a*a,h=f*f,d=o*o,m=1-h*u*u,g=m?x(f*u)*Math.sqrt(y=1/m):y=0,y,b=2*g*f*o-e,w=g*a-t,E=y*(h*d+g*f*u*c),S=y*(.5*s*l-g*2*a*o),T=y*.25*(l*o-g*a*h*s),N=y*(c*u+g*d*f),C=S*T-N*E;if(!C)break;var k=(w*S-b*N)/C,L=(b*T-w*E)/C;n-=k,r-=L}while((Math.abs(k)>p||Math.abs(L)>p)&&--i>0);return[n,r]},(e.geo.aitoff=function(){return N(U)}).raw=U,z.invert=function(e,t){var n=e,r=t,i=25;do{var s=Math.cos(r),o=Math.sin(r),u=Math.sin(2*r),a=o*o,f=s*s,l=Math.sin(n),c=Math.cos(n/2),h=Math.sin(n/2),d=h*h,v=1-f*c*c,g=v?x(s*c)*Math.sqrt(y=1/v):y=0,y,b=.5*(2*g*s*h+n/m)-e,w=.5*(g*o+r)-t,E=.5*y*(f*d+g*s*c*a)+.5/m,S=y*(l*u/4-g*o*h),T=.125*y*(u*h-g*o*f*l),N=.5*y*(a*c+g*d*s)+.5,C=S*T-N*E,k=(w*S-b*N)/C,L=(b*T-w*E)/C;n-=k,r-=L}while((Math.abs(k)>p||Math.abs(L)>p)&&--i>0);return[n,r]},(e.geo.winkel3=function(){return N(z)}).raw=z}t.exports=r},{}],431:[function(e,t,n){"use strict";function s(e,t){var n=e.projection,r=e.lonaxis,s=e.lataxis,a=e.domain,f=e.framewidth||0,l=t.w*(a.x[1]-a.x[0]),c=t.h*(a.y[1]-a.y[0]),h=r.range[0]+i,p=r.range[1]-i,d=s.range[0]+i,v=s.range[1]-i,m=r._fullRange[0]+i,g=r._fullRange[1]-i,y=s._fullRange[0]+i,b=s._fullRange[1]-i;n._translate0=[t.l+l/2,t.t+c/2];var w=p-h,E=v-d,S=[h+w/2,d+E/2],x=n._rotate;n._center=[S[0]+x[0],S[1]+x[1]];var T=function(t){function T(e){return Math.min(r*l/(e[1][0]-e[0][0]),r*c/(e[1][1]-e[0][1]))}var r=t.scale(),i=n._translate0,s=o(h,d,p,v),a=o(m,y,g,b),w,E,S,x;S=u(t,s),w=T(S),x=u(t,a),n._fullScale=T(x),t.scale(w),S=u(t,s),E=[i[0]-S[0][0]+f,i[1]-S[0][1]+f],n._translate=E,t.translate(E),S=u(t,s),e._isAlbersUsa||t.clipExtent(S),w=n.scale*w,n._scale=w,e._width=Math.round(S[1][0])+f,e._height=Math.round(S[1][1])+f,e._marginX=(l-Math.round(S[1][0]))/2,e._marginY=(c-Math.round(S[1][1]))/2};return T}function o(e,t,n,r){var i=(n-e)/4;return{type:"Polygon",coordinates:[[[e,t],[e,r],[e+i,r],[e+2*i,r],[e+3*i,r],[n,r],[n,t],[n-i,t],[n-2*i,t],[n-3*i,t],[e,t]]]}}function u(e,t){return r.geo.path().projection(e).bounds(t)}var r=e("d3"),i=e("./constants/").clipPad;t.exports=s},{"./constants/":422,d3:72}],432:[function(e,t,n){"use strict";function a(e,t){var n;return t._isScoped?n=l:t._clipAngle?n=h:n=c,n(e,t.projection)}function f(e,t){var n=t._fullScale;return r.behavior.zoom().translate(e.translate()).scale(e.scale()).scaleExtent([.5*n,100*n])}function l(e,t){function s(){r.select(this).style(o)}function a(){n.scale(r.event.scale).translate(r.event.translate),e.render()}function l(){r.select(this).style(u)}var n=e.projection,i=f(n,t);return i.on("zoomstart",s).on("zoom",a).on("zoomend",l),i}function c(e,t){function g(e){return n.invert(e)}function y(e){var t=n(g(e));return Math.abs(t[0]-e[0])>s||Math.abs(t[1]-e[1])>s}function b(){r.select(this).style(o),a=r.mouse(this),l=n.rotate(),c=n.translate(),h=l,p=g(a)}function w(){d=r.mouse(this);if(y(a)){i.scale(n.scale()),i.translate(n.translate());return}n.scale(r.event.scale),n.translate([c[0],r.event.translate[1]]),p?g(d)&&(m=g(d),v=[h[0]+(m[0]-p[0]),l[1],l[2]],n.rotate(v),h=v):(a=d,p=g(a)),e.render()}function E(){r.select(this).style(u)}var n=e.projection,i=f(n,t),s=2,a,l,c,h,p,d,v,m;return i.on("zoomstart",b).on("zoom",w).on("zoomend",E),i}function h(e,t){function y(e){l++||e({type:"zoomstart"})}function b(e){e({type:"zoom"})}function w(e){--l||e({type:"zoomend"})}var n=e.projection,i={r:n.rotate(),k:n.scale()},s=f(n,t),a=N(s,"zoomstart","zoom","zoomend"),l=0,c=s.on,h;return s.on("zoomstart",function(){r.select(this).style(o);var e=r.mouse(this),t=n.rotate(),u=t,f=n.translate(),l=d(t);h=p(n,e),c.call(s,"zoom",function(){var s=r.mouse(this);n.scale(i.k=r.event.scale);if(!h)e=s,h=p(n,e);else if(p(n,s)){n.rotate(t).translate(f);var o=p(n,s),c=m(h,o),d=E(v(l,c)),y=i.r=g(d,h,u);if(!isFinite(y[0])||!isFinite(y[1])||!isFinite(y[2]))y=u;n.rotate(y),u=y}b(a.of(this,arguments))}),y(a.of(this,arguments))}).on("zoomend",function(){r.select(this).style(u),c.call(s,"zoom",null),w(a.of(this,arguments))}).on("zoom.redraw",function(){e.render()}),r.rebind(s,a,"on")}function p(e,t){var n=e.invert(t);return n&&isFinite(n[0])&&isFinite(n[1])&&S(n)}function d(e){var t=.5*e[0]*i,n=.5*e[1]*i,r=.5*e[2]*i,s=Math.sin(t),o=Math.cos(t),u=Math.sin(n),a=Math.cos(n),f=Math.sin(r),l=Math.cos(r);return[o*a*l+s*u*f,s*a*l-o*u*f,o*u*l+s*a*f,o*a*f-s*u*l]}function v(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=t[0],u=t[1],a=t[2],f=t[3];return[n*o-r*u-i*a-s*f,n*u+r*o+i*f-s*a,n*a-r*f+i*o+s*u,n*f+r*a-i*u+s*o]}function m(e,t){if(!e||!t)return;var n=T(e,t),r=Math.sqrt(x(n,n)),i=.5*Math.acos(Math.max(-1,Math.min(1,x(e,t)))),s=Math.sin(i)/r;return r&&[Math.cos(i),n[2]*s,-n[1]*s,n[0]*s]}function g(e,t,n){var r=w(t,2,e[0]);r=w(r,1,e[1]),r=w(r,0,e[2]-n[2]);var i=t[0],o=t[1],u=t[2],a=r[0],f=r[1],l=r[2],c=Math.atan2(o,i)*s,h=Math.sqrt(i*i+o*o),p,d;Math.abs(f)>h?(d=(f>0?90:-90)-c,p=0):(d=Math.asin(f/h)*s-c,p=Math.sqrt(h*h-f*f));var v=180-d-2*c,m=(Math.atan2(l,a)-Math.atan2(u,p))*s,g=(Math.atan2(l,a)-Math.atan2(u,-p))*s,b=y(n[0],n[1],d,m),E=y(n[0],n[1],v,g);return b<=E?[d,m,n[2]]:[v,g,n[2]]}function y(e,t,n,r){var i=b(n-e),s=b(r-t);return Math.sqrt(i*i+s*s)}function b(e){return(e%360+540)%360-180}function w(e,t,n){var r=n*i,s=e.slice(),o=t===0?1:0,u=t===2?1:2,a=Math.cos(r),f=Math.sin(r);return s[o]=e[o]*a-e[u]*f,s[u]=e[u]*a+e[o]*f,s}function E(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*s,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*s,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*s]}function S(e){var t=e[0]*i,n=e[1]*i,r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function x(e,t){var n=0;for(var r=0,i=e.length;r<i;++r)n+=e[r]*t[r];return n}function T(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function N(e){var t=0,n=arguments.length,i=[];while(++t<n)i.push(arguments[t]);var s=r.dispatch.apply(null,i);return s.of=function(t,n){return function(i){var o;try{o=i.sourceEvent=r.event,i.target=e,r.event=i,s[i.type].apply(t,n)}finally{r.event=o}}},s}var r=e("d3"),i=Math.PI/180,s=180/Math.PI,o={cursor:"pointer"},u={cursor:"auto"};t.exports=a},{d3:72}],433:[function(e,t,n){"use strict";function i(e,t){var n=e.projection,i=e.zoom,s=function(){e.makeProjection(t),e.makePath(),i.scale(n.scale()),i.translate(n.translate()),r.loneUnhover(e.hoverContainer),e.render()};return s}var r=e("../cartesian/graph_interact");t.exports=i},{"../cartesian/graph_interact":410}],434:[function(e,t,n){"use strict";function s(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxStart=[0,0],this.boxEnd=[0,0]}function o(e){var t=e.mouseContainer,n=e.glplot,o=new s(t,n);return o.mouseListener=r(t,function(t,r,i){function c(t,n,r){var i=Math.min(n,r),s=Math.max(n,r);i!==s?(t[0]=i,t[1]=s,o.dataBox=t):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var s=e.xaxis.range,u=e.yaxis.range,a=n.viewBox,f=o.lastPos[0],l=o.lastPos[1];r*=n.pixelRatio,i*=n.pixelRatio,i=a[3]-a[1]-i;switch(e.fullLayout.dragmode){case"zoom":if(t){var h=r/(a[2]-a[0])*(s[1]-s[0])+s[0],p=i/(a[3]-a[1])*(u[1]-u[0])+u[0];o.boxEnabled||(o.boxStart[0]=h,o.boxStart[1]=p),o.boxEnd[0]=h,o.boxEnd[1]=p,o.boxEnabled=!0}else o.boxEnabled&&(c(s,o.boxStart[0],o.boxEnd[0]),c(u,o.boxStart[1],o.boxEnd[1]),o.boxEnabled=!1);break;case"pan":o.boxEnabled=!1;if(t){var d=(f-r)*(s[1]-s[0])/(n.viewBox[2]-n.viewBox[0]),v=(l-i)*(u[1]-u[0])/(n.viewBox[3]-n.viewBox[1]);s[0]+=d,s[1]+=d,u[0]+=v,u[1]+=v,o.lastInputTime=Date.now(),e.cameraChanged()}}o.lastPos[0]=r,o.lastPos[1]=i}),o.wheelListener=i(t,function(t,r){var i=e.xaxis.range,s=e.yaxis.range,u=n.viewBox,a=o.lastPos[0],f=o.lastPos[1];switch(e.fullLayout.dragmode){case"zoom":break;case"pan":var l=Math.exp(.1*r/(u[3]-u[1])),c=a/(u[2]-u[0])*(i[1]-i[0])+i[0],h=f/(u[3]-u[1])*(s[1]-s[0])+s[0];i[0]=(i[0]-c)*l+c,i[1]=(i[1]-c)*l+c,s[0]=(s[0]-h)*l+h,s[1]=(s[1]-h)*l+h,o.lastInputTime=Date.now(),e.cameraChanged()}return!0}),o}var r=e("mouse-change"),i=e("mouse-wheel");t.exports=o},{"mouse-change":200,"mouse-wheel":204}],435:[function(e,t,n){"use strict";function o(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0]}function f(e){return new o(e)}var r=e("../../plotly"),i=e("../../lib/html2unicode"),s=e("../../lib/str2rgbarray"),u=o.prototype,a=["xaxis","yaxis"];u.merge=function(e){this.titleEnable=!1,this.backgroundColor=s(e.plot_bgcolor);var t,n,r,o,u,f,l,c,h,p,d;for(p=0;p<2;++p){t=a[p],n=e[this.scene[t]._name],r=/Click to enter .+ title/.test(n.title)?"":n.title;for(d=0;d<=2;d+=2)this.labelEnable[p+d]=!1,this.labels[p+d]=i(r),this.labelColor[p+d]=s(n.titlefont.color),this.labelFont[p+d]=n.titlefont.family,this.labelSize[p+d]=n.titlefont.size,this.labelPad[p+d]=this.getLabelPad(t,n),this.tickEnable[p+d]=!1,this.tickColor[p+d]=s((n.tickfont||{}).color),this.tickAngle[p+d]=n.tickangle==="auto"?0:Math.PI*-n.tickangle/180,this.tickPad[p+d]=this.getTickPad(n),this.tickMarkLength[p+d]=0,this.tickMarkWidth[p+d]=n.tickwidth||0,this.tickMarkColor[p+d]=s(n.tickcolor),this.borderLineEnable[p+d]=!1,this.borderLineColor[p+d]=s(n.linecolor),this.borderLineWidth[p+d]=n.linewidth||0;l=this.hasSharedAxis(n),u=this.hasAxisInDfltPos(t,n)&&!l,f=this.hasAxisInAltrPos(t,n)&&!l,o=n.mirror||!1,c=l?String(o).indexOf("all")!==-1:!!o,h=l?o==="allticks":String(o).indexOf("ticks")!==-1,u?this.labelEnable[p]=!0:f&&(this.labelEnable[p+2]=!0),u?this.tickEnable[p]=n.showticklabels:f&&(this.tickEnable[p+2]=n.showticklabels);if(u||c)this.borderLineEnable[p]=n.showline;if(f||c)this.borderLineEnable[p+2]=n.showline;if(u||h)this.tickMarkLength[p]=this.getTickMarkLength(n);if(f||h)this.tickMarkLength[p+2]=this.getTickMarkLength(n);this.gridLineEnable[p]=n.showgrid,this.gridLineColor[p]=s(n.gridcolor),this.gridLineWidth[p]=n.gridwidth,this.zeroLineEnable[p]=n.zeroline,this.zeroLineColor[p]=s(n.zerolinecolor),this.zeroLineWidth[p]=n.zerolinewidth}},u.hasSharedAxis=function(e){var t=this.scene,n=r.Plots.getSubplotIds(t.fullLayout,"gl2d"),i=r.Axes.findSubplotsWithAxis(n,e);return i.indexOf(t.id)!==0},u.hasAxisInDfltPos=function(e,t){var n=t.side;if(e==="xaxis")return n==="bottom";if(e==="yaxis")return n==="left"},u.hasAxisInAltrPos=function(e,t){var n=t.side;if(e==="xaxis")return n==="top";if(e==="yaxis")return n==="right"},u.getLabelPad=function(e,t){var n=1.5,r=t.titlefont.size,i=t.showticklabels;if(e==="xaxis")return t.side==="top"?-10+r*(n+(i?1:0)):-10+r*(n+(i?.5:0));if(e==="yaxis")return t.side==="right"?10+r*(n+(i?1:.5)):10+r*(n+(i?.5:0))},u.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15},u.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t},t.exports=f},{"../../lib/html2unicode":380,"../../lib/str2rgbarray":392,"../../plotly":400}],436:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("./scene2d"),s=r.Plots;n.name="gl2d",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex={x:/^x([2-9]|[1-9][0-9]+)?$/,y:/^y([2-9]|[1-9][0-9]+)?$/},n.attrRegex={x:/^xaxis([2-9]|[1-9][0-9]+)?$/,y:/^yaxis([2-9]|[1-9][0-9]+)?$/},n.attributes=e("../cartesian/attributes"),n.plot=function(t){var n=t._fullLayout,r=t._fullData,o=s.getSubplotIds(n,"gl2d");for(var u=0;u<o.length;u++){var a=o[u],f=n._plots[a],l=s.getSubplotData(r,"gl2d",a),c=f._scene2d;c===undefined&&(c=new i({id:a,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},n),f._scene2d=c),c.plot(l,t.calcdata,n,t.layout)}},n.clean=function(e,t,n,r){var i=s.getSubplotIds(r,"gl2d");for(var o=0;o<i.length;o++){var u=r._plots[i[o]],a=u.xaxis._name,f=u.yaxis._name;!!u._scene2d&&(!t[a]||!t[f])&&u._scene2d.destroy()}}},{"../../plotly":400,"../cartesian/attributes":402,"./scene2d":437}],437:[function(e,t,n){"use strict";function v(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.fullLayout=t,this.updateAxes(t),this.makeFramework(),this.glplotOptions=a(this),this.glplotOptions.merge(t),this.glplot=s(this.glplotOptions),this.camera=f(this),this.traces={},this.spikes=o(this.glplot),this.selectBox=u(this.glplot,{innerFill:!1,outerFill:!0}),this.pickResult=null,this.bounds=[Infinity,Infinity,-Infinity,-Infinity],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function g(e,t){for(var n=0;n<2;++n){var r=e[n],i=t[n];if(r.length!==i.length)return!0;for(var s=0;s<r.length;++s)if(r[s].x!==i[s].x)return!0}return!1}var r=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/graph_interact"),s=e("gl-plot2d"),o=e("gl-spikes2d"),u=e("gl-select-box"),a=e("./convert"),f=e("./camera"),l=e("../../lib/html2unicode"),c=e("../../lib/show_no_webgl_msg"),h=["xaxis","yaxis"],p,d;t.exports=v;var m=v.prototype;m.makeFramework=function(){if(this.staticPlot){if(!d){p=document.createElement("canvas");try{d=p.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0})}catch(e){throw new Error(["Error creating static canvas/context for image server"].join(" "))}}this.canvas=p,this.gl=d}else{var t=document.createElement("canvas"),n={premultipliedAlpha:!0},r;try{r=t.getContext("webgl",n)}catch(e){}if(!r)try{r=t.getContext("experimental-webgl",n)}catch(e){}r||c(this),this.canvas=t,this.gl=r}var i=this.canvas,s=this.pixelRatio,o=this.fullLayout;i.width=Math.ceil(s*o.width)|0,i.height=Math.ceil(s*o.height)|0,i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none";var u=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");u.style.position="absolute",u.style.top=u.style.left="0px",u.style.width=u.style.height="100%",u.style["z-index"]=20,u.style["pointer-events"]="none";var a=this.mouseContainer=document.createElement("div");a.style.position="absolute";var f=this.container;f.appendChild(i),f.appendChild(u),f.appendChild(a)},m.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(p),this.glplot.setDirty(),this.glplot.draw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer
(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var s=0,o=r-1;s<o;++s,--o)for(var u=0;u<n;++u)for(var a=0;a<4;++a){var f=i[4*(n*s+u)+a];i[4*(n*s+u)+a]=i[4*(n*o+u)+a],i[4*(n*o+u)+a]=f}var l=document.createElement("canvas");l.width=n,l.height=r;var c=l.getContext("2d"),h=c.createImageData(n,r);h.data.set(i),c.putImageData(h,0,0);var d;switch(e){case"jpeg":d=l.toDataURL("image/jpeg");break;case"webp":d=l.toDataURL("image/webp");break;default:d=l.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(p),d},m.computeTickMarks=function(){this.xaxis._length=this.glplot.viewBox[2]-this.glplot.viewBox[0],this.yaxis._length=this.glplot.viewBox[3]-this.glplot.viewBox[1];var e=[r.calcTicks(this.xaxis),r.calcTicks(this.yaxis)];for(var t=0;t<2;++t)for(var n=0;n<e[t].length;++n)e[t][n].text=l(e[t][n].text+"").replace(/\n/g," ");return e},m.updateAxes=function(e){var t=r.subplotMatch,n="xaxis"+this.id.match(t)[1],i="yaxis"+this.id.match(t)[2];this.xaxis=e[n],this.yaxis=e[i]},m.updateFx=function(e){var t=this.fullLayout;t.dragmode=e.dragmode,t.hovermode=e.hovermode};var y=function(e){var t=e.xaxis.range,n=e.yaxis.range;e.graphDiv.layout.xaxis.range=t.slice(0),e.graphDiv.layout.yaxis.range=n.slice(0);var r={lastInputTime:e.camera.lastInputTime};r[e.xaxis._name]=t.slice(),r[e.yaxis._name]=n.slice(),e.graphDiv.emit("plotly_relayout",r)};m.cameraChanged=function(){var e=this.camera,t=this.xaxis.range,n=this.yaxis.range;this.glplot.setDataBox([t[0],n[0],t[1],n[1]]);var r=this.computeTickMarks(),i=this.glplotOptions.ticks;g(r,i)&&(this.glplotOptions.ticks=r,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),y(this))},m.destroy=function(){this.glplot.dispose(),this.staticPlot||this.container.removeChild(this.canvas),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.glplot=null,this.stopped=!0},m.plot=function(e,t,n){var i=this.glplot,s=this.pixelRatio,o,u,a;this.fullLayout=n,this.updateAxes(n);var f=n.width,l=n.height,c=Math.ceil(s*f)|0,p=Math.ceil(s*l)|0,d=this.canvas;if(d.width!==c||d.height!==p)d.width=c,d.height=p;for(o=0;o<e.length;++o){var v=e[o],m=t[o];a=this.traces[v.uid],a?a.update(v,m):a=v._module.plot(this,v,m),this.traces[v.uid]=a}var g=Object.keys(this.traces);e:for(o=0;o<g.length;++o){for(u=0;u<t.length;++u)if(t[u][0].trace.uid===g[o])continue e;a=this.traces[g[o]],a.dispose(),delete this.traces[g[o]]}var y=this.glplotOptions;y.merge(n),y.screenBox=[0,0,f,l];var b=n._size,w=this.xaxis.domain,E=this.yaxis.domain;y.viewBox=[b.l+w[0]*b.w,b.b+E[0]*b.h,f-b.r-(1-w[1])*b.w,l-b.t-(1-E[1])*b.h],this.mouseContainer.style.width=b.w*(w[1]-w[0])+"px",this.mouseContainer.style.height=b.h*(E[1]-E[0])+"px",this.mouseContainer.height=b.h*(E[1]-E[0]),this.mouseContainer.style.left=b.l+w[0]*b.w+"px",this.mouseContainer.style.top=b.t+(1-E[1])*b.h+"px";var S=this.bounds;S[0]=S[1]=Infinity,S[2]=S[3]=-Infinity,g=Object.keys(this.traces);for(o=0;o<g.length;++o){a=this.traces[g[o]];for(var x=0;x<2;++x)S[x]=Math.min(S[x],a.bounds[x]),S[x+2]=Math.max(S[x+2],a.bounds[x+2])}var T;for(o=0;o<2;++o)S[o]>S[o+2]&&(S[o]=-1,S[o+2]=1),T=this[h[o]],T._length=y.viewBox[o+2]-y.viewBox[o],r.doAutoRange(T);y.ticks=this.computeTickMarks();var N=this.xaxis.range,C=this.yaxis.range;y.dataBox=[N[0],C[0],N[1],C[1]],y.merge(n),i.update(y),this.glplot.draw()},m.draw=function(){if(this.stopped)return;requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,n=t.mouseListener,r=this.fullLayout;this.cameraChanged();var s=n.x*e.pixelRatio,o=this.canvas.height-e.pixelRatio*n.y;if(t.boxEnabled&&r.dragmode==="zoom")this.selectBox.enabled=!0,this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],e.setDirty();else{this.selectBox.enabled=!1;var u=r._size,a=this.xaxis.domain,f=this.yaxis.domain,l=e.pick(s/e.pixelRatio+u.l+a[0]*u.w,o/e.pixelRatio-(u.t+(1-f[1])*u.h));if(l&&r.hovermode){var c=l.object._trace.handlePick(l);if(c&&(!this.lastPickResult||this.lastPickResult.trace!==c.trace||this.lastPickResult.dataCoord[0]!==c.dataCoord[0]||this.lastPickResult.dataCoord[1]!==c.dataCoord[1])){var h=this.lastPickResult=c;this.spikes.update({center:l.dataCoord}),h.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(l.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(l.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio];var p=h.hoverinfo;if(p!=="all"){var d=p.split("+");d.indexOf("x")===-1&&(h.traceCoord[0]=undefined),d.indexOf("y")===-1&&(h.traceCoord[1]=undefined),d.indexOf("z")===-1&&(h.traceCoord[2]=undefined),d.indexOf("text")===-1&&(h.textLabel=undefined),d.indexOf("name")===-1&&(h.name=undefined)}i.loneHover({x:h.screenCoord[0],y:h.screenCoord[1],xLabel:this.hoverFormatter("xaxis",h.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",h.traceCoord[1]),zLabel:h.traceCoord[2],text:h.textLabel,name:h.name,color:h.color},{container:this.svgContainer}),this.lastPickResult={dataCoord:l.dataCoord}}}else!l&&this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,i.loneUnhover(this.svgContainer))}e.draw()},m.hoverFormatter=function(e,t){if(t===undefined)return undefined;var n=this[e];return r.tickText(n,n.c2l(t),"hover").text}},{"../../lib/html2unicode":380,"../../lib/show_no_webgl_msg":390,"../../plots/cartesian/axes":403,"../../plots/cartesian/graph_interact":410,"./camera":434,"./convert":435,"gl-plot2d":124,"gl-select-box":154,"gl-spikes2d":174}],438:[function(e,t,n){"use strict";function u(e,t){e=e||document.body,t=t||{};var n=[.01,Infinity];"distanceLimits"in t&&(n[0]=t.distanceLimits[0],n[1]=t.distanceLimits[1]),"zoomMin"in t&&(n[0]=t.zoomMin),"zoomMax"in t&&(n[1]=t.zoomMax);var u=i({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:n}),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,l=e.clientWidth,c=e.clientHeight,h={keyBindingMode:"rotate",view:u,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:u.modes,tick:function(){var t=r(),n=this.delay,i=t-2*n;u.idle(t-n),u.recalcMatrix(i),u.flush(t-(100+n*2));var s=!0,o=u.computedMatrix;for(var h=0;h<16;++h)s=s&&a[h]===o[h],a[h]=o[h];var p=e.clientWidth===l&&e.clientHeight===c;return l=e.clientWidth,c=e.clientHeight,s?!p:(f=Math.exp(u.computedRadius[0]),!0)},lookAt:function(e,t,n){u.lookAt(u.lastT(),e,t,n)},rotate:function(e,t,n){u.rotate(u.lastT(),e,t,n)},pan:function(e,t,n){u.pan(u.lastT(),e,t,n)},translate:function(e,t,n){u.translate(u.lastT(),e,t,n)}};Object.defineProperties(h,{matrix:{get:function(){return u.computedMatrix},set:function(e){return u.setMatrix(u.lastT(),e),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(e){var t=u.computedUp.slice(),n=u.computedEye.slice(),i=u.computedCenter.slice();u.setMode(e);if(e==="turntable"){var s=r();u._active.lookAt(s,n,i,t),u._active.lookAt(s+500,n,i,[0,0,1]),u._active.flush(s)}return u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(e){return u.lookAt(u.lastT(),null,e),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(e){return u.lookAt(u.lastT(),e),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(e){return u.lookAt(u.lastT(),null,null,e),u.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(e){return u.setDistance(u.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(n)},set:function(e){return u.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var p=0,d=0;return s(e,function(t,n,i,s){var o=h.keyBindingMode==="rotate",a=h.keyBindingMode==="pan",l=h.keyBindingMode==="zoom",c=!!s.control,v=!!s.alt,m=!!s.shift,g=!!(t&1),y=!!(t&2),b=!!(t&4),w=1/e.clientHeight,E=w*(n-p),S=w*(i-d),x=h.flipX?1:-1,T=h.flipY?1:-1,N=r(),C=Math.PI*h.rotateSpeed;(o&&g&&!c&&!v&&!m||g&&!c&&!v&&m)&&u.rotate(N,x*C*E,-T*C*S,0),(a&&g&&!c&&!v&&!m||y||g&&c&&!v&&!m)&&u.pan(N,-h.translateSpeed*E*f,h.translateSpeed*S*f,0);if(l&&g&&!c&&!v&&!m||b||g&&!c&&v&&!m){var k=-h.zoomSpeed*S/window.innerHeight*(N-u.lastT())*100;u.pan(N,0,0,f*(Math.exp(k)-1))}return p=n,d=i,!0}),o(e,function(e,t){var n=h.flipX?1:-1,i=h.flipY?1:-1,s=r();if(Math.abs(e)>Math.abs(t))u.rotate(s,0,0,-e*n*Math.PI*h.rotateSpeed/window.innerWidth);else{var o=-h.zoomSpeed*i*t/window.innerHeight*(s-u.lastT())/100;u.pan(s,0,0,f*(Math.exp(o)-1))}},!0),h}t.exports=u;var r=e("right-now"),i=e("3d-view"),s=e("mouse-change"),o=e("mouse-wheel")},{"3d-view":39,"mouse-change":200,"mouse-wheel":204,"right-now":214}],439:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<3;++n){var r=s[n];t[r]._gd=e}}var r=e("./scene"),i=e("../plots"),s=["xaxis","yaxis","zaxis"];n.name="gl3d",n.attr="scene",n.idRoot="scene",n.idRegex=/^scene([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^scene([2-9]|[1-9][0-9]+)?$/,n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(t){var n=t._fullLayout,s=t._fullData,u=i.getSubplotIds(n,"gl3d");n._paperdiv.style({width:n.width+"px",height:n.height+"px"}),t._context.setBackground(t,n.paper_bgcolor);for(var a=0;a<u.length;a++){var f=u[a],l=i.getSubplotData(s,"gl3d",f),c=n[f],h=c._scene;h===undefined&&(o(t,c),h=new r({id:f,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},n),c._scene=h),h.plot(l,n,t.layout)}},n.clean=function(e,t,n,r){var s=i.getSubplotIds(r,"gl3d");for(var o=0;o<s.length;o++){var u=s[o];!t[u]&&!!r[u]._scene&&r[u]._scene.destroy()}},n.cleanId=function(t){if(!t.match(/^scene[0-9]*$/))return;var n=t.substr(5);return n==="1"&&(n=""),"scene"+n},n.setConvert=e("./set_convert")},{"../plots":452,"./layout/attributes":440,"./layout/defaults":444,"./layout/layout_attributes":445,"./scene":449,"./set_convert":450}],440:[function(e,t,n){"use strict";t.exports={scene:{valType:"subplotid",dflt:"scene"}}},{}],441:[function(e,t,n){"use strict";var r=e("../../../components/color"),i=e("../../cartesian/layout_attributes"),s=e("../../../lib/extend").extendFlat;t.exports={showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:i.color,categoryorder:i.categoryorder,categoryarray:i.categoryarray,title:i.title,titlefont:i.titlefont,type:i.type,autorange:i.autorange,rangemode:i.rangemode,range:i.range,fixedrange:i.fixedrange,tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,mirror:i.mirror,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:i.tickfont,tickangle:i.tickangle,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,tickformat:i.tickformat,hoverformat:i.hoverformat,showline:i.showline,linecolor:i.linecolor,linewidth:i.linewidth,showgrid:i.showgrid,gridcolor:s({},i.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:i.gridwidth,zeroline:i.zeroline,zerolinecolor:i.zerolinecolor,zerolinewidth:i.zerolinewidth}},{"../../../components/color":303,"../../../lib/extend":376,"../../cartesian/layout_attributes":412}],442:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,i=e("../../../lib"),s=e("./axis_attributes"),o=e("../../cartesian/axis_defaults"),u=["xaxis","yaxis","zaxis"],a=function(){},f=13600/187;t.exports=function(t,n,l){function p(e,t){return i.coerce(c,h,s,e,t)}var c,h;for(var d=0;d<u.length;d++){var v=u[d];c=t[v]||{},h={_id:v[0]+l.scene,_name:v},n[v]=h=o(c,h,p,{font:l.font,letter:v[0],data:l.data,showGrid:!0,bgColor:l.bgColor}),p("gridcolor",r(h.color,l.bgColor,f).toRgbString()),p("title",v[0]),h.setScale=a,p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor",h.color)),p("showaxeslabels"),p("showbackground")&&p("backgroundcolor")}}},{"../../../lib":381,"../../cartesian/axis_defaults":404,"./axis_attributes":441,tinycolor2:233}],443:[function(e,t,n){"use strict";function a(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=o(this.tickPad),this._defaultLabelPad=o(this.labelPad),this._defaultLineTickLength=o(this.lineTickLength)}function l(e){var t=new a;return t.merge(e),t}var r=e("arraytools"),i=e("../../../lib/html2unicode"),s=e("../../../lib/str2rgbarray"),o=r.copy1D,u=["xaxis","yaxis","zaxis"],f=a.prototype;f.merge=function(e){var t=this;for(var n=0;n<3;++n){var r=e[u[n]];t.labels[n]=i(r.title),"titlefont"in r&&(r.titlefont.color&&(t.labelColor[n]=s(r.titlefont.color)),r.titlefont.family&&(t.labelFont[n]=r.titlefont.family),r.titlefont.size&&(t.labelSize[n]=r.titlefont.size)),"showline"in r&&(t.lineEnable[n]=r.showline),"linecolor"in r&&(t.lineColor[n]=s(r.linecolor)),"linewidth"in r&&(t.lineWidth[n]=r.linewidth),"showgrid"in r&&(t.gridEnable[n]=r.showgrid),"gridcolor"in r&&(t.gridColor[n]=s(r.gridcolor)),"gridwidth"in r&&(t.gridWidth[n]=r.gridwidth),r.type==="log"?t.zeroEnable[n]=!1:"zeroline"in r&&(t.zeroEnable[n]=r.zeroline),"zerolinecolor"in r&&(t.zeroLineColor[n]=s(r.zerolinecolor)),"zerolinewidth"in r&&(t.zeroLineWidth[n]=r.zerolinewidth),"ticks"in r&&!!r.ticks?t.lineTickEnable[n]=!0:t.lineTickEnable[n]=!1,"ticklen"in r&&(t.lineTickLength[n]=t._defaultLineTickLength[n]=r.ticklen),"tickcolor"in r&&(t.lineTickColor[n]=s(r.tickcolor)),"tickwidth"in r&&(t.lineTickWidth[n]=r.tickwidth),"tickangle"in r&&(t.tickAngle[n]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180),"showticklabels"in r&&(t.tickEnable[n]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(t.tickColor[n]=s(r.tickfont.color)),r.tickfont.family&&(t.tickFont[n]=r.tickfont.family),r.tickfont.size&&(t.tickSize[n]=r.tickfont.size)),"mirror"in r?["ticks","all","allticks"].indexOf(r.mirror)!==-1?(t.lineTickMirror[n]=!0,t.lineMirror[n]=!0):r.mirror===!0?(t.lineTickMirror[n]=!1,t.lineMirror[n]=!0):(t.lineTickMirror[n]=!1,t.lineMirror[n]=!1):t.lineMirror[n]=!1,"showbackground"in r&&r.showbackground!==!1?(t.backgroundEnable[n]=!0,t.backgroundColor[n]=s(r.backgroundcolor)):t.backgroundEnable[n]=!1}},t.exports=l},{"../../../lib/html2unicode":380,"../../../lib/str2rgbarray":392,arraytools:49}],444:[function(e,t,n){"use strict";function u(e,t,n,i){var u=n("bgcolor"),a=r.combine(u,i.paper_bgcolor),f=Object.keys(s.camera);for(var l=0;l<f.length;l++)n("camera."+f[l]+".x"),n("camera."+f[l]+".y"),n("camera."+f[l]+".z");var c=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),h=c?"manual":"auto",p=n("aspectmode",h);c||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},p==="manual"&&(t.aspectmode="auto")),o(e,t,{font:i.font,scene:i.id,data:i.fullData,bgColor:a}),n("dragmode",i.getDfltFromLayout("dragmode")),n("hovermode",i.getDfltFromLayout("hovermode"))}var r=e("../../../components/color"),i=e("../../subplot_defaults"),s=e("./layout_attributes"),o=e("./axis_defaults");t.exports=function(t,n,r){function a(e){if(o)return;var n=s[e].values.indexOf(t[e])!==-1;if(n)return t[e]}var o=n._has("cartesian")||n._has("geo")||n._has("gl2d")||n._has("pie")||n._has("ternary");i(t,n,r,{type:"gl3d",attributes:s,handleDefaults:u,font:n.font,fullData:r,getDfltFromLayout:a,paper_bgcolor:n.paper_bgcolor})}},{"../../../components/color":303,"../../subplot_defaults":458,"./axis_defaults":442,"./layout_attributes":445}],445:[function(e,t,n){"use strict";function s(e,t,n){return{x:{valType:"number",dflt:e},y:{valType:"number",dflt:t},z:{valType:"number",dflt:n}}}var r=e("./axis_attributes"),i=e("../../../lib/extend").extendFlat;t.exports={bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},camera:{up:i(s(0,0,1),{}),center:i(s(0,0,0),{}),eye:i(s(1.25,1.25,1.25),{})},domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto"},aspectratio:{x:{valType:"number",min:0},y:{valType:"number",min:0},z:{valType:"number",min:0}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan"],dflt:"turntable"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest"},_deprecated:{cameraposition:{valType:"info_array"}}}},{"../../../lib/extend":376,"./axis_attributes":441}],446:[function(e,t,n){"use strict";function s(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function u(e){var t=new s;return t.merge(e),t}var r=e("../../../lib/str2rgbarray"),i=["xaxis","yaxis","zaxis"],o=s.prototype;o.merge=function(e){for(var t=0;t<3;++t){var n=e[i[t]];this.enabled[t]=n.showspikes,this.colors[t]=r(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness}},t.exports=u},{"../../../lib/str2rgbarray":392}],447:[function(e,t,n){"use strict";function u(e){var t=new Array(3);for(var n=0;n<3;++n){var r=e[n],i=new Array(r.length);for(var s=0;s<r.length;++s)i[s]=r[s].x;t[n]=i}return t}function a(e){var t=e.axesOptions,n=e.glplot.axesPixels,a=e.fullSceneLayout,f=[[],[],[]];for(var l=0;l<3;++l){var c=a[s[l]];c._length=(n[l].hi-n[l].lo)*n[l].pixelsPerDataUnit/e.dataScale[l];if(Math.abs(c._length)===Infinity)f[l]=[];else{c.range[0]=n[l].lo/e.dataScale[l],c.range[1]=n[l].hi/e.dataScale[l],c._m=1/(e.dataScale[l]*n[l].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var h=c.tickmode;if(c.tickmode==="auto"){c.tickmode="linear";var p=c.nticks||r.Lib.constrain(c._length/40,4,9);r.Axes.autoTicks(c,Math.abs(c.range[1]-c.range[0])/p)}var d=r.Axes.calcTicks(c);for(var v=0;v<d.length;++v)d[v].x=d[v].x*e.dataScale[l],d[v].text=i(d[v].text);f[l]=d,c.tickmode=h}}t.ticks=f;for(var l=0;l<3;++l){o[l]=.5*(e.glplot.bounds[0][l]+e.glplot.bounds[1][l]);for(var v=0;v<2;++v)t.bounds[v][l]=e.glplot.bounds[v][l]}e.contourLevels=u(f)}t.exports=a;var r=e("../../../plotly"),i=e("../../../lib/html2unicode"),s=["xaxis","yaxis","zaxis"],o=[0,0,0]},{"../../../lib/html2unicode":380,"../../../plotly":400}],448:[function(e,t,n){"use strict";function r(e,t){var n=[0,0,0,0],r,i;for(r=0;r<4;++r)for(i=0;i<4;++i)n[i]+=e[4*r+i]*t[r];return n}function i(e,t){var n=r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])));return n}t.exports=i},{}],449:[function(e,t,n){"use strict";function y(e){function p(t,n){if(typeof n=="string")return n;var r=e.fullSceneLayout[t];return o.tickText(r,r.c2l(n),"hover").text}var t,n=e.svgContainer,r=e.container.getBoundingClientRect(),i=r.width,s=r.height;n.setAttributeNS(null,"viewBox","0 0 "+i+" "+s),n.setAttributeNS(null,"width",i),n.setAttributeNS(null,"height",s),v(e),e.glplot.axes.update(e.axesOptions);var a=Object.keys(e.traces),f=null,l=e.glplot.selection;for(var h=0;h<a.length;++h)t=e.traces[a[h]],t.handlePick(l)&&(f=t),t.setContourLevels&&t.setContourLevels();var d;if(f!==null){var m=c(e.glplot.cameraParams,l.dataCoordinate);t=f.data;var g=t.hoverinfo,y=p("xaxis",l.traceCoordinate[0]),b=p("yaxis",l.traceCoordinate[1]),w=p("zaxis",l.traceCoordinate[2]);if(g!=="all"){var E=g.split("+");E.indexOf("x")===-1&&(y=undefined),E.indexOf("y")===-1&&(b=undefined),E.indexOf("z")===-1&&(w=undefined),E.indexOf("text")===-1&&(l.textLabel=undefined),E.indexOf("name")===-1&&(f.name=undefined)}e.fullSceneLayout.hovermode&&u.loneHover({x:(.5+.5*m[0]/m[3])*i,y:(.5-.5*m[1]/m[3])*s,xLabel:y,yLabel:b,zLabel:w,text:l.textLabel,name:f.name,color:f.color},{container:n});var S={points:[{x:y,y:b,z:w,data:t._input,fullData:t,curveNumber:t.index,pointNumber:l.data.index}]};l.buttons&&l.distance<5?e.graphDiv.emit("plotly_click",S):e.graphDiv.emit("plotly_hover",S),d=S}else u.loneUnhover(n),e.graphDiv.emit("plotly_unhover",d)}function b(e,t,n,i){var s={canvas:n,gl:i,container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(e.staticMode){if(!g){m=document.createElement("canvas");try{g=m.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0})}catch(o){throw new Error("error creating static canvas/context for image server")}}s.pixelRatio=e.pixelRatio,s.gl=g,s.canvas=m}try{e.glplot=r(s)}catch(o){f(e)}var u=function(e){var t={};t[e.id]=C(e.camera),e.saveCamera(e.graphDiv.layout),e.graphDiv.emit("plotly_relayout",t)};e.glplot.canvas.addEventListener("mouseup",u.bind(null,e)),e.glplot.canvas.addEventListener("wheel",u.bind(null,e)),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(e){console.log("lost context"),e.preventDefault()});if(!e.camera){var a=e.fullSceneLayout.camera;e.camera=l(e.container,{center:[a.center.x,a.center.y,a.center.z],eye:[a.eye.x,a.eye.y,a.eye.z],up:[a.up.x,a.up.y,a.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return e.glplot.mouseListener.enabled=!1,e.glplot.camera=e.camera,e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=y.bind(null,e),e.traces={},!0}function w(e,t){var n=document.createElement("div"),r=e.container;this.graphDiv=e.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",n.appendChild(i),this.svgContainer=i,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(t[this.id]),this.spikeOptions=d(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]];if(!b(this,t))return}function x(e,t,n,r){var i;for(var s=0;s<t.length;++s)if(Array.isArray(t[s]))for(var o=0;o<t[s].length;++o)i=e.d2l(t[s][o]),!isNaN(i)&&isFinite(i)&&(r[0][n]=Math.min(r[0][n],i),r[1][n]=Math.max(r[1][n],i));else i=e.d2l(t[s]),!isNaN(i)&&isFinite(i)&&(r[0][n]=Math.min(r[0][n],i),r[1][n]=Math.max(r[1][n],i))}function T(e,t,n){var r=e.fullSceneLayout;x(r.xaxis,t.x,0,n),x(r.yaxis,t.y,1,n),x(r.zaxis,t.z,2,n)}function N(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function C(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]}}}var r=e("gl-plot3d"),i=e("../../lib"),s=e("../../plots/plots"),o=e("../../plots/cartesian/axes"),u=e("../../plots/cartesian/graph_interact"),a=e("../../lib/str2rgbarray"),f=e("../../lib/show_no_webgl_msg"),l=e("./camera"),c=e("./project"),h=e("./set_convert"),p=e("./layout/convert"),d=e("./layout/spikes"),v=e("./layout/tick_marks"),m,g,E=w.prototype;E.recoverContext=function(){function r(){if(t.isContextLost()){requestAnimationFrame(r);return}if(!b(e,e.fullLayout,n,t)){console.error("catastrophic/unrecoverable webgl error.  context lost.");return}e.plot.apply(e,e.plotArgs)}var e=this,t=this.glplot.gl,n=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(r)};var S=["xaxis","yaxis","zaxis"];E.plot=function(e,t,n){this.plotArgs=[e,t,n];if(this.glplot.contextLost)return;var r,i,o,u,f,l,c=t[this.id],p=n[this.id];c.bgcolor?this.glplot.clearColor=a(c.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullSceneLayout=c,this.glplotLayout=c,this.axesOptions.merge(c),this.spikeOptions.merge(c),this.updateFx(c.dragmode,c.hovermode),this.glplot.update({});for(o=0;o<3;++o)f=c[S[o]],h(f);e?Array.isArray(e)||(e=[e]):e=[];var d=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(o=0;o<e.length;++o){r=e[o];if(r.visible!==!0)continue;T(this,r,d)}var v=[1,1,1];for(u=0;u<3;++u)d[0][u]>d[1][u]?v[u]=1:d[1][u]===d[0][u]?v[u]=1:v[u]=1/(d[1][u]-d[0][u]);this.dataScale=v;for(o=0;o<e.length;++o){r=e[o];if(r.visible!==!0)continue;i=this.traces[r.uid];if(i)i.update(r);else{var m=s.getModule(r.type);i=m.plot(this,r),this.traces[r.uid]=i}i.name=r.name}var g=Object.keys(this.traces);e:for(o=0;o<g.length;++o){for(u=0;u<e.length;++u)if(e[u].uid===g[o]&&e[u].visible===!0)continue e;i=this.traces[g[o]],i.dispose(),delete this.traces[g[o]]}var y=[[0,0,0],[0,0,0]],b=[],w={};for(o=0;o<3;++o){f=c[S[o]],l=f.type,l in w?(w[l].acc*=v[o],w[l].count+=1):w[l]={acc:v[o],count:1};if(f.autorange){y[0][o]=Infinity,y[1][o]=-Infinity;for(u=0;u<this.glplot.objects.length;++u){var E=this.glplot.objects[u].bounds;y[0][o]=Math.min(y[0][o],E[0][o]/v[o]),y[1][o]=Math.max(y[1][o],E[1][o]/v[o])}"rangemode"in f&&f.rangemode==="tozero"&&(y[0][o]=Math.min(y[0][o],0),y[1][o]=Math.max(y[1][o],0));if(y[0][o]>y[1][o])y[0][o]=-1,y[1][o]=1;else{var x=y[1][o]-y[0][o];y[0][o]-=x/32,y[1][o]+=x/32}}else{var N=c[S[o]].range;y[0][o]=N[0],y[1][o]=N[1]}y[0][o]===y[1][o]&&(y[0][o]-=1,y[1][o]+=1),b[o]=y[1][o]-y[0][o],this.glplot.bounds[0][o]=y[0][o]*v[o],this.glplot.bounds[1][o]=y[1][o]*v[o]}var C=[1,1,1];for(o=0;o<3;++o){f=c[S[o]],l=f.type;var k=w[l];C[o]=Math.pow(k.acc,1/k.count)/v[o]}var L=4,A;if(c.aspectmode==="auto")Math.max.apply(null,C)/Math.min.apply(null,C)<=L?A=C:A=[1,1,1];else if(c.aspectmode==="cube")A=[1,1,1];else if(c.aspectmode==="data")A=C;else{if(c.aspectmode!=="manual")throw new Error("scene.js aspectRatio was not one of the enumerated types");var O=c.aspectratio;A=[O.x,O.y,O.z]}c.aspectratio.x=p.aspectratio.x=A[0],c.aspectratio.y=p.aspectratio.y=A[1],c.aspectratio.z=p.aspectratio.z=A[2],this.glplot.aspect=A;var M=c.domain||null,_=t._size||null;if(M&&_){var D=this.container.style;D.position="absolute",D.left=_.l+M.x[0]*_.w+"px",D.top=_.t+(1-M.y[1])*_.h+"px",D.width=_.w*(M.x[1]-M.x[0])+"px",D.height=_.h*(M.y[1]-M.y[0])+"px"}this.glplot.redraw()},E.destroy=function(){this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null},E.setCameraToDefault=function(){this.setCamera({eye:{x:1.25,y:1.25,z:1.25},center:{x:0,y:0,z:0},up:{x:0,y:0,z:1}})},E.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),C(this.glplot.camera)},E.setCamera=function(t){var n={};n[this.id]=t,this.glplot.camera.lookAt.apply(this,N(t)),this.graphDiv.emit("plotly_relayout",n)},E.saveCamera=function(t){function u(e,t,n,r){var i=["up","center","eye"],s=["x","y","z"];return t[i[n]]&&e[i[n]][s[r]]===t[i[n]][s[r]]}var n=this.getCamera(),r=i.nestedProperty(t,this.id+".camera"),s=r.get(),o=!1;if(s===undefined)o=!0;else for(var a=0;a<3;a++)for(var f=0;f<3;f++)if(!u(n,s,a,f)){o=!0;break}return o&&r.set(n),o},E.updateFx=function(e,t){var n=this.camera;n&&(e==="orbit"?(n.mode="orbit",n.keyBindingMode="rotate"):e==="turntable"?(n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate"):n.keyBindingMode=e),this.fullSceneLayout.hovermode=t},E.toImage=function(e){e||(e="png"),this.staticMode&&this.container.appendChild(m),this.glplot.redraw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var s=0,o=r-1;s<o;++s,--o)for(var u=0;u<n;++u)for(var a=0;a<4;++a){var f=i[4*(n*s+u)+a];i[4*(n*s+u)+a]=i[4*(n*o+u)+a],i[4*(n*o+u)+a]=f}var l=document.createElement("canvas");l.width=n,l.height=r;var c=l.getContext("2d"),h=c.createImageData(n,r);h.data.set(i),c.putImageData(h,0,0);var p;switch(e){case"jpeg":p=l.toDataURL("image/jpeg");break;case"webp":p=l.toDataURL("image/webp");break;default:p=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(m),p},t.exports=w},{"../../lib":381,"../../lib/show_no_webgl_msg":390,"../../lib/str2rgbarray":392,"../../plots/cartesian/axes":403,"../../plots/cartesian/graph_interact":410,"../../plots/plots":452,"./camera":438,"./layout/convert":443,"./layout/spikes":446,"./layout/tick_marks":447,"./project":448,"./set_convert":450,"gl-plot3d":142}],450:[function(e,t,n){"use strict";var r=e("../cartesian/axes"),i=function(){};t.exports=function(t){r.setConvert(t),t.setScale=i}},{"../cartesian/axes":403}],451:[function(e,t,n){"use strict";var r=e("../plotly"),i=e("./font_attributes"),s=e("../components/color/attributes"),o=r.Lib.extendFlat;t.exports={font:{family:o({},i.family,{dflt:'"Open Sans", verdana, arial, sans-serif'}),size:o({},i.size,{dflt:12}),color:o({},i.color,{dflt:s.defaultLine})},title:{valType:"string",dflt:"Click to enter Plot title"},titlefont:o({},i,{}),autosize:{valType:"enumerated",values:[!0,!1,"initial"]},width:{valType:"number",min:10,dflt:700},height:{valType:"number",min:10,dflt:450},margin:{l:{valType:"number",min:0,dflt:80},r:{valType:"number",min:0,dflt:80},t:{valType:"number",min:0,dflt:100},b:{valType:"number",min:0,dflt:80},pad:{valType:"number",min:0,dflt:0},autoexpand:{valType:"boolean",dflt:!0}},paper_bgcolor:{valType:"color",dflt:s.background},plot_bgcolor:{valType:"color",dflt:s.background},separators:{valType:"string",dflt:".,"},hidesources:{valType:"boolean",dflt:!1},smith:{valType:"enumerated",values:[!1],dflt:!1},showlegend:{valType:"boolean"},_composedModules:{"*":"Fx"},_nestedModules:{xaxis:"Axes",yaxis:"Axes",scene:"gl3d",geo:"geo",legend:"Legend",annotations:"Annotations",shapes:"Shapes",images:"Images",ternary:"ternary"}}},{"../components/color/attributes":302,"../plotly":400,"./font_attributes":421}],452:[function(e,t,n){"use strict";function p(e){return typeof e=="object"&&(e=e.type),e}function d(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){a.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}function v(e,t){var n=Object.keys(t),r;for(var i=0;i<n.length;++i){var s=n[i];if(s.charAt(0)==="_"||typeof t[s]=="function"){if(s in e)continue;e[s]=t[s]}else if(Array.isArray(t[s])&&Array.isArray(e[s])&&t[s].length&&o.isPlainObject(t[s][0])){if(t[s].length!==e[s].length)throw new Error("relinkPrivateKeys needs equal length arrays");for(r=0;r<t[s].length;r++)v(e[s][r],t[s][r])}else o.isPlainObject(t[s])&&o.isPlainObject(e[s])&&(v(e[s],t[s]),Object.keys(e[s]).length||delete e[s])}}var r=e("d3"),i=e("fast-isnumeric"),s=e("../plotly"),o=e("../lib"),u=e("../components/color"),a=t.exports={},f=a.modules={},l=a.allTypes=[],c=a.allCategories={},h=a.subplotsRegistry={};a.attributes=e("./attributes"),a.attributes.type.values=l,a.fontAttrs=e("./font_attributes"),a.layoutAttributes=e("./layout_attributes"),a.fontWeight="normal",a.register=function(e,t,n,r){if(f[t]){console.log("type "+t+" already registered");return}var i={};for(var s=0;s<n.length;s++)i[n[s]]=!0,c[n[s]]=!0;f[t]={_module:e,categories:i},r&&Object.keys(r).length&&(f[t].meta=r),l.push(t)},a.getModule=function(e){if(e.r!==undefined)return console.log("Oops, tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",e),!1;var t=f[p(e)];return t?t._module:!1},a.traceIs=function(t,n){t=p(t);if(t==="various")return!1;var r=f[t];return r||(t!==undefined&&console.warn("unrecognized trace type "+t),r=f[
a.attributes.type.dflt]),!!r.categories[n]},a.registerSubplot=function(e){var t=e.name;if(h[t]){console.log("plot type "+t+" already registered");return}h[t]=e},a.findSubplotIds=function(t,n){var r=[];if(a.subplotsRegistry[n]===undefined)return r;var i=a.subplotsRegistry[n].attr;for(var s=0;s<t.length;s++){var o=t[s];a.traceIs(o,n)&&r.indexOf(o[i])===-1&&r.push(o[i])}return r},a.getSubplotIds=function(t,n){var r=a.subplotsRegistry[n];if(r===undefined)return[];if(n==="cartesian"&&(!t._has||!t._has("cartesian")))return[];if(n==="gl2d"&&(!t._has||!t._has("gl2d")))return[];if(n==="cartesian"||n==="gl2d")return Object.keys(t._plots);var i=r.idRegex,s=Object.keys(t),o=[];for(var u=0;u<s.length;u++){var f=s[u];i.test(f)&&o.push(f)}var l=r.idRoot.length;return o.sort(function(e,t){var n=+(e.substr(l)||1),r=+(t.substr(l)||1);return n-r}),o},a.getSubplotData=function(t,n,r){if(a.subplotsRegistry[n]===undefined)return[];var i=a.subplotsRegistry[n].attr,o=[],u;for(var f=0;f<t.length;f++){u=t[f];if(n==="gl2d"&&a.traceIs(u,"gl2d")){var l=s.Axes.subplotMatch,c="x"+r.match(l)[1],h="y"+r.match(l)[2];u[i[0]]===c&&u[i[1]]===h&&o.push(u)}else u[i]===r&&o.push(u)}return o},a.redrawText=function(e){if(e.data&&e.data[0]&&e.data[0].r)return;return new Promise(function(t){setTimeout(function(){s.Annotations.drawAll(e),s.Legend.draw(e),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),t(a.previousPromises(e))},300)})},a.resize=function(e){return new Promise(function(t,n){(!e||r.select(e).style("display")==="none")&&n(new Error("Resize must be passed a plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){if((e._fullLayout||{}).autosize){var n=e.changed;e.autoplay=!0,s.relayout(e,{autosize:!0}),e.changed=n,t(e)}},100)})},a.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},a.addLinks=function(e){var t=e._fullLayout,n=t._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:u.defaultLine,"pointer-events":"all"}).each(function(){var e=r.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var i=n.node(),s={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(s["text-anchor"]="start",s.x=5):(s["text-anchor"]="end",s.x=t._paper.attr("width")-7),n.attr(s);var o=n.select(".js-link-to-tool"),a=n.select(".js-link-spacer"),f=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&d(e,o),a.text(o.text()&&f.text()?" - ":"")},a.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=r.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),s=i.append("input").attr({type:"text",name:"data"});return s.node().value=a.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1},a.supplyDefaults=function(e){var t=e._fullLayout||{},n=e._fullLayout={},r=e.layout||{},i=e._fullData||[],u=e._fullData=[],f=e.data||[],l=n._modules=[],c=n._basePlotModules=[],h,p;a.supplyLayoutGlobalDefaults(r,n),n._dataLength=f.length;for(h=0;h<f.length;h++){var d=a.supplyDataDefaults(f[h],h,n);u.push(d);if("r"in f[h])continue;p=d._module;if(!p)continue;o.pushUnique(l,p),o.pushUnique(c,d._module.basePlotModule)}n._has=a._hasPlotType.bind(n);for(h=0;h<l.length;h++)p=l[h],p.cleanData&&p.cleanData(u);if(i.length===f.length)for(h=0;h<u.length;h++)v(u[h],i[h]);a.supplyLayoutModuleDefaults(r,n,u),n._hasCartesian=n._has("cartesian"),n._hasGeo=n._has("geo"),n._hasGL3D=n._has("gl3d"),n._hasGL2D=n._has("gl2d"),n._hasTernary=n._has("ternary"),n._hasPie=n._has("pie"),a.cleanPlot(u,n,i,t),v(n,t),a.doAutoMargin(e);var m=s.Axes.list(e);for(h=0;h<m.length;h++){var g=m[h];g._gd=e,g.setScale()}if((e.calcdata||[]).length===u.length)for(h=0;h<u.length;h++){var y=u[h];(e.calcdata[h][0]||{}).trace=y}},a._hasPlotType=function(e){var t=this._basePlotModules||[];for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e)return!0}return!1},a.cleanPlot=function(e,t,n,r){var i,s,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var u=o[i];u.clean&&u.clean(e,t,n,r)}var a=!!r._paper,f=!!r._infolayer;e:for(i=0;i<n.length;i++){var l=n[i],c=l.uid;for(s=0;s<e.length;s++){var h=e[s];if(c===h.uid)continue e}a&&r._paper.selectAll(".hm"+c+",.contour"+c+",#clip"+c).remove(),f&&r._infolayer.selectAll(".cb"+c).remove()}},a.supplyDataDefaults=function(e,t,n){function s(t,n){return o.coerce(e,r,a.attributes,t,n)}function f(t,n){if(!a.traceIs(r,t))return;return o.coerce(e,r,a.subplotsRegistry[t].attributes,n)}var r={},i=u.defaults[t%u.defaults.length];r.index=t;var l=s("visible"),c,h;s("type"),s("uid"),f("gl3d","scene"),f("geo","geo"),f("ternary","subplot");if(l||c)h=a.getModule(r),r._module=h;return l&&s("hoverinfo",n._dataLength===1?"x+y+z+text":undefined),h&&l&&h.supplyDefaults(e,r,i,n),l&&(s("name","trace "+t),a.traceIs(r,"noOpacity")||s("opacity"),f("cartesian","xaxis"),f("cartesian","yaxis"),f("gl2d","xaxis"),f("gl2d","yaxis"),a.traceIs(r,"showLegend")&&(s("showlegend"),s("legendgroup"))),r._input=e,r},a.supplyLayoutGlobalDefaults=function(e,t){function n(n,r){return o.coerce(e,t,a.layoutAttributes,n,r)}var r=o.coerceFont(n,"font");n("title"),o.coerceFont(n,"titlefont",{family:r.family,size:Math.round(r.size*1.4),color:r.color});var i=n("autosize",e.width&&e.height?!1:"initial");n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),i!=="initial"&&a.sanitizeMargins(t),n("paper_bgcolor"),n("separators"),n("hidesources"),n("smith")},a.supplyLayoutModuleDefaults=function(e,t,n){var r,i;s.Axes.supplyLayoutDefaults(e,t,n);var o=t._basePlotModules;for(r=0;r<o.length;r++){i=o[r];if(i.name==="cartesian")continue;i.supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n)}var u=t._modules;for(r=0;r<u.length;r++)i=u[r],i.supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);var a=["Fx","Annotations","Shapes","Legend","Images"];for(r=0;r<a.length;r++)i=a[r],s[i]&&s[i].supplyLayoutDefaults(e,t,n)},a.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==undefined&&t._glcontainer.remove(),t._geocontainer!==undefined&&t._geocontainer.remove(),t._modeBar&&t._modeBar.destroy(),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._tester,delete e._testref,delete e._promises,delete e._redrawTimer,delete e._replotting,delete e.firstscatter,delete e.hmlumcount,delete e.hmpixcount,delete e.numboxes,delete e._hoverTimer,delete e._lastHoverTime,e.removeAllListeners&&e.removeAllListeners()},a.style=function(e){var t=e._fullLayout._modules;for(var n=0;n<t.length;n++){var r=t[n];r.style&&r.style(e)}},a.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width,n=e.height,r=e.margin,i=t-(r.l+r.r),s=n-(r.t+r.b),o;i<0&&(o=(t-1)/(r.l+r.r),r.l=Math.floor(o*r.l),r.r=Math.floor(o*r.r)),s<0&&(o=(n-1)/(r.t+r.b),r.t=Math.floor(o*r.t),r.b=Math.floor(o*r.b))},a.autoMargin=function(e,t,n){var r=e._fullLayout;r._pushmargin||(r._pushmargin={});if(r.margin.autoexpand!==!1){if(!n)delete r._pushmargin[t];else{var i=n.pad===undefined?12:n.pad;n.l+n.r>r.width*.5&&(n.l=n.r=0),n.b+n.t>r.height*.5&&(n.b=n.t=0),r._pushmargin[t]={l:{val:n.x,size:n.l+i},r:{val:n.x,size:n.r+i},b:{val:n.y,size:n.b+i},t:{val:n.y,size:n.t+i}}}e._replotting||a.doAutoMargin(e)}},a.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),t._pushmargin||(t._pushmargin={});var n=t._size,r=JSON.stringify(n),o=Math.max(t.margin.l||0,0),u=Math.max(t.margin.r||0,0),a=Math.max(t.margin.t||0,0),f=Math.max(t.margin.b||0,0),l=t._pushmargin;t.margin.autoexpand!==!1&&(l.base={l:{val:0,size:o},r:{val:1,size:u},t:{val:1,size:a},b:{val:0,size:f}},Object.keys(l).forEach(function(e){var n=l[e].l||{},r=l[e].b||{},s=n.val,c=n.size,h=r.val,p=r.size;Object.keys(l).forEach(function(e){if(i(c)&&l[e].r){var n=l[e].r.val,r=l[e].r.size;if(n>s){var d=(c*n+(r-t.width)*s)/(n-s),v=(r*(1-s)+(c-t.width)*(1-n))/(n-s);d>=0&&v>=0&&d+v>o+u&&(o=d,u=v)}}if(i(p)&&l[e].t){var m=l[e].t.val,g=l[e].t.size;if(m>h){var y=(p*m+(g-t.height)*h)/(m-h),b=(g*(1-h)+(p-t.height)*(1-m))/(m-h);y>=0&&b>=0&&y+b>f+a&&(f=y,a=b)}}})})),n.l=Math.round(o),n.r=Math.round(u),n.t=Math.round(a),n.b=Math.round(f),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b;if(!e._replotting&&r!=="{}"&&r!==JSON.stringify(t._size))return s.plot(e)},a.graphJson=function(e,t,n,r,i){function f(e){if(typeof e=="function")return null;if(o.isPlainObject(e)){var t={},r,i;for(r in e){if(typeof e[r]=="function"||["_","["].indexOf(r.charAt(0))!==-1)continue;if(n==="keepdata"){if(r.substr(r.length-3)==="src")continue}else if(n==="keepstream"){i=e[r+"src"];if(typeof i=="string"&&i.indexOf(":")>0&&!o.isPlainObject(e.stream))continue}else if(n!=="keepall"){i=e[r+"src"];if(typeof i=="string"&&i.indexOf(":")>0)continue}t[r]=f(e[r])}return t}return Array.isArray(e)?e.map(f):e&&e.getTime?o.ms2DateTime(e):e}(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&a.supplyDefaults(e);var s=i?e._fullData:e.data,u=i?e._fullLayout:e.layout,l={data:(s||[]).map(function(e){var n=f(e);return t&&delete n.fit,n})};return t||(l.layout=f(u)),e.framework&&e.framework.isPolar&&(l=e.framework.getConfig()),r==="object"?l:JSON.stringify(l)}},{"../components/color":303,"../lib":381,"../plotly":400,"./attributes":401,"./font_attributes":421,"./layout_attributes":451,d3:72,"fast-isnumeric":76}],453:[function(e,t,n){"use strict";var r=e("../../traces/scatter/attributes"),i=r.marker;t.exports={r:r.r,t:r.t,marker:{color:i.color,size:i.size,symbol:i.symbol,opacity:i.opacity}}},{"../../traces/scatter/attributes":554}],454:[function(e,t,n){"use strict";function o(e,t){var n={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return i({},t,n)}var r=e("../cartesian/layout_attributes"),i=e("../../lib/extend").extendFlat,s=i({},r.domain,{});t.exports={radialaxis:o("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:o("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}}},{"../../lib/extend":376,"../cartesian/layout_attributes":412}],455:[function(e,t,n){var r=e("../../plotly"),i=e("d3"),s=t.exports={version:"0.2.2",manager:e("./micropolar_manager")},o=r.Lib.extendDeepAll;s.Axis=function(){function p(e){a=e||a;var n=t.data,f=t.layout;if(typeof a=="string"||a.nodeName)a=i.select(a);return a.datum(n).each(function(e,t){function K(e,t){return c(e)%360+f.orientation}var n=e.slice();r={data:s.util.cloneJson(n),layout:s.util.cloneJson(f)};var a=0;n.forEach(function(e,t){e.color||(e.color=f.defaultColorRange[a],a=(a+1)%f.defaultColorRange.length),e.strokeColor||(e.strokeColor=e.geometry==="LinePlot"?e.color:i.rgb(e.color).darker().toString()),r.data[t].color=e.color,r.data[t].strokeColor=e.strokeColor,r.data[t].strokeDash=e.strokeDash,r.data[t].strokeSize=e.strokeSize});var h=n.filter(function(e,t){var n=e.visible;return typeof n=="undefined"||n===!0}),p=!1,d=h.map(function(e,t){return p=p||typeof e.groupId!="undefined",e});if(p){var v=i.nest().key(function(e,t){return typeof e.groupId!="undefined"?e.groupId:"unstacked"}).entries(d),m=[],g=v.map(function(e,t){if(e.key==="unstacked")return e.values;var n=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,r){e.yStack=[n],m.push(n),n=s.util.sumArrays(e.r,n)}),e.values});h=i.merge(g)}h.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var y=Math.min(f.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;y=Math.max(10,y);var b=[f.margin.left+y,f.margin.top+y],w;if(p){var E=i.max(s.util.sumArrays(s.util.arrayLast(h).r[0],s.util.arrayLast(m)));w=[0,E]}else w=i.extent(s.util.flattenArray(h.map(function(e,t){return e.r})));f.radialAxis.domain!=s.DATAEXTENT&&(w[0]=0),l=i.scale.linear().domain(f.radialAxis.domain!=s.DATAEXTENT&&f.radialAxis.domain?f.radialAxis.domain:w).range([0,y]),r.layout.radialAxis.domain=l.domain();var S=s.util.flattenArray(h.map(function(e,t){return e.t})),x=typeof S[0]=="string",T;x&&(S=s.util.deduplicate(S),T=S.slice(),S=i.range(S.length),h=h.map(function(e,t){var n=e;return e.t=[S],p&&(n.yStack=e.yStack),n}));var N=h.filter(function(e,t){return e.geometry==="LinePlot"||e.geometry==="DotPlot"}).length===h.length,C=f.needsEndSpacing===null?x||!N:f.needsEndSpacing,k=f.angularAxis.domain&&f.angularAxis.domain!=s.DATAEXTENT&&!x&&f.angularAxis.domain[0]>=0,L=k?f.angularAxis.domain:i.extent(S),A=Math.abs(S[1]-S[0]);N&&!x&&(A=0);var O=L.slice();C&&x&&(O[1]+=A);var M=f.angularAxis.ticksCount||4;M>8&&(M=M/(M/8)+M%8),f.angularAxis.ticksStep&&(M=(O[1]-O[0])/M);var _=f.angularAxis.ticksStep||(O[1]-O[0])/(M*(f.minorTicks+1));T&&(_=Math.max(Math.round(_),1)),O[2]||(O[2]=_);var D=i.range.apply(this,O);D=D.map(function(e,t){return parseFloat(e.toPrecision(12))}),c=i.scale.linear().domain(O.slice(0,2)).range(f.direction==="clockwise"?[0,360]:[360,0]),r.layout.angularAxis.domain=c.domain(),r.layout.angularAxis.endPadding=C?A:0,u=i.select(this).select("svg.chart-root");if(typeof u=="undefined"||u.empty()){var P="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",H=(new DOMParser).parseFromString(P,"application/xml"),B=this.appendChild(this.ownerDocument.importNode(H.documentElement,!0));u=i.select(B)}u.select(".guides-group").style({"pointer-events":"none"}),u.select(".angular.axis-group").style({"pointer-events":"none"}),u.select(".radial.axis-group").style({"pointer-events":"none"});var j=u.select(".chart-group"),F={fill:"none",stroke:f.tickColor},I={"font-size":f.font.size,"font-family":f.font.family,fill:f.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+f.font.outlineColor}).join(",")},q;if(f.showLegend){q=u.select(".legend-group").attr({transform:"translate("+[y,f.margin.top]+")"}).style({display:"block"});var R=h.map(function(e,t){var n=s.util.cloneJson(e);return n.symbol=e.geometry==="DotPlot"?e.dotType||"circle":e.geometry!="LinePlot"?"square":"line",n.visibleInLegend=typeof e.visibleInLegend=="undefined"||e.visibleInLegend,n.color=e.geometry==="LinePlot"?e.strokeColor:e.color,n});s.Legend().config({data:h.map(function(e,t){return e.name||"Element"+t}),legendConfig:o({},s.Legend.defaultConfig().legendConfig,{container:q,elements:R,reverseOrder:f.legend.reverseOrder})})();var U=q.node().getBBox();y=Math.min(f.width-U.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2,y=Math.max(10,y),b=[f.margin.left+y,f.margin.top+y],l.range([0,y]),r.layout.radialAxis.domain=l.domain(),q.attr("transform","translate("+[b[0]+y,b[1]-y]+")")}else q=u.select(".legend-group").style({display:"none"});u.attr({width:f.width,height:f.height}).style({opacity:f.opacity}),j.attr("transform","translate("+b+")").style({cursor:"crosshair"});var z=[(f.width-(f.margin.left+f.margin.right+y*2+(U?U.width:0)))/2,(f.height-(f.margin.top+f.margin.bottom+y*2))/2];z[0]=Math.max(0,z[0]),z[1]=Math.max(0,z[1]),u.select(".outer-group").attr("transform","translate("+z+")");if(f.title){var W=u.select("g.title-group text").style(I).text(f.title),X=W.node().getBBox();W.attr({x:b[0]-X.width/2,y:b[1]-y-20})}var V=u.select(".radial.axis-group");if(f.radialAxis.gridLinesVisible){var $=V.selectAll("circle.grid-circle").data(l.ticks(5));$.enter().append("circle").attr({"class":"grid-circle"}).style(F),$.attr("r",l),$.exit().remove()}V.select("circle.outside-circle").attr({r:y}).style(F);var J=u.select("circle.background-circle").attr({r:y}).style({fill:f.backgroundColor,stroke:f.stroke});if(f.radialAxis.visible){var Q=i.svg.axis().scale(l).ticks(5).tickSize(5);V.call(Q).attr({transform:"rotate("+f.radialAxis.orientation+")"}),V.selectAll(".domain").style(F),V.selectAll("g>text").text(function(e,t){return this.textContent+f.radialAxis.ticksSuffix}).style(I).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return f.radialAxis.tickOrientation==="horizontal"?"rotate("+ -f.radialAxis.orientation+") translate("+[0,I["font-size"]]+")":"translate("+[0,I["font-size"]]+")"}}),V.selectAll("g>line").style({stroke:"black"})}var G=u.select(".angular.axis-group").selectAll("g.angular-tick").data(D),Y=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(e,t){return"rotate("+K(e,t)+")"}}).style({display:f.angularAxis.visible?"block":"none"}),G.exit().remove(),Y.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(f.minorTicks+1)==0}).classed("minor",function(e,t){return t%(f.minorTicks+1)!=0}).style(F),Y.selectAll(".minor").style({stroke:f.minorTickColor}),G.select("line.grid-line").attr({x1:f.tickLength?y-f.tickLength:0,x2:y}).style({display:f.angularAxis.gridLinesVisible?"block":"none"}),Y.append("text").classed("axis-text",!0).style(I);var Z=G.select("text.axis-text").attr({x:y+f.labelOffset,dy:".35em",transform:function(e,t){var n=K(e,t),r=y+f.labelOffset,i=f.angularAxis.tickOrientation;return i=="horizontal"?"rotate("+ -n+" "+r+" 0)":i=="radial"?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:f.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(f.minorTicks+1)!=0?"":T?T[e]+f.angularAxis.ticksSuffix:e+f.angularAxis.ticksSuffix}).style(I);f.angularAxis.rewriteTicks&&Z.text(function(e,t){return t%(f.minorTicks+1)!=0?"":f.angularAxis.rewriteTicks(this.textContent,t)});var et=i.max(j.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));q.attr({transform:"translate("+[y+et,f.margin.top]+")"});var tt=u.select("g.geometry-group").selectAll("g").size()>0,nt=u.select("g.geometry-group").selectAll("g.geometry").data(h);nt.enter().append("g").attr({"class":function(e,t){return"geometry geometry"+t}}),nt.exit().remove();if(h[0]||tt){var rt=[];h.forEach(function(e,t){var n={};n.radialScale=l,n.angularScale=c,n.container=nt.filter(function(e,n){return n==t}),n.geometry=e.geometry,n.orientation=f.orientation,n.direction=f.direction,n.index=t,rt.push({data:e,geometryConfig:n})});var it=i.nest().key(function(e,t){return typeof e.data.groupId!="undefined"||"unstacked"}).entries(rt),st=[];it.forEach(function(e,t){e.key==="unstacked"?st=st.concat(e.values.map(function(e,t){return[e]})):st.push(e.values)}),st.forEach(function(e,t){var n;Array.isArray(e)?n=e[0].geometryConfig.geometry:n=e.geometryConfig.geometry;var r=e.map(function(e,t){return o(s[n].defaultConfig(),e)});s[n]().config(r)()})}var ot=u.select(".guides-group"),ut=u.select(".tooltips-group"),at=s.tooltipPanel().config({container:ut,fontSize:8})(),ft=s.tooltipPanel().config({container:ut,fontSize:8})(),lt=s.tooltipPanel().config({container:ut,hasTick:!0})(),ct,ht;if(!x){var pt=ot.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});j.on("mousemove.angular-guide",function(e,t){var n=s.util.getMousePos(J).angle;pt.attr({x2:-y,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-f.orientation)%360;ct=c.invert(r);var i=s.util.convertToCartesian(y+12,n+180);at.text(s.util.round(ct)).move([i[0]+b[0],i[1]+b[1]])}).on("mouseout.angular-guide",function(e,t){ot.select("line").style({opacity:0})})}var dt=ot.select("circle").style({stroke:"grey",fill:"none"});j.on("mousemove.radial-guide",function(e,t){var n=s.util.getMousePos(J).radius;dt.attr({r:n}).style({opacity:.5}),ht=l.invert(s.util.getMousePos(J).radius);var r=s.util.convertToCartesian(n,f.radialAxis.orientation);ft.text(s.util.round(ht)).move([r[0]+b[0],r[1]+b[1]])}).on("mouseout.radial-guide",function(e,t){dt.style({opacity:0}),lt.hide(),at.hide(),ft.hide()}),u.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,t){var n=i.select(this),r=n.style("fill"),o="black",a=n.style("opacity")||1;n.attr({"data-opacity":a});if(r!="none"){n.attr({"data-fill":r}),o=i.hsl(r).darker().toString(),n.style({fill:o,opacity:1});var f={t:s.util.round(e[0]),r:s.util.round(e[1])};x&&(f.t=T[e[0]]);var l="t: "+f.t+", r: "+f.r,c=this.getBoundingClientRect(),h=u.node().getBoundingClientRect(),p=[c.left+c.width/2-z[0]-h.left,c.top+c.height/2-z[1]-h.top];lt.config({color:o}).text(l),lt.move(p)}else r=n.style("stroke"),n.attr({"data-stroke":r}),o=i.hsl(r).darker().toString(),n.style({stroke:o,opacity:1})}).on("mousemove.tooltip",function(e,t){if(i.event.which!=0)return!1;i.select(this).attr("data-fill")&&lt.show()}).on("mouseout.tooltip",function(e,t){lt.hide();var n=i.select(this),r=n.attr("data-fill");r?n.style({fill:r,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})}),h}var t={data:[],layout:{}},n={},r={},u,a,f=i.dispatch("hover"),l,c,h={};return h.render=function(e){return p(e),this},h.config=function(e){if(!arguments.length)return t;var n=s.util.cloneJson(e);return n.data.forEach(function(e,n){t.data[n]||(t.data[n]={}),o(t.data[n],s.Axis.defaultConfig().data[0]),o(t.data[n],e)}),o(t.layout,s.Axis.defaultConfig().layout),o(t.layout,n.layout),this},h.getLiveConfig=function(){return r},h.getinputConfig=function(){return n},h.radialScale=function(e){return l},h.angularScale=function(e){return c},h.svg=function(){return u},i.rebind(h,f,"on"),h},s.Axis.defaultConfig=function(e,t){var n={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:i.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return n},s.util={},s.DATAEXTENT="dataExtent",s.AREA="AreaChart",s.LINE="LinePlot",s.DOT="DotPlot",s.BAR="BarChart",s.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},s.util._extend=function(e,t){for(var n in e)t[n]=e[n]},s.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)},s.util.dataFromEquation2=function(e,t){var n=t||6,r=i.range(0,360+n,n).map(function(t,n){var r=t*Math.PI/180,i=e(r);return[t,i]});return r},s.util.dataFromEquation=function(e,t,n){var r=t||6,s=[],o=[];i.range(0,360+r,r).forEach(function(t,n){var r=t*Math.PI/180,i=e(r);s.push(t),o.push(i)});var u={t:s,r:o};return n&&(u.name=n),u},s.util.ensureArray=function(e,t){if(typeof e=="undefined")return null;var n=[].concat(e);return i.range(t).map(function(e,t){return n[t]||n[0]})},s.util.fillArrays=function(e,t,n){return t.forEach(function(t,r){e[t]=s.util.ensureArray(e[t],n)}),e},s.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},s.util.validateKeys=function(e,t){typeof t=="string"&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},s.util.sumArrays=function(e,t){return i.zip(e,t).map(function(e,t){return i.sum(e)})},s.util.arrayLast=function(e){return e[e.length-1]},s.util.arrayEqual=function(e,t){var n=Math.max(e.length,t.length,1);while(n-->=0&&e[n]===t[n]);return n===-2},s.util.flattenArray=function(e){var t=[];while(!s.util.arrayEqual(t,e))t=e,e=[].concat.apply([],e);return e},s.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},s.util.convertToCartesian=function(e,t){var n=t*Math.PI/180,r=e*Math.cos(n),i=e*Math.sin(n);return[r,i]},s.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},s.util.getMousePos=function(e){var t=i.mouse(e.node()),n=t[0],r=t[1],s={};return s.x=n,s.y=r,s.pos=t,s.angle=(Math.atan2(r,n)+Math.PI)*180/Math.PI,s.radius=Math.sqrt(n*n+r*r),s},s.util.duplicatesCount=function(e){var t={},n,r={};for(var i=0,s=e.length;i<s;i++)n=e[i],n in t?(t[n]++,r[n]=t[n]):t[n]=1;return r},s.util.duplicates=function(e){return Object.keys(s.util.duplicatesCount(e))},s.util.translator=function(e,t,n,r){if(r){var i=n.slice();n=t,t=i}var s=t.reduce(function(e,t){if(typeof e!="undefined")return e[t]},e);if(typeof s=="undefined")return;t.reduce(function(e,n,r){if(typeof e=="undefined")return;return r===t.length-1&&delete e[n],e[n]},e),n.reduce(function(e,t,r){return typeof e[t]=="undefined"&&(e[t]={}),r===n.length-1&&(e[t]=s),e[t]},e)},s.PolyChart=function(){function a(){var e=t[0].geometryConfig,n=e.container;typeof n=="string"&&(n=i.select(n)),n.datum(t).each(function(t,n){function g(t,n){var r=e.radialScale(t[1]),i=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:r,t:i}}function y(e){var t=e.r*Math.cos(e.t),n=e.r*Math.sin(e.t);return{x:t,y:n}}var s=!!t[0].data.yStack,o=t.map(function(e,t){return s?i.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):i.zip(e.data.t[0],e.data.r[0])}),u=e.angularScale,a=e.radialScale.domain()[0],f={};f.bar=function(n,r,s){var o=t[s].data,a=e.radialScale(n[1])-e.radialScale(0),f=e.radialScale(n[2]||0),l=o.barWidth;i.select(this).attr({"class":"mark bar",d:"M"+[[a+f,-l/2],[a+f,l/2],[f,l/2],[f,-l/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+u(t[0]))+")"}})},f.dot=function(e,n,r){var s=e[2]?[e[0],e[1]+e[2]]:e,o=i.svg.symbol().size(t[r].data.dotSize).type(t[r].data.dotType)(e,n);i.select(this).attr({"class":"mark dot",d:o,transform:function(e,t){var n=y(g(s));return"translate("+[n.x,n.y]+")"}})};var l=i.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});f.line=function(n,r,s){var u=n[2]?o[s].map(function(e,t){return[e[0],e[1]+e[2]]}):o[s];i.select(this).each(f.dot).style({opacity:function(e,n){return+t[s].data.dotVisible},fill:d.stroke(n,r,s)}).attr({"class":"mark dot"});if(r>0)return;var a=i.select(this.parentNode).selectAll("path.line").data([0]);a.enter().insert("path"),a.attr({"class":"line",d:l(u),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return d.fill(n,r,s)},"fill-opacity":0,stroke:function(e,t){return d.stroke(n,r,s)},"stroke-width":function(e,t){return d["stroke-width"](n,r,s)},"stroke-dasharray":function(e,t){return d["stroke-dasharray"](n,r,s)},opacity:function(e,t){return d.opacity(n,r,s)},display:function(e,t){return d.display(n,r,s)}})};var c=e.angularScale.range(),h=Math.abs(c[1]-c[0])/o[0].length*Math.PI/180,p=i.svg.arc().startAngle(function(e){return-h/2}).endAngle(function(e){return h/2}).innerRadius(function(t){return e.radialScale(a+(t[2]||0))}).outerRadius(function(t){return e.radialScale(a+(t[2]||0))+e.radialScale(t[1])});f.arc=function(t,n,r){i.select(this).attr({"class":"mark arc",d:p,transform:function(t,n){return"rotate("+(e.orientation+u(t[0])+90)+")"}})};var d={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,n,i){return r[t[i].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return typeof t[r].data.visible=="undefined"||t[r].data.visible?"block":"none"}},v=i.select(this).selectAll("g.layer").data(o);v.enter().append("g").attr({"class":"layer"});var m=v.selectAll("path.mark").data(function(e,t){return e});m.enter().append("path").attr({"class":"mark"}),m.style(d).each(f[e.geometryType]),m.exit().remove(),v.exit().remove()})}var t=[s.PolyChart.defaultConfig()],n=i.dispatch("hover"),r={solid:"none",dash:[5,2],dot:[2,5]},u;return a.config=function(e){return arguments.length?(e.forEach(function(e,n){t[n]||(t[n]={}),o(t[n],s.PolyChart.defaultConfig()),o(t[n],e)}),this):t},a.getColorScale=function(){return u},i.rebind(a,n,"on"),a},s.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:i.scale.category20()}};return e},s.BarChart=function(){return s.PolyChart()},s.BarChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"bar"}};return e},s.AreaChart=function(){return s.PolyChart()},s.AreaChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"arc"}};return e},s.DotPlot=function(){return s.PolyChart()},s.DotPlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"dot",dotType:"circle"}};return e},s.LinePlot=function(){return s.PolyChart()},s.LinePlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"line"}};return e},s.Legend=function(){function r(){var e=t.legendConfig,n=t.data.map(function(t,n){return[].concat(t).map(function(t,r){var i=o({},e.elements[n]);return i.name=t,i.color=[].concat(e.elements[n].color)[r],i})}),s=i.merge(n);s=s.filter(function(t,n){return e.elements[n]&&(e.elements[n].visibleInLegend||typeof e.elements[n].visibleInLegend=="undefined")}),e.reverseOrder&&(s=s.reverse());var u=e.container;if(typeof u=="string"||u.nodeName)u=i.select(u);var a=s.map(function(e,t){return e.color}),f=e.fontSize,l=e.isContinuous==null?typeof s[0]=="number":e.isContinuous,c=l?e.height:f*s.length,h=u.classed("legend-group",!0),p=h.selectAll("svg").data([0]),d=p.enter().append("svg").attr({width:300,height:c+f,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});d.append("g").classed("legend-axis",!0),d.append("g").classed("legend-marks",!0);var v=i.range(s.length),m=i.scale[l?"linear":"ordinal"]().domain(v).range(a),g=i.scale[l?"linear":"ordinal"]().domain(v)[l?"range":"rangePoints"]([0,c]),y=function(e,t){var n=t*3;return e==="line"?"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z":i.svg.symbolTypes.indexOf(e)!=-1?i.svg.symbol().type(e).size(n)():i.svg.symbol().type("square").size(n)()};if(l){var b=p.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(a);b.enter().append("stop"),b.attr({offset:function(e,t){return t/(a.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),p.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var w=p.select(".legend-marks").selectAll("path.legend-mark").data(s);w.enter().append("path").classed("legend-mark",!0),w.attr({transform:function(e,t){return"translate("+[f/2,g(t)+f/2]+")"},d:function(e,t){var n=e.symbol;return y(n,f)},fill:function(e,t){return m(t)}}),w.exit().remove()}var E=i.svg.axis().scale(g).orient("right"),S=p.select("g.legend-axis").attr({transform:"translate("+[l?e.colorBandWidth:f,f/2]+")"}).call(E);return S.selectAll(".domain").style({fill:"none",stroke:"none"}),S.selectAll("line").style({fill:"none",stroke:l?e.textColor:"none"}),S.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(e,t){return s[t].name}),
r}var t=s.Legend.defaultConfig(),n=i.dispatch("hover");return r.config=function(e){return arguments.length?(o(t,e),this):t},i.rebind(r,n,"on"),r},s.Legend.defaultConfig=function(e,t){var n={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return n},s.tooltipPanel=function(){var e,t,n,r={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},u="tooltip-"+s.tooltipPanel.uid++,a=10,f=function(){e=r.container.selectAll("g."+u).data([0]);var i=e.enter().append("g").classed(u,!0).style({"pointer-events":"none",display:"none"});return n=i.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),t=i.append("text").attr({dx:r.padding+a,dy:+r.fontSize*.3}),f};return f.text=function(s){var o=i.hsl(r.color).l,u=o>=.5?"#aaa":"white",l=o>=.5?"black":"white",c=s||"";t.style({fill:l,"font-size":r.fontSize+"px"}).text(c);var h=r.padding,p=t.node().getBBox(),d={fill:r.color,stroke:u,"stroke-width":"2px"},v=p.width+h*2+a,m=p.height+h*2;return n.attr({d:"M"+[[a,-m/2],[a,-m/4],[r.hasTick?0:a,0],[a,m/4],[a,m/2],[v,m/2],[v,-m/2]].join("L")+"Z"}).style(d),e.attr({transform:"translate("+[a,-m/2+h*2]+")"}),e.style({display:"block"}),f},f.move=function(t){if(!e)return;return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),f},f.hide=function(){if(!e)return;return e.style({display:"none"}),f},f.show=function(){if(!e)return;return e.style({display:"block"}),f},f.config=function(e){return o(r,e),f},f},s.tooltipPanel.uid=1,s.adapter={},s.adapter.plotly=function(){var t={};return t.convert=function(e,t){var n={};if(e.data){n.data=e.data.map(function(e,n){var r=o({},e),i=[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]];return i.forEach(function(e,n){s.util.translator.apply(null,e.concat(t))}),t||delete r.marker,t&&delete r.groupId,t?(r.geometry==="LinePlot"?(r.type="scatter",r.dotVisible===!0?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):r.geometry==="DotPlot"?(r.type="scatter",r.mode="markers"):r.geometry==="AreaChart"?r.type="area":r.geometry==="BarChart"&&(r.type="bar"),delete r.geometry):(r.type==="scatter"?r.mode==="lines"?r.geometry="LinePlot":r.mode==="markers"?r.geometry="DotPlot":r.mode==="lines+markers"&&(r.geometry="LinePlot",r.dotVisible=!0):r.type==="area"?r.geometry="AreaChart":r.type==="bar"&&(r.geometry="BarChart"),delete r.mode,delete r.type),r});if(!t&&e.layout&&e.layout.barmode==="stack"){var r=s.util.duplicates(n.data.map(function(e,t){return e.geometry}));n.data.forEach(function(e,t){var i=r.indexOf(e.geometry);i!=-1&&(n.data[t].groupId=i)})}}if(e.layout){var u=o({},e.layout),a=[[u,["plot_bgcolor"],["backgroundColor"]],[u,["showlegend"],["showLegend"]],[u,["radialaxis"],["radialAxis"]],[u,["angularaxis"],["angularAxis"]],[u.angularaxis,["showline"],["gridLinesVisible"]],[u.angularaxis,["showticklabels"],["labelsVisible"]],[u.angularaxis,["nticks"],["ticksCount"]],[u.angularaxis,["tickorientation"],["tickOrientation"]],[u.angularaxis,["ticksuffix"],["ticksSuffix"]],[u.angularaxis,["range"],["domain"]],[u.angularaxis,["endpadding"],["endPadding"]],[u.radialaxis,["showline"],["gridLinesVisible"]],[u.radialaxis,["tickorientation"],["tickOrientation"]],[u.radialaxis,["ticksuffix"],["ticksSuffix"]],[u.radialaxis,["range"],["domain"]],[u.angularAxis,["showline"],["gridLinesVisible"]],[u.angularAxis,["showticklabels"],["labelsVisible"]],[u.angularAxis,["nticks"],["ticksCount"]],[u.angularAxis,["tickorientation"],["tickOrientation"]],[u.angularAxis,["ticksuffix"],["ticksSuffix"]],[u.angularAxis,["range"],["domain"]],[u.angularAxis,["endpadding"],["endPadding"]],[u.radialAxis,["showline"],["gridLinesVisible"]],[u.radialAxis,["tickorientation"],["tickOrientation"]],[u.radialAxis,["ticksuffix"],["ticksSuffix"]],[u.radialAxis,["range"],["domain"]],[u.font,["outlinecolor"],["outlineColor"]],[u.legend,["traceorder"],["reverseOrder"]],[u,["labeloffset"],["labelOffset"]],[u,["defaultcolorrange"],["defaultColorRange"]]];a.forEach(function(e,n){s.util.translator.apply(null,e.concat(t))}),t?(typeof u.tickLength!="undefined"&&(u.angularaxis.ticklen=u.tickLength,delete u.tickLength),u.tickColor&&(u.angularaxis.tickcolor=u.tickColor,delete u.tickColor)):(u.angularAxis&&typeof u.angularAxis.ticklen!="undefined"&&(u.tickLength=u.angularAxis.ticklen),u.angularAxis&&typeof u.angularAxis.tickcolor!="undefined"&&(u.tickColor=u.angularAxis.tickcolor)),u.legend&&typeof u.legend.reverseOrder!="boolean"&&(u.legend.reverseOrder=u.legend.reverseOrder!="normal"),u.legend&&typeof u.legend.traceorder=="boolean"&&(u.legend.traceorder=u.legend.traceorder?"reversed":"normal",delete u.legend.reverseOrder);if(u.margin&&typeof u.margin.t!="undefined"){var f=["t","r","b","l","pad"],l=["top","right","bottom","left","pad"],c={};i.entries(u.margin).forEach(function(e,t){c[l[f.indexOf(e.key)]]=e.value}),u.margin=c}t&&(delete u.needsEndSpacing,delete u.minorTickColor,delete u.minorTicks,delete u.angularaxis.ticksCount,delete u.angularaxis.ticksCount,delete u.angularaxis.ticksStep,delete u.angularaxis.rewriteTicks,delete u.angularaxis.nticks,delete u.radialaxis.ticksCount,delete u.radialaxis.ticksCount,delete u.radialaxis.ticksStep,delete u.radialaxis.rewriteTicks,delete u.radialaxis.nticks),n.layout=u}return n},t}},{"../../plotly":400,"./micropolar_manager":456,d3:72}],456:[function(e,t,n){"use strict";var r=e("../../plotly"),i=e("d3"),s=e("./undo_manager"),o=t.exports={},u=r.Lib.extendDeepAll;o.framework=function(e){function h(n,s){return s&&(l=s),i.select(i.select(l).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),t=t?u(t,n):n,a||(a=r.micropolar.Axis()),f=r.micropolar.adapter.plotly().convert(t),a.config(f).render(l),e.data=t.data,e.layout=t.layout,o.fillLayout(e),t}var t,n,a,f,l,c=new s;return h.isPolar=!0,h.svg=function(){return a.svg()},h.getConfig=function(){return t},h.getLiveConfig=function(){return r.micropolar.adapter.plotly().convert(a.getLiveConfig(),!0)},h.getLiveScales=function(){return{t:a.angularScale(),r:a.radialScale()}},h.setUndoPoint=function(){var e=this,i=r.micropolar.util.cloneJson(t);(function(t,n){c.add({undo:function(){n&&e(n)},redo:function(){e(t)}})})(i,n),n=r.micropolar.util.cloneJson(i)},h.undo=function(){c.undo()},h.redo=function(){c.redo()},h},o.fillLayout=function(e){var t=i.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),s=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:r.Color.background,_container:t,_paperdiv:n,_paper:s};e._fullLayout=u(o,e.layout)}},{"../../plotly":400,"./undo_manager":457,d3:72}],457:[function(e,t,n){"use strict";t.exports=function(){function s(e,t){return e?(r=!0,e[t](),r=!1,this):this}var t=[],n=-1,r=!1,i;return{add:function(e){return r?this:(t.splice(n+1,t.length-n),t.push(e),n=t.length-1,this)},setCallback:function(e){i=e},undo:function(){var e=t[n];return e?(s(e,"undo"),n-=1,i&&i(e.undo),this):this},redo:function(){var e=t[n+1];return e?(s(e,"redo"),n+=1,i&&i(e.redo),this):this},clear:function(){t=[],n=-1},hasUndo:function(){return n!==-1},hasRedo:function(){return n<t.length-1},getCommands:function(){return t},getPreviousCommand:function(){return t[n-1]},getIndex:function(){return n}}}},{}],458:[function(e,t,n){"use strict";var r=e("../lib"),i=e("./plots");t.exports=function(t,n,s,o){function v(e,t){return r.coerce(p,d,a,e,t)}var u=o.type,a=o.attributes,f=o.handleDefaults,l=o.partition||"x",c=i.findSubplotIds(s,u),h=c.length,p,d;for(var m=0;m<h;m++){var g=c[m];t[g]?p=t[g]:p=t[g]={},n[g]=d={},v("domain."+l,[m/h,(m+1)/h]),v("domain."+{x:"y",y:"x"}[l]),o.id=g,f(p,d,v,o)}}},{"../lib":381,"./plots":452}],459:[function(e,t,n){"use strict";var r=e("./ternary"),i=e("../../plots/plots");n.name="ternary",n.attr="subplot",n.idRoot="ternary",n.idRegex=/^ternary([2-9]|[1-9][0-9]+)?$/,n.attrRegex=/^ternary([2-9]|[1-9][0-9]+)?$/,n.attributes=e("./layout/attributes"),n.layoutAttributes=e("./layout/layout_attributes"),n.supplyLayoutDefaults=e("./layout/defaults"),n.plot=function(t){var n=t._fullLayout,s=t._fullData,o=i.getSubplotIds(n,"ternary");for(var u=0;u<o.length;u++){var a=o[u],f=i.getSubplotData(s,"ternary",a),l=n[a]._ternary;l===undefined&&(l=new r({id:a,graphDiv:t,container:n._ternarylayer.node()},n),n[a]._ternary=l),l.plot(f,n,t._promises)}},n.clean=function(e,t,n,r){var s=i.getSubplotIds(r,"ternary");for(var o=0;o<s.length;o++){var u=s[o],a=r[u]._ternary;!t[u]&&!!a&&(a.plotContainer.remove(),a.clipDef.remove())}}},{"../../plots/plots":452,"./layout/attributes":460,"./layout/defaults":463,"./layout/layout_attributes":464,"./ternary":465}],460:[function(e,t,n){"use strict";t.exports={subplot:{valType:"subplotid",dflt:"ternary"}}},{}],461:[function(e,t,n){"use strict";var r=e("../../cartesian/layout_attributes"),i=e("../../../lib/extend").extendFlat;t.exports={title:r.title,titlefont:r.titlefont,color:r.color,tickmode:r.tickmode,nticks:i({},r.nticks,{dflt:6,min:1}),tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,hoverformat:r.hoverformat,showline:i({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:i({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth,min:{valType:"number",dflt:0,min:0}}},{"../../../lib/extend":376,"../../cartesian/layout_attributes":412}],462:[function(e,t,n){"use strict";var r=e("tinycolor2").mix,i=e("../../../lib"),s=e("./axis_attributes"),o=e("../../cartesian/tick_label_defaults"),u=e("../../cartesian/tick_mark_defaults"),a=e("../../cartesian/tick_value_defaults");t.exports=function(t,n,f){function l(e,r){return i.coerce(t,n,s,e,r)}n.type="linear";var c=l("color"),h=c===t.color?c:f.font.color,p=n._name,d=p.charAt(0).toUpperCase(),v="Component "+d,m=l("title",v);n._hovertitle=m===v?m:d,i.coerceFont(l,"titlefont",{family:f.font.family,size:Math.round(f.font.size*1.2),color:h}),l("min"),a(t,n,l,"linear"),o(t,n,l,"linear",{noHover:!1}),u(t,n,l,{outerTicks:!0});var g=l("showticklabels");g&&(i.coerceFont(l,"tickfont",{family:f.font.family,size:f.font.size,color:h}),l("tickangle"),l("tickformat")),l("hoverformat");var y=l("showline");y&&(l("linecolor",c),l("linewidth"));var b=l("showgrid");b&&(l("gridcolor",r(c,f.bgColor,60).toRgbString()),l("gridwidth"))}},{"../../../lib":381,"../../cartesian/tick_label_defaults":418,"../../cartesian/tick_mark_defaults":419,"../../cartesian/tick_value_defaults":420,"./axis_attributes":461,tinycolor2:233}],463:[function(e,t,n){"use strict";function a(e,t,n,i){var s=n("bgcolor"),a=n("sum");i.bgColor=r.combine(s,i.paper_bgcolor);var f,l,c;for(var h=0;h<u.length;h++)f=u[h],l=e[f]||{},c=t[f]={_name:f},o(l,c,i);var p=t.aaxis,d=t.baxis,v=t.caxis;p.min+d.min+v.min>=a&&(p.min=0,d.min=0,v.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}var r=e("../../../components/color"),i=e("../../subplot_defaults"),s=e("./layout_attributes"),o=e("./axis_defaults"),u=["aaxis","baxis","caxis"];t.exports=function(t,n,r){i(t,n,r,{type:"ternary",attributes:s,handleDefaults:a,font:n.font,paper_bgcolor:n.paper_bgcolor})}},{"../../../components/color":303,"../../subplot_defaults":458,"./axis_defaults":462,"./layout_attributes":464}],464:[function(e,t,n){"use strict";var r=e("../../../components/color/attributes"),i=e("./axis_attributes");t.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i}},{"../../../components/color/attributes":302,"./axis_attributes":461}],465:[function(e,t,n){"use strict";function y(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework()}function k(e){r.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var r=e("d3"),i=e("tinycolor2"),s=e("../../plotly"),o=e("../../lib"),u=e("../../components/color"),a=e("../../components/drawing"),f=e("../cartesian/set_convert"),l=e("../../lib/extend").extendFlat,c=e("../cartesian/axes"),h=e("../../lib/filter_visible"),p=e("../../components/dragelement"),d=e("../../components/titles"),v=e("../cartesian/select"),m=e("../cartesian/constants"),g=e("../cartesian/graph_interact");t.exports=y;var b=y.prototype;b.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={}},b.plot=function(e,t){var n=this,r=t[n.id],i=t._size,s;o.getPlotDiv(n.plotContainer.node())!==n.graphDiv&&(n.init(n.graphDiv._fullLayout),n.makeFramework()),n.adjustLayout(r,i);var a=n.traceHash,f={};for(s=0;s<e.length;s++){var l=e[s];f[l.type]=f[l.type]||[],f[l.type].push(l)}var c=Object.keys(a),p=Object.keys(f);for(s=0;s<c.length;s++){var d=c[s];if(p.indexOf(d)===-1){var v=a[d][0];v.visible=!1,f[d]=[v]}}p=Object.keys(f);for(s=0;s<p.length;s++){var m=f[p[s]],g=m[0]._module;g.plot(n,h(m),r)}n.traceHash=f,n.layers.plotbg.select("path").call(u.fill,r.bgcolor)},b.makeFramework=function(){var e=this,t=e.defs.selectAll("g.clips").data([0]);t.enter().append("g").classed("clips",!0);var n="clip"+e.layoutId+e.id;e.clipDef=t.selectAll("#"+n).data([0]),e.clipDef.enter().append("clipPath").attr("id",n).append("path").attr("d","M0,0Z"),e.plotContainer=e.container.selectAll("g."+e.id).data([0]),e.plotContainer.enter().append("g").classed(e.id,!0),e.layers={};var i=["draglayer","plotbg","backplot","grids","frontplot","zoom","aaxis","baxis","caxis","axlines"],s=e.plotContainer.selectAll("g.toplevel").data(i);s.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(t){var n=r.select(this);e.layers[t]=n,t==="frontplot"?n.append("g").classed("scatterlayer",!0):t==="backplot"?n.append("g").classed("maplayer",!0):t==="plotbg"?n.append("path").attr("d","M0,0Z"):t==="axlines"&&n.selectAll("path").data(["aline","bline","cline"]).enter().append("path").each(function(e){r.select(this).classed(e,!0)})});var o=e.plotContainer.select(".grids").selectAll("g.grid").data(["agrid","bgrid","cgrid"]);o.enter().append("g").attr("class",function(e){return"grid "+e}).each(function(t){e.layers[t]=r.select(this)}),e.plotContainer.selectAll(".backplot,.frontplot,.grids").call(a.setClipUrl,n),e.initInteractions()};var w=Math.sqrt(4/3);b.adjustLayout=function(e,t){var n=this,r=e.domain,i=(r.x[0]+r.x[1])/2,s=(r.y[0]+r.y[1])/2,o=r.x[1]-r.x[0],a=r.y[1]-r.y[0],c=o*t.w,h=a*t.h,p=e.sum,d=e.aaxis.min,v=e.baxis.min,m=e.caxis.min,g,y,b,E,S,x;c>w*h?(E=h,b=E*w):(b=c,E=b/w),S=o*b/c,x=a*E/h,g=t.l+t.w*i-b/2,y=t.t+t.h*(1-s)-E/2,n.x0=g,n.y0=y,n.w=b,n.h=E,n.sum=p,n.xaxis={type:"linear",range:[d+2*m-p,p-d-2*v],domain:[i-S/2,i+S/2],_id:"x",_gd:n.graphDiv},f(n.xaxis),n.xaxis.setScale(),n.yaxis={type:"linear",range:[d,p-v-m],domain:[s-x/2,s+x/2],_id:"y",_gd:n.graphDiv},f(n.yaxis),n.yaxis.setScale();var T=n.yaxis.domain[0],N=n.aaxis=l({},e.aaxis,{range:[d,p-v-m],side:"left",_counterangle:30,tickangle:(+e.aaxis.tickangle||0)-30,domain:[T,T+x*w],_axislayer:n.layers.aaxis,_gridlayer:n.layers.agrid,_pos:0,_gd:n.graphDiv,_id:"y",_length:b,_gridpath:"M0,0l"+E+",-"+b/2});f(N);var C=n.baxis=l({},e.baxis,{range:[p-d-m,v],side:"bottom",_counterangle:30,domain:n.xaxis.domain,_axislayer:n.layers.baxis,_gridlayer:n.layers.bgrid,_counteraxis:n.aaxis,_pos:0,_gd:n.graphDiv,_id:"x",_length:b,_gridpath:"M0,0l-"+b/2+",-"+E});f(C),N._counteraxis=C;var k=n.caxis=l({},e.caxis,{range:[p-d-v,m],side:"right",_counterangle:30,tickangle:(+e.caxis.tickangle||0)+30,domain:[T,T+x*w],_axislayer:n.layers.caxis,_gridlayer:n.layers.cgrid,_counteraxis:n.baxis,_pos:0,_gd:n.graphDiv,_id:"y",_length:b,_gridpath:"M0,0l-"+E+","+b/2});f(k);var L="M"+g+","+(y+E)+"h"+b+"l-"+b/2+",-"+E+"Z";n.clipDef.select("path").attr("d",L),n.layers.plotbg.select("path").attr("d",L);var A="translate("+g+","+y+")";n.plotContainer.selectAll(".scatterlayer,.maplayer,.zoom").attr("transform",A);var O="translate("+g+","+(y+E)+")";n.layers.baxis.attr("transform",O),n.layers.bgrid.attr("transform",O);var M="translate("+(g+b/2)+","+y+")rotate(30)";n.layers.aaxis.attr("transform",M),n.layers.agrid.attr("transform",M);var _="translate("+(g+b/2)+","+y+")rotate(-30)";n.layers.caxis.attr("transform",_),n.layers.cgrid.attr("transform",_),n.drawAxes(!0),n.plotContainer.selectAll(".crisp").classed("crisp",!1);var D=n.layers.axlines;D.select(".aline").attr("d",N.showline?"M"+g+","+(y+E)+"l"+b/2+",-"+E:"M0,0").call(u.stroke,N.linecolor||"#000").style("stroke-width",(N.linewidth||0)+"px"),D.select(".bline").attr("d",C.showline?"M"+g+","+(y+E)+"h"+b:"M0,0").call(u.stroke,C.linecolor||"#000").style("stroke-width",(C.linewidth||0)+"px"),D.select(".cline").attr("d",k.showline?"M"+(g+b/2)+","+y+"l"+b/2+","+E:"M0,0").call(u.stroke,k.linecolor||"#000").style("stroke-width",(k.linewidth||0)+"px")},b.drawAxes=function(e){var t=this,n=t.graphDiv,r=t.id.substr(7)+"title",i=t.aaxis,s=t.baxis,o=t.caxis;c.doTicks(n,i,!0),c.doTicks(n,s,!0),c.doTicks(n,o,!0);if(e){var u=Math.max(i.showticklabels?i.tickfont.size/2:0,(o.showticklabels?o.tickfont.size*.75:0)+(o.ticks==="outside"?o.ticklen*.87:0));d.draw(n,"a"+r,{propContainer:i,propName:t.id+".aaxis.title",dfltName:"Component A",attributes:{x:t.x0+t.w/2,y:t.y0-i.titlefont.size/3-u,"text-anchor":"middle"}});var a=(s.showticklabels?s.tickfont.size:0)+(s.ticks==="outside"?s.ticklen:0)+3;d.draw(n,"b"+r,{propContainer:s,propName:t.id+".baxis.title",dfltName:"Component B",attributes:{x:t.x0-a,y:t.y0+t.h+s.titlefont.size*.83+a,"text-anchor":"middle"}}),d.draw(n,"c"+r,{propContainer:o,propName:t.id+".caxis.title",dfltName:"Component C",attributes:{x:t.x0+t.w+a,y:t.y0+t.h+o.titlefont.size*.83+a,"text-anchor":"middle"}})}};var E=m.MINZOOM/2+.87,S="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",x="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",T="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",N="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",C=!0;b.initInteractions=function(){function O(n,s,o){var a=t.getBoundingClientRect();f=s-a.left,l=o-a.top,c={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},d=c,h=e.aaxis.range[1]-c.a,y=i(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance(),b="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z",E=!1,L=r.append("path").attr("class","zoombox").style({fill:y>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",b),A=r.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),I()}function M(t,n){return 1-n/e.h}function _(t,n){return 1-(t+(e.h-n)/Math.sqrt(3))/e.w}function D(t,n){return(t-(e.h-n)/Math.sqrt(3))/e.w}function P(t,n){var r=f+t,i=l+n,s=Math.max(0,Math.min(1,M(f,l),M(r,i))),o=Math.max(0,Math.min(1,_(f,l),_(r,i))),u=Math.max(0,Math.min(1,D(f,l),D(r,i))),a=(s/2+u)*e.w,p=(1-s/2-o)*e.w,v=(a+p)/2,g=p-a,C=(1-s)*e.h,k=C-g/w;g<m.MINZOOM?(d=c,L.attr("d",b),A.attr("d","M0,0Z")):(d={a:c.a+s*h,b:c.b+o*h,c:c.c+u*h},L.attr("d",b+"M"+a+","+C+"H"+p+"L"+v+","+k+"L"+a+","+C+"Z"),A.attr("d","M"+f+","+l+N+"M"+a+","+C+S+"M"+p+","+C+x+"M"+v+","+k+T)),E||(L.transition().style("fill",y>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),A.transition().style("opacity",1).duration(200),E=!0)}function H(t,r){if(d===c)return r===2&&q(),k(n);k(n);var i={};i[e.id+".aaxis.min"]=d.a,i[e.id+".baxis.min"]=d.b,i[e.id+".caxis.min"]=d.c,s.relayout(n,i),C&&n.data&&n._context.showTips&&(o.notifier("Double-click to<br>zoom back out","long"),C=!1)}function B(){c={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},d=c}function j(t,n){var r=t/e.xaxis._m,i=n/e.yaxis._m;d={a:c.a-i,b:c.b+(r+i)/2,c:c.c-(r-i)/2};var s=[d.a,d.b,d.c].sort(),o={a:s.indexOf(d.a),b:s.indexOf(d.b),c:s.indexOf(d.c)};s[0]<0&&(s[1]+s[0]/2<0?(s[2]+=s[0]+s[1],s[0]=s[1]=0):(s[2]+=s[0]/2,s[1]+=s[0]/2,s[0]=0),d={a:s[o.a],b:s[o.b],c:s[o.c]},n=(c.a-d.a)*e.yaxis._m,t=(c.c-d.c-c.b+d.b)*e.xaxis._m);var u="translate("+(e.x0+t)+","+(e.y0+n)+")";e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",u),e.aaxis.range=[d.a,e.sum-d.b-d.c],e.baxis.range=[e.sum-d.a-d.c,d.b],e.caxis.range=[e.sum-d.a-d.b,d.c],e.drawAxes(!1),e.plotContainer.selectAll(".crisp").classed("crisp",!1)}function F(t,r){if(t){var i={};i[e.id+".aaxis.min"]=d.a,i[e.id+".baxis.min"]=d.b,i[e.id+".caxis.min"]=d.c,s.relayout(n,i)}else r===2&&q()}function I(){e.plotContainer.selectAll(".select-outline").remove()}function q(){var t={};t[e.id+".aaxis.min"]=0,t[e.id+".baxis.min"]=0,t[e.id+".caxis.min"]=0,n.emit("plotly_doubleclick",null),s.relayout(n,t)}var e=this,t=e.layers.plotbg.select("path").node(),n=e.graphDiv,r=e.layers.zoom,a={element:t,gd:n,plotinfo:{plot:r},doubleclick:q,subplot:e.id,prepFn:function(t,r,i){a.xaxes=[e.xaxis],a.yaxes=[e.yaxis];var s=n._fullLayout.dragmode;t.shiftKey&&(s==="pan"?s="zoom":s="pan"),s==="lasso"?a.minDrag=1:a.minDrag=undefined,s==="zoom"?(a.moveFn=P,a.doneFn=H,O(t,r,i)):s==="pan"?(a.moveFn=j,a.doneFn=F,B(),I()):(s==="select"||s==="lasso")&&v(t,r,i,a,s)}},f,l,c,h,d,y,b,E,L,A;p.init(a),t.onmousemove=function(r){g.hover(n,r,e.id),n._fullLayout._lasthover=t,n._fullLayout._hoversubplot=e.id},t.onmouseout=function(e){if(n._dragging)return;p.unhover(n,e)},t.onclick=function(e){g.click(n,e)},n._fullLayout._plots||(n._fullLayout._plots={}),n._fullLayout._plots[e.id]={overlays:[],xaxis:e.xaxis,yaxis:e.yaxis,x:function(){return e.xaxis},y:function(){return e.yaxis}}}},{"../../components/color":303,"../../components/dragelement":323,"../../components/drawing":325,"../../components/titles":365,"../../lib":381,"../../lib/extend":376,"../../lib/filter_visible":377,"../../plotly":400,"../cartesian/axes":403,"../cartesian/constants":408,"../cartesian/graph_interact":410,"../cartesian/select":416,"../cartesian/set_convert":417,d3:72,tinycolor2:233}],466:[function(e,t,n){"use strict";function o(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function u(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}var r=e("../plotly"),i=r.Lib.extendFlat,s=r.Lib.extendDeep;t.exports=function(t,n){t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var a,f=t.data,l=t.layout,c=s([],f),h=s({},l,o(n.tileClass));n.width&&(h.width=n.width),n.height&&(h.height=n.height);if(n.tileClass==="thumbnail"||n.tileClass==="themes__thumb"){h.annotations=[];var p=Object.keys(h);for(a=0;a<p.length;a++)u(p[a])&&(h[p[a]].title="");for(a=0;a<c.length;a++){var d=c[a];d.showscale=!1,d.marker&&(d.marker.showscale=!1),d.type==="pie"&&(d.textposition="none")}}if(Array.isArray(n.annotations))for(a=0;a<n.annotations.length;a++)h.annotations.push(n.annotations[a]);var v=r.Plots.getSubplotIds(h,"gl3d");if(v.length){var m={};n.tileClass==="thumbnail"&&(m={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(a=0;a<v.length;a++){var g=v[a];i(h[g].xaxis,m),i(h[g].yaxis,m),i(h[g].zaxis,m),h[g]._scene=null}}var y=document.createElement("div");n.tileClass&&(y.className=n.tileClass);var b={td:y,layout:h,data:c,config:{staticPlot:n.staticPlot===undefined?!0:n.staticPlot,plotGlPixelRatio:n.plotGlPixelRatio===undefined?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1}};return n.setBackground!=="transparent"&&(b.config.setBackground=n.setBackground||"opaque"),b.td.defaultLayout=o(n.tileClass),b}},{"../plotly":400}],467:[function(e,t,n){"use strict";function o(e,t){return t=t||{},t.format=t.format||"png",new Promise(function(n,o){e._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),i.isIE()&&t.format!=="svg"&&o(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),e._snapshotInProgress=!0;var u=r(e,t),a=t.filename||e.fn||"newplot";a+="."+t.format,u.then(function(t){return e._snapshotInProgress=!1,s(t,a)}).then(function(e){n(e)}).catch(function(t){e._snapshotInProgress=!1,o(t)})})}var r=e("../plot_api/to_image"),i=e("../lib"),s=e("./filesaver");t.exports=o},{"../lib":381,"../plot_api/to_image":399,"./filesaver":468}],468:[function(e,t,n){"use strict";var r=function(e,t){var n=document.createElement("a"),r="download"in n,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=new Promise(function(s,o){typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),i&&(document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/)),s(t)),t||(t="download"),r&&(n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),s(t)),typeof navigator!="undefined"&&navigator.msSaveBlob&&(navigator.msSaveBlob(new Blob([e]),t),s(t)),o(new Error("download error"))});return s};t.exports=r},{}],469:[function(e,t,n){"use strict";function r(e){return e._has?e._has("gl3d")||e._has("gl2d")?500:0:0}function i(e){if(e.data&&e.data[0]&&e.data[0].r)return;return function(){(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()})}}var s={getDelay:r,getRedrawFunc:i,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=s},{"./cloneplot":466,"./download":467,"./svgtoimg":470,"./toimage":471,"./tosvg":472}],470:[function(e,t,n){"use strict";function s(e){var t=e.emitter||new i,n=new Promise(function(i,s){var o=window.Image,u=e.svg,a=e.format||"png";if(r.isIE()){u=u.replace(/"/gi,"'"),u=u.replace(/(\('#)(.*)('\))/gi,'("$2")'),u=u.replace(/(\\')/gi,'"');if(a!=="svg"){var f=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return s(f),e.promise?n:t.emit("error",f)}}var l=e.canvas,c=l.getContext("2d"),h=new o,p="data:image/svg+xml,"+encodeURIComponent(u);l.height=e.height||150,l.width=e.width||300,h.onload=function(){var n;a!=="svg"&&c.drawImage(h,0,0);switch(a){case"jpeg":n=l.toDataURL("image/jpeg");break;case"png":n=l.toDataURL("image/png");break;case"webp":n=l.toDataURL("image/webp");break;case"svg":n=u;break;default:s(new Error("Image format is not jpeg, png or svg"));if(!e.promise)return t.emit("error","Image format is not jpeg, png or svg")}i(n),e.promise||t.emit("success",n)},h.onerror=function(n){s(n);if(!e.promise)return t.emit("error",n)},h.src=p});return e.promise?n:t}var r=e("../lib"),i=e("events").EventEmitter;t.exports=s},{"../lib":381,events:55}],471:[function(e,t,n){"use strict";function s(e,t){function a(){var e=n.getDelay(u._fullLayout);setTimeout(function(){var e=i.Snapshot.toSVG(u),n=window.document.createElement("div"),r=window.document.createElement("canvas");n.appendChild(r),n.id=i.Lib.randstr(),r.id=i.Lib.randstr(),s=i.Snapshot.svgToImg({format:t.format,width:u._fullLayout.width,height:u._fullLayout.height,canvas:r,emitter:s,svg:e}),s.clean=function(){u&&document.body.removeChild(u)}},e)}var n=i.Snapshot,s=new r,o=n.clone(e,{format:"png"}),u=o.td;u.style.position="absolute",u.style.left="-5000px",document.body.appendChild(u);var f=n.getRedrawFunc(u);return i.plot(u,o.data,o.layout,o.config).then(f).then(a).catch(function(e){s.emit("error",e)}),s}var r=e("events").EventEmitter,i=e("../plotly");t.exports=s},{"../plotly":400,events:55}],472:[function(e,t,n){"use strict";function f(e,t,n){var r=t.toImage("png");e._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":r,x:n.x,y:n.y,width:n.width,height:n.height,preserveAspectRatio:"none"}),t.destroy()}var r=e("d3"),i=e("../plots/plots"),s=e("../lib/svg_text_utils"),o=e("../components/drawing"),u=e("../components/color"),a=e("../constants/xmlns_namespaces");t.exports=function(t,n){var l=t._fullLayout,c=l._paper,h=l._size,p,d;c.insert("rect",":first-child").call(o.setRect,0,0,l.width,l.height).call(u.fill,l.paper_bgcolor);var v=i.getSubplotIds(l,"gl3d"),m;for(d=0;d<v.length;d++)m=l[v[d]],p=m.domain,f(l,m._scene,{x:h.l+h.w*p.x[0],y:h.t+h.h*(1-p.y[1]),width:h.w*(p.x[1]-p.x[0]),height:h.h*(p.y[1]-p.y[0])});var g=i.getSubplotIds(l,"gl2d"),y;for(d=0;d<g.length;d++)y=l._plots[g[d]],f(l,y._scene2d,{x:h.l,y:h.t,width:h.w,height:h.h});var b=i.getSubplotIds(l,"geo"),w,E;for(d=0;d<b.length;d++)w=l[b[d]],p=w.domain,E=w._geo.framework,E.attr("style",null),E.attr({x:h.l+h.w*p.x[0]+w._marginX,y:h.t+h.h*(1-p.y[1])+w._marginY,width:w._width,height:w._height}),l._geoimages.node().appendChild(E.node());if(l._toppaper){var S=l._toppaper.node().childNodes,x=Array.prototype.slice.call(S);for(d=0;d<x.length;d++){var T=x[d];T.childNodes.length&&c.node().appendChild(T)}}l._draggers&&l._draggers.remove(),c.node().style.background="",c.selectAll("text").attr("data-unformatted",null).each(function(){var e=r.select(this);if(e.style("visibility")==="hidden"){e.remove();return}var t=e.style("font-family");t&&t.indexOf('"')!==-1&&e.style("font-family",t.replace(/"/g,"\\'"))}),(n==="pdf"||n==="eps")&&c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(a.xmlns,"xmlns",a.svg),c.node().setAttributeNS(a.xmlns,"xmlns:xlink",a.xlink);var N=(new window.XMLSerializer).serializeToString(c.node());return N=s.html_entity_decode(N),N=s.xml_entity_encode(N),N}},{"../components/color":303,"../components/drawing":325,"../constants/xmlns_namespaces":369,"../lib/svg_text_utils":393,"../plots/plots":452,d3:72}],473:[function(e,t,n){"use strict";var r=e("../../lib").mergeArray;t.exports=function(t){var n=t[0].trace,i=n.marker,s=i.line;r(n.text,t,"tx"),r(i.opacity,t,"mo"),r(i.color,t,"mc"),r(s.color,t,"mlc"),r(s.width,t,"mlw")}},{"../../lib":381}],474:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=r.marker,s=i.line;t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,orientation:{valType:"enumerated",values:["v","h"]},marker:{color:i.color,colorscale:i.colorscale,cauto:i.cauto,cmax:i.cmax,cmin:i.cmin,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,line:{color:s.color,colorscale:s.colorscale,cauto:s.cauto,cmax:s.cmax,cmin:s.cmin,width:s.width,autocolorscale:s.autocolorscale,reversescale:s.reversescale}},r:r.r,t:r.t,_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:{valType:"enumerated",values:["v","h"]}}}},{"../scatter/attributes":554}],475:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/cartesian/axes"),s=e("../../components/colorscale/has_colorscale"),o=e("../../components/colorscale/calc");t.exports=function(t,n){var u=i.getFromId(t,n.xaxis||"x"),a=i.getFromId(t,n.yaxis||"y"),f=n.orientation||(n.x&&!n.y?"h":"v"),l,c,h;f==="h"?(c=u.makeCalcdata(n,"x"),l=a.makeCalcdata(n,"y")):(c=a.makeCalcdata(n,"y"),l=u.makeCalcdata(n,"x"));var p=Math.min(l.length,c.length),d=[];for(h=0;h<p;h++)r(l[h])&&d.push({p:l[h],s:c[h],b:0});return s(n,"marker")&&o(n,n.marker.color,"marker","c"),s(n,"marker.line")&&o(n,n.marker.line.color,"marker.line","c"),d}},{"../../components/colorscale/calc":310,"../../components/colorscale/has_colorscale":315,"../../plots/cartesian/axes":403,"fast-isnumeric":76}],476:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color"),s=e("../scatter/xy_defaults"),o=e("../bar/style_defaults"),u=e("../../components/errorbars/defaults"),a=e("./attributes");t.exports=function(t,n,f,l){function c(e,i){return r.coerce(t,n,a,e,i)}var h=s(t,n,c);if(!h){n.visible=!1;return}c("orientation",n.x&&!n.y?"h":"v"),c("text"),o(t,n,c,f,l),u(t,n,i.defaultLine,{axis:"y"}),u(t,n,i.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":303,"../../components/errorbars/defaults":330,"../../lib":381,"../bar/style_defaults":484,"../scatter/xy_defaults":575,"./attributes":474}],477:[function(e,t,n){"use strict"
;var r=e("../../plots/cartesian/graph_interact"),i=e("../../components/errorbars"),s=e("../../components/color");t.exports=function(t,n,o,u){var a=t.cd,f=a[0].trace,l=a[0].t,c=t.xa,h=t.ya,p=u==="closest"?l.barwidth/2:l.dbar*(1-c._gd._fullLayout.bargap)/2,d;u!=="closest"?d=function(e){return e.p}:f.orientation==="h"?d=function(e){return e.y}:d=function(e){return e.x};var v,m;f.orientation==="h"?(v=function(e){return r.inbox(e.b-n,e.x-n)+(e.x-n)/(e.x-e.b)},m=function(e){var t=d(e)-o;return r.inbox(t-p,t+p)}):(m=function(e){return r.inbox(e.b-o,e.y-o)+(e.y-o)/(e.y-e.b)},v=function(e){var t=d(e)-n;return r.inbox(t-p,t+p)});var g=r.getDistanceFunction(u,v,m);r.getClosest(a,g,t);if(t.index===!1)return;var y=a[t.index],b=y.mcc||f.marker.color,w=y.mlcc||f.marker.line.color,E=y.mlw||f.marker.line.width;return s.opacity(b)?t.color=b:s.opacity(w)&&E&&(t.color=w),f.orientation==="h"?(t.x0=t.x1=c.c2p(y.x,!0),t.xLabelVal=y.s,t.y0=h.c2p(d(y)-p,!0),t.y1=h.c2p(d(y)+p,!0),t.yLabelVal=y.p):(t.y0=t.y1=h.c2p(y.y,!0),t.yLabelVal=y.s,t.x0=c.c2p(d(y)-p,!0),t.x1=c.c2p(d(y)+p,!0),t.xLabelVal=y.p),y.tx&&(t.text=y.tx),i.hoverInfo(y,f,t),[t]}},{"../../components/color":303,"../../components/errorbars":331,"../../plots/cartesian/graph_interact":410}],478:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.setPositions=e("./set_positions"),r.colorbar=e("../scatter/colorbar"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="bar",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"../scatter/colorbar":557,"./arrays_to_calcdata":473,"./attributes":474,"./calc":475,"./defaults":476,"./hover":477,"./layout_attributes":479,"./layout_defaults":480,"./plot":481,"./set_positions":482,"./style":483}],479:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:""},bargap:{valType:"number",min:0,max:1},bargroupgap:{valType:"number",min:0,max:1,dflt:0}}},{}],480:[function(e,t,n){"use strict";var r=e("../../plots/plots"),i=e("../../plots/cartesian/axes"),s=e("../../lib"),o=e("./layout_attributes");t.exports=function(e,t,n){function u(n,r){return s.coerce(e,t,o,n,r)}var a=!1,f=!1,l=!1,c={};for(var h=0;h<n.length;h++){var p=n[h];if(!r.traceIs(p,"bar"))continue;a=!0;if(e.barmode!=="overlay"&&e.barmode!=="stack"){var d=p.xaxis+p.yaxis;c[d]&&(l=!0),c[d]=!0}if(p.visible&&p.type==="histogram"){var v=i.getFromId({_fullLayout:t},p[p.orientation==="v"?"xaxis":"yaxis"]);v.type!=="category"&&(f=!0)}}if(!a)return;var m=u("barmode");m!=="overlay"&&u("barnorm"),u("bargap",f&&!l?0:.2),u("bargroupgap")}},{"../../lib":381,"../../plots/cartesian/axes":403,"../../plots/plots":452,"./layout_attributes":479}],481:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("../../components/color"),u=e("../../components/errorbars"),a=e("./arrays_to_calcdata");t.exports=function(t,n,f){var l=n.x(),c=n.y(),h=t._fullLayout,p=n.plot.select(".barlayer").selectAll("g.trace.bars").data(f).enter().append("g").attr("class","trace bars");p.append("g").attr("class","points").each(function(e){var n=e[0].t,u=e[0].trace;a(e),r.select(this).selectAll("path").data(s.identity).enter().append("path").each(function(e){function m(e){return h.bargap===0&&h.bargroupgap===0?r.round(Math.round(e)-v,2):e}function g(e,t){return Math.abs(e-t)>=2?m(e):e>t?Math.ceil(e):Math.floor(e)}var s,a,f,p;u.orientation==="h"?(f=c.c2p(n.poffset+e.p,!0),p=c.c2p(n.poffset+e.p+n.barwidth,!0),s=l.c2p(e.b,!0),a=l.c2p(e.s+e.b,!0)):(s=l.c2p(n.poffset+e.p,!0),a=l.c2p(n.poffset+e.p+n.barwidth,!0),p=c.c2p(e.s+e.b,!0),f=c.c2p(e.b,!0));if(!i(s)||!i(a)||!i(f)||!i(p)||s===a||f===p){r.select(this).remove();return}var d=(e.mlw+1||u.marker.line.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,v=r.round(d/2%1,2);if(!t._context.staticPlot){var y=o.opacity(e.mc||u.marker.color),b=y<1||d>.01?m:g;s=b(s,a),a=b(a,s),f=b(f,p),p=b(p,f)}r.select(this).attr("d","M"+s+","+f+"V"+p+"H"+a+"V"+f+"Z")})}),p.call(u.plot,n)}},{"../../components/color":303,"../../components/errorbars":331,"../../lib":381,"./arrays_to_calcdata":473,d3:72,"fast-isnumeric":76}],482:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/plots"),s=e("../../plots/cartesian/axes"),o=e("../../lib");t.exports=function(t,n){var u=t._fullLayout,a=n.x(),f=n.y(),l,c;["v","h"].forEach(function(e){function g(e){function d(e){e[p]=e.p+c}var n=[];e.forEach(function(e){t.calcdata[e].forEach(function(e){n.push(e.p)})});var r=o.distinctVals(n),i=r.vals,a=r.minDiff,f=!1,l=[];u.barmode==="group"&&e.forEach(function(e){if(f)return;t.calcdata[e].forEach(function(e){if(f)return;l.forEach(function(t){Math.abs(e.p-t)<a&&(f=!0)})});if(f)return;t.calcdata[e].forEach(function(e){l.push(e.p)})}),s.minDtick(v,a,i[0],f),s.expand(v,i,{vpad:a/2}),a*=1-u.bargap,f&&(a/=h.length);var c;for(var m=0;m<e.length;m++){var g=t.calcdata[e[m]][0].t;g.barwidth=a*(1-u.bargroupgap),g.poffset=((f?(2*m+1-e.length)*a:0)-g.barwidth)/2,g.dbar=r.minDiff,c=g.poffset+g.barwidth/2,t.calcdata[e[m]].forEach(d)}}var h=[],p={v:"x",h:"y"}[e],d={v:"y",h:"x"}[e],v=n[p](),m=n[d]();t._fullData.forEach(function(t,n){t.visible===!0&&i.traceIs(t,"bar")&&t.orientation===e&&t.xaxis===a._id&&t.yaxis===f._id&&h.push(n)});if(!h.length)return;u.barmode==="overlay"?h.forEach(function(e){g([e])}):g(h);var y=u.barmode==="stack",b=u.barmode==="relative",w=u.barnorm;if(y||b||w){var E=m.l2c(m.c2l(0)),S=E,x={},T=t.calcdata[h[0]][0].t.barwidth/100,N=0,C=!0,k,L,A;for(l=0;l<h.length;l++){L=t.calcdata[h[l]];for(c=0;c<L.length;c++){N=Math.round(L[c].p/T),b&&L[c].s<0&&(N=-N);var O=x[N]||0;if(y||b)L[c].b=O;k=L[c].b+L[c].s,x[N]=O+L[c].s;if(y||b)L[c][d]=k,!w&&r(m.c2l(k))&&(E=Math.max(E,k),S=Math.min(S,k))}}if(w){C=!1;var M=w==="fraction"?1:100,_=!1,D=M/1e9;S=0,E=y?M:0;for(l=0;l<h.length;l++){L=t.calcdata[h[l]];for(c=0;c<L.length;c++)_=b&&L[c].s<0,N=Math.round(L[c].p/T),_&&(N=-N),A=M/x[N],_&&(A*=-1),L[c].b*=A,L[c].s*=A,k=L[c].b+L[c].s,L[c][d]=k,r(m.c2l(k))&&(k<S-D&&(C=!0,S=k),k>E+D&&(C=!0,E=k))}}s.expand(m,[S,E],{tozero:!0,padded:C})}else{var P=function(e){return e[d]=e.s,e.s};for(l=0;l<h.length;l++)s.expand(m,t.calcdata[h[l]].map(P),{tozero:!0,padded:!0})}})}},{"../../lib":381,"../../plots/cartesian/axes":403,"../../plots/plots":452,"fast-isnumeric":76}],483:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/color"),s=e("../../components/drawing"),o=e("../../components/errorbars");t.exports=function(t){var n=r.select(t).selectAll("g.trace.bars"),u=n.size(),a=t._fullLayout;n.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){(a.barmode==="stack"&&u>1||a.bargap===0&&a.bargroupgap===0&&!e[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(e){var t=e[0].trace,n=t.marker,o=n.line,u=(t._input||{}).marker||{},a=s.tryColorscale(n,u,""),f=s.tryColorscale(n,u,"line.");r.select(this).selectAll("path").each(function(e){var t,s,u=(e.mlw+1||o.width+1)-1,l=r.select(this);"mc"in e?t=e.mcc=a(e.mc):Array.isArray(n.color)?t=i.defaultLine:t=n.color,l.style("stroke-width",u+"px").call(i.fill,t),u&&("mlc"in e?s=e.mlcc=f(e.mlc):Array.isArray(o.color)?s=i.defaultLine:s=o.color,l.call(i.stroke,s))})}),n.call(o.style)}},{"../../components/color":303,"../../components/drawing":325,"../../components/errorbars":331,d3:72}],484:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),s=e("../../components/colorscale/defaults");t.exports=function(t,n,o,u,a){o("marker.color",u),i(t,"marker")&&s(t,n,a,o,{prefix:"marker.",cLetter:"c"}),o("marker.line.color",r.defaultLine),i(t,"marker.line")&&s(t,n,a,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width")}},{"../../components/color":303,"../../components/colorscale/defaults":312,"../../components/colorscale/has_colorscale":315}],485:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/color/attributes"),s=e("../../lib/extend").extendFlat,o=r.marker,u=o.line;t.exports={y:{valType:"data_array"},x:{valType:"data_array"},x0:{valType:"any"},y0:{valType:"any"},whiskerwidth:{valType:"number",min:0,max:1,dflt:.5},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1},jitter:{valType:"number",min:0,max:1},pointpos:{valType:"number",min:-2,max:2},orientation:{valType:"enumerated",values:["v","h"]},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)"},symbol:s({},o.symbol,{arrayOk:!1}),opacity:s({},o.opacity,{arrayOk:!1,dflt:1}),size:s({},o.size,{arrayOk:!1}),color:s({},o.color,{arrayOk:!1}),line:{color:s({},u.color,{arrayOk:!1,dflt:i.defaultLine}),width:s({},u.width,{arrayOk:!1,dflt:0}),outliercolor:{valType:"color"},outlierwidth:{valType:"number",min:0,dflt:1}}},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2}},fillcolor:r.fillcolor}},{"../../components/color/attributes":302,"../../lib/extend":376,"../scatter/attributes":554}],486:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/cartesian/axes");t.exports=function(t,n){function b(e,t,n,s,o){var u;return n in t?m=s.makeCalcdata(t,n):(n+"0"in t?u=t[n+"0"]:"name"in t&&(s.type==="category"||r(t.name)&&["linear","log"].indexOf(s.type)!==-1||i.isDateTime(t.name)&&s.type==="date")?u=t.name:u=e.numboxes,u=s.d2c(u),m=o.map(function(){return u})),m}function E(e,t,n,s,o){var u=s.length,a=t.length,f=[],l=[],c,h,p,d;for(c=0;c<u;++c)h=s[c],e[c]={pos:h},l[c]=h-o,f[c]=[];l.push(s[u-1]+o);for(c=0;c<a;++c){d=t[c];if(!r(d))continue;p=i.findBin(n[c],l),p>=0&&p<a&&f[p].push(d)}return f}function S(e,t){var n,r,s,o;for(o=0;o<t.length;++o)n=t[o].sort(i.sorterAsc),r=n.length,s=e[o],s.val=n,s.min=n[0],s.max=n[r-1],s.mean=i.mean(n,r),s.sd=i.stdev(n,r,s.mean),s.q1=i.interp(n,.25),s.med=i.interp(n,.5),s.q3=i.interp(n,.75),s.lf=Math.min(s.q1,n[Math.min(i.findBin(2.5*s.q1-1.5*s.q3,n,!0)+1,r-1)]),s.uf=Math.max(s.q3,n[Math.max(i.findBin(2.5*s.q3-1.5*s.q1,n),0)]),s.lo=4*s.q1-3*s.q3,s.uo=4*s.q3-3*s.q1}var o=s.getFromId(t,n.xaxis||"x"),u=s.getFromId(t,n.yaxis||"y"),a=n.orientation,f=[],l,c,h,p,d,v,m,g,y;a==="h"?(l=o,c="x",d=u,v="y"):(l=u,c="y",d=o,v="x"),h=l.makeCalcdata(n,c),s.expand(l,h,{padded:!0}),m=b(t,n,v,d,h);var w=i.distinctVals(m);return g=w.vals,y=w.minDiff/2,p=E(f,h,m,g,y),S(f,p),f=f.filter(function(e){return e.val&&e.val.length}),f.length?(f[0].t={boxnum:t.numboxes,dPos:y},t.numboxes++,f):[{t:{emptybox:!0}}]}},{"../../lib":381,"../../plots/cartesian/axes":403,"fast-isnumeric":76}],487:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color"),s=e("./attributes");t.exports=function(t,n,o){function u(e,i){return r.coerce(t,n,s,e,i)}var a=u("y"),f=u("x"),l;if(a&&a.length)l="v",f||u("x0");else{if(!f||!f.length){n.visible=!1;return}l="h",u("y0")}u("orientation",l),u("line.color",(t.marker||{}).color||o),u("line.width",2),u("fillcolor",i.addOpacity(n.line.color,.5)),u("whiskerwidth"),u("boxmean");var c=r.coerce2(t,n,s,"marker.outliercolor"),h=u("marker.line.outliercolor"),p=c||h?u("boxpoints","suspectedoutliers"):u("boxpoints");p&&(u("jitter",p==="all"?.3:0),u("pointpos",p==="all"?-1.5:0),u("marker.symbol"),u("marker.opacity"),u("marker.size"),u("marker.color",n.line.color),u("marker.line.color"),u("marker.line.width"),p==="suspectedoutliers"&&(u("marker.line.outliercolor",n.marker.color),u("marker.line.outlierwidth")))}},{"../../components/color":303,"../../lib":381,"./attributes":485}],488:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/graph_interact"),s=e("../../lib"),o=e("../../components/color");t.exports=function(t,n,u,a){var f=t.cd,l=f[0].trace,c=f[0].t,h=t.xa,p=t.ya,d=[],v,m,g,y,b,w,E,S,x;y=a==="closest"?2.5*c.bdPos:c.bdPos,l.orientation==="h"?(v=function(e){return i.inbox(e.min-n,e.max-n)},m=function(e){var t=e.pos+c.bPos-u;return i.inbox(t-y,t+y)},b="y",w=p,S="x",x=h):(v=function(e){var t=e.pos+c.bPos-n;return i.inbox(t-y,t+y)},m=function(e){return i.inbox(e.min-u,e.max-u)},b="x",w=h,S="y",x=p),g=i.getDistanceFunction(a,v,m),i.getClosest(f,g,t);if(t.index===!1)return;var T=f[t.index],N=l.line.color,C=(l.marker||{}).color;o.opacity(N)&&l.line.width?t.color=N:o.opacity(C)&&l.boxpoints?t.color=C:t.color=l.fillcolor,t[b+"0"]=w.c2p(T.pos+c.bPos-c.bdPos,!0),t[b+"1"]=w.c2p(T.pos+c.bPos+c.bdPos,!0),r.tickText(w,w.c2l(T.pos),"hover").text,t[b+"LabelVal"]=T.pos;var k={},L=["med","min","q1","q3","max"],A,O;l.boxmean&&L.push("mean"),l.boxpoints&&[].push.apply(L,["lf","uf"]);for(var M=0;M<L.length;M++){A=L[M];if(!(A in T)||T[A]in k)continue;k[T[A]]=!0,E=x.c2p(T[A],!0),O=s.extendFlat({},t),O[S+"0"]=O[S+"1"]=E,O[S+"LabelVal"]=T[A],O.attr=A,A==="mean"&&"sd"in T&&l.boxmean==="sd"&&(O[S+"err"]=T.sd),t.name="",d.push(O)}return d}},{"../../components/color":303,"../../lib":381,"../../plots/cartesian/axes":403,"../../plots/cartesian/graph_interact":410}],489:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("./layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.calc=e("./calc"),r.setPositions=e("./set_positions"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="box",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","symbols","oriented","box","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"./attributes":485,"./calc":486,"./defaults":487,"./hover":488,"./layout_attributes":490,"./layout_defaults":491,"./plot":492,"./set_positions":493,"./style":494}],490:[function(e,t,n){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay"},boxgap:{valType:"number",min:0,max:1,dflt:.3},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3}}},{}],491:[function(e,t,n){"use strict";var r=e("../../plots/plots"),i=e("../../lib"),s=e("./layout_attributes");t.exports=function(t,n,o){function u(e,r){return i.coerce(t,n,s,e,r)}var a;for(var f=0;f<o.length;f++)if(r.traceIs(o[f],"box")){a=!0;break}if(!a)return;u("boxmode"),u("boxgap"),u("boxgroupgap")}},{"../../lib":381,"../../plots/plots":452,"./layout_attributes":490}],492:[function(e,t,n){"use strict";function u(){o=2e9}function a(){var e=o;return o=(69069*o+1)%4294967296,Math.abs(o-e)<429496729?a():o/4294967296}var r=e("d3"),i=e("../../lib"),s=e("../../components/drawing"),o=2e9,f=5,l=.01;t.exports=function(t,n,o){var c=t._fullLayout,h=n.x(),p=n.y(),d,v,m=n.plot.select(".boxlayer").selectAll("g.trace.boxes").data(o).enter().append("g").attr("class","trace boxes");m.each(function(e){var n=e[0].t,o=e[0].trace,m=c.boxmode==="group"&&t.numboxes>1,g=n.dPos*(1-c.boxgap)*(1-c.boxgroupgap)/(m?t.numboxes:1),y=m?2*n.dPos*(-0.5+(n.boxnum+.5)/t.numboxes)*(1-c.boxgap):0,b=g*o.whiskerwidth;if(o.visible!==!0||n.emptybox){r.select(this).remove();return}o.orientation==="h"?(d=p,v=h):(d=h,v=p),n.bPos=y,n.bdPos=g,u(),r.select(this).selectAll("path.box").data(i.identity).enter().append("path").attr("class","box").each(function(e){var t=d.c2p(e.pos+y,!0),n=d.c2p(e.pos+y-g,!0),s=d.c2p(e.pos+y+g,!0),u=d.c2p(e.pos+y-b,!0),a=d.c2p(e.pos+y+b,!0),f=v.c2p(e.q1,!0),l=v.c2p(e.q3,!0),c=i.constrain(v.c2p(e.med,!0),Math.min(f,l)+1,Math.max(f,l)-1),h=v.c2p(o.boxpoints===!1?e.min:e.lf,!0),p=v.c2p(o.boxpoints===!1?e.max:e.uf,!0);o.orientation==="h"?r.select(this).attr("d","M"+c+","+n+"V"+s+"M"+f+","+n+"V"+s+"H"+l+"V"+n+"Z"+"M"+f+","+t+"H"+h+"M"+l+","+t+"H"+p+(o.whiskerwidth===0?"":"M"+h+","+u+"V"+a+"M"+p+","+u+"V"+a)):r.select(this).attr("d","M"+n+","+c+"H"+s+"M"+n+","+f+"H"+s+"V"+l+"H"+n+"Z"+"M"+t+","+f+"V"+h+"M"+t+","+l+"V"+p+(o.whiskerwidth===0?"":"M"+u+","+h+"H"+a+"M"+u+","+p+"H"+a))}),o.boxpoints&&r.select(this).selectAll("g.points").data(function(e){return e.forEach(function(e){e.t=n,e.trace=o}),e}).enter().append("g").attr("class","points").selectAll("path").data(function(e){var t=o.boxpoints==="all"?e.val:e.val.filter(function(t){return t<e.lf||t>e.uf}),n=(e.q3-e.q1)*l,r=[],s=0,u,c,h,p,d,v,m;if(o.jitter){for(u=0;u<t.length;u++)c=Math.max(0,u-f),p=t[c],h=Math.min(t.length-1,u+f),d=t[h],o.boxpoints!=="all"&&(t[u]<e.lf?d=Math.min(d,e.lf):p=Math.max(p,e.uf)),v=Math.sqrt(n*(h-c)/(d-p))||0,v=i.constrain(Math.abs(v),0,1),r.push(v),s=Math.max(v,s);m=o.jitter*2/s}return t.map(function(t,n){var i=o.pointpos,s;return o.jitter&&(i+=m*r[n]*(a()-.5)),o.orientation==="h"?s={y:e.pos+i*g+y,x:t}:s={x:e.pos+i*g+y,y:t},o.boxpoints==="suspectedoutliers"&&t<e.uo&&t>e.lo&&(s.so=!0),s})}).enter().append("path").call(s.translatePoints,h,p),o.boxmean&&r.select(this).selectAll("path.mean").data(i.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(e){var t=d.c2p(e.pos+y,!0),n=d.c2p(e.pos+y-g,!0),i=d.c2p(e.pos+y+g,!0),s=v.c2p(e.mean,!0),u=v.c2p(e.mean-e.sd,!0),a=v.c2p(e.mean+e.sd,!0);o.orientation==="h"?r.select(this).attr("d","M"+s+","+n+"V"+i+(o.boxmean!=="sd"?"":"m0,0L"+u+","+t+"L"+s+","+n+"L"+a+","+t+"Z")):r.select(this).attr("d","M"+n+","+s+"H"+i+(o.boxmean!=="sd"?"":"m0,0L"+t+","+u+"L"+n+","+s+"L"+t+","+a+"Z"))})})}},{"../../components/drawing":325,"../../lib":381,d3:72}],493:[function(e,t,n){"use strict";var r=e("../../plots/plots"),i=e("../../plots/cartesian/axes"),s=e("../../lib");t.exports=function(t,n){var o=t._fullLayout,u=n.x(),a=n.y(),f=["v","h"],l,c,h,p;for(c=0;c<f.length;++c){var d=f[c],v=[],m=[],g=0,y=0,b,w,E;d==="h"?l=a:l=u;for(h=0;h<t.calcdata.length;++h)b=t.calcdata[h],w=b[0].t,E=b[0].trace,E.visible===!0&&r.traceIs(E,"box")&&!w.emptybox&&E.orientation===d&&E.xaxis===u._id&&E.yaxis===a._id&&(v.push(h),E.boxpoints!==!1&&(g=Math.max(g,E.jitter-E.pointpos-1),y=Math.max(y,E.jitter+E.pointpos-1)));for(h=0;h<v.length;h++){b=t.calcdata[v[h]];for(p=0;p<b.length;p++)m.push(b[p].pos)}if(!m.length)continue;var S=s.distinctVals(m),x=S.minDiff/2;m.length===S.vals.length&&(t.numboxes=1),i.minDtick(l,S.minDiff,S.vals[0],!0);for(c=0;c<v.length;++c)t.calcdata[c][0].t.dPos=x;var T=(1-o.boxgap)*(1-o.boxgroupgap)*x/t.numboxes;i.expand(l,S.vals,{vpadminus:x+g*T,vpadplus:x+y*T})}}},{"../../lib":381,"../../plots/cartesian/axes":403,"../../plots/plots":452}],494:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/color"),s=e("../../components/drawing");t.exports=function(t){var n=r.select(t).selectAll("g.trace.boxes");n.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){var t=e[0].trace,n=t.line.width;r.select(this).selectAll("path.box").style("stroke-width",n+"px").call(i.stroke,t.line.color).call(i.fill,t.fillcolor),r.select(this).selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(i.stroke,t.line.color),r.select(this).selectAll("g.points path").call(s.pointStyle,t)})}},{"../../components/color":303,"../../components/drawing":325,d3:72}],495:[function(e,t,n){"use strict";var r=e("../scattergeo/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../plots/attributes"),o=e("../../lib/extend").extendFlat,u=r.marker.line;t.exports={locations:{valType:"data_array"},locationmode:r.locationmode,z:{valType:"data_array"},text:{valType:"data_array"},marker:{line:{color:u.color,width:u.width}},zauto:i.zauto,zmin:i.zmin,zmax:i.zmax,colorscale:i.colorscale,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,hoverinfo:o({},s.hoverinfo,{flags:["location","z","text","name"]}),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":309,"../../lib/extend":376,"../../plots/attributes":401,"../scattergeo/attributes":582}],496:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(t,n){r(n,n.z,"","z")}},{"../../components/colorscale/calc":310}],497:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/colorscale/defaults"),s=e("./attributes");t.exports=function(t,n,o,u){function a(e,i){return r.coerce(t,n,s,e,i)}var f=a("locations"),l;f&&(l=f.length);if(!f||!l){n.visible=!1;return}var c=a("z");if(!Array.isArray(c)){n.visible=!1;return}c.length>l&&(n.z=c.slice(0,l)),a("locationmode"),a("text"),a("marker.line.color"),a("marker.line.width"),i(t,n,u,a,{prefix:"",cLetter:"z"}),a("hoverinfo",u._dataLength===1?"location+z+text":undefined)}},{"../../components/colorscale/defaults":312,"../../lib":381,"./attributes":495}],498:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../heatmap/colorbar"),r.calc=e("./calc"),r.plot=e("./plot").plot,r.moduleType="trace",r.name="choropleth",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","noOpacity"],r.meta={},t.exports=r},{"../../plots/geo":424,"../heatmap/colorbar":512,"./attributes":495,"./calc":496,"./defaults":497,"./plot":499}],499:[function(e,t,n){"use strict";function m(e,t){function l(t){var n=e.mockAxis;return i.tickText(n,n.c2l(t),"hover").text}var n=t.hoverinfo;if(n==="none")return function(t){delete t.nameLabel,delete t.textLabel};var r=n==="all"?d.hoverinfo.flags:n.split("+"),s=r.indexOf("name")!==-1,o=r.indexOf("location")!==-1,u=r.indexOf("z")!==-1,a=r.indexOf("text")!==-1,f=!s&&o;return function(n){var r=[];f?n.nameLabel=n.id:(s&&(n.nameLabel=t.name),o&&r.push(n.id)),u&&r.push(l(n.z)),a&&r.push(n.tx),n.textLabel=r.join("<br>")}}function g(e){return function(t,n){return{points:[{data:e._input,fullData:e,curveNumber:e.index,pointNumber:n,location:t.id,z:t.z}]}}}var r=e("d3"),i=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/graph_interact"),o=e("../../components/color"),u=e("../../components/drawing"),a=e("../../components/colorscale/get_scale"),f=e("../../components/colorscale/make_scale_function"),l=e("../../lib/topojson_utils").getTopojsonFeatures,c=e("../../lib/geo_location_utils").locationToFeature,h=e("../../lib/array_to_calc_item"),p=e("../../plots/geo/constants"),d=e("./attributes"),v=t.exports={};v.calcGeoJSON=function(e,t){var n=[],r=e.locations,i=r.length,s=l(e,t),o=(e.marker||{}).line||{},u;for(var a=0;a<i;a++){u=c(e.locationmode,r[a],s);if(u===undefined)continue;u.z=e.z[a],e.text!==undefined&&(u.tx=e.text[a]),h(o.color,u,"mlc",a),h(o.width,u,"mlw",a),n.push(u)}return n.length>0&&(n[0].trace=e),n},v.plot=function(e,t,n){var i=e.framework,o=i.select("g.choroplethlayer"),u=i.select("g.baselayer"),a=i.select("g.baselayeroverchoropleth"),f=p.baseLayersOverChoropleth,l,c=o.selectAll("g.trace.choropleth").data(t,function(e){return e.uid});c.enter().append("g").attr("class","trace choropleth"),c.exit().remove(),c.each(function(t){function a(t,n){if(!e.showHover)return;var r=e.projection(t.properties.ct);i(t),s.loneHover({x:r[0],y:r[1],name:t.nameLabel,text:t.textLabel},{container:e.hoverContainer.node()}),u=o(t,n),e.graphDiv.emit("plotly_hover",u)}function f(t,n){e.graphDiv.emit("plotly_click",o(t,n))}var n=v.calcGeoJSON(t,e.topojson),i=m(e,t),o=g(t),u=null,l=r.select(this).selectAll("path.choroplethlocation").data(n);l.enter().append("path").classed("choroplethlocation",!0).on("mouseover",a).on("click",f).on("mouseout",function(){s.loneUnhover(e.hoverContainer),e.graphDiv.emit("plotly_unhover",u)}).on("mousedown",function(){s.loneUnhover(e.hoverContainer)}).on("mouseup",a),l.exit().remove()}),a.selectAll("*").remove();for(var h=0;h<f.length;h++)l=f[h],u.select("g."+l).remove(),e.drawTopo(a,l,n),e.styleLayer(a,l,n);v.style(e)},v.style=function(e){e.framework.selectAll("g.trace.choropleth").each(function(e){var t=r.select(this),n=e.marker||{},i=n.line||{},s=e.zmin,l=e.zmax,c=a(e.colorscale),h=f(c,s,l);t.selectAll("path.choroplethlocation").each(function(e){r.select(this).attr("fill",function(e){return h(e.z)}).call(o.stroke,e.mlc||i.color).call(u.dashLine,"",e.mlw||i.width)})})}},{"../../components/color":303,"../../components/colorscale/get_scale":314,"../../components/colorscale/make_scale_function":319,"../../components/drawing":325,"../../lib/array_to_calc_item":372,"../../lib/geo_location_utils":378,"../../lib/topojson_utils":394,"../../plots/cartesian/axes":403,"../../plots/cartesian/graph_interact":410,"../../plots/geo/constants":422,"./attributes":495,d3:72}],500:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),i=e("../scatter/attributes"),s=e("../../lib/extend").extendFlat,o=i.line;t.exports={z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:r.text,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zauto:r.zauto,zmin:r.zmin,zmax:r.zmax,colorscale:r.colorscale,autocolorscale:r.autocolorscale,reversescale:r.reversescale,showscale:r.showscale,connectgaps:r.connectgaps,autocontour:{valType:"boolean",dflt:!0},ncontours:{valType:"integer",dflt:0},contours:{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"number",dflt:null},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill"},showlines:{valType:"boolean",dflt:!0}},line:{color:s({},o.color,{}),width:o.width,dash:o.dash,smoothing:s({},o.smoothing,{})},_nestedModules:{colorbar:"Colorbar"}}},{"../../lib/extend":376,"../heatmap/attributes":510,"../scatter/attributes":554}],501:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes"),i=e("../heatmap/calc");t.exports=function(t,n){var s=i(t,n),o=n.contours;if(n.autocontour!==!1){var u={type:"linear",range:[n.zmin,n.zmax]};r.autoTicks(u,(n.zmax-n.zmin)/(n.ncontours||15)),o.start=r.tickFirst(u),o.size=u.dtick,u.range.reverse(),o.end=r.tickFirst(u),o.start===n.zmin&&(o.start+=o.size),o.end===n.zmax&&(o.end-=o.size),o.end+=o.size/100,n._input.contours=o}return s}},{"../../plots/cartesian/axes":403,"../heatmap/calc":511}],502:[function(e,t,n){"use strict";var r=e("../../plots/plots"),i=e("../../components/colorbar/draw"),s=e("./make_color_map");t.exports=function(t,n){var o=n[0].trace,u="cb"+o.uid;t._fullLayout._infolayer.selectAll("."+u).remove();if(o.showscale===!1){r.autoMargin(t,u);return}var a=i(t,u);n[0].t.cb=a;var f=o.contours,l=o.line,c=f.size||1,h=f.coloring,p=s(o,{isColorbar:!0});h==="heatmap"&&a.filllevels({start:o.zmin,end:o.zmax,size:(o.zmax-o.zmin)/254}),a.fillcolor(h==="fill"||h==="heatmap"?p:"").line({color:h==="lines"?p:l.color,width:f.showlines!==!1?l.width:0,dash:l.dash}).levels({start:f.start,end:f.end,size:c}).options(o.colorbar)()}},{"../../components/colorbar/draw":306,"../../plots/plots":452,"./make_color_map":506}],503:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../heatmap/has_columns"),s=e("../heatmap/xyz_defaults"),o=e("../contour/style_defaults"),u=e("./attributes");t.exports=function(t,n,a,f){function l(e,i){return r.coerce(t,n,u,e,i)}var c=s(t,n,l);if(!c){n.visible=!1;return}l("text"),l("connectgaps",i(n));var h=r.coerce2(t,n,u,"contours.start"),p=r.coerce2(t,n,u,"contours.end"),d=l("autocontour",!h||!p);d?l("ncontours"):l("contours.size"),o(t,n,l,f)}},{"../../lib":381,"../contour/style_defaults":509,"../heatmap/has_columns":515,"../heatmap/xyz_defaults":521,"./attributes":500}],504:[function(e,t,n){"use strict";var r=e("../heatmap/hover");t.exports=function(t,n,i,s){return r(t,n,i,s,!0)}},{"../heatmap/hover":516}],505:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.colorbar=e("./colorbar"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="contour",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap","contour"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"./attributes":500,"./calc":501,"./colorbar":502,"./defaults":503,"./hover":504,"./plot":507,"./style":508}],506:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/colorscale/get_scale");t.exports=function(t){var n=t.contours,s=n.start,o=n.end,u=n.size||1,a=Math.floor((o+u/10-s)/u)+1,f=n.coloring==="lines"?0:1,l=i(t.colorscale),c=l.length,h=new Array(c),p=new Array(c),d,v;if(n.coloring==="heatmap"){t.zauto&&t.autocontour===!1&&(t.zmin=s-u/2,t.zmax=t.zmin+a*u);for(v=0;v<c;v++)d=l[v],h[v]=d[0]*(t.zmax-t.zmin)+t.zmin,p[v]=d[1];var m=r.extent([t.zmin,t.zmax,n.start,n.start+u*(a-1)]),g=m[t.zmin<t.zmax?0:1],y=m[t.zmin<t.zmax?1:0];g!==t.zmin&&(h.splice(0,0,g),p.splice(0,0,Range[0])),y!==t.zmax&&(h.push(y),p.push(p[p.length-1]))}else for(v=0;v<c;v++)d=l[v],h[v]=(d[0]*(a+f-1)-f/2)*u+s,p[v]=d[1];var b=r.scale.linear().interpolate(r.interpolateRgb).domain(h).range(p);return b}},{"../../components/colorscale/get_scale":314,d3:72}],507:[function(e,t,n){"use strict";function d(e,t,n){i.markTime("in Contour.plot");var r=n[0].trace,s=n[0].x,u=n[0].y,a=r.contours,f=r.uid,l=t.x(),c=t.y(),h=e._fullLayout,p="contour"+f,d=v(a,t,n[0]);if(r.visible!==!0){h._paper.selectAll("."+p+",.hm"+f).remove(),h._infolayer.selectAll(".cb"+f).remove();return}a.coloring==="heatmap"?(r.zauto&&r.autocontour===!1&&(r._input.zmin=r.zmin=a.start-a.size/2,r._input.zmax=r.zmax=r.zmin+d.length*a.size),o(e,t,[n])):h._paper.selectAll(".hm"+f).remove(),g(d),b(d);var m=l.c2p(s[0],!0),y=l.c2p(s[s.length-1],!0),w=c.c2p(u[0],!0),E=c.c2p(u[u.length-1],!0),S=[[m,E],[y,E],[y,w],[m,w]],x=T(t,n,p);N(x,S,a),C(x,d,S,a),L(x,d,a),A(x,t,n[0],S),i.markTime("done Contour.plot")}function v(e,t,n){var r=e.size||1,i=[];for(var s=e.start;s<e.end+r/10;s+=r)i.push({level:s,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.x(),yaxis:t.y(),x:n.x,y:n.y,z:n.z,smoothing:n.trace.line.smoothing});return i}function m(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(n===5||n===10){var r=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>r?n===5?713:1114:n===5?104:208}return n===15?0:n}function g(e){var t=e[0].z,n=t.length,r=t[0].length,i=n===2||r===2,s,o,c,h,p,d,v,g,y;for(o=0;o<n-1;o++){h=[],o===0&&(h=h.concat(u)),o===n-2&&(h=h.concat(a));for(s=0;s<r-1;s++){c=h.slice(),s===0&&(c=c.concat(f)),s===r-2&&(c=c.concat(l)),p=s+","+o,d=[[t[o][s],t[o][s+1]],[t[o+1][s],t[o+1][s+1]]];for(y=0;y<e.length;y++){g=e[y],v=m(g.level,d);if(!v)continue;g.crossings[p]=v,c.indexOf(v)!==-1&&(g.starts.push([s,o]),i&&c.indexOf(v,c.indexOf(v)+1)!==-1&&g.starts.push([s,o]))}}}}function y(e,t,n){function _(e){return u[e%u.length]}var r=t.join(","),i=r,s=e.crossings[i],o=w(s,n,t),u=[x(e,t,[-o[0],-o[1]])],a=o.join(","),f=e.z.length,l=e.z[0].length,d;for(d=0;d<1e4;d++){s>20?(s=h[s][(o[0]||o[1])<0?0:1],e.crossings[i]=p[s]):delete e.crossings[i],o=c[s];if(!o){console.log("found bad marching index",s,t,e.level);break}u.push(x(e,t,o)),t[0]+=o[0],t[1]+=o[1],E(u[u.length-1],u[u.length-2])&&u.pop(),i=t.join(",");if(i===r&&o.join(",")===a||n&&(o[0]&&(t[0]<0||t[0]>l-2)||o[1]&&(t[1]<0||t[1]>f-2)))break;s=e.crossings[i]}d===1e4&&console.log("Infinite loop in contour?");var v=E(u[0],u[u.length-1]),m=0,g=.2*e.smoothing,y=[],b=0,T,N,C,k,L,A,O;for(d=1;d<u.length;d++)O=S(u[d],u[d-1]),m+=O,y.push(O);var M=m/y.length*g;for(d=u.length-2;d>=b;d--){T=y[d];if(T<M){C=0;for(N=d-1;N>=b;N--){if(!(T+y[N]<M))break;T+=y[N]}if(v&&d===u.length-2)for(C=0;C<N;C++){if(!(T+y[C]<M))break;T+=y[C]}L=d-N+C+1,A=Math.floor((d+N+C+2)/2),!v&&d===u.length-2?k=u[u.length-1]:!v&&N===-1?k=u[0]:L%2?k=_(A):k=[(_(A)[0]+_(A+1)[0])/2,(_(A)[1]+_(A+1)[1])/2],u.splice(N+1,d-N+1,k),d=N+1,C&&(b=C),v&&(d===u.length-2?u[C]=u[u.length-1]:d===0&&(u[u.length-1]=u[0]))}}u.splice(0,b);if(u.length<2)return;if(v)u.pop(),e.paths.push(u);else{n||console.log("unclosed interior contour?",e.level,r,u.join("L"));var D=!1;e.edgepaths.forEach(function(t,n){if(!D&&E(t[0],u[u.length-1])){u.pop(),D=!0;var r=!1;e.edgepaths.forEach(function(t,i){!r&&E(t[t.length-1],u[0])&&(r=!0,u.splice(0,1),e.edgepaths.splice(n,1),i===n?e.paths.push(u.concat(t)):e.edgepaths[i]=e.edgepaths[i].concat(u,t))}),r||(e.edgepaths[n]=u.concat(t))}}),e.edgepaths.forEach(function(t,n){!D&&E(t[t.length-1],u[0])&&(u.splice(0,1),e.edgepaths[n]=t.concat(u),D=!0)}),D||e.edgepaths.push(u)}}function b(e){var t,n,r,i,s;for(r=0;r<e.length;r++){i=e[r];for(s=0;s<i.starts.length;s++)n=i.starts[s],y(i,n,"edge");t=0;while(Object.keys(i.crossings).length&&t<1e4)t++,n=Object.keys(i.crossings)[0].split(",").map(Number),y(i,n);t===1e4&&console.log("Infinite loop in contour?")}}function w(e,t,n){var r=0,i=0;return e>20&&t?e===208||e===1114?r=n[0]===0?1:-1:i=n[1]===0?1:-1:u.indexOf(e)!==-1?i=1:f.indexOf(e)!==-1?r=1:a.indexOf(e)!==-1?i=-1:r=-1,[r,i]}function E(e,t){return Math.abs(e[0]-t[0])<.01&&Math.abs(e[1]-t[1])<.01}function S(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function x(e,t,
n){var r=t[0]+Math.max(n[0],0),i=t[1]+Math.max(n[1],0),s=e.z[i][r],o=e.xaxis,u=e.yaxis;if(n[1]){var a=(e.level-s)/(e.z[i][r+1]-s);return[o.c2p((1-a)*e.x[r]+a*e.x[r+1],!0),u.c2p(e.y[i],!0)]}var f=(e.level-s)/(e.z[i+1][r]-s);return[o.c2p(e.x[r],!0),u.c2p((1-f)*e.y[i]+f*e.y[i+1],!0)]}function T(e,t,n){var r=e.plot.select(".maplayer").selectAll("g.contour."+n).data(t);return r.enter().append("g").classed("contour",!0).classed(n,!0),r.exit().remove(),r}function N(e,t,n){var r=e.selectAll("g.contourbg").data([0]);r.enter().append("g").classed("contourbg",!0);var i=r.selectAll("path").data(n.coloring==="fill"?[0]:[]);i.enter().append("path"),i.exit().remove(),i.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function C(e,t,n,i){var s=e.selectAll("g.contourfill").data([0]);s.enter().append("g").classed("contourfill",!0);var o=s.selectAll("path").data(i.coloring==="fill"?t:[]);o.enter().append("path"),o.exit().remove(),o.each(function(e){var t=k(e,n);t?r.select(this).attr("d",t).style("stroke","none"):r.select(this).remove()})}function k(e,t){function p(e){return Math.abs(e[1]-t[0][1])<.01}function d(e){return Math.abs(e[1]-t[2][1])<.01}function v(e){return Math.abs(e[0]-t[0][0])<.01}function m(e){return Math.abs(e[0]-t[2][0])<.01}var n=e.edgepaths.length||e.z[0][0]<e.level?"":"M"+t.join("L")+"Z",r=0,i=e.edgepaths.map(function(e,t){return t}),o=!0,u,a,f,l,c,h;while(i.length){h=s.smoothopen(e.edgepaths[r],e.smoothing),n+=o?h:h.replace(/^M/,"L"),i.splice(i.indexOf(r),1),u=e.edgepaths[r][e.edgepaths[r].length-1],l=-1;for(f=0;f<4;f++){if(!u){console.log("missing end?",r,e);break}p(u)&&!m(u)?a=t[1]:v(u)?a=t[0]:d(u)?a=t[3]:m(u)&&(a=t[2]);for(c=0;c<e.edgepaths.length;c++){var g=e.edgepaths[c][0];Math.abs(u[0]-a[0])<.01?Math.abs(u[0]-g[0])<.01&&(g[1]-u[1])*(a[1]-g[1])>=0&&(a=g,l=c):Math.abs(u[1]-a[1])<.01?Math.abs(u[1]-g[1])<.01&&(g[0]-u[0])*(a[0]-g[0])>=0&&(a=g,l=c):console.log("endpt to newendpt is not vert. or horz.",u,a,g)}u=a;if(l>=0)break;n+="L"+a}if(l===e.edgepaths.length){console.log("unclosed perimeter path");break}r=l,o=i.indexOf(r)===-1,o&&(r=i[0],n+="Z")}for(r=0;r<e.paths.length;r++)n+=s.smoothclosed(e.paths[r],e.smoothing);return n}function L(e,t,n){var r=t[0].smoothing,i=e.selectAll("g.contourlevel").data(n.showlines===!1?[]:t);i.enter().append("g").classed("contourlevel",!0),i.exit().remove();var o=i.selectAll("path.openline").data(function(e){return e.edgepaths});o.enter().append("path").classed("openline",!0),o.exit().remove(),o.attr("d",function(e){return s.smoothopen(e,r)}).style("stroke-miterlimit",1);var u=i.selectAll("path.closedline").data(function(e){return e.paths});u.enter().append("path").classed("closedline",!0),u.exit().remove(),u.attr("d",function(e){return s.smoothclosed(e,r)}).style("stroke-miterlimit",1)}function A(e,t,n,r){var i="clip"+n.trace.uid,o=t.plot.selectAll("defs").data([0]);o.enter().append("defs");var u=o.selectAll("#"+i).data(n.trace.connectgaps?[]:[0]);u.enter().append("clipPath").attr("id",i),u.exit().remove();if(n.trace.connectgaps===!1){var a={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.x(),yaxis:t.y(),x:n.x,y:n.y,z:O(n),smoothing:0};g([a]),b([a]);var f=k(a,r),l=u.selectAll("path").data([0]);l.enter().append("path"),l.attr("d",f)}else i=null;e.call(s.setClipUrl,i),t.plot.selectAll(".hm"+n.trace.uid).call(s.setClipUrl,i)}function O(e){var t=e.trace._emptypoints,n=[],r=e.z.length,i=e.z[0].length,s,o=[],u;for(s=0;s<i;s++)o.push(1);for(s=0;s<r;s++)n.push(o.slice());for(s=0;s<t.length;s++)u=t[s],n[u[0]][u[1]]=0;return e.zmask=n,n}var r=e("d3"),i=e("../../lib"),s=e("../../components/drawing"),o=e("../heatmap/plot");t.exports=function(t,n,r){for(var i=0;i<r.length;i++)d(t,n,r[i])};var u=[1,9,13,104,713],a=[4,6,7,104,713],f=[8,12,14,208,1114],l=[2,3,11,208,1114],c=[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],h={104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},p={1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11}},{"../../components/drawing":325,"../../lib":381,"../heatmap/plot":519,d3:72}],508:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/drawing"),s=e("../heatmap/style"),o=e("./make_color_map");t.exports=function(t){var n=r.select(t).selectAll("g.contour");n.style("opacity",function(e){return e.trace.opacity}),n.each(function(e){var t=r.select(this),n=e.trace,s=n.contours,u=n.line,a=s.size||1,f=s.start,l=o(n);t.selectAll("g.contourlevel").each(function(e,t){r.select(this).selectAll("path").call(i.lineGroupStyle,u.width,s.coloring==="lines"?l(f+t*a):u.color,u.dash)}),t.selectAll("g.contourbg path").style("fill",l(f-a/2)),t.selectAll("g.contourfill path").style("fill",function(e,t){return l(f+(t+.5)*a)})}),s(t)}},{"../../components/drawing":325,"../heatmap/style":520,"./make_color_map":506,d3:72}],509:[function(e,t,n){"use strict";var r=e("../../components/colorscale/defaults");t.exports=function(t,n,i,s){var o=i("contours.coloring"),u;o==="fill"&&(u=i("contours.showlines")),u!==!1&&(o!=="lines"&&i("line.color","#000"),i("line.width",.5),i("line.dash")),i("line.smoothing"),(n.contours||{}).coloring!=="none"&&r(t,n,s,i,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":312}],510:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../components/colorscale/attributes"),s=e("../../lib/extend").extendFlat;t.exports={z:{valType:"data_array"},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:{valType:"data_array"},transpose:{valType:"boolean",dflt:!1},xtype:{valType:"enumerated",values:["array","scaled"]},ytype:{valType:"enumerated",values:["array","scaled"]},zauto:i.zauto,zmin:i.zmin,zmax:i.zmax,colorscale:i.colorscale,autocolorscale:s({},i.autocolorscale,{dflt:!1}),reversescale:i.reversescale,showscale:i.showscale,zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1},connectgaps:{valType:"boolean",dflt:!1},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":309,"../../lib/extend":376,"../scatter/attributes":554}],511:[function(e,t,n){"use strict";function h(e){function f(e){return r(e)?+e:undefined}var t=e.z,n,i,s,o,u,a;if(e.transpose){n=0;for(u=0;u<t.length;u++)n=Math.max(n,t[u].length);if(n===0)return!1;s=function(e){return e.length},o=function(e,t,n){return e[n][t]}}else n=t.length,s=function(e,t){return e[t].length},o=function(e,t,n){return e[t][n]};var l=new Array(n);for(u=0;u<n;u++){i=s(t,u),l[u]=new Array(i);for(a=0;a<i;a++)l[u][a]=f(o(t,u,a))}return l}function p(e,t,n,r,i,s){var u=[],a=o.traceIs(e,"contour"),f=o.traceIs(e,"histogram"),l=o.traceIs(e,"gl2d"),c,h,p;if(Array.isArray(t)&&!f&&s.type!=="category"){t=t.map(s.d2c);var d=t.length;if(!(d<=i))return a?t.slice(0,i):t.slice(0,i+1);if(a||l)u=t.slice(0,i);else if(i===1)u=[t[0]-.5,t[0]+.5];else{u=[1.5*t[0]-.5*t[1]];for(p=1;p<d;p++)u.push((t[p-1]+t[p])*.5);u.push(1.5*t[d-1]-.5*t[d-2])}if(d<i){var v=u[u.length-1],m=v-u[u.length-2];for(p=d;p<i;p++)v+=m,u.push(v)}}else{h=r||1,n===undefined?c=0:f||s.type==="category"?c=n:c=s.d2c(n);for(p=a||l?0:-0.5;p<i;p++)u.push(c+h*p)}return u}function m(e){return.5-.25*Math.min(1,e*.5)}function g(e,t,n){var r=1,i,s;if(Array.isArray(n))for(i=0;i<t.length;i++)s=t[i],e[s[0]][s[1]]=n[s[0]][s[1]];else b(e,t);return e}function y(e){var t=[],n={},r=[],i=e[0],s=[],o=[0,0,0],u=c(e),a,f,l,h,p,d,v,m;for(f=0;f<e.length;f++){a=s,s=i,i=e[f+1]||[];for(l=0;l<u;l++)s[l]===undefined&&(d=(s[l-1]!==undefined?1:0)+(s[l+1]!==undefined?1:0)+(a[l]!==undefined?1:0)+(i[l]!==undefined?1:0),d?(f===0&&d++,l===0&&d++,f===e.length-1&&d++,l===s.length-1&&d++,d<4&&(n[[f,l]]=[f,l,d]),t.push([f,l,d])):r.push([f,l]))}while(r.length){v={},m=!1;for(p=r.length-1;p>=0;p--)h=r[p],f=h[0],l=h[1],d=((n[[f-1,l]]||o)[2]+(n[[f+1,l]]||o)[2]+(n[[f,l-1]]||o)[2]+(n[[f,l+1]]||o)[2])/20,d&&(v[h]=[f,l,d],r.splice(p,1),m=!0);if(!m)throw"findEmpties iterated with no new neighbors";for(h in v)n[h]=v[h],t.push(v[h])}return t.sort(function(e,t){return t[2]-e[2]})}function b(e,t,n){var r=0,i,s,o,u,a,f,l,c,h,p,d,m,g;for(u=0;u<t.length;u++){i=t[u],s=i[0],o=i[1],d=e[s][o],p=0,h=0;for(a=0;a<4;a++){f=v[a],l=e[s+f[0]];if(!l)continue;c=l[o+f[1]],c!==undefined&&(p===0?m=g=c:(m=Math.min(m,c),g=Math.max(g,c)),h++,p+=c)}if(h===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[s][o]=p/h,d===undefined?h<4&&(r=1):(e[s][o]=(1+n)*e[s][o]-n*d,g>m&&(r=Math.max(r,Math.abs(e[s][o]-d)/(g-m))))}return r}var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("../../plots/plots"),u=e("../histogram2d/calc"),a=e("../../components/colorscale/calc"),f=e("./has_columns"),l=e("./convert_column_xyz"),c=e("./max_row_length");t.exports=function(t,n){function A(e){b=n._input.zsmooth=n.zsmooth=!1,i.notifier("cannot fast-zsmooth: "+e)}i.markTime("start convert x&y");var r=s.getFromId(t,n.xaxis||"x"),d=s.getFromId(t,n.yaxis||"y"),v=o.traceIs(n,"contour"),m=o.traceIs(n,"histogram"),b=v?"best":n.zsmooth,w,E,S,x,T,N,C,k;r._minDtick=0,d._minDtick=0,i.markTime("done convert x&y");if(m){var L=u(t,n);w=L.x,E=L.x0,S=L.dx,x=L.y,T=L.y0,N=L.dy,C=L.z}else{f(n)&&l(n,r,d),w=n.x?r.makeCalcdata(n,"x"):[],x=n.y?d.makeCalcdata(n,"y"):[],E=n.x0||0,S=n.dx||1,T=n.y0||0,N=n.dy||1,C=h(n);if(v||n.connectgaps)n._emptypoints=y(C),n._interpz=g(C,n._emptypoints,n._interpz)}if(b==="fast")if(r.type==="log"||d.type==="log")A("log axis found");else if(!m){if(w.length){var O=(w[w.length-1]-w[0])/(w.length-1),M=Math.abs(O/100);for(k=0;k<w.length-1;k++)if(Math.abs(w[k+1]-w[k]-O)>M){A("x scale is not linear");break}}if(x.length&&b==="fast"){var _=(x[x.length-1]-x[0])/(x.length-1),D=Math.abs(_/100);for(k=0;k<x.length-1;k++)if(Math.abs(x[k+1]-x[k]-_)>D){A("y scale is not linear");break}}}var P=c(C),H=n.xtype==="scaled"?"":n.x,B=p(n,H,E,S,P,r),j=n.ytype==="scaled"?"":n.y,F=p(n,j,T,N,C.length,d);s.expand(r,B),s.expand(d,F);var I={x:B,y:F,z:C};a(n,C,"","z");if(v&&n.contours&&n.contours.coloring==="heatmap"){var q=n.type==="contour"?"heatmap":"histogram2d";I.xfill=p(q,H,E,S,P,r),I.yfill=p(q,j,T,N,C.length,d)}return[I]};var d=.01,v=[[-1,0],[1,0],[0,-1],[0,1]]},{"../../components/colorscale/calc":310,"../../lib":381,"../../plots/cartesian/axes":403,"../../plots/plots":452,"../histogram2d/calc":531,"./convert_column_xyz":513,"./has_columns":515,"./max_row_length":518,"fast-isnumeric":76}],512:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("../../plots/plots"),u=e("../../components/colorscale/get_scale"),a=e("../../components/colorbar/draw");t.exports=function(t,n){var f=n[0].trace,l="cb"+f.uid,c=u(f.colorscale),h=f.zmin,p=f.zmax;i(h)||(h=s.aggNums(Math.min,null,f.z)),i(p)||(p=s.aggNums(Math.max,null,f.z)),t._fullLayout._infolayer.selectAll("."+l).remove();if(!f.showscale){o.autoMargin(t,l);return}var d=n[0].t.cb=a(t,l);d.fillcolor(r.scale.linear().domain(c.map(function(e){return h+e[0]*(p-h)})).range(c.map(function(e){return e[1]}))).filllevels({start:h,end:p,size:(p-h)/254}).options(f.colorbar)(),s.markTime("done colorbar")}},{"../../components/colorbar/draw":306,"../../components/colorscale/get_scale":314,"../../lib":381,"../../plots/plots":452,d3:72,"fast-isnumeric":76}],513:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(t,n,i){var s=t.x.slice(),o=t.y.slice(),u=t.z,a=t.text,f=Math.min(s.length,o.length,u.length),l=a!==undefined&&!Array.isArray(a[0]),c;f<s.length&&(s=s.slice(0,f)),f<o.length&&(o=o.slice(0,f));for(c=0;c<f;c++)s[c]=n.d2c(s[c]),o[c]=i.d2c(o[c]);var h=r.distinctVals(s),p=h.vals,d=r.distinctVals(o),v=d.vals,m=r.init2dArray(v.length,p.length),g,y,b;l&&(b=r.init2dArray(v.length,p.length));for(c=0;c<f;c++)g=r.findBin(s[c]+h.minDiff/2,p),y=r.findBin(o[c]+d.minDiff/2,v),m[y][g]=u[c],l&&(b[y][g]=a[c]);t.x=p,t.y=v,t.z=m,l&&(t.text=b)}},{"../../lib":381}],514:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./has_columns"),s=e("./xyz_defaults"),o=e("../../components/colorscale/defaults"),u=e("./attributes");t.exports=function(t,n,a,f){function l(e,i){return r.coerce(t,n,u,e,i)}var c=s(t,n,l);if(!c){n.visible=!1;return}l("text"),l("zsmooth"),l("connectgaps",i(n)&&n.zsmooth!==!1),o(t,n,f,l,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":312,"../../lib":381,"./attributes":510,"./has_columns":515,"./xyz_defaults":521}],515:[function(e,t,n){"use strict";t.exports=function(e){return!Array.isArray(e.z[0])}},{}],516:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/graph_interact"),i=e("../../lib");t.exports=function(t,n,s,o,u){if(t.distance<r.MAXDIST)return;var a=t.cd[0],f=a.trace,l=t.xa,c=t.ya,h=a.x,p=a.y,d=a.z,v=a.zmask,m=h,g=p,y,b,w,E;if(t.index!==!1){try{w=Math.round(t.index[1]),E=Math.round(t.index[0])}catch(S){console.log("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index);return}if(w<0||w>=d[0].length||E<0||E>d.length)return}else{if(r.inbox(n-h[0],n-h[h.length-1])>r.MAXDIST||r.inbox(s-p[0],s-p[p.length-1])>r.MAXDIST)return;if(u){var x;m=[2*h[0]-h[1]];for(x=1;x<h.length;x++)m.push((h[x]+h[x-1])/2);m.push([2*h[h.length-1]-h[h.length-2]]),g=[2*p[0]-p[1]];for(x=1;x<p.length;x++)g.push((p[x]+p[x-1])/2);g.push([2*p[p.length-1]-p[p.length-2]])}w=Math.max(0,Math.min(m.length-2,i.findBin(n,m))),E=Math.max(0,Math.min(g.length-2,i.findBin(s,g)))}var T=l.c2p(h[w]),N=l.c2p(h[w+1]),C=c.c2p(p[E]),k=c.c2p(p[E+1]);u?(N=T,y=h[w],k=C,b=p[E]):(y=(h[w]+h[w+1])/2,b=(p[E]+p[E+1])/2,f.zsmooth&&(T=N=(T+N)/2,C=k=(C+k)/2));var L=d[E][w];v&&!v[E][w]&&(L=undefined);var A;return Array.isArray(f.text)&&Array.isArray(f.text[E])&&(A=f.text[E][w]),[i.extendFlat(t,{index:[E,w],distance:r.MAXDIST+10,x0:T,x1:N,y0:C,y1:k,xLabelVal:y,yLabelVal:b,zLabelVal:L,text:A})]}},{"../../lib":381,"../../plots/cartesian/graph_interact":410}],517:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("./calc"),r.plot=e("./plot"),r.colorbar=e("./colorbar"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.moduleType="trace",r.name="heatmap",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"./attributes":510,"./calc":511,"./colorbar":512,"./defaults":514,"./hover":516,"./plot":519,"./style":520}],518:[function(e,t,n){"use strict";t.exports=function(t){var n=0;for(var r=0;r<t.length;r++)n=Math.max(n,t[r].length);return n}},{}],519:[function(e,t,n){"use strict";function l(e,t,n){function W(e,t){var n=t.length-2,r=s.constrain(s.findBin(e,t),0,n),i=t[r],o=t[r+1],u=s.constrain(r+(e-i)/(o-i)-.5,0,n),a=Math.round(u),f=Math.abs(u-a);return!u||u===n||!f?{bin0:a,bin1:a,frac:0}:{bin0:a,frac:f,bin1:Math.round(a+f/(u-a))}}function st(e,t){if(e!==undefined){var n=R((e-g)/(y-g));return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),K+=t,Q+=n[0]*t,G+=n[1]*t,Y+=n[2]*t,n}return[0,0,0,0]}function ot(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(n[3]*255)}function ut(e,t,n,r){var i=e[n.bin0];if(i===undefined)return st(undefined,1);var s=e[n.bin1],o=t[n.bin0],u=t[n.bin1],a=s-i||0,f=o-i||0,l;return s===undefined?u===undefined?l=0:o===undefined?l=2*(u-i):l=(2*u-o-i)*2/3:u===undefined?o===undefined?l=0:l=(2*i-s-o)*2/3:o===undefined?l=(2*u-s-i)*2/3:l=u+i-s-o,st(i+n.frac*a+r.frac*(f+n.frac*l))}s.markTime("in Heatmap.plot");var l=n[0].trace,c=l.uid,h=t.x(),p=t.y(),d=e._fullLayout,v="hm"+c;d._paper.selectAll(".contour"+c).remove();if(l.visible!==!0){d._paper.selectAll("."+v).remove(),d._infolayer.selectAll(".cb"+c).remove();return}var m=n[0].z,g=l.zmin,y=l.zmax,b=u(l.colorscale),w=n[0].x,E=n[0].y,S=o.traceIs(l,"contour"),x=S?"best":l.zsmooth,T=m.length,N=f(m),C=!1,k,L,A,O=!1,M,_,D;D=0;while(k===undefined&&D<w.length-1)k=h.c2p(w[D]),D++;D=w.length-1;while(L===undefined&&D>0)L=h.c2p(w[D]),D--;L<k&&(A=L,L=k,k=A,C=!0),D=0;while(M===undefined&&D<E.length-1)M=p.c2p(E[D]),D++;D=E.length-1;while(_===undefined&&D>0)_=p.c2p(E[D]),D--;_<M&&(A=M,M=_,_=A,O=!0),S&&(w=n[0].xfill,E=n[0].yfill);if(x!=="fast"){var P=x==="best"?0:.5;k=Math.max(-P*h._length,k),L=Math.min((1+P)*h._length,L),M=Math.max(-P*p._length,M),_=Math.min((1+P)*p._length,_)}var H=Math.round(L-k),B=Math.round(_-M);if(H<=0||B<=0)return;var j,F;x==="fast"?(j=N,F=T):(j=H,F=B);var I=document.createElement("canvas");I.width=j,I.height=F;var q=I.getContext("2d"),R=r.scale.linear().domain(b.map(function(e){return e[0]})).range(b.map(function(e){var t=i(e[1]).toRgb();return[t.r,t.g,t.b,t.a]})).clamp(!0),U,z;x==="fast"?(U=C?function(e){return N-1-e}:s.identity,z=O?function(e){return T-1-e}:s.identity):(U=function(e){return s.constrain(Math.round(h.c2p(w[e])-k),0,H)},z=function(e){return s.constrain(Math.round(p.c2p(E[e])-M),0,B)});var X=z(0),V=[X,X],$=C?0:1,J=O?0:1,K=0,Q=0,G=0,Y=0,Z,et,tt,nt,rt,it;s.markTime("done init png");if(x){var at=0,ft=new Uint8Array(H*B*4);if(x==="best"){var lt=new Array(w.length),ct=new Array(E.length),ht=new Array(H),pt,dt,vt;for(D=0;D<w.length;D++)lt[D]=Math.round(h.c2p(w[D])-k);for(D=0;D<E.length;D++)ct[D]=Math.round(p.c2p(E[D])-M);for(D=0;D<H;D++)ht[D]=W(D,lt);for(et=0;et<B;et++){pt=W(et,ct),dt=m[pt.bin0],vt=m[pt.bin1];for(D=0;D<H;D++,at+=4)it=ut(dt,vt,ht[D],pt),ot(ft,at,it)}}else for(et=0;et<T;et++){rt=m[et],V=z(et);for(D=0;D<N;D++)it=st(rt[D],1),at=(V*H+U(D))*4,ot(ft,at,it)}var mt=q.createImageData(H,B);mt.data.set(ft),q.putImageData(mt,0,0)}else for(et=0;et<T;et++){rt=m[et],V.reverse(),V[J]=z(et+1);if(V[0]===V[1]||V[0]===undefined||V[1]===undefined)continue;tt=U(0),Z=[tt,tt];for(D=0;D<N;D++){Z.reverse(),Z[$]=U(D+1);if(Z[0]===Z[1]||Z[0]===undefined||Z[1]===undefined)continue;nt=rt[D],it=st(nt,(Z[1]-Z[0])*(V[1]-V[0])),q.fillStyle="rgba("+it.join(",")+")",q.fillRect(Z[0],V[0],Z[1]-Z[0],V[1]-V[0])}}s.markTime("done filling png"),Q=Math.round(Q/K),G=Math.round(G/K),Y=Math.round(Y/K);var gt=i("rgb("+Q+","+G+","+Y+")");e._hmpixcount=(e._hmpixcount||0)+K,e._hmlumcount=(e._hmlumcount||0)+K*gt.getLuminance();var yt=t.plot.select(".imagelayer").selectAll("g.hm."+v).data([0]);yt.enter().append("g").classed("hm",!0).classed(v,!0),yt.exit().remove();var bt=yt.selectAll("image").data(n);bt.enter().append("svg:image"),bt.exit().remove(),bt.attr({xmlns:a.svg,"xlink:href":I.toDataURL("image/png"),height:B,width:H,x:k,y:M,preserveAspectRatio:"none"}),s.markTime("done showing png")}var r=e("d3"),i=e("tinycolor2"),s=e("../../lib"),o=e("../../plots/plots"),u=e("../../components/colorscale/get_scale"),a=e("../../constants/xmlns_namespaces"),f=e("./max_row_length");t.exports=function(e,t,n){for(var r=0;r<n.length;r++)l(e,t,n[r])}},{"../../components/colorscale/get_scale":314,"../../constants/xmlns_namespaces":369,"../../lib":381,"../../plots/plots":452,"./max_row_length":518,d3:72,tinycolor2:233}],520:[function(e,t,n){"use strict";var r=e("d3");t.exports=function(t){r.select(t).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{d3:72}],521:[function(e,t,n){"use strict";function s(e,t){var n=t(e),r=n?t(e+"type","array"):"scaled";return r==="scaled"&&(t(e+"0"),t("d"+e)),n}function o(e){var t=!0,n=!1,i=!1,s;for(var o=0;o<e.length;o++){s=e[o];if(!Array.isArray(s)){t=!1;break}s.length>0&&(n=!0);for(var u=0;u<s.length;u++)if(r(s[u])){i=!0;break}}return t&&n&&i}var r=e("fast-isnumeric"),i=e("./has_columns");t.exports=function(t,n,r){var u=r("z"),a,f;if(u===undefined||!u.length)return 0;if(i(t)){a=r("x"),f=r("y");if(!a||!f)return 0}else{a=s("x",r),f=s("y",r);if(!o(u))return 0;r("transpose")}return n.z.length}},{"./has_columns":515,"fast-isnumeric":76}],522:[function(e,t,n){"use strict";function u(e){return{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"any",dflt:1}}}var r=e("../bar/attributes"),i=e("../../lib").extendFlat,s=r.marker,o=s.line;t.exports={x:{valType:"data_array"},y:{valType:"data_array"},text:r.text,orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:""},autobinx:{valType:"boolean",dflt:!0},nbinsx:{valType:"integer",min:0,dflt:0},xbins:u("x"),autobiny:{valType:"boolean",dflt:!0},nbinsy:{valType:"integer",min:0,dflt:0},ybins:u("y"),marker:{color:s.color,colorscale:s.colorscale,cauto:s.cauto,cmax:s.cmax,cmin:s.cmin,autocolorscale:s.autocolorscale,reversescale:s.reversescale,showscale:s.showscale,line:{color:o.color,colorscale:o.colorscale,cauto:o.cauto,cmax:o.cmax,cmin:o.cmin,autocolorscale:o.autocolorscale,reversescale:o.reversescale,width:i({},o.width,{dflt:0})}},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib":381,"../bar/attributes":474}],523:[function(e,t,n){"use strict";t.exports=function(t,n){var r=t.length,i=0;for(var s=0;s<r;s++)n[s]?(t[s]/=n[s],i+=t[s]):t[s]=null;return i}},{}],524:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){return r("histnorm"),i.forEach(function(e){var t=r(e+"bins.start"),n=r(e+"bins.end"),i=r("autobin"+e,!t||!n);i?r("nbins"+e):r(e+"bins.size")}),n}},{}],525:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,i){var s=i[t];return r(s)?(s=Number(s),n[e]+=s,s):0},avg:function(e,t,n,i,s){var o=i[t];return r(o)&&(o=Number(o),n[e]+=o,s[e]++),0},min:function(e,t,n,i){var s=i[t];if(r(s)){s=Number(s);if(!r(n[e]))return n[e]=s,s;if(n[e]>s)return n[e]=s,s-n[e]}return 0},max:function(e,t,n,i){var s=i[t];if(r(s)){s=Number(s);if(!r(n[e]))return n[e]=s,s;if(n[e]<s)return n[e]=s,s-n[e]}return 0}}},{"fast-isnumeric":76}],526:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../lib"),s=e("../../plots/cartesian/axes"),o=e("./bin_functions"),u=e("./norm_functions"),a=e("./average");t.exports=function(t,n){if(n.visible!==!0)return;var f=[],l=[],c,h=s.getFromId(t,n.orientation==="h"?n.yaxis||"y":n.xaxis||"x"),p=n.orientation==="h"?"y":"x",d={x:"y",y:"x"}[p],v=h.makeCalcdata(n,p);if(n["autobin"+p]!==!1||!(p+"bins"in n))n[p+"bins"]=s.autoBin(v,h,n["nbins"+p]),n._input[p+"bins"]=n[p+"bins"];var m=n[p+"bins"],g=typeof m.size=="string",y=g?[]:m,b,w,E,S=[],x=[],T=0,N=n.histnorm,C=n.histfunc,k=N.indexOf("density")!==-1,L=C==="max"||C==="min",A=L?null:0,O=o.count,M=u[N],_=!1,D;Array.isArray(n[d])&&C!=="count"&&(D=n[d],_=C==="avg",O=o[C]),c=m.start,w=m.end+(m.start-s.tickIncrement(m.start,m.size))/1e6;while(c<w&&f.length<5e3)b=s.tickIncrement(c,m.size),f.push((c+b)/2),l.push(A),g&&y.push(c),k&&S.push(1/(b-c)),_&&x.push(0),c=b;var P=l.length;for(c=0;c<v.length;c++)E=i.findBin(v[c],y),E>=0&&E<P&&(T+=O(E,c,l,D,x));_&&(T=a(l,x)),M&&M(l,T,S);var H=Math.min(f.length,l.length),B=[],j=0,F=H-1;for(c=0;c<H;c++)if(l[c]){j=c;break}for(c=H-1;c>j;c--)if(l[c]){F=c;break}for(c=j;c<=F;c++)r(f[c])&&r(l[c])&&B.push({p:f[c],s:l[c],b:0});return B}},{"../../lib":381,"../../plots/cartesian/axes":403,"./average":523,"./bin_functions":525,"./norm_functions":529,"fast-isnumeric":76}],527:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/color"),s=e("./bin_defaults"),o=e("../bar/style_defaults"),u=e("../../components/errorbars/defaults"),a=e("./attributes");t.exports=function(t,n,f,l){function c(e,i){return r.coerce(t,n,a,e,i)}var h=c("x"),p=c("y");c("text");var d=c("orientation",p&&!h?"h":"v"),v=n[d==="v"?"x":"y"];if(!v||!v.length){n.visible=!1;return}var m=n[d==="h"?"x":"y"];m&&c("histfunc");var g=d==="h"?["y"]:["x"];s(t,n,c,g),o(t,n,c,f,l),u(t,n,i.defaultLine,{axis:"y"}),u(t,n,i.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":303,"../../components/errorbars/defaults":330,"../../lib":381,"../bar/style_defaults":484,"./attributes":522,"./bin_defaults":524}],528:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.layoutAttributes=e("../bar/layout_attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("../bar/layout_defaults"),r.calc=e("./calc"),r.setPositions=e("../bar/set_positions"),r.plot=e("../bar/plot"),r.style=e("../bar/style"),r.colorbar=e("../scatter/colorbar"),r.hoverPoints=e("../bar/hover"),r.moduleType="trace",r.name="histogram",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"../bar/hover":477,"../bar/layout_attributes":479,"../bar/layout_defaults":480,"../bar/plot":481,"../bar/set_positions":482,"../bar/style":483,"../scatter/colorbar":557,"./attributes":522,"./calc":526,"./defaults":527}],529:[function(e,t,n){"use strict";t.exports={percent:function(e,t){var n=e.length,r=100/t;for(var i=0;i<n;i++)e[i]*=r},probability:function(e,t){var n=e.length;for(var r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var s=0;s<i;s++)e[s]*=n[s]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var s=0;s<i;s++)e[s]*=n[s]/t}}},{}],530:[function(e,t,n){"use strict";var r=e("../histogram/attributes"),i=e("../heatmap/attributes");t.exports={x:r.x,y:r.y,z:{valType:"data_array"},marker:{color:{valType:"data_array"}},histnorm:r.histnorm,histfunc:r.histfunc,autobinx:r.autobinx,nbinsx:r.nbinsx,xbins:r.xbins,autobiny:r.autobiny,nbinsy:r.nbinsy,ybins:r.ybins,zauto:i.zauto,zmin:i.zmin,zmax:i.zmax,colorscale:i.colorscale,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,zsmooth:i.zsmooth,_nestedModules:{colorbar:"Colorbar"}}},{"../heatmap/attributes":510,"../histogram/attributes":522}],531:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../plots/cartesian/axes"),s=e("../histogram/bin_functions"),o=e("../histogram/norm_functions"),u=e("../histogram/average");t.exports=function(t,n){var a=i.getFromId(t,n.xaxis||"x"),f=n.x?a.makeCalcdata(n,"x"):[],l=i.getFromId(t,n.yaxis||"y"),c=n.y?l.makeCalcdata(n,"y"):[],h,p,d,v,m,g,y=Math.min(f.length,c.length);f.length>y&&f.splice(y,f.length-y),c.length>y&&c.splice(y,c.length-y),r.markTime("done convert data");if(n.autobinx||!("xbins"in n))n.xbins=i.autoBin(f,a,n.nbinsx,"2d"),n.type==="histogram2dcontour"&&(n.xbins.start-=n.xbins.size,n.xbins.end+=n.xbins.size),n._input.xbins=n.xbins;if(n.autobiny||!("ybins"in n))n.ybins=i.autoBin(c,l,n.nbinsy,"2d"),n.type==="histogram2dcontour"&&(n.ybins.start-=n.ybins.size,n.ybins.end+=n.ybins.size),n._input.ybins=n.ybins;r.markTime("done autoBin"),m=[];var b=[],w=[],E=typeof n.xbins.size=="string"?[]:n.xbins,S=typeof n.xbins.size=="string"?[]:n.ybins,x=0,T,N,C=[],k=n.histnorm,L=n.histfunc,A=k.indexOf("density")!==-1,O=L==="max"||L==="min",M=O?null:0,_=s.count,D=o[k],P=!1,H=[],B=[],j="z"in n?n.z:"marker"in n&&Array.isArray(n.marker.color)?n.marker.color:"";j&&L!=="count"&&(P=L==="avg",_=s[L]);var F=n.xbins,I=F.end+(F.start-i.tickIncrement(F.start,F.size))/1e6;for(g=F.start;g<I;g=i.tickIncrement(g,F.size))b.push(M),Array.isArray(E)&&E.push(g),P&&w.push(0);Array.isArray(E)&&E.push(g);var q=b.length;h=n.xbins.start,p=(g-h)/q,h+=p/2,F=n.ybins,I=F.end+(F.start-i.tickIncrement(F.start,F.size))/1e6;for(g=F.start;g<I;g=i.tickIncrement(g,F.size))m.push(b.concat()),Array.isArray(S)&&S.push(g),P&&C.push(w.concat());Array.isArray(S)&&S.push(g);var R=m.length;d=n.ybins.start,v=(g-d)/R,d+=v/2,A&&(H=b.map(function(e,t){return Array.isArray(E)?1/(E[t+1]-E[t]):1/p}),B=m.map(function(e,t){return Array.isArray(S)?1/(S[t+1]-S[t]):1/v})),r.markTime("done making bins");for(g=0;g<y;g++)T=r.findBin(f[g],E),N=r.findBin(c[g],S),T>=0&&T<q&&N>=0&&N<R&&(x+=_(T,g,m[N],j,C[N]));if(P)for(N=0;N<R;N++)x+=u(m[N],C[N]);if(D)for(N=0;N<R;N++)D(m[N],x,H,B[N]);return r.markTime("done binning"),{x:f,x0:h,dx:p,y:c,y0:d,dy:v,z:m}}},{"../../lib":381,"../../plots/cartesian/axes":403,"../histogram/average":523,"../histogram/bin_functions":525,"../histogram/norm_functions":529}],532:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./sample_defaults"),s=e("../../components/colorscale/defaults"),o=e("./attributes");t.exports=function(t,n,u){function a(e,i){return r.coerce(t,n,o,e,i)}i(t,n,a),a("zsmooth"),s(t,n,u,a,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":312,"../../lib":381,"./attributes":530,"./sample_defaults":534}],533:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("../heatmap/calc"),r.plot=e("../heatmap/plot"),r.colorbar=e("../heatmap/colorbar"),r.style=e("../heatmap/style"),r.hoverPoints=e("../heatmap/hover"),r.moduleType="trace",r.name="histogram2d",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap","histogram"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"../heatmap/calc":511,"../heatmap/colorbar":512,"../heatmap/hover":516,"../heatmap/plot":519,"../heatmap/style":520,"./attributes":530,"./defaults":532}],534:[function(e,t,n){"use strict";var r=e("../histogram/bin_defaults");t.exports=function(t,n,i){var s=i("x"),o=i("y");if(!(s&&s.length&&o&&o.length)){n.visible=!1;return}var u=i("z")||i("marker.color");u&&i("histfunc");var a=["x","y"];r(t,n,i,a)}},{"../histogram/bin_defaults":524}],535:[function(e,t,n){"use strict";var r=e("../histogram2d/attributes"),i=e("../contour/attributes");t.exports={x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,autobinx:r.autobinx,nbinsx:r.nbinsx,xbins:r.xbins,autobiny:r.autobiny,nbinsy:r.nbinsy,ybins:r.ybins,zauto:i.zauto,zmin:i.zmin,zmax:i.zmax,colorscale:i.colorscale,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,autocontour:i.autocontour,ncontours:i.ncontours,contours:i.contours,line:i.line,_nestedModules:{colorbar:"Colorbar"}}},{"../contour/attributes":500,"../histogram2d/attributes":530}],536:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../histogram2d/sample_defaults"),s=e("../contour/style_defaults"),o=e("./attributes");t.exports=function(t,n,u,a){function f(e,i){return r.coerce(t,n,o,e,i)}i(t,n,f);var l=r.coerce2(t,n,o,"contours.start"),c=r.coerce2(t,n,o,"contours.end"),h=f("autocontour",!l||!c);h?f("ncontours"):f("contours.size"),s(t,n,f,a)}},{"../../lib":381,"../contour/style_defaults":509,"../histogram2d/sample_defaults":534,"./attributes":535}],537:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.calc=e("../contour/calc"),r.plot=e("../contour/plot"),r.style=e("../contour/style"),r.colorbar=e("../contour/colorbar"),r.hoverPoints=e("../contour/hover"),r.moduleType="trace",r.name="histogram2dcontour",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","2dMap","contour","histogram"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"../contour/calc":501,"../contour/colorbar":502,"../contour/hover":504,"../contour/plot":507,"../contour/style":508,"./attributes":535,"./defaults":536}],538:[function(e,t,n){"use strict";var r=e("../../components/colorscale/attributes"),i=e("../surface/attributes"),s=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},i:{valType:"data_array"},j:{valType:"data_array"},k:{valType:"data_array"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z"},alphahull:{valType:"number",dflt:-1},intensity:{valType:"data_array"},color:{valType:"color"},vertexcolor:{valType:"data_array"},facecolor:{valType:"data_array"},opacity:s({},i.opacity),flatshading:{valType:"boolean",dflt:!1},contour:{show:s({},i.contours.x.show,{}),color:s({},i.contours.x.color),width:s({},i.contours.x.width)},colorscale:r.colorscale,reversescale:r.reversescale,showscale:r.showscale,lighting:s({},i.lighting),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":309,"../../lib/extend":376,"../surface/attributes":599}],539:[function(e,t,n){"use strict";function f(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function c(e){return e.map(function(e){var t=e[0],n=i(e[1]),r=n.toRgb();return{index:t,rgb:[r.r,r.g,r.b,1]}})}function h(e){return e.map(a)}function p(e,t,n){var r=new Array(e.length);for(var i=0;i<e.length;++i)r[i]=[e[i],t[i],n[i]];return r}function d(e,t){var n=e.glplot.gl,i=r({gl:n}),s=new f(e,i,t.uid);return s.update(t),e.glplot.add(i),s}var r=e("gl-mesh3d"),i=e("tinycolor2"),s=e("delaunay-triangulate"),o=e("alpha-shape"),u=e("convex-hull"),a=e("../../lib/str2rgbarray"),l=f.prototype;l.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},l.update=function(e){function r(e,t,n){return t.map(function(t){return e.d2l(t)*n})}var t=this.scene,n=t.fullSceneLayout;this.data=e;var i=p(r(n.xaxis,e.x,t.dataScale[0]),r(n.yaxis,e.y,t.dataScale[1]),r(n.zaxis,e.z,t.dataScale[2])),f;if(e.i&&e.j&&e.k)f=p(e.i,e.j,e.k);else if(e.alphahull===0)f=u(i);else if(e.alphahull>0)f=o(e.alphahull,i);else{var l=["x","y","z"].indexOf(e.delaunayaxis);f=s(i.map(function(e){return[e[(l+1)%3
],e[(l+2)%3]]}))}var d={positions:i,cells:f,ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,opacity:e.opacity,contourEnable:e.contour.show,contourColor:a(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};e.intensity?(this.color="#fff",d.vertexIntensity=e.intensity,d.colormap=c(e.colorscale)):e.vertexcolor?(this.color=e.vertexcolors[0],d.vertexColors=h(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],d.cellColors=h(e.facecolor)):(this.color=e.color,d.meshColor=a(e.color)),this.mesh.update(d)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=d},{"../../lib/str2rgbarray":392,"alpha-shape":40,"convex-hull":61,"delaunay-triangulate":73,"gl-mesh3d":109,tinycolor2:233}],540:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../../components/colorbar/defaults"),s=e("./attributes");t.exports=function(t,n,o,u){function a(e,i){return r.coerce(t,n,s,e,i)}function f(e){var t=e.map(function(e){var t=a(e);return t&&Array.isArray(t)?t:null});return t.every(function(e){return e&&e.length===t[0].length})&&t}var l=f(["x","y","z"]),c=f(["i","j","k"]);if(!l){n.visible=!1;return}c&&c.forEach(function(e){for(var t=0;t<e.length;++t)e[t]|=0}),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(e){a(e)}),"intensity"in t?(a("intensity"),a("showscale",!0)):(n.showscale=!1,"vertexcolor"in t?a("vertexcolor"):"facecolor"in t?a("facecolor"):a("color",o)),n.reversescale&&(n.colorscale=n.colorscale.map(function(e){return[1-e[0],e[1]]}).reverse()),n.showscale&&i(t,n,u)}},{"../../components/colorbar/defaults":305,"../../lib":381,"./attributes":538}],541:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../heatmap/colorbar"),r.plot=e("./convert"),r.moduleType="trace",r.name="mesh3d",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d"],r.meta={},t.exports=r},{"../../plots/gl3d":439,"../heatmap/colorbar":512,"./attributes":538,"./convert":539,"./defaults":540}],542:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),i=e("../../plots/font_attributes"),s=e("../../plots/attributes"),o=e("../../lib/extend").extendFlat;t.exports={labels:{valType:"data_array"},label0:{valType:"number",dflt:0},dlabel:{valType:"number",dflt:1},values:{valType:"data_array"},marker:{colors:{valType:"data_array"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}}},text:{valType:"data_array"},scalegroup:{valType:"string",dflt:""},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"]},hoverinfo:o({},s.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0},textfont:o({},i,{}),insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},hole:{valType:"number",min:0,max:1,dflt:0},sort:{valType:"boolean",dflt:!0},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise"},rotation:{valType:"number",min:-360,max:360,dflt:0},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0}}},{"../../components/color/attributes":302,"../../lib/extend":376,"../../plots/attributes":401,"../../plots/font_attributes":421}],543:[function(e,t,n){"use strict";function i(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=i[0].trace;s._module===t&&s.visible===!0&&n.push(i)}return n}var r=e("../../plots/plots");n.name="pie",n.plot=function(e){var t=r.getModule("pie"),n=i(e.calcdata,t);n.length&&t.plot(e,n)},n.clean=function(e,t,n,r){var i=r._has&&r._has("pie"),s=t._has&&t._has("pie");i&&!s&&r._pielayer.selectAll("g.trace").remove()}},{"../../plots/plots":452}],544:[function(e,t,n){"use strict";function a(e){if(!u){var t=s.defaults;u=t.slice();var n;for(n=0;n<t.length;n++)u.push(i(t[n]).lighten(20).toHexString());for(n=0;n<s.defaults.length;n++)u.push(i(t[n]).darken(20).toHexString())}return u[e%u.length]}var r=e("fast-isnumeric"),i=e("tinycolor2"),s=e("../../components/color"),o=e("./helpers");t.exports=function(t,n){var u=n.values,f=n.labels,l=[],c=t._fullLayout,h=c._piecolormap,p={},d=!1,v=0,m=c.hiddenlabels||[],g,y,b,w,E,S;if(n.dlabel){f=new Array(u.length);for(g=0;g<u.length;g++)f[g]=String(n.label0+g*n.dlabel)}for(g=0;g<u.length;g++){y=u[g];if(!r(y))continue;y=+y;if(y<0)continue;b=f[g];if(b===undefined||b==="")b=g;b=String(b);if(p[b]!==undefined)continue;p[b]=!0,w=i(n.marker.colors[g]),w.isValid()?(w=s.addOpacity(w,w.getAlpha()),h[b]||(h[b]=w)):h[b]?w=h[b]:(w=!1,d=!0),E=m.indexOf(b)!==-1,E||(v+=y),l.push({v:y,label:b,color:w,i:g,hidden:E})}n.sort&&l.sort(function(e,t){return t.v-e.v});if(d)for(g=0;g<l.length;g++)S=l[g],S.color===!1&&(h[S.label]=S.color=a(c._piedefaultcolorcount),c._piedefaultcolorcount++);l[0]&&(l[0].vTotal=v);if(n.textinfo&&n.textinfo!=="none"){var x=n.textinfo.indexOf("label")!==-1,T=n.textinfo.indexOf("text")!==-1,N=n.textinfo.indexOf("value")!==-1,C=n.textinfo.indexOf("percent")!==-1,k;for(g=0;g<l.length;g++)S=l[g],k=x?[S.label]:[],T&&n.text[S.i]&&k.push(n.text[S.i]),N&&k.push(o.formatPieValue(S.v)),C&&k.push(o.formatPiePercent(S.v/v)),S.text=k.join("<br>")}return l};var u},{"../../components/color":303,"./helpers":546,"fast-isnumeric":76,tinycolor2:233}],545:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes");t.exports=function(t,n,s,o){function u(e,s){return r.coerce(t,n,i,e,s)}var a=r.coerceFont,f=u("values");if(!Array.isArray(f)||!f.length){n.visible=!1;return}var l=u("labels");Array.isArray(l)||(u("label0"),u("dlabel"));var c=u("marker.line.width");c&&u("marker.line.color");var h=u("marker.colors");Array.isArray(h)||(n.marker.colors=[]),u("scalegroup");var p=u("text"),d=u("textinfo",Array.isArray(p)?"text+percent":"percent");u("hoverinfo",o._dataLength===1?"label+text+value+percent":undefined);if(d&&d!=="none"){var v=u("textposition"),m=Array.isArray(v)||v==="auto",g=m||v==="inside",y=m||v==="outside";if(g||y){var b=a(u,"textfont",o.font);g&&a(u,"insidetextfont",b),y&&a(u,"outsidetextfont",b)}}u("domain.x"),u("domain.y"),u("hole"),u("sort"),u("direction"),u("rotation"),u("pull")}},{"../../lib":381,"./attributes":542}],546:[function(e,t,n){"use strict";n.formatPiePercent=function(t){var n=(t*100).toPrecision(3);return n.indexOf(".")!==-1?n.replace(/[.]?0+$/,"")+"%":n+"%"},n.formatPieValue=function(t){var n=t.toPrecision(10);return n.indexOf(".")!==-1?n.replace(/[.]?0+$/,""):n}},{}],547:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.supplyLayoutDefaults=e("./layout_defaults"),r.layoutAttributes=e("./layout_attributes"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.styleOne=e("./style_one"),r.moduleType="trace",r.name="pie",r.basePlotModule=e("./base_plot"),r.categories=["pie","showLegend"],r.meta={},t.exports=r},{"./attributes":542,"./base_plot":543,"./calc":544,"./defaults":545,"./layout_attributes":548,"./layout_defaults":549,"./plot":550,"./style":551,"./style_one":552}],548:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array"}}},{}],549:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./layout_attributes");t.exports=function(t,n){function s(e,s){return r.coerce(t,n,i,e,s)}s("hiddenlabels")}},{"../../lib":381,"./layout_attributes":548}],550:[function(e,t,n){"use strict";function f(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),i=e.width/e.height,s=Math.PI*Math.min(t.v/n.vTotal,.5),o=1-n.trace.hole,u=l(t,n),a={scale:u*n.r*2/r,rCenter:1-u,rotate:0};if(a.scale>=1)return a;var f=i+1/(2*Math.tan(s)),c=n.r*Math.min(1/(Math.sqrt(f*f+.5)+f),o/(Math.sqrt(i*i+o/2)+i)),h={scale:c*2/e.height,rCenter:Math.cos(c/n.r)-c*i/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},p=1/i,d=p+1/(2*Math.tan(s)),v=n.r*Math.min(1/(Math.sqrt(d*d+.5)+d),o/(Math.sqrt(p*p+o/2)+p)),m={scale:v*2/e.width,rCenter:Math.cos(v/n.r)-v/i/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},g=m.scale>h.scale?m:h;return a.scale<1&&g.scale>a.scale?g:a}function l(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function c(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,s=e.height/2;return n<0&&(i*=-1),r<0&&(s*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(s)*(i>0?1:-1)/2,y:s/(1+n*n/(r*r)),outside:!0}}function h(e,t){function v(e,t){return e.pxmid[1]-t.pxmid[1]}function m(e,t){return t.pxmid[1]-e.pxmid[1]}function g(e,n){n||(n={});var i=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),f=r?e.yLabelMin:e.yLabelMax,l=r?e.yLabelMax:e.yLabelMin,h=e.cyFinal+o(e.px0[1],e.px1[1]),p=i-f,d,v,m,g,y,b;p*a>0&&(e.labelExtraY=p);if(!Array.isArray(t.pull))return;for(v=0;v<c.length;v++){m=c[v];if(m===e||(t.pull[e.i]||0)>=t.pull[m.i]||0)continue;(e.pxmid[1]-m.pxmid[1])*a>0?(g=m.cyFinal+o(m.px0[1],m.px1[1]),p=g-f-e.labelExtraY,p*a>0&&(e.labelExtraY+=p)):(l+e.labelExtraY-h)*a>0&&(d=3*u*Math.abs(v-c.indexOf(e)),y=m.cxFinal+s(m.px0[0],m.px1[0]),b=y+d-(e.cxFinal+e.pxmid[0])-e.labelExtraX,b*u>0&&(e.labelExtraX+=b))}}var n,r,i,s,o,u,a,f,l,c,h,p,d;for(r=0;r<2;r++){i=r?v:m,o=r?Math.max:Math.min,a=r?1:-1;for(n=0;n<2;n++){s=n?Math.max:Math.min,u=n?1:-1,f=e[r][n],f.sort(i),l=e[1-r][n],c=l.concat(f),p=[];for(h=0;h<f.length;h++)f[h].yLabelMid!==undefined&&p.push(f[h]);d=!1;for(h=0;r&&h<l.length;h++)if(l[h].yLabelMid!==undefined){d=l[h];break}for(h=0;h<p.length;h++){var y=h&&p[h-1];d&&!h&&(y=d),g(p[h],y)}}}}function p(e,t){var n,r,i,s,o,u,a,f,l=[],c,h;for(i=0;i<e.length;i++){o=e[i][0],u=o.trace,n=t.w*(u.domain.x[1]-u.domain.x[0]),r=t.h*(u.domain.y[1]-u.domain.y[0]),a=u.tiltaxis*Math.PI/180,f=u.pull;if(Array.isArray(f)){f=0;for(s=0;s<u.pull.length;s++)u.pull[s]>f&&(f=u.pull[s])}o.r=Math.min(n/v(u.tilt,Math.sin(a),u.depth),r/v(u.tilt,Math.cos(a),u.depth))/(2+2*f),o.cx=t.l+t.w*(u.domain.x[1]+u.domain.x[0])/2,o.cy=t.t+t.h*(2-u.domain.y[1]-u.domain.y[0])/2,u.scalegroup&&l.indexOf(u.scalegroup)===-1&&l.push(u.scalegroup)}for(s=0;s<l.length;s++){h=Infinity,c=l[s];for(i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===c&&(h=Math.min(h,o.r*o.r/o.vTotal));for(i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===c&&(o.r=Math.sqrt(h*o.vTotal))}}function d(e){function g(e){var n=t.r*Math.sin(e),i=-t.r*Math.cos(e);return r?[n*(1-f*s*s)+i*a*f,n*a*f+i*(1-f*o*o),Math.sin(u)*(i*o-n*s)]:[n,i]}var t=e[0],n=t.trace,r=n.tilt,i,s,o,u,a,f,l=n.rotation*Math.PI/180,c=2*Math.PI/t.vTotal,h="px0",p="px1",d,v,m;if(n.direction==="counterclockwise"){for(d=0;d<e.length;d++)if(!e[d].hidden)break;if(d===e.length)return;l+=c*e[d].v,c*=-1,h="px1",p="px0"}r&&(u=r*Math.PI/180,i=n.tiltaxis*Math.PI/180,a=Math.sin(i)*Math.cos(i),f=1-Math.cos(u),s=Math.sin(i),o=Math.cos(i)),m=g(l);for(d=0;d<e.length;d++){v=e[d];if(v.hidden)continue;v[h]=m,l+=c*v.v/2,v.pxmid=g(l),v.midangle=l,l+=c*v.v/2,m=g(l),v[p]=m,v.largeArc=v.v>t.vTotal/2?1:0}}function v(e,t,n){if(!e)return 1;var r=Math.sin(e*Math.PI/180);return Math.max(.01,n*r*Math.abs(t)+2*Math.sqrt(1-r*r*t*t))}var r=e("d3"),i=e("../../plots/cartesian/graph_interact"),s=e("../../components/color"),o=e("../../components/drawing"),u=e("../../lib/svg_text_utils"),a=e("./helpers");t.exports=function(t,n){var v=t._fullLayout;p(n,v._size);var m=v._pielayer.selectAll("g.trace").data(n);m.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"}),m.exit().remove(),m.order(),m.each(function(e){var n=r.select(this),p=e[0],m=p.trace,g=0,y=(m.depth||0)*p.r*Math.sin(g)/2,b=m.tiltaxis||0,w=b*Math.PI/180,E=[y*Math.sin(w),y*Math.cos(w)],S=p.r*Math.cos(g),x=n.selectAll("g.part").data(m.tilt?["top","sides"]:["top"]);x.enter().append("g").attr("class",function(e){return e+" part"}),x.exit().remove(),x.order(),d(e),n.selectAll(".top").each(function(){var n=r.select(this).selectAll("g.slice").data(e);n.enter().append("g").classed("slice",!0),n.exit().remove();var d=[[[],[]],[[],[]]],g=!1;n.each(function(n){function T(e){var r=t._fullLayout,o=t._fullData[m.index],u=o.hoverinfo;u==="all"&&(u="label+text+value+percent+name");if(t._dragging||r.hovermode===!1||u==="none"||!u)return;var f=l(n,p),c=s+n.pxmid[0]*(1-f),d=h+n.pxmid[1]*(1-f),v=[];u.indexOf("label")!==-1&&v.push(n.label),o.text&&o.text[n.i]&&u.indexOf("text")!==-1&&v.push(o.text[n.i]),u.indexOf("value")!==-1&&v.push(a.formatPieValue(n.v)),u.indexOf("percent")!==-1&&v.push(a.formatPiePercent(n.v/p.vTotal)),i.loneHover({x0:c-f*p.r,x1:c+f*p.r,y:d,text:v.join("<br>"),name:u.indexOf("name")!==-1?o.name:undefined,color:n.color,idealAlign:n.pxmid[0]<0?"left":"right"},{container:r._hoverlayer.node(),outerContainer:r._paper.node()}),i.hover(t,e,"pie"),x=!0}function N(e){t.emit("plotly_unhover",{points:[e]}),x&&(i.loneUnhover(v._hoverlayer.node()),x=!1)}function C(){t._hoverdata=[n],t._hoverdata.trace=e.trace,i.click(t,{target:!0})}function L(e,t,r,i){return"a"+i*p.r+","+i*S+" "+b+" "+n.largeArc+(r?" 1 ":" 0 ")+i*(t[0]-e[0])+","+i*(t[1]-e[1])}if(n.hidden){r.select(this).selectAll("path,g").remove();return}d[n.pxmid[1]<0?0:1][n.pxmid[0]<0?0:1].push(n);var s=p.cx+E[0],h=p.cy+E[1],y=r.select(this),w=y.selectAll("path.surface").data([n]),x=!1;w.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),y.select("path.textline").remove(),y.on("mouseover",T).on("mouseout",N).on("click",C);if(m.pull){var k=+(Array.isArray(m.pull)?m.pull[n.i]:m.pull)||0;k>0&&(s+=k*n.pxmid[0],h+=k*n.pxmid[1])}n.cxFinal=s,n.cyFinal=h;var A=m.hole;if(n.v===p.vTotal){var O="M"+(s+n.px0[0])+","+(h+n.px0[1])+L(n.px0,n.pxmid,!0,1)+L(n.pxmid,n.px0,!0,1)+"Z";A?w.attr("d","M"+(s+A*n.px0[0])+","+(h+A*n.px0[1])+L(n.px0,n.pxmid,!1,A)+L(n.pxmid,n.px0,!1,A)+"Z"+O):w.attr("d",O)}else{var M=L(n.px0,n.px1,!0,1);if(A){var _=1-A;w.attr("d","M"+(s+A*n.px1[0])+","+(h+A*n.px1[1])+L(n.px1,n.px0,!1,A)+"l"+_*n.px0[0]+","+_*n.px0[1]+M+"Z")}else w.attr("d","M"+s+","+h+"l"+n.px0[0]+","+n.px0[1]+M+"Z")}var D=Array.isArray(m.textposition)?m.textposition[n.i]:m.textposition,P=y.selectAll("g.slicetext").data(n.text&&D!=="none"?[0]:[]);P.enter().append("g").classed("slicetext",!0),P.exit().remove(),P.each(function(){var e=r.select(this).selectAll("text").data([0]);e.enter().append("text").attr("data-notex",1),e.exit().remove(),e.text(n.text).attr({"class":"slicetext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(o.font,D==="outside"?m.outsidetextfont:m.insidetextfont).call(u.convertToTspans),e.selectAll("tspan.line").attr({x:0,y:0});var t=o.bBox(e.node()),i;if(D==="outside")i=c(t,n);else{i=f(t,n,p);if(D==="auto"&&i.scale<1){e.call(o.font,m.outsidetextfont);if(m.outsidetextfont.family!==m.insidetextfont.family||m.outsidetextfont.size!==m.insidetextfont.size)e.attr({"data-bb":""}),t=o.bBox(e.node());i=c(t,n)}}var a=s+n.pxmid[0]*i.rCenter+(i.x||0),l=h+n.pxmid[1]*i.rCenter+(i.y||0);i.outside&&(n.yLabelMin=l-t.height/2,n.yLabelMid=l,n.yLabelMax=l+t.height/2,n.labelExtraX=0,n.labelExtraY=0,g=!0),e.attr("transform","translate("+a+","+l+")"+(i.scale<1?"scale("+i.scale+")":"")+(i.rotate?"rotate("+i.rotate+")":"")+"translate("+ -(t.left+t.right)/2+","+ -(t.top+t.bottom)/2+")")})}),g&&h(d,m),n.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=r.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var i=e.cxFinal+e.pxmid[0],o=e.cyFinal+e.pxmid[1],u="M"+i+","+o,a=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var f=e.labelExtraX*e.pxmid[1]/e.pxmid[0],l=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(f)>Math.abs(l)?u+="l"+l*e.pxmid[0]/e.pxmid[1]+","+l+"H"+(i+e.labelExtraX+a):u+="l"+e.labelExtraX+","+f+"v"+(l-f)+"h"+a}else u+="V"+(e.yLabelMid+e.labelExtraY)+"h"+a;t.append("path").classed("textline",!0).call(s.stroke,m.outsidetextfont.color).attr({"stroke-width":Math.min(2,m.outsidetextfont.size/8),d:u,fill:"none"})}})})}),setTimeout(function(){m.selectAll("tspan").each(function(){var e=r.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)}},{"../../components/color":303,"../../components/drawing":325,"../../lib/svg_text_utils":393,"../../plots/cartesian/graph_interact":410,"./helpers":546,d3:72}],551:[function(e,t,n){"use strict";var r=e("d3"),i=e("./style_one");t.exports=function(t){t._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0],n=t.trace,s=r.select(this);s.style({opacity:n.opacity}),s.selectAll(".top path.surface").each(function(e){r.select(this).call(i,e,n)})})}},{"./style_one":552,d3:72}],552:[function(e,t,n){"use strict";var r=e("../../components/color");t.exports=function(t,n,i){var s=i.marker.line.color;Array.isArray(s)&&(s=s[n.i]||r.defaultLine);var o=i.marker.line.width||0;Array.isArray(o)&&(o=o[n.i]||0),t.style({"stroke-width":o,fill:n.color}).call(r.stroke,s)}},{"../../components/color":303}],553:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(t){var n=t[0].trace,i=n.marker;r.mergeArray(n.text,t,"tx"),r.mergeArray(n.textposition,t,"tp"),n.textfont&&(r.mergeArray(n.textfont.size,t,"ts"),r.mergeArray(n.textfont.color,t,"tc"),r.mergeArray(n.textfont.family,t,"tf"));if(i&&i.line){var s=i.line;r.mergeArray(i.opacity,t,"mo"),r.mergeArray(i.symbol,t,"mx"),r.mergeArray(i.color,t,"mc"),r.mergeArray(s.color,t,"mlc"),r.mergeArray(s.width,t,"mlw")}}},{"../../lib":381}],554:[function(e,t,n){"use strict";var r=e("../../components/drawing"),i=e("./constants");t.exports={x:{valType:"data_array"},x0:{valType:"any",dflt:0},dx:{valType:"number",dflt:1},y:{valType:"data_array"},y0:{valType:"any",dflt:0},dy:{valType:"number",dflt:1},text:{valType:"string",dflt:"",arrayOk:!0},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear"},smoothing:{valType:"number",min:0,max:1.3,dflt:1},dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid"}},connectgaps:{valType:"boolean",dflt:!1},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none"},fillcolor:{valType:"color"},marker:{symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0},opacity:{valType:"number",min:0,max:1,arrayOk:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0},color:{valType:"color",arrayOk:!0},maxdisplayed:{valType:"number",min:0,dflt:0},sizeref:{valType:"number",dflt:1},sizemin:{valType:"number",min:0,dflt:0},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter"},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!1},line:{color:{valType:"color",arrayOk:!0},width:{valType:"number",min:0,arrayOk:!0},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1}}},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0},textfont:{family:{valType:"string",noBlank:!0,strict:!0,arrayOk:!0},size:{valType:"number",min:1,arrayOk:!0},color:{valType:"color",arrayOk:!0}},r:{valType:"data_array"},t:{valType:"data_array"},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../components/drawing":325,"./constants":558}],555:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/cartesian/axes"),s=e("../../lib"),o=e("./subtypes"),u=e("./marker_colorscale_calc");t.exports=function(t,n){var a=i.getFromId(t,n.xaxis||"x"),f=i.getFromId(t,n.yaxis||"y");s.markTime("in Scatter.calc");var l=a.makeCalcdata(n,"x");s.markTime("finished convert x");var c=f.makeCalcdata(n,"y");s.markTime("finished convert y");var h=Math.min(l.length,c.length),p,d,v;a._minDtick=0,f._minDtick=0,l.length>h&&l.splice(h,l.length-h),c.length>h&&c.splice(h,c.length-h);var m={padded:!0},g={padded:!0};if(o.hasMarkers(n)){p=n.marker,d=p.size;if(Array.isArray(d)){var y={type:"linear"};i.setConvert(y),d=y.makeCalcdata(n.marker,"size"),d.length>h&&d.splice(h,d.length-h)}var b=1.6*(n.marker.sizeref||1),w;n.marker.sizemode==="area"?w=function(e){return Math.max(Math.sqrt((e||0)/b),3)}:w=function(e){return Math.max((e||0)/b,3)},m.ppad=g.ppad=Array.isArray(d)?d.map(w):w(d)}u(n),!(n.fill==="tozerox"||n.fill==="tonextx"&&t.firstscatter)||l[0]===l[h-1]&&c[0]===c[h-1]?!n.error_y.visible&&(["tonexty","tozeroy"].indexOf(n.fill)!==-1||!o.hasMarkers(n)&&!o.hasText(n))&&(m.padded=!1,m.ppad=0):m.tozero=!0,!(n.fill==="tozeroy"||n.fill==="tonexty"&&t.firstscatter)||l[0]===l[h-1]&&c[0]===c[h-1]?["tonextx","tozerox"].indexOf(n.fill)!==-1&&(g.padded=!1):g.tozero=!0,s.markTime("ready for Axes.expand"),i.expand(a,l,m),s.markTime("done expand x"),i.expand(f,c,g),s.markTime("done expand y");var E=new Array(h);for(v=0;v<h;v++)E[v]=r(l[v])&&r(c[v])?{x:l[v],y:c[v]}:{x:!1,y:!1};return typeof d!==undefined&&s.mergeArray(d,E,"ms"),t.firstscatter=!1,E}},{"../../lib":381,"../../plots/cartesian/axes":403,"./marker_colorscale_calc":568,"./subtypes":573,"fast-isnumeric":76}],556:[function(e,t,n){"use strict";t.exports=function(t){var n,r,i,s,o;for(n=0;n<t.length;n++){r=t[n],i=r.fill;if(i==="none"||r.type!=="scatter")continue;r.opacity=undefined;if(i==="tonexty"||i==="tonextx")for(s=n-1;s>=0;s--){o=t[s];if(o.type==="scatter"&&o.xaxis===r.xaxis&&o.yaxis===r.yaxis){o.opacity=undefined;break}}}}},{}],557:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("../../plots/plots"),u=e("../../components/colorscale/get_scale"),a=e("../../components/colorbar/draw");t.exports=function(t,n){var f=n[0].trace,l=f.marker,c="cb"+f.uid;t._fullLayout._infolayer.selectAll("."+c).remove();if(l===undefined||!l.showscale){o.autoMargin(t,c);return}var h=u(l.colorscale),p=l.color,d=l.cmin,v=l.cmax;i(d)||(d=s.aggNums(Math.min,null,p)),i(v)||(v=s.aggNums(Math.max,null,p));var m=n[0].t.cb=a(t,c);m.fillcolor(r.scale.linear().domain(h.map(function(e){return d+e[0]*(v-d)})).range(h.map(function(e){return e[1]}))).filllevels({start:d,end:v,size:(v-d)/254}).options(l.colorbar)(),s.markTime("done colorbar")}},{"../../components/colorbar/draw":306,"../../components/colorscale/get_scale":314,"../../lib":381,"../../plots/plots":452,d3:72,"fast-isnumeric":76}],558:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20}},{}],559:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("./attributes"),s=e("./constants"),o=e("./subtypes"),u=e("./xy_defaults"),a=e("./marker_defaults"),f=e("./line_defaults"),l=e("./line_shape_defaults"),c=e("./text_defaults"),h=e("./fillcolor_defaults"),p=e("../../components/errorbars/defaults");t.exports=function(t,n,d,v){function m(e,s){return r.coerce(t,n,i,e,s)}var g=u(t,n,m),y=g<s.PTS_LINESONLY?"lines+markers":"lines";if(!g){n.visible=!1;return}m("text"),m("mode",y),o.hasLines(n)&&(f(t,n,d,m),l(t,n,m),m("connectgaps")),o.hasMarkers(n)&&a(t,n,d,v,m),o.hasText(n)&&c(t,n,v,m),(o.hasMarkers(n)||o.hasText(n))&&m("marker.maxdisplayed"),m("fill"),n.fill!=="none"&&(h(t,n,d,m),o.hasLines(n)||l(t,n,m)),p(t,n,d,{axis:"y"}),p(t,n,d,{axis:"x",inherit:"y"})}},{"../../components/errorbars/defaults":330,"../../lib":381,"./attributes":554,"./constants":558,"./fillcolor_defaults":560,"./line_defaults":564,"./line_shape_defaults":566,"./marker_defaults":569,"./subtypes":573,"./text_defaults":574,"./xy_defaults":575}],560:[function(e,t,n){"use strict";var r=e("../../components/color");t.exports=function(t,n,i,s){var o=!1;if(n.marker){var u=n.marker.color,a=(n.marker.line||{}).color;u&&!Array.isArray(u)?o=u:a&&!Array.isArray(a)&&(o=a)}s("fillcolor",r.addOpacity((n.line||{}).color||o||i,.5))}},{"../../components/color":303}],561:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("./subtypes");t.exports=function(t,n){var s,o;if(t.mode==="lines")return s=t.line.color,s&&r.opacity(s)?s:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var u=n.mcc||(t.marker||{}).color,a=n.mlcc||((t.marker||{}).line||{}).color;return o=u&&r.opacity(u)?u:a&&r.opacity(a)&&(n.mlw||((t.marker||{}).line||{}).width)?a:"",o?r.opacity(o)<.3?r.addOpacity(o,.3):o:(s=(t.line||{}).color,s&&r.opacity(s)&&i.hasLines(t)&&t.line.width?s:t.fillcolor)}},{"../../components/color":303,"./subtypes":573}],562:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/graph_interact"),i=e("../../components/errorbars"),s=e("./get_trace_color");t.exports=function(t,n,o,u){var a=t.cd,f=a[0].trace,l=t.xa,c=t.ya,h=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(l.c2p(e.x)-l.c2p(n))-t,1-3/t)},p=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(c.c2p(e.y)-c.c2p(o))-t,1-3/t)},d=function(e){var t=Math.max(3,e.mrc||0),r=Math.abs(l.c2p(e.x)-l.c2p(n)),i=Math.abs(c.c2p(e.y)-c.c2p(o));return Math.max(Math.sqrt(r*r+i*i)-t,1-3/t)},v=r.getDistanceFunction(u,h,p,d);r.getClosest(a,v,t);if(t.index===!1)return;var m=a[t.index],g=l.c2p(m.x,!0),y=c.c2p(m.y,!0),b=m.mrc||1;return t.color=s(f,m),t.x0=g-b,t.x1=g+b,t.xLabelVal=m.x,t.y0=y-b,t.y1=y+b,t.yLabelVal=m.y,m.tx?t.text=m.tx:f.text&&(t.text=f.text),i.hoverInfo(m,f,t),[t]}},{"../../components/errorbars":331,"../../plots/cartesian/graph_interact":410,"./get_trace_color":561}],563:[function(e,t,n){"use strict";var r={},i=e("./subtypes");r.hasLines=i.hasLines,r.hasMarkers=i.hasMarkers,r.hasText=i.hasText,r.isBubble=i.isBubble,r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.cleanData=e("./clean_data"),r.calc=e("./calc"),r.arraysToCalcdata=e("./arrays_to_calcdata"),r.plot=e("./plot"),r.colorbar=e("./colorbar"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="scatter",r.basePlotModule=e("../../plots/cartesian"),r.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend"],r.meta={},t.exports=r},{"../../plots/cartesian":411,"./arrays_to_calcdata":553,"./attributes":554,"./calc":555,"./clean_data":556,"./colorbar":557,"./defaults":559,"./hover":562,"./plot":570,"./select":571,"./style":572,"./subtypes":573}],564:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var s=(t.marker||{}).color;i("line.color",(Array.isArray(s)?!1:s)||r),i("line.width"),i("line.dash")}},{}],565:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axes");t.exports=function(t,n){function O(e){var n=i.c2p(t[e].x),r=s.c2p(t[e].y);return n===l||r===l?!1:[n,r]}function M(e){var t=e[0]/i._length,n=e[1]/s._length;return(1+10*Math.max(0,-t,t-1,-n,n-1))*u}function _(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}var i=n.xaxis,s=n.yaxis,o=n.connectGaps,u=n.baseTolerance,a=n.linear,f=[],l=r.BADNUM,c=.2,h=new Array(t.length),p=0,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;for(d=0;d<t.length;d++){v=O(d);if(!v)continue;p=0,h[p++]=v;for(d++;d<t.length;d++){g=O(d);if(!g){if(o)continue;break}if(!a){h[p++]=g;continue}w=_(g,v);if(w<M(g)*c)continue;S=[(g[0]-v[0])/w,(g[1]-v[1])/w],y=v,T=w,N=k=L=0,E=!1,m=g;for(d++;d<t.length;d++){b=O(d);if(!b){if(o)continue;break}x=[b[0]-v[0],b[1]-v[1]],A=x[0]*S[1]-x[1]*S[0],k=Math.min(k,A),L=Math.max(L,A);if(L-k>M(b))break;m=b,C=x[0]*S[0]+x[1]*S[1],C>T?(T=C,g=b,E=!1):C<N&&(N=C,y=b,E=!0)}E?(h[p++]=g,m!==y&&(h[p++]=y)):(y!==v&&(h[p++]=y),m!==g&&(h[p++]=g)),h[p++]=m;if(d>=t.length||!b)break;h[p++]=b,v=b}f.push(h.slice(0,p))}return f}},{"../../plots/cartesian/axes":403}],566:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=r("line.shape");i==="spline"&&r("line.smoothing")}},{}],567:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(t){var n=t.marker,i=n.sizeref||1,s=n.sizemin||0,o=n.sizemode==="area"?function(e){return Math.sqrt(e/i)}:function(e){return e/i};return function(e){var t=o(e/2);return r(t)&&t>0?Math.max(t,s):0}}},{"fast-isnumeric":76}],568:[function(e,t,n){"use strict";var r=e("../../components/colorscale/has_colorscale"),i=e("../../components/colorscale/calc"),s=e("./subtypes");t.exports=function(t){if(!s.hasMarkers(t))return;var n=t.marker;r(t,"marker")&&i(t,n.color,"marker","c"),r(t,"marker.line")&&i(t,n.line.color,"marker.line","c")}},{"../../components/colorscale/calc":310,"../../components/colorscale/has_colorscale":315,"./subtypes":573}],569:[function(e,t,n){"use strict";var r=e("../../components/color"),i=e("../../components/colorscale/has_colorscale"),s=e("../../components/colorscale/defaults"),o=e("./subtypes");t.exports=function(t,n,u,a,f){var l=o.isBubble(t),c=(t.line||{}).color,h;c&&(u=c),f("marker.symbol"),f("marker.opacity",l?.7:1),f("marker.size"),f("marker.color",u),i(t,"marker")&&s(t,n,a,f,{prefix:"marker.",cLetter:"c"}),c&&n.marker.color!==c?h=c:l?h=r.background:h=r.defaultLine,f("marker.line.color",h),i(t,"marker.line")&&s(t,n,a,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",l?1:0),l&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode"))}},{"../../components/color":303,"../../components/colorscale/defaults":312,"../../components/colorscale/has_colorscale":315,"./subtypes":573}],570:[function(e,t,n){"use strict";function l(e,t,n){var i=t.x(),s=t.y(),o=r.extent(i.range.map(i.l2c)),a=r.extent(s.range.map(s.l2c));n.forEach(function(e,t){var r=e[0].trace;if(!u.hasMarkers(r))return;var i=r.marker.maxdisplayed;if(i===0)return;var s=e.filter(function(e){return e.x>=o[0]&&e.x<=o[1]&&e.y>=a[0]&&e.y<=a[1]}),f=Math.ceil(s.length/i),l=0;n.forEach(function(e,n){var r=e[0].trace;u.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&l++});var c=Math.round(l*f/3+Math.floor(l/3)*f/7.1);e.forEach(function(e){delete e.vis}),s.forEach(function(e,t){Math.round((t+c)%f)===0&&(e.vis=!0)})})}var r=e("d3"),i=e("../../lib"),s=e("../../components/drawing"),o=e("../../components/errorbars"),u=e("./subtypes"),a=e("./arrays_to_calcdata"),f=e("./line_points");t.exports=function(t,n,c){function w(e){return e.filter(function(e){return e.vis})}l(t,n,c);var h=n.x(),p=n.y(),d=n.plot.select(".scatterlayer").selectAll("g.trace.scatter").data(c);d.enter().append("g").attr("class","trace scatter").style("stroke-miterlimit",2),d.call(o.plot,n);var v="",m,g,y,b;d.each(function(e){var t=e[0].trace,n=t.line,i=r.select(this);if(t.visible!==!0)return;g=t.fill.charAt(t.fill.length-1),g!=="x"&&g!=="y"&&(g=""),e[0].node3=i,a(e);if(!u.hasLines(t)&&t.fill==="none")return;var o,l,c="",d="",w,E,S;t.fill.substr(0,6)==="tozero"||t.fill==="toself"||t.fill.substr(0,2)==="to"&&!v?m=i.append("path").classed("js-fill",!0):m=null,b&&(y=b.datum(e)),b=i.append("path").classed("js-fill",!0),["hv","vh","hvh","vhv"].indexOf(n.shape)!==-1?(w=s.steps(n.shape),E=s.steps(n.shape.split("").reverse().join(""))):n.shape==="spline"?w=E=function(e){var t=e[e.length-1];return e[0][0]===t[0]&&e[0][1]===t[1]?s.smoothclosed(e.slice(1),n.smoothing):s.smoothopen(e,n.smoothing)}:w=E=function(e){return"M"+e.join("L")},S=function(e){return E(e.reverse())};var x=f(e,{xaxis:h,yaxis:p,connectGaps:t.connectgaps,baseTolerance:Math.max(n.width||1,3)/4,linear:n.shape==="linear"});if(x.length){var T=x[0][0],N=x[x.length-1],C=N[N.length-1];for(var k=0;k<x.length;k++){var L=x[k];o=w(L),l=S(L),c?g?(c+="L"+o.substr(1),d=l+("L"+d.substr(1))):(c+="Z"+o,d=l+"Z"+d):(c=o,d=l),u.hasLines(t)&&L.length>1&&i.append("path").classed("js-line",!0).attr("d",o)}m?T&&C&&(g?(g==="y"?T[1]=C[1]=p.c2p(0,!0):g==="x"&&(T[0]=C[0]=h.c2p(0,!0)),m.attr("d",c+"L"+C+"L"+T+"Z")):m.attr("d",c+"Z")):t.fill.substr(0,6)==="tonext"&&c&&v&&(t.fill==="tonext"?y.attr("d",c+"Z"+v+"Z"):y.attr("d",c+"L"+v.substr(1)+"Z")),v=d}}),d.selectAll("path:not([d])").remove(),d.append("g").attr("class","points").each(function(e){var t=e[0].trace,n=r.select(this),o=u.hasMarkers(t),a=u.hasText(t);!o&&!a||t.visible!==!0?n.remove():(o&&n.selectAll("path.point").data(t.marker.maxdisplayed?w:i.identity).enter().append("path").classed("point",!0).call(s.translatePoints,h,p),a&&n.selectAll("g").data(t.marker.maxdisplayed?w:i.identity).enter().append("g").append("text").call(s.translatePoints,h,p))})}},{"../../components/drawing":325,"../../components/errorbars":331,"../../lib":381,"./arrays_to_calcdata":553,"./line_points"
:565,"./subtypes":573,d3:72}],571:[function(e,t,n){"use strict";var r=e("./subtypes"),i=.2;t.exports=function(t,n){var s=t.cd,o=t.xaxis,u=t.yaxis,a=[],f=s[0].trace,l=f.index,c=f.marker,h,p,d,v;if(!r.hasMarkers(f)&&!r.hasText(f))return;var m=Array.isArray(c.opacity)?1:c.opacity;if(n===!1)for(h=0;h<s.length;h++)s[h].dim=0;else for(h=0;h<s.length;h++)p=s[h],d=o.c2p(p.x),v=u.c2p(p.y),n.contains([d,v])?(a.push({curveNumber:l,pointNumber:h,x:p.x,y:p.y}),p.dim=0):p.dim=1;return s[0].node3.selectAll("path.point").style("opacity",function(e){return((e.mo+1||m+1)-1)*(e.dim?i:1)}),s[0].node3.selectAll("text").style("opacity",function(e){return e.dim?i:1}),a}},{"./subtypes":573}],572:[function(e,t,n){"use strict";var r=e("d3"),i=e("../../components/drawing"),s=e("../../components/errorbars");t.exports=function(t){var n=r.select(t).selectAll("g.trace.scatter");n.style("opacity",function(e){return e[0].trace.opacity}),n.selectAll("g.points").each(function(e){r.select(this).selectAll("path.point").call(i.pointStyle,e.trace||e[0].trace),r.select(this).selectAll("text").call(i.textPointStyle,e.trace||e[0].trace)}),n.selectAll("g.trace path.js-line").call(i.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),n.call(s.style)}},{"../../components/drawing":325,"../../components/errorbars":331,d3:72}],573:[function(e,t,n){"use strict";t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&e.mode&&e.mode.indexOf("markers")!==-1},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return typeof e.marker=="object"&&Array.isArray(e.marker.size)}}},{}],574:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t,n,i){i("textposition"),r.coerceFont(i,"textfont",n.font)}},{"../../lib":381}],575:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i,s=r("x"),o=r("y");if(s)o?(i=Math.min(s.length,o.length),i<s.length&&(n.x=s.slice(0,i)),i<o.length&&(n.y=o.slice(0,i))):(i=s.length,r("y0"),r("dy"));else{if(!o)return 0;i=n.y.length,r("x0"),r("dx")}return i}},{}],576:[function(e,t,n){"use strict";function f(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var r=e("../scatter/attributes"),i=e("../../constants/gl_markers"),s=e("../../lib/extend").extendFlat,o=r.line,u=r.marker,a=u.line;t.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},text:s({},r.text,{}),mode:s({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:f("x"),y:f("y"),z:f("z")},connectgaps:r.connectgaps,line:{color:o.color,width:o.width,dash:o.dash},marker:{color:u.color,symbol:{valType:"enumerated",values:Object.keys(i),dflt:"circle",arrayOk:!0},size:s({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:s({},u.opacity,{arrayOk:!1}),colorscale:u.colorscale,cauto:u.cauto,cmax:u.cmax,cmin:u.cmin,autocolorscale:u.autocolorscale,reversescale:u.reversescale,showscale:u.showscale,line:{color:a.color,width:s({},a.width,{arrayOk:!1}),colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale}},textposition:s({},r.textposition,{dflt:"top center"}),textfont:r.textfont,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars",error_z:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl_markers":368,"../../lib/extend":376,"../scatter/attributes":554}],577:[function(e,t,n){"use strict";var r=e("../scatter/arrays_to_calcdata"),i=e("../scatter/marker_colorscale_calc");t.exports=function(t,n){var s=[{x:!1,y:!1,trace:n,t:{}}];return r(s),i(n),s}},{"../scatter/arrays_to_calcdata":553,"../scatter/marker_colorscale_calc":568}],578:[function(e,t,n){"use strict";function i(e,t,n){if(!t||!t.visible)return null;var i=r(t),s=new Array(e.length);for(var o=0;o<e.length;o++){var u=i(+e[o],o);s[o]=[-u[0]*n,u[1]*n]}return s}function s(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function o(e,t){var n=[i(e.x,e.error_x,t[0]),i(e.y,e.error_y,t[1]),i(e.z,e.error_z,t[2])],r=s(n);if(r===0)return null;var o=new Array(r);for(var u=0;u<r;u++){var a=[[0,0,0],[0,0,0]];for(var f=0;f<3;f++)if(n[f])for(var l=0;l<2;l++)a[l][f]=n[f][u][l];o[u]=a}return o}var r=e("../../components/errorbars/compute_error");t.exports=o},{"../../components/errorbars/compute_error":329}],579:[function(e,t,n){"use strict";function v(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]],this.textLabels=null,this.data=null}function g(e,t,n){var r=(n+1)%3,i=(n+2)%3,s=[],o=[],a;for(a=0;a<e.length;++a){var f=e[a];if(isNaN(f[r])||!isFinite(f[r])||isNaN(f[i])||!isFinite(f[i]))continue;s.push([f[r],f[i]]),o.push(a)}var l=u(s);for(a=0;a<l.length;++a){var c=l[a];for(var h=0;h<c.length;++h)c[h]=o[c[h]]}return{positions:e,cells:l,meshColor:t}}function y(e){var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0];for(var i=0;i<3;i++){var s=e[i];s&&s.copy_zstyle!==!1&&(s=e[2]);if(!s)continue;t[i]=s.width/2,n[i]=f(s.color),r=s.thickness}return{capSize:t,color:n,lineWidth:r}}function b(e){var t=[0,0];return Array.isArray(e)?[0,-1]:(e.indexOf("bottom")>=0&&(t[1]+=1),e.indexOf("top")>=0&&(t[1]-=1),e.indexOf("left")>=0&&(t[0]-=1),e.indexOf("right")>=0&&(t[0]+=1),t)}function w(e,t){return t(e*4)}function E(e){return p[e]}function S(e,t,n,r,i){var s=null;if(Array.isArray(e)){s=[];for(var o=0;o<t;o++)e[o]===undefined?s[o]=r:s[o]=n(e[o],i)}else s=n(e,a.identity);return s}function x(e,t){var n,r,i=[],s=e.fullSceneLayout,o=e.dataScale,u=s.xaxis,h=s.yaxis,p=s.zaxis,v=t.marker,m=t.line,g,x=t.x||[],T,N=t.y||[],C,k=t.z||[],L=x.length,A;for(r=0;r<L;r++)g=u.d2l(x[r])*o[0],T=h.d2l(N[r])*o[1],C=p.d2l(k[r])*o[2],i[r]=[g,T,C];if(Array.isArray(t.text))A=t.text;else if(t.text!==undefined){A=new Array(L);for(r=0;r<L;r++)A[r]=t.text}n={position:i,mode:t.mode,text:A},"line"in t&&(n.lineColor=f(m.color),n.lineWidth=m.width,n.lineDashes=m.dash);if("marker"in t){var O=c(t);n.scatterColor=l(v,1,L),n.scatterSize=S(v.size,L,w,20,O),n.scatterMarker=S(v.symbol,L,E,""),n.scatterLineWidth=v.line.width,n.scatterLineColor=l(v.line,1,L),n.scatterAngle=0}"textposition"in t&&(n.textOffset=b(t.textposition),n.textColor=l(t.textfont,1,L),n.textSize=S(t.textfont.size,L,a.identity,12),n.textFont=t.textfont.family,n.textAngle=0);var M=["x","y","z"];n.project=[!1,!1,!1],n.projectScale=[1,1,1],n.projectOpacity=[1,1,1];for(r=0;r<3;++r){var _=t.projection[M[r]];if(n.project[r]=_.show)n.projectOpacity[r]=_.opacity,n.projectScale[r]=_.scale}n.errorBounds=d(t,o);var D=y([t.error_x,t.error_y,t.error_z]);return n.errorColor=D.color,n.errorLineWidth=D.lineWidth,n.errorCapSize=D.capSize,n.delaunayAxis=t.surfaceaxis,n.delaunayColor=f(t.surfacecolor),n}function T(e){if(Array.isArray(e)){var t=e[0];return Array.isArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(e){return Math.round(e*255)})+")"}return null}function N(e,t){var n=new v(e,t.uid);return n.update(t),n}var r=e("gl-line3d"),i=e("gl-scatter3d"),s=e("gl-error3d"),o=e("gl-mesh3d"),u=e("delaunay-triangulate"),a=e("../../lib"),f=e("../../lib/str2rgbarray"),l=e("../../lib/gl_format_color"),c=e("../scatter/make_bubble_size_func"),h=e("../../constants/gl3d_dashes"),p=e("../../constants/gl_markers"),d=e("./calc_errors"),m=v.prototype;m.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),this.textLabels&&this.textLabels[e.data.index]!==undefined?e.textLabel=this.textLabels[e.data.index]:e.textLabel="";var t=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},m.update=function(e){var t=this.scene.glplot.gl,n,u,a,f,l=h.solid;this.data=e;var c=x(this.scene,e);"mode"in c&&(this.mode=c.mode),"lineDashes"in c&&c.lineDashes in h&&(l=h[c.lineDashes]),this.color=T(c.scatterColor)||T(c.lineColor),this.dataPoints=c.position,n={gl:t,position:c.position,color:c.lineColor,lineWidth:c.lineWidth||1,dashes:l[0],dashScale:l[1],opacity:e.opacity,connectGaps:e.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(n):(this.linePlot=r(n),this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var p=e.opacity;e.marker&&e.marker.opacity&&(p*=e.marker.opacity),u={gl:t,position:c.position,color:c.scatterColor,size:c.scatterSize,glyph:c.scatterMarker,opacity:p,orthographic:!0,lineWidth:c.scatterLineWidth,lineColor:c.scatterLineColor,project:c.project,projectScale:c.projectScale,projectOpacity:c.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(u):(this.scatterPlot=i(u),this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),f={gl:t,position:c.position,glyph:c.text,color:c.textColor,size:c.textSize,angle:c.textAngle,alignment:c.textOffset,font:c.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=c.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(f):(this.textMarkers=i(f),this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),a={gl:t,position:c.position,color:c.errorColor,error:c.errorBounds,lineWidth:c.errorLineWidth,capSize:c.errorCapSize,opacity:e.opacity},this.errorBars?c.errorBounds?this.errorBars.update(a):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):c.errorBounds&&(this.errorBars=s(a),this.scene.glplot.add(this.errorBars));if(c.delaunayAxis>=0){var d=g(c.position,c.delaunayColor,c.delaunayAxis);d.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(d):(d.gl=t,this.delaunayMesh=o(d),this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},m.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},t.exports=N},{"../../constants/gl3d_dashes":367,"../../constants/gl_markers":368,"../../lib":381,"../../lib/gl_format_color":379,"../../lib/str2rgbarray":392,"../scatter/make_bubble_size_func":567,"./calc_errors":578,"delaunay-triangulate":73,"gl-error3d":80,"gl-line3d":86,"gl-mesh3d":109,"gl-scatter3d":152}],580:[function(e,t,n){"use strict";function l(e,t,n){var r=0,i=n("x"),s=n("y"),o=n("z");return i&&s&&o&&(r=Math.min(i.length,s.length,o.length),r<i.length&&(t.x=i.slice(0,r)),r<s.length&&(t.y=s.slice(0,r)),r<o.length&&(t.z=o.slice(0,r))),r}var r=e("../../lib"),i=e("../scatter/subtypes"),s=e("../scatter/marker_defaults"),o=e("../scatter/line_defaults"),u=e("../scatter/text_defaults"),a=e("../../components/errorbars/defaults"),f=e("./attributes");t.exports=function(t,n,c,h){function p(e,i){return r.coerce(t,n,f,e,i)}var d=l(t,n,p);if(!d){n.visible=!1;return}p("text"),p("mode"),i.hasLines(n)&&(p("connectgaps"),o(t,n,c,p)),i.hasMarkers(n)&&s(t,n,c,h,p),i.hasText(n)&&u(t,n,h,p);var v=(n.line||{}).color,m=(n.marker||{}).color;p("surfaceaxis")>=0&&p("surfacecolor",v||m);var g=["x","y","z"];for(var y=0;y<3;++y){var b="projection."+g[y];p(b+".show")&&(p(b+".opacity"),p(b+".scale"))}a(t,n,c,{axis:"z"}),a(t,n,c,{axis:"y",inherit:"z"}),a(t,n,c,{axis:"x",inherit:"z"})}},{"../../components/errorbars/defaults":330,"../../lib":381,"../scatter/line_defaults":564,"../scatter/marker_defaults":569,"../scatter/subtypes":573,"../scatter/text_defaults":574,"./attributes":576}],581:[function(e,t,n){"use strict";var r={};r.plot=e("./convert"),r.attributes=e("./attributes"),r.markerSymbols=e("../../constants/gl_markers"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.moduleType="trace",r.name="scatter3d",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../constants/gl_markers":368,"../../plots/gl3d":439,"../scatter/colorbar":557,"./attributes":576,"./calc":577,"./convert":579,"./defaults":580}],582:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,o=r.marker,u=r.line,a=o.line;t.exports={lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:s({},r.mode,{dflt:"markers"}),text:s({},r.text,{}),line:{color:u.color,width:u.width,dash:u.dash},marker:{symbol:o.symbol,opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,color:o.color,colorscale:o.colorscale,cauto:o.cauto,cmax:o.cmax,cmin:o.cmin,autocolorscale:o.autocolorscale,reversescale:o.reversescale,showscale:o.showscale,line:{color:a.color,width:a.width,colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale}},textfont:r.textfont,textposition:r.textposition,hoverinfo:s({},i.hoverinfo,{flags:["lon","lat","location","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../lib/extend":376,"../../plots/attributes":401,"../scatter/attributes":554}],583:[function(e,t,n){"use strict";var r=e("../scatter/marker_colorscale_calc");t.exports=function(t,n){var i=[{x:!1,y:!1,trace:n,t:{}}];return r(n),i}},{"../scatter/marker_colorscale_calc":568}],584:[function(e,t,n){"use strict";function f(e,t,n){var r=0,i=n("locations"),s,o;return i?(n("locationmode"),r=i.length,r):(s=n("lon")||[],o=n("lat")||[],r=Math.min(s.length,o.length),r<s.length&&(t.lon=s.slice(0,r)),r<o.length&&(t.lat=o.slice(0,r)),r)}var r=e("../../lib"),i=e("../scatter/subtypes"),s=e("../scatter/marker_defaults"),o=e("../scatter/line_defaults"),u=e("../scatter/text_defaults"),a=e("./attributes");t.exports=function(t,n,l,c){function h(e,i){return r.coerce(t,n,a,e,i)}var p=f(t,n,h);if(!p){n.visible=!1;return}h("text"),h("mode"),i.hasLines(n)&&o(t,n,l,h),i.hasMarkers(n)&&s(t,n,l,c,h),i.hasText(n)&&u(t,n,c,h),h("hoverinfo",c._dataLength===1?"lon+lat+location+text":undefined)}},{"../../lib":381,"../scatter/line_defaults":564,"../scatter/marker_defaults":569,"../scatter/subtypes":573,"../scatter/text_defaults":574,"./attributes":582}],585:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.plot=e("./plot").plot,r.moduleType="trace",r.name="scattergeo",r.basePlotModule=e("../../plots/geo"),r.categories=["geo","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/geo":424,"../scatter/colorbar":557,"./attributes":582,"./calc":583,"./defaults":584,"./plot":586}],586:[function(e,t,n){"use strict";function d(e,t,n){function i(e,r){a(e,t,r,n)}var r=e.marker;i(e.text,"tx"),i(e.textposition,"tp"),e.textfont&&(i(e.textfont.size,"ts"),i(e.textfont.color,"tc"),i(e.textfont.family,"tf"));if(r&&r.line){var s=r.line;i(r.opacity,"mo"),i(r.symbol,"mx"),i(r.color,"mc"),i(r.size,"ms"),i(s.color,"mlc"),i(s.width,"mlw")}}function v(e){var t=e.lon.length,n=new Array(t);for(var r=0;r<t;r++)n[r]=[e.lon[r],e.lat[r]];return{type:"LineString",coordinates:n,trace:e}}function m(e,t){function f(t){var n=e.mockAxis;return s.tickText(n,n.c2l(t),"hover").text+""}var n=t.hoverinfo;if(n==="none")return function(t){delete t.textLabel};var r=n==="all"?h.hoverinfo.flags:n.split("+"),i=r.indexOf("location")!==-1&&Array.isArray(t.locations),o=r.indexOf("lon")!==-1,u=r.indexOf("lat")!==-1,a=r.indexOf("text")!==-1;return function(n){var r=[];i?r.push(n.location):o&&u?r.push("("+f(n.lon)+", "+f(n.lat)+")"):o?r.push("lon: "+f(n.lon)):u&&r.push("lat: "+f(n.lat)),a&&r.push(n.tx||t.text),n.textLabel=r.join("<br>")}}function g(e){var t=Array.isArray(e.locations);return function(n,r){return{points:[{data:e._input,fullData:e,curveNumber:e.index,pointNumber:r,lon:n.lon,lat:n.lat,location:t?n.location:null}]}}}var r=e("d3"),i=e("../../plots/cartesian/graph_interact"),s=e("../../plots/cartesian/axes"),o=e("../../lib/topojson_utils").getTopojsonFeatures,u=e("../../lib/geo_location_utils").locationToFeature,a=e("../../lib/array_to_calc_item"),f=e("../../components/color"),l=e("../../components/drawing"),c=e("../scatter/subtypes"),h=e("./attributes"),p=t.exports={};p.calcGeoJSON=function(e,t){var n=[],r=Array.isArray(e.locations),i,s,a,f;r?(f=e.locations,i=f.length,s=o(e,t),a=function(e,t){var n=u(e.locationmode,f[t],s);return n!==undefined?n.properties.ct:undefined}):(i=e.lon.length,a=function(e,t){return[e.lon[t],e.lat[t]]});for(var l=0;l<i;l++){var c=a(e,l);if(!c)continue;var h={lon:c[0],lat:c[1],location:r?e.locations[l]:null};d(e,h,l),n.push(h)}return n.length>0&&(n[0].trace=e),n},p.plot=function(e,t){var n=e.framework.select(".scattergeolayer").selectAll("g.trace.scattergeo").data(t,function(e){return e.uid});n.enter().append("g").attr("class","trace scattergeo"),n.exit().remove(),n.selectAll("*").remove(),n.each(function(e){var t=r.select(this);if(!c.hasLines(e))return;t.selectAll("path.js-line").data([v(e)]).enter().append("path").classed("js-line",!0)}),n.each(function(t){function v(n,r){if(!e.showHover)return;var s=e.projection([n.lon,n.lat]);a(n),i.loneHover({x:s[0],y:s[1],name:h?t.name:undefined,text:n.textLabel,color:n.mc||(t.marker||{}).color},{container:e.hoverContainer.node()}),d=f(n,r),e.graphDiv.emit("plotly_hover",d)}function y(t,n){e.graphDiv.emit("plotly_click",f(t,n))}var n=r.select(this),s=c.hasMarkers(t),o=c.hasText(t);if(!s&&!o)return;var u=p.calcGeoJSON(t,e.topojson),a=m(e,t),f=g(t),l=t.hoverinfo,h=l==="all"||l.indexOf("name")!==-1,d=null;s&&n.selectAll("path.point").data(u).enter().append("path").classed("point",!0).on("mouseover",v).on("click",y).on("mouseout",function(){i.loneUnhover(e.hoverContainer),e.graphDiv.emit("plotly_unhover",d)}).on("mousedown",function(){i.loneUnhover(e.hoverContainer)}).on("mouseup",v),o&&n.selectAll("g").data(u).enter().append("g").append("text")}),p.style(e)},p.style=function(e){var t=e.framework.selectAll("g.trace.scattergeo");t.style("opacity",function(e){return e.opacity}),t.each(function(e){r.select(this).selectAll("path.point").call(l.pointStyle,e),r.select(this).selectAll("text").call(l.textPointStyle,e)}),t.selectAll("path.js-line").style("fill","none").each(function(e){var t=e.trace,n=t.line||{};r.select(this).call(f.stroke,n.color).call(l.dashLine,n.dash||"",n.width||0)})}},{"../../components/color":303,"../../components/drawing":325,"../../lib/array_to_calc_item":372,"../../lib/geo_location_utils":378,"../../lib/topojson_utils":394,"../../plots/cartesian/axes":403,"../../plots/cartesian/graph_interact":410,"../scatter/subtypes":573,"./attributes":582,d3:72}],587:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../constants/gl2d_dashes"),s=e("../../constants/gl_markers"),o=e("../../lib/extend").extendFlat,u=r.line,a=r.marker,f=a.line;t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,text:o({},r.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:u.color,width:u.width,dash:{valType:"enumerated",values:Object.keys(i),dflt:"solid"}},marker:{color:a.color,symbol:{valType:"enumerated",values:Object.keys(s),dflt:"circle",arrayOk:!0},size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale,showscale:a.showscale,line:{color:f.color,width:f.width,colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,autocolorscale:f.autocolorscale,reversescale:f.reversescale}},connectgaps:r.connectgaps,fill:o({},r.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:r.fillcolor,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl2d_dashes":366,"../../constants/gl_markers":368,"../../lib/extend":376,"../scatter/attributes":554}],588:[function(e,t,n){"use strict";function b(e,t){this.scene=e,this.uid=t,this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.connectgaps=!0,this.idToIndex=[],this.bounds=[0,0,0,0],this.hasLines=!1,this.lineOptions={positions:new Float32Array,color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]},this.line=s(e.glplot,this.lineOptions),this.line._trace=this,this.hasErrorX=!1,this.errorXOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorX=o(e.glplot,this.errorXOptions),this.errorX._trace=this,this.hasErrorY=!1,this.errorYOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorY=o(e.glplot,this.errorYOptions),this.errorY._trace=this,this.hasMarkers=!1,this.scatterOptions={positions:new Float32Array,sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1]},this.scatter=r(e.glplot,this.scatterOptions),this.scatter._trace=this,this.fancyScatter=i(e.glplot,this.scatterOptions),this.fancyScatter._trace=this}function E(e,t,n){return Array.isArray(t)||(t=[t]),S(e,t,n)}function S(e,t,n){var r=new Array(n),i=t[0];for(var s=0;s<n;++s)r[s]=s>=t.length?e(i):e(t[s]);return r}function C(e,t,n){return L(T(e,n),x(t,n),n)}function k(e,t,n,r){var i=h(e,t,r);return i=Array.isArray(i[0])?i:S(a.identity,[i],r),L(i,x(n,r),r)}function L(e,t,n){var r=new Array(4*n);for(var i=0;i<n;++i){for(var s=0;s<3;++s)r[4*i+s]=e[i][s];r[4*i+3]=e[i][3]*t[i]}return r}function A(e,t){if(Float32Array.slice===undefined){var n=new Float32Array(t);for(var r=0;r<t;r++)n[r]=e[r];return n}return e.slice(0,t)}function O(e,t){var n=new b(e,t.uid);return n.update(t),n}var r=e("gl-scatter2d"),i=e("gl-scatter2d-fancy"),s=e("gl-line2d"),o=e("gl-error2d"),u=e("fast-isnumeric"),a=e("../../lib"),f=e("../../plots/cartesian/axes"),l=e("../../components/errorbars"),c=e("../../lib/str2rgbarray"),h=e("../../lib/gl_format_color"),p=e("../scatter/subtypes"),d=e("../scatter/make_bubble_size_func"),v=e("../scatter/get_trace_color"),m=e("../../constants/gl_markers"),g=e("../../constants/gl2d_dashes"),y=["xaxis","yaxis"],w=b.prototype;w.handlePick=function(e){var t=e.pointId;if(e.object!==this.line||this.connectgaps)t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:Array.isArray(this.color)?this.color[t]:this.color,name:this.name,hoverinfo:this.hoverinfo}},w.isFancy=function(e){if(this.scene.xaxis.type!=="linear")return!0;if(this.scene.yaxis.type!=="linear")return!0;if(!e.x||!e.y)return!0;var t=e.marker||{};if(Array.isArray(t.symbol)||t.symbol!=="circle"||Array.isArray(t.size)||Array.isArray(t.line.width)||Array.isArray(t.opacity))return!0;var n=t.color;if(Array.isArray(n))return!0;var r=Array.isArray(t.line.color);return Array.isArray(r)?!0:this.hasErrorX?!0:this.hasErrorY?!0:!1};var x=E.bind(null,function(e){return+e}),T=E.bind(null,c),N=E.bind(null,function(e){return m[e]||""});w.update=function(e){e.visible!==!0?(this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1):(this.hasLines=p.hasLines(e),this.hasErrorX=e.error_x.visible===!0,this.hasErrorY=e.error_y.visible===!0,this.hasMarkers=p.hasMarkers(e)),this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[Infinity,Infinity,-Infinity,-Infinity],this.connectgaps=!!e.connectgaps,this.isFancy(e)?this.updateFancy(e):this.updateFast(e),this.color=v(e,{})},w.updateFast=function(e){var t=this.xData=this.pickXData=e.x,n=this.yData=this.pickYData=e.y,r=t.length,i=new Array(r),s=new Float32Array(2*r),o=this.bounds,a=0,f=0,l,h;for(var p=0;p<r;++p){l=t[p],h=n[p];if(!u(l)||!u(h))continue;i[a++]=p,s[f++]=l,s[f++]=h,o[0]=Math.min(o[0],l),o[1]=Math.min(o[1],h),o[2]=Math.max(o[2],l),o[3]=Math.max(o[3],h)}s=A(s,f),this.idToIndex=i,this.updateLines(e,s),this.updateError("X",e),this.updateError("Y",e);var d;if(this.hasMarkers){this.scatterOptions.positions=s;var v=c(e.marker.color),m=c(e.marker.line.color),g=e.opacity*e.marker.opacity;v[3]*=g,this.scatterOptions.color=v,m[3]*=g,this.scatterOptions.borderColor=m,d=e.marker.size,this.scatterOptions.size=d,this.scatterOptions.borderSize=e.marker.line.width,this.scatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions),this.expandAxesFast(o,d)},w.updateFancy=function(e){var t=this.scene,n=t.xaxis,r=t.yaxis,i=this.bounds,s=this.pickXData=n.makeCalcdata(e,"x").slice(),o=this.pickYData=r.makeCalcdata(e,"y").slice();this.xData=s.slice(),this.yData=o.slice();var u=l.calcFromTrace(e,t.fullLayout),a=s.length,f=new Array(a),c=new Float32Array(2*a),h=new Float32Array(4*a),p=new Float32Array(4*a),v=0,m=0,g=0,y=0,b=n.type==="log"?function(e){return n.d2l(e)}:function(e){return e},w=r.type==="log"?function(e){return r.d2l(e)}:function(e){return e},S,T,C,L,O,M,_,D;for(S=0;S<a;++S){this.xData[S]=C=b(s[S]),this.yData[S]=L=w(o[S]);if(isNaN(C)||isNaN(L))continue;f[v++]=S,c[m++]=C,c[m++]=L,O=h[g++]=C-u[S].xs||0,M=h[g++]=u[S].xh-C||0,h[g++]=0,h[g++]=0,p[y++]=0,p[y++]=0,_=p[y++]=L-u[S].ys||0,D=p[y++]=u[S].yh-L||0,i[0]=Math.min(i[0],C-O),i[1]=Math.min(i[1],L-_),i[2]=Math.max(i[2],C+M),i[3]=Math.max(i[3],L+D)}c=A(c,m),this.idToIndex=f,this.updateLines(e,c),this.updateError("X",e,c,h),this.updateError("Y",e,c,p);var P;if(this.hasMarkers){this.scatterOptions.positions=c,this.scatterOptions.sizes=new Array(v),this.scatterOptions.glyphs=new Array(v),this.scatterOptions.borderWidths=new Array(v),this.scatterOptions.colors=new Array(v*4),this.scatterOptions.borderColors=new Array(v*4);var H=d(e),B=e.marker,j=B.opacity,F=e.opacity,I=k(B,j,F,a),q=N(B.symbol,a),R=x(B.line.width,a),U=k(B.line,j,F,a),z;P=E(H,B.size,a);for(S=0;S<v;++S){z=f[S],this.scatterOptions.sizes[S]=4*P[z],this.scatterOptions.glyphs[S]=q[z],this.scatterOptions.borderWidths[S]=.5*R[z];for(T=0;T<4;++T)this.scatterOptions.colors[4*S+T]=I[4*z+T],this.scatterOptions.borderColors[4*S+T]=U[4*z+T]}this.fancyScatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions),this.expandAxesFancy(s,o,P)},w.updateLines=function(e,t){var n;if(this.hasLines){var r=t;if(!e.connectgaps){var i=0,s=this.xData,o=this.yData;r=new Float32Array(2*s.length);for(n=0;n<s.length;++n)r[i++]=s[n],r[i++]=o[n]}this.lineOptions.positions=r;var u=c(e.line.color);this.hasMarkers&&(u[3]*=e.marker.opacity);var a=Math.round(.5*this.lineOptions.width),f=(g[e.line.dash]||[1]).slice();for(n=0;n<f.length;++n)f[n]*=a;switch(e.fill){case"tozeroy":this.lineOptions.fill=[!1,!0,!1,!1];break;case"tozerox":this.lineOptions.fill=[!0,!1,!1,!1];break;default:this.lineOptions.fill=[!1,!1,!1,!1]}var l=c(e.fillcolor);this.lineOptions.color=u,this.lineOptions.width=2*e.line.width,this.lineOptions.dashes=f,this.lineOptions.fillColor=[l,l,l,l]}else this.lineOptions.positions=new Float32Array;this.line.update(this.lineOptions)},w.updateError=function(e,t,n,r){var i=this["error"+e],s=t["error_"+e.toLowerCase()],o=this["error"+e+"Options"];e.toLowerCase()==="x"&&s.copy_ystyle&&(s=t.error_y),this["hasError"+e]?(o.positions=n,o.errors=r,o.capSize=s.width,o.lineWidth=s.thickness/2,o.color=C(s.color,1,1)):o.positions=new Float32Array,i.update(o)},w.expandAxesFast=function(e,t){var n=t||10,r,i,s;for(var o=0;o<2;o++)r=this.scene[y[o]],i=r._min,i||(i=[]),i.push({val:e[o],pad:n}),s=r._max,s||(s=[]),s.push({val:e[o+2],pad:n})},w.expandAxesFancy=function(e,t,n){var r=this.scene,i={padded:!0,ppad:n};f.expand(r.xaxis,e,i),f.expand(r.yaxis,t,i)},w.dispose=function(){this.line.dispose(),this.errorX.dispose(),this.errorY.dispose(),this.scatter.dispose(),this.fancyScatter.dispose()},t.exports=O},{"../../components/errorbars":331,"../../constants/gl2d_dashes":366,"../../constants/gl_markers":368,"../../lib":381,"../../lib/gl_format_color":379,"../../lib/str2rgbarray":392,"../../plots/cartesian/axes":403,"../scatter/get_trace_color":561,"../scatter/make_bubble_size_func":567,"../scatter/subtypes":573,"fast-isnumeric":76,"gl-error2d":78,"gl-line2d":84,"gl-scatter2d":149,"gl-scatter2d-fancy":144}],589:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../scatter/constants"),s=e("../scatter/subtypes"),o=e("../scatter/xy_defaults"),u=e("../scatter/marker_defaults"),a=e("../scatter/line_defaults"),f=e("../scatter/fillcolor_defaults"),l=e("../../components/errorbars/defaults"),c=e("./attributes");t.exports=function(t,n,h,p){function d(e,i){return r.coerce(t,n,c,e,i)}var v=o(t,n,d);if(!v){n.visible=!1;return}d("text"),d("mode",v<i.PTS_LINESONLY?"lines+markers":"lines"),s.hasLines(n)&&(d("connectgaps"),a(t,n,h,d)),s.hasMarkers(n)&&u(t,n,h,p,d),d("fill"),n.fill!=="none"&&f(t,n,h,d),l(t,n,h,{axis:"y"}),l(t,n,h,{axis:"x",inherit:"y"})}},{"../../components/errorbars/defaults":330,"../../lib":381,"../scatter/constants":558,"../scatter/fillcolor_defaults":560,"../scatter/line_defaults":564,"../scatter/marker_defaults":569,"../scatter/subtypes":573,"../scatter/xy_defaults":575,"./attributes":587}],590:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("../scatter3d/calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="scattergl",r.basePlotModule=e("../../plots/gl2d"),r.categories=["gl2d","symbols","errorBarsOK","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/gl2d":436,"../scatter/colorbar":557,"../scatter3d/calc":577,"./attributes":587,"./convert":588,"./defaults":589}],591:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),i=e("../../plots/attributes"),s=e("../../lib/extend").extendFlat,o=r.marker,u=r.line,a=o.line;t.exports={a:{valType:"data_array"},b:{valType:"data_array"},c:{valType:"data_array"},sum:{valType:"number",dflt:0,min:0},mode:s({},r.mode,{dflt:"markers"}),text:s({},r.text,{}),line:{color:u.color,width:u.width,dash:u.dash,shape:s({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing},connectgaps:r.connectgaps,fill:s({},r.fill,{values:["none","toself","tonext"]}),fillcolor:r.fillcolor,marker:{symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,color:o.color,colorscale:o.colorscale,cauto:o.cauto,cmax:o.cmax,cmin:o.cmin,autocolorscale:o.autocolorscale,reversescale:o.reversescale,showscale:o.showscale,line:{color:a.color,width:a.width,colorscale:a.colorscale,cauto:a.cauto,cmax:a.cmax,cmin:a.cmin,autocolorscale:a.autocolorscale,reversescale:a.reversescale}},textfont:r.textfont,textposition:r.textposition,hoverinfo:s({},i.hoverinfo,{flags:["a","b","c","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../lib/extend":376,"../../plots/attributes":401,"../scatter/attributes":554}],592:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),i=e("../../plots/cartesian/axes"),s=e("../../lib"),o=e("../scatter/subtypes"),u=e("../scatter/marker_colorscale_calc"),a=["a","b","c"],f={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(t,n){var l=t._fullLayout[n.subplot],c=l.sum,h=n.sum||c,p,d,v,m,g,y;for(p=0;p<a.length;p++){v=a[p];if(n[v])continue;g=n[f[v][0]],y=n[f[v][1]],m=new Array(g.length);for(d=0;d<g.length;d++)m[d]=h-g[d]-y[d];n[v]=m}var b=n.a.length,w=new Array(b),E,S,x,T,N,C;for(p=0;p<b;p++)E=
n.a[p],S=n.b[p],x=n.c[p],r(E)&&r(S)&&r(x)?(E=+E,S=+S,x=+x,T=c/(E+S+x),T!==1&&(E*=T,S*=T,x*=T),C=E,N=x-S,w[p]={x:N,y:C,a:E,b:S,c:x}):w[p]={x:!1,y:!1};var k,L;if(o.hasMarkers(n)){k=n.marker,L=k.size;if(Array.isArray(L)){var A={type:"linear"};i.setConvert(A),L=A.makeCalcdata(n.marker,"size"),L.length>b&&L.splice(b,L.length-b)}}return u(n),typeof L!==undefined&&s.mergeArray(L,w,"ms"),w}},{"../../lib":381,"../../plots/cartesian/axes":403,"../scatter/marker_colorscale_calc":568,"../scatter/subtypes":573,"fast-isnumeric":76}],593:[function(e,t,n){"use strict";var r=e("../../lib"),i=e("../scatter/constants"),s=e("../scatter/subtypes"),o=e("../scatter/marker_defaults"),u=e("../scatter/line_defaults"),a=e("../scatter/line_shape_defaults"),f=e("../scatter/text_defaults"),l=e("../scatter/fillcolor_defaults"),c=e("./attributes");t.exports=function(t,n,h,p){function d(e,i){return r.coerce(t,n,c,e,i)}var v=d("a"),m=d("b"),g=d("c"),y;v?(y=v.length,m?(y=Math.min(y,m.length),g&&(y=Math.min(y,g.length))):g?y=Math.min(y,g.length):y=0):m&&g&&(y=Math.min(m.length,g.length));if(!y){n.visible=!1;return}v&&y<v.length&&(n.a=v.slice(0,y)),m&&y<m.length&&(n.b=m.slice(0,y)),g&&y<g.length&&(n.c=g.slice(0,y)),d("sum"),d("text");var b=y<i.PTS_LINESONLY?"lines+markers":"lines";d("mode",b),s.hasLines(n)&&(u(t,n,h,d),a(t,n,d),d("connectgaps")),s.hasMarkers(n)&&o(t,n,h,p,d),s.hasText(n)&&f(t,n,p,d),(s.hasMarkers(n)||s.hasText(n))&&d("marker.maxdisplayed"),d("fill"),n.fill!=="none"&&(l(t,n,h,d),s.hasLines(n)||a(t,n,d)),d("hoverinfo",p._dataLength===1?"a+b+c+text":undefined)}},{"../../lib":381,"../scatter/constants":558,"../scatter/fillcolor_defaults":560,"../scatter/line_defaults":564,"../scatter/line_shape_defaults":566,"../scatter/marker_defaults":569,"../scatter/subtypes":573,"../scatter/text_defaults":574,"./attributes":591}],594:[function(e,t,n){"use strict";var r=e("../scatter/hover"),i=e("../../plots/cartesian/axes");t.exports=function(t,n,s,o){function d(e,t){p.push(e._hovertitle+": "+i.tickText(e,t,"hover").text)}var u=r(t,n,s,o);if(!u||u[0].index===!1)return;var a=u[0],f=a.cd[a.index];a.a=f.a,a.b=f.b,a.c=f.c,a.xLabelVal=undefined,a.yLabelVal=undefined;var l=a.trace,c=l._ternary,h=l.hoverinfo.split("+"),p=[];return h.indexOf("all")!==-1&&(h=["a","b","c"]),h.indexOf("a")!==-1&&d(c.aaxis,f.a),h.indexOf("b")!==-1&&d(c.baxis,f.b),h.indexOf("c")!==-1&&d(c.caxis,f.c),a.extraText=p.join("<br>"),u}},{"../../plots/cartesian/axes":403,"../scatter/hover":562}],595:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("../scatter/colorbar"),r.calc=e("./calc"),r.plot=e("./plot"),r.style=e("./style"),r.hoverPoints=e("./hover"),r.selectPoints=e("./select"),r.moduleType="trace",r.name="scatterternary",r.basePlotModule=e("../../plots/ternary"),r.categories=["ternary","symbols","markerColorscale","showLegend"],r.meta={},t.exports=r},{"../../plots/ternary":459,"../scatter/colorbar":557,"./attributes":591,"./calc":592,"./defaults":593,"./hover":594,"./plot":596,"./select":597,"./style":598}],596:[function(e,t,n){"use strict";var r=e("../scatter/plot");t.exports=function(t,n){var i={x:function(){return t.xaxis},y:function(){return t.yaxis},plot:t.plotContainer},s=new Array(n.length),o=t.graphDiv.calcdata;for(var u=0;u<o.length;u++){var a=n.indexOf(o[u][0].trace);if(a===-1)continue;s[a]=o[u],n[a]._ternary=t}r(t.graphDiv,i,s)}},{"../scatter/plot":570}],597:[function(e,t,n){"use strict";var r=e("../scatter/select");t.exports=function(t,n){var i=r(t,n);if(!i)return;var s=t.cd,o,u,a;for(a=0;a<i.length;a++)o=i[a],u=s[o.pointNumber],o.a=u.a,o.b=u.b,o.c=u.c,delete o.x,delete o.y;return i}},{"../scatter/select":571}],598:[function(e,t,n){"use strict";var r=e("../scatter/style");t.exports=function(t){var n=t._fullLayout._modules;for(var i=0;i<n.length;i++)if(n[i].name==="scatter")return;r(t)}},{"../scatter/style":572}],599:[function(e,t,n){"use strict";function o(e){return{valType:"boolean",dflt:!1}}function u(e){return{show:{valType:"boolean",dflt:!1},project:{x:o("x"),y:o("y"),z:o("z")},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var r=e("../../components/color"),i=e("../../components/colorscale/attributes"),s=e("../../lib/extend").extendFlat;t.exports={z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},surfacecolor:{valType:"data_array"},cauto:i.zauto,cmin:i.zmin,cmax:i.zmax,colorscale:i.colorscale,autocolorscale:s({},i.autocolorscale,{dflt:!1}),reversescale:i.reversescale,showscale:i.showscale,contours:{x:u("x"),y:u("y"),z:u("z")},hidesurface:{valType:"boolean",dflt:!1},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_nestedModules:{colorbar:"Colorbar"},_deprecated:{zauto:s({},i.zauto,{}),zmin:s({},i.zmin,{}),zmax:s({},i.zmax,{})}}},{"../../components/color":303,"../../components/colorscale/attributes":309,"../../lib/extend":376}],600:[function(e,t,n){"use strict";var r=e("../../components/colorscale/calc");t.exports=function(t,n){n.surfacecolor?r(n,n.surfacecolor,"","c"):r(n,n.z,"","c")}},{"../../components/colorscale/calc":310}],601:[function(e,t,n){"use strict";var r=e("d3"),i=e("fast-isnumeric"),s=e("../../lib"),o=e("../../plots/plots"),u=e("../../components/colorscale/get_scale"),a=e("../../components/colorbar/draw");t.exports=function(t,n){var f=n[0].trace,l="cb"+f.uid,c=u(f.colorscale),h=f.cmin,p=f.cmax,d=f.surfacecolor||f.z;i(h)||(h=s.aggNums(Math.min,null,d)),i(p)||(p=s.aggNums(Math.max,null,d)),t._fullLayout._infolayer.selectAll("."+l).remove();if(!f.showscale){o.autoMargin(t,l);return}var v=n[0].t.cb=a(t,l);v.fillcolor(r.scale.linear().domain(c.map(function(e){return h+e[0]*(p-h)})).range(c.map(function(e){return e[1]}))).filllevels({start:h,end:p,size:(p-h)/254}).options(f.colorbar)(),s.markTime("done colorbar")}},{"../../components/colorbar/draw":306,"../../components/colorscale/get_scale":314,"../../lib":381,"../../plots/plots":452,d3:72,"fast-isnumeric":76}],602:[function(e,t,n){"use strict";function c(e,t,n){this.scene=e,this.uid=n,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function p(e,t){return t===undefined&&(t=1),e.map(function(e){var n=e[0],r=a(e[1]),i=r.toRgb();return{index:n,rgb:[i.r,i.g,i.b,t]}})}function d(e){var t=e.shape,n=[t[0]+2,t[1]+2],r=i(new Float32Array(n[0]*n[1]),n);return u.assign(r.lo(1,1).hi(t[0],t[1]),e),u.assign(r.lo(1).hi(t[0],1),e.hi(t[0],1)),u.assign(r.lo(1,n[1]-1).hi(t[0],1),e.lo(0,t[1]-1).hi(t[0],1)),u.assign(r.lo(0,1).hi(1,t[1]),e.hi(1)),u.assign(r.lo(n[0]-1,1).hi(1,t[1]),e.lo(t[0]-1)),r.set(0,0,e.get(0,0)),r.set(0,n[1]-1,e.get(0,t[1]-1)),r.set(n[0]-1,0,e.get(t[0]-1,0)),r.set(n[0]-1,n[1]-1,e.get(t[0]-1,t[1]-1)),r}function v(e){var t=Math.max(e[0].shape[0],e[0].shape[1]);if(t<l){var n=l/t,r=[Math.floor(e[0].shape[0]*n+1)|0,Math.floor(e[0].shape[1]*n+1)|0],o=r[0]*r[1];for(var u=0;u<e.length;++u){var a=d(e[u]),f=i(new Float32Array(o),r);s(f,a,[n,0,0,0,n,0,0,0,1]),e[u]=f}return n}return 1}function m(e,t){var n=e.glplot.gl,i=r({gl:n}),s=new c(e,i,t.uid);return s.update(t),e.glplot.add(i),s}var r=e("gl-surface3d"),i=e("ndarray"),s=e("ndarray-homography"),o=e("ndarray-fill"),u=e("ndarray-ops"),a=e("tinycolor2"),f=e("../../lib/str2rgbarray"),l=128,h=c.prototype;h.handlePick=function(e){if(e.object===this.surface){var t=[Math.min(Math.round(e.data.index[0]/this.dataScale-1)|0,this.data.z[0].length-1),Math.min(Math.round(e.data.index[1]/this.dataScale-1)|0,this.data.z.length-1)],n=[0,0,0];Array.isArray(this.data.x[0])?n[0]=this.data.x[t[1]][t[0]]:n[0]=this.data.x[t[0]],Array.isArray(this.data.y[0])?n[1]=this.data.y[t[1]][t[0]]:n[1]=this.data.y[t[1]],n[2]=this.data.z[t[1]][t[0]],e.traceCoordinate=n;var r=this.scene.fullSceneLayout;e.dataCoordinate=[r.xaxis.d2l(n[0])*this.scene.dataScale[0],r.yaxis.d2l(n[1])*this.scene.dataScale[1],r.zaxis.d2l(n[2])*this.scene.dataScale[2]];var i=this.data.text;return i&&i[t[1]]&&i[t[1]][t[0]]!==undefined?e.textLabel=i[t[1]][t[0]]:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}},h.setContourLevels=function(){var e=[[],[],[]],t=!1;for(var n=0;n<3;++n)this.showContour[n]&&(t=!0,e[n]=this.scene.contourLevels[n]);t&&this.surface.update({levels:e})},h.update=function(e){var t,n=this.scene,r=n.fullSceneLayout,s=this.surface,u=e.opacity,a=p(e.colorscale,u),l=e.z,c=e.x,h=e.y,d=r.xaxis,m=r.yaxis,g=r.zaxis,y=n.dataScale,b=l[0].length,w=l.length,E=[i(new Float32Array(b*w),[b,w]),i(new Float32Array(b*w),[b,w]),i(new Float32Array(b*w),[b,w])],S=E[0],x=E[1],T=n.contourLevels;this.data=e,o(E[2],function(e,t){return g.d2l(l[t][e])*y[2]}),Array.isArray(c[0])?o(S,function(e,t){return d.d2l(c[t][e])*y[0]}):o(S,function(e){return d.d2l(c[e])*y[0]}),Array.isArray(h[0])?o(x,function(e,t){return m.d2l(h[t][e])*y[1]}):o(x,function(e,t){return m.d2l(h[t])*y[1]});var N={colormap:a,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:1};N.intensityBounds=[e.cmin,e.cmax];if(e.surfacecolor){var C=i(new Float32Array(b*w),[b,w]);o(C,function(t,n){return e.surfacecolor[n][t]}),E.push(C)}else N.intensityBounds[0]*=y[2],N.intensityBounds[1]*=y[2];this.dataScale=v(E),e.surfacecolor&&(N.intensity=E.pop()),"opacity"in e&&e.opacity<1&&(N.opacity=.25*e.opacity);var k=[!0,!0,!0],L=["x","y","z"];for(t=0;t<3;++t){var A=e.contours[L[t]];k[t]=A.highlight,N.showContour[t]=A.show||A.highlight;if(!N.showContour[t])continue;N.contourProject[t]=[A.project.x,A.project.y,A.project.z],A.show?(this.showContour[t]=!0,N.levels[t]=T[t],s.highlightColor[t]=N.contourColor[t]=f(A.color),A.usecolormap?s.highlightTint[t]=N.contourTint[t]=0:s.highlightTint[t]=N.contourTint[t]=1,N.contourWidth[t]=A.width):this.showContour[t]=!1,A.highlight&&(N.dynamicColor[t]=f(A.highlightcolor),N.dynamicWidth[t]=A.highlightwidth)}N.coords=E,s.update(N),s.visible=e.visible,s.enableDynamic=k,s.snapToData=!0,"lighting"in e&&(s.ambientLight=e.lighting.ambient,s.diffuseLight=e.lighting.diffuse,s.specularLight=e.lighting.specular,s.roughness=e.lighting.roughness,s.fresnel=e.lighting.fresnel),u&&u<1&&(s.supportsTransparency=!0)},h.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},t.exports=m},{"../../lib/str2rgbarray":392,"gl-surface3d":180,ndarray:212,"ndarray-fill":205,"ndarray-homography":210,"ndarray-ops":211,tinycolor2:233}],603:[function(e,t,n){"use strict";function o(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}var r=e("../../lib"),i=e("../../components/colorscale/defaults"),s=e("./attributes");t.exports=function(t,n,u,a){function c(e,i){return r.coerce(t,n,s,e,i)}var f,l,h=c("z");if(!h){n.visible=!1;return}var p=h[0].length,d=h.length;c("x"),c("y");if(!Array.isArray(n.x)){n.x=[];for(f=0;f<p;++f)n.x[f]=f}c("text");if(!Array.isArray(n.y)){n.y=[];for(f=0;f<d;++f)n.y[f]=f}c("lighting.ambient"),c("lighting.diffuse"),c("lighting.specular"),c("lighting.roughness"),c("lighting.fresnel"),c("hidesurface"),c("opacity");var v=c("surfacecolor");c("colorscale");var m=["x","y","z"];for(f=0;f<3;++f){var g="contours."+m[f],y=c(g+".show"),b=c(g+".highlight");if(y||b)for(l=0;l<3;++l)c(g+".project."+m[l]);y&&(c(g+".color"),c(g+".width"),c(g+".usecolormap")),b&&(c(g+".highlightcolor"),c(g+".highlightwidth"))}v||(o(t,"zmin","cmin"),o(t,"zmax","cmax"),o(t,"zauto","cauto")),i(t,n,a,c,{prefix:"",cLetter:"c"})}},{"../../components/colorscale/defaults":312,"../../lib":381,"./attributes":599}],604:[function(e,t,n){"use strict";var r={};r.attributes=e("./attributes"),r.supplyDefaults=e("./defaults"),r.colorbar=e("./colorbar"),r.calc=e("./calc"),r.plot=e("./convert"),r.moduleType="trace",r.name="surface",r.basePlotModule=e("../../plots/gl3d"),r.categories=["gl3d","noOpacity"],r.meta={},t.exports=r},{"../../plots/gl3d":439,"./attributes":599,"./calc":600,"./colorbar":601,"./convert":602,"./defaults":603}]},{},[12])(12)});